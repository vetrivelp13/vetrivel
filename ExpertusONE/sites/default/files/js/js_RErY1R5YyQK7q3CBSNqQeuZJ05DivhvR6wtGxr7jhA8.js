(function(a){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.AJAX=Drupal.CTools.AJAX||{};Drupal.CTools.AJAX.warmCache=function(){$this=a(this);var d=$this.attr("href");if($this.hasClass("ctools-fetching")||Drupal.CTools.AJAX.commandCache[d]){return false;}var b=a('a[href="'+d+'"]');b.addClass("ctools-fetching");try{url=d.replace(/\/nojs(\/|$)/g,"/ajax$1");a.ajax({type:"POST",url:url,data:{js:1,ctools_ajax:1},global:true,success:function(e){Drupal.CTools.AJAX.commandCache[d]=e;b.addClass("ctools-cache-warmed").trigger("ctools-cache-warm",[e]);},complete:function(){b.removeClass("ctools-fetching");},dataType:"json"});}catch(c){b.removeClass("ctools-fetching");return false;}return false;};Drupal.CTools.AJAX.clickAJAXCacheLink=function(){$this=a(this);if($this.hasClass("ctools-fetching")){$this.bind("ctools-cache-warm",function(b,c){Drupal.CTools.AJAX.respond(c);});return false;}else{if($this.hasClass("ctools-cache-warmed")&&Drupal.CTools.AJAX.commandCache[$this.attr("href")]){Drupal.CTools.AJAX.respond(Drupal.CTools.AJAX.commandCache[$this.attr("href")]);
return false;}else{return Drupal.CTools.AJAX.clickAJAXLink.apply(this);}}};Drupal.CTools.AJAX.findURL=function(c){var b="";var d="."+a(c).attr("id")+"-url";a(d).each(function(){if(b&&a(this).val()){b+="/";}b+=a(this).val();});return b;};a(function(){Drupal.ajax.prototype.commands.attr=function(d,c,b){a(c.selector).attr(c.name,c.value);};Drupal.ajax.prototype.commands.redirect=function(d,c,b){if(c.delay>0){setTimeout(function(){location.href=c.url;},c.delay);}else{location.href=c.url;}};Drupal.ajax.prototype.commands.reload=function(d,c,b){location.reload();};Drupal.ajax.prototype.commands.submit=function(d,c,b){a(c.selector).submit();};});})(jQuery);;
