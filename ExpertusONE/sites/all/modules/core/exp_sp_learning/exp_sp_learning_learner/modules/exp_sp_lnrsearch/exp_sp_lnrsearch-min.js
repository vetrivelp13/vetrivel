(function($){$.widget("ui.lnrcatalogsearch",{_init:function(){try{if(document.getElementById("block-exp-sp-coursedetail-course-details")||document.getElementById("block-exp-sp-classdetail-class-details")||document.getElementById("block-exp-sp-learning-plan-detail-learning-details")){return;}var self=this;if($.cookie("catalog_searchStr")!==undefined&&$.cookie("catalog_searchStr")!=null&&$.cookie("catalog_searchStr")!=""&&$.cookie("catalog_searchStr")!="&title="){$.cookie("catalog_temp_searchStr",$.cookie("catalog_searchStr"));}this.currTheme=Drupal.settings.ajaxPageState.theme;this.widgetCallback=Drupal.settings.widget.widgetCallback;var searchStr=this.searchActionCheck();var referrer=document.referrer;if(searchStr!=""&&searchStr!=undefined&&searchStr!=null){filters=["top-search"];self.getGetJSONCookie("catalogAppliedFilters",filters);searchStr="&title="+encodeURIComponent(searchStr)+"&catalogAppliedFilters="+JSON.stringify(filters);if(Drupal.settings.widget.widgetCallback!=true){$.cookie("catalog_searchStr",searchStr);
$.cookie("catalog_temp_searchStr",$.cookie("catalog_searchStr"));}}else{if(searchStr==""&&(referrer.indexOf("q=learning/class-details")>1||referrer.indexOf("q=learning/learning-plan")>1||referrer.indexOf("q=learning/course-details")>1||(referrer.indexOf("q=learning/catalog-search")>1))){searchStr=$.cookie("catalog_searchStr");if(searchStr!=""&&searchStr!=null){$.cookie("searchStr_read",1);var sortByIndex=searchStr.indexOf("&sortby=");this.sortbyValue=searchStr.substring(sortByIndex+8,searchStr.length);}}else{$.cookie("priceLftCkValue")==""?null:$.cookie("priceLftCkValue","");$.cookie("priceRgtCkValue")==""?null:$.cookie("priceRgtCkValue","");$.cookie("searchStr_read",0);}}if($.cookie("catalog_searchStr_passurl")!==undefined&&$.cookie("catalog_searchStr_passurl")!=""&&$.cookie("catalog_searchStr_passurl")!=null){$.cookie("catalog_searchStr",$.cookie("catalog_searchStr_passurl"));}this.renderSearchResults(searchStr);filtersAdded=false;}catch(e){}},searchAction:function(callFrom,sortbytxt,className){try{var searchStr="";
var ob_type="";$(".ot-others").each(function(){if($(this).is(":checked")){ob_type+=ob_type!=""?"|":"";ob_type+=$(this).val();}});var mro_type="";$(".mro-others").each(function(){if($(this).is(":checked")){mro_type+=mro_type!=""?"|":"";mro_type+=$(this).val();}});var all_mro_type="";$(".mro-others").each(function(){all_mro_type+=all_mro_type!=""?"|":"";all_mro_type+=$(this).val();});var dl_type="";$(".dt-others").each(function(){if($(this).is(":checked")){dl_type+=dl_type!=""?"|":"";dl_type+=$(this).val();}});var lg_type="";$(".lang-others").each(function(){if($(this).is(":checked")){lg_type+=lg_type!=""?"|":"";lg_type+=$(this).val();}});var all_lg_type="";$(".lang-others").each(function(){all_lg_type+=all_lg_type!=""?"|":"";all_lg_type+=$(this).val();});var jr_type="";$(".jobrole-others").each(function(){if($(this).is(":checked")){jr_type+=jr_type!=""?"|":"";jr_type+=$(this).val();}});var all_jr_type="";$(".jobrole-others").each(function(){all_jr_type+=all_jr_type!=""?"|":"";all_jr_type+=$(this).val();
});var cy_type="";$(".country-others").each(function(){if($(this).is(":checked")){cy_type+=cy_type!=""?"|":"";cy_type+=$(this).val();}});var all_cy_type="";$(".country-others").each(function(){all_cy_type+=all_cy_type!=""?"|":"";all_cy_type+=$(this).val();});var Lprice=$("#price-slide-left").val();if(Lprice!=undefined&&Lprice!="undefined"){Lprice=encodeURIComponent(Lprice.charAt(0))+Lprice.substring(1);}var Rprice=$("#price-slide-right").val();if(Rprice!=undefined&&Rprice!="undefined"){Rprice=encodeURIComponent(Rprice.charAt(0))+Rprice.substring(1);}price=$.trim(Lprice+"-"+Rprice);price=price.replace(/ /g,"");if(price=="undefined-undefined"||price==undefined-undefined||price=="-"){price="";}var startdate=$("#ad_startdate1").val();var enddate=$("#ad_startdate2").val();var regEx=/^\d{2}-\d{2}-\d{4}$/;if(startdate==Drupal.t("LBL251")+":"+Drupal.t("LBL112")||startdate.match(regEx)==null){startdate="";}else{$("#date-clr").css("display","block");}if(enddate==Drupal.t("LBL113")||enddate.match(regEx)==null){enddate="";
}else{$("#date-clr").css("display","block");}var title=$("#search_searchtext").val();if((title.toLowerCase())==(Drupal.t("LBL304").toLowerCase())){title="";}var location=$("#srch_criteria_location").val();if(location==Drupal.t("LBL1321")){location="";}else{$("#location-clr").css("display","block");}var tag="";if($("#srch_criteria_tag").length>0){var tag=$("#srch_criteria_tag").val();}if(tag!=""){$("#tag-clr").css("display","block");}var rating_type="";$(".rating-others").each(function(){if($(this).is(":checked")){rating_type+=rating_type!=""?"|":"";rating_type+=$(this).val();}});if(sortbytxt!=null&&sortbytxt!=undefined){this.sortbyValue=sortbytxt;}var sortby=this.sortbyValue;if(title==undefined){title="";}var filtersApplied=this.getGetJSONCookie("catalogAppliedFilters");if(callFrom=="clearAll"){this.removeFilters(filtersApplied,filtersApplied.length);filtersApplied=[];}else{if($(callFrom).is(":checkbox")){var filterId=$(callFrom).data("filter-id");if($(callFrom).is(":checked")){filtersApplied.push(filterId);
this.addFilters(filterId);}else{filtersApplied=filtersApplied.filter(function(item){return filterId!==item;});this.removeFilters(filterId,filtersApplied.length);}}else{if($(callFrom).is("div#price-slider-range")||callFrom=="clearprice"){var filterId=$("#price-slider-range").data("filter-id");if(callFrom=="clearprice"){filtersApplied=filtersApplied.filter(function(item){return filterId!==item;});this.removeFilters(filterId,filtersApplied.length);}else{if(price!=""){filtersApplied=filtersApplied.filter(function(item){return filterId!==item;});this.removeFilters(filterId,filtersApplied.length);filtersApplied.push(filterId);this.addFilters(filterId);}}}else{if(callFrom=="date"){filtersApplied=filtersApplied.filter(function(item){return"date-range"!==item;});this.removeFilters("date-range",filtersApplied.length);if(startdate!=""||enddate!=""){filtersApplied.push("date-range");this.addFilters("date-range");}}else{if(callFrom=="Clear-Date"){filtersApplied=filtersApplied.filter(function(item){return"date-range"!==item;
});this.removeFilters("date-range",filtersApplied.length);}else{if(callFrom=="cloud-tag"){filtersApplied=filtersApplied.filter(function(item){return"cloud-tag"!==item;});this.removeFilters("cloud-tag",filtersApplied.length);filtersApplied.push("cloud-tag");this.addFilters("cloud-tag");}else{if(callFrom=="Clear-Tag"){filtersApplied=filtersApplied.filter(function(item){return"cloud-tag"!==item;});this.removeFilters("cloud-tag",filtersApplied.length);}else{if(callFrom=="location"){filtersApplied=filtersApplied.filter(function(item){return"srch_criteria_location"!==item;});this.removeFilters("srch_criteria_location",filtersApplied.length);filtersApplied.push("srch_criteria_location");this.addFilters("srch_criteria_location");}else{if(callFrom=="Clear-Location"){filtersApplied=filtersApplied.filter(function(item){return"srch_criteria_location"!==item;});this.removeFilters("srch_criteria_location",filtersApplied.length);}else{if(callFrom=="top-search"){filtersApplied=filtersApplied.filter(function(item){return"top-search"!==item;
});this.removeFilters("top-search",filtersApplied.length);if(title!=""){filtersApplied.push("top-search");this.addFilters("top-search");}}}}}}}}}}}this.getGetJSONCookie("catalogAppliedFilters",filtersApplied);searchStr="&title="+encodeURIComponent(title)+"&dl_type="+dl_type+"&lg_type="+lg_type+"&all_lg_type="+all_lg_type+"&ob_type="+ob_type+"&location="+encodeURIComponent(location)+"&tag="+encodeURIComponent(tag)+"&price="+price+"&startdate="+startdate+"&enddate="+enddate+"&jr_type="+jr_type+"&all_jr_type="+all_jr_type+"&cy_type="+cy_type+"&all_cy_type="+all_cy_type+"&sortby="+sortby+"&mro_type="+mro_type+"&all_mro_type="+all_mro_type+"&rating_type="+rating_type+"&catalogAppliedFilters="+JSON.stringify(filtersApplied);$.cookie("catalog_searchStr",searchStr);this.createLoader("lnr-catalog-search");$("#paintContentResults").setGridParam({url:this.constructUrl("learning/catalog-search/search/all/"+searchStr)});$("#paintContentResults").trigger("reloadGrid",[{page:1}]);$(".ac_results").css("display","none");
this.checkboxValidation();if(className!=null){$(".sort-by-links li").each(function(){$(this).find("a").removeClass("sortype-high-lighter");});$("."+className).addClass("sortype-high-lighter");}else{$(".sort-by-links li").each(function(){$(this).find("a").removeClass("sortype-high-lighter");});if(this.sortbyValue!=""){if(this.sortbyValue=="ZA"){$(".type2").addClass("sortype-high-lighter");}else{if(this.sortbyValue=="Time"){$(".type3").addClass("sortype-high-lighter");}else{if(this.sortbyValue=="ClassStartDate"){$(".type4").addClass("sortype-high-lighter");}else{if(this.sortbyValue=="Mandatory"){$(".type5").addClass("sortype-high-lighter");}else{$(".type1").addClass("sortype-high-lighter");}}}}}else{$(".type1").addClass("sortype-high-lighter");}}}catch(e){}},searchActionLocation:function(){try{var location=$("#srch_criteria_location").val();if(location!=Drupal.t("LBL1321")){this.searchAction("location");}}catch(e){}},clearField:function(txt,searchAction){try{if(typeof searchAction=="undefined"){searchAction=true;
}if(txt=="Location"){this.clearSearchParam("location");$("#srch_criteria_location").val(Drupal.t("LBL1321")).css("color","#999999").css("fontSize","11px");$("#location-clr").css("display","none");}else{if(txt=="Tag"){this.clearSearchParam("tag");$("#srch_criteria_tag").val("");$(".tagscloud-tag").css("text-decoration","");$("#tag-clr").css("display","none");}else{this.clearSearchParam("startdate");this.clearSearchParam("enddate");$("#ad_startdate1").val(Drupal.t("LBL251")+":"+Drupal.t("LBL112")).css("color","#999999").css("fontSize","11px");$("#ad_startdate2").val(Drupal.t("LBL113")).css("color","#999999").css("fontSize","11px");$("#date-clr").css("display","none");}}$("#date-validate-newid").remove();if(searchAction){this.searchAction("Clear-"+txt);}}catch(e){}},clearSearchParam:function(clearField){try{var param=unserialize(Drupal.settings.refer_course.share_details);param[clearField]="";var clearStr=Object.keys(param).map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(param[key]);
}).join("&");Drupal.settings.refer_course.share_details=clearStr;}catch(e){}},showHide:function(strOne,strTwo,closeTarget){try{if(closeTarget){$("#"+strTwo).hide();}else{$("#"+strTwo).toggle();}var classShowHide=$("#"+strOne).hasClass("cls-show");if(classShowHide){$("#"+strOne).removeClass("cls-show");$("#"+strOne).addClass("cls-hide");}else{$("#"+strOne).removeClass("cls-hide");$("#"+strOne).addClass("cls-show");}var filters=(($.cookie("filters-state")!==undefined&&$.cookie("filters-state")!=null)?JSON.parse($.cookie("filters-state")):{});filters[strOne]=$("#"+strOne).hasClass("cls-show");$.cookie("filters-state",JSON.stringify(filters));}catch(e){}},checkboxValidation:function(){try{$("#searchopts-content").find("input[type=checkbox]").each(function(){if($(this).is(":checked")){if($(this).val()!="All"){$(this).parent().next("label").removeClass("highlight-light-blue");$(this).parent().next("label").addClass("highlight-light-gray");checkboxSelectedUnselectedCommon(this);}}else{if($(this).val()!="All"){$(this).parent().next("label").removeClass("highlight-light-gray");
$(this).parent().next("label").addClass("highlight-light-blue");checkboxSelectedUnselectedCommon(this);}}});}catch(e){}},moreListDisplay:function(recLen,dispId){try{for(i=0;i<=recLen;i++){$("#"+dispId+"_"+i).css("display","block");}$("#"+dispId+"_more").css("display","none");$("#"+dispId+"_short").css("display","block");}catch(e){}vtip();},shortListDisplay:function(recLen,dispId){try{for(i=0;i<=recLen;i++){if(i<=4){$("#"+dispId+"_"+i).css("display","block");}else{$("#"+dispId+"_"+i).css("display","none");}}$("#"+dispId+"_short").css("display","none");$("#"+dispId+"_more").css("display","block");}catch(e){}vtip();},hidePageControls:function(hideAll){try{$("#paintCatalog-show_more").hide();var lastDataRow=$("#paintContentResults tr.ui-widget-content").filter(":last");if(lastDataRow.length!=0){lastDataRow.children("td").css("border","0 none");}return;if(hideAll){if(this.currTheme=="expertusoneV2"){$("#paintContent .block-footer-left").show();}$("#pager").hide();if(lastDataRow.length!=0){lastDataRow.children("td").css("border","0 none");
}}else{$("#pager").show();if(this.currTheme=="expertusoneV2"){$("#paintContent .block-footer-left").hide();}$("#pager #pager_center #first_pager").hide();$("#pager #pager_center #last_pager").hide();$("#pager #pager_center #next_pager").hide();$("#pager #pager_center #prev_pager").hide();$("#pager #pager_center #sp_1_pager").parent().hide();}}catch(e){}},showPageControls:function(){try{$("#paintCatalog-show_more").show();var lastDataRow=$("#paintContentResults tr.ui-widget-content").filter(":last");if(lastDataRow.length!=0){lastDataRow.children("td").css("border","0 none");}return;$("#pager").show();if(this.currTheme=="expertusoneV2"){$("#paintContent .block-footer-left").hide();}$("#pager #pager_center #first_pager").show();$("#pager #pager_center #last_pager").show();$("#pager #pager_center #next_pager").show();$("#pager #pager_center #prev_pager").show();$("#pager #pager_center #sp_1_pager").parent().show();}catch(e){}},renderSearchResults:function(searchStr){try{this.createLoader("lnr-catalog-search");
var obj=this;if(this.currTheme=="expertusoneV2"){var gridWidth=762;var detailsWidth=521;var actionWidth=150;var iconsWidth=70;}else{var detailsWidth=595;var actionWidth=130;var gridWidth=764;var iconsWidth=54;}var urlStr=(searchStr!="")?searchStr:"";if(Drupal.settings.refer_course.share_details!==undefined){urlStr=Drupal.settings.refer_course.share_details;}var objStr='$("#lnr-catalog-search").data("lnrcatalogsearch")';var pagenumber=1;var learnerId=obj.getLearnerId();var rownumber=10;var rowlist=[10,20,30];if(learnerId!=0&&learnerId!=""&&learnerId!=null&&learnerId!=undefined){var user_selected_page_number=$.cookie("user_selected_page_number");if(user_selected_page_number!=null&&user_selected_page_number!=undefined){pagenumber=user_selected_page_number;$.cookie("user_selected_page_number","",{expires:-300});}var user_selected_row_number=$.cookie("user_selected_row_number");if(user_selected_row_number!=null&&user_selected_row_number!=undefined){if(user_selected_row_number==20){rownumber=20;
rowlist=[20,40,60];}else{if(user_selected_row_number==30){rownumber=30;rowlist=[30,60,90];}}$.cookie("user_selected_row_number","",{expires:-300});}}if(Drupal.settings.WIDGETMODULEVARIABLE.page_number!=undefined){pagenumber=Drupal.settings.WIDGETMODULEVARIABLE.page_number;}if(Drupal.settings.WIDGETMODULEVARIABLE.row_number!=undefined){if(Drupal.settings.WIDGETMODULEVARIABLE.row_number==20){rownumber=20;rowlist=[20,40,60];}else{if(Drupal.settings.WIDGETMODULEVARIABLE.row_number==30){rownumber=30;rowlist=[30,60,90];}}}if(Drupal.settings.widget.widgetCallback==true){urlStr=Drupal.settings.widget.widget_details.widget_parameters+"&callfrom=widget";var displayParams=Drupal.settings.widget.widget_details.catalog_display_parameters;if(typeof displayParams!="undefined"){var colNamesArray=[];var colModelsArray=[];if(displayParams.show_icon==true){colNamesArray.push("Icons");colModelsArray.push({name:"Icons",index:"Icons",align:"left",title:false,fixed:true,width:iconsWidth,widgetObj:objStr,formatter:obj.paintLPSearchIcons});
}colNamesArray.push("Details");colModelsArray.push({name:"Details",index:"Details",align:"left",title:false,widgetObj:objStr,formatter:obj.paintLPSearchResults});if(displayParams.show_button==true){colNamesArray.push("Action");colModelsArray.push({name:"Action",index:"Action",align:"left",title:false,fixed:true,width:actionWidth,widgetObj:objStr,formatter:obj.paintLPSearchResultsAction});}}else{var colNamesArray=["Icons","Details","Action"];var colModelsArray=[{name:"Icons",index:"Icons",align:"left",title:false,fixed:true,width:iconsWidth,widgetObj:objStr,formatter:obj.paintLPSearchIcons},{name:"Details",index:"Details",align:"left",title:false,widgetObj:objStr,formatter:obj.paintLPSearchResults},{name:"Action",index:"Action",align:"left",title:false,fixed:true,width:actionWidth,widgetObj:objStr,formatter:obj.paintLPSearchResultsAction}];}$("#paintContentResults").jqGrid({url:obj.constructUrl("learning/catalog-search/search/all/"+urlStr),datatype:"json",mtype:"GET",colNames:["Cell"],colModel:[{name:"cell",index:"cell",title:false,width:iconsWidth,widgetObj:objStr,formatter:obj.testReturn}],page:pagenumber,rowNum:rownumber,rowList:rowlist,pager:"#pager",viewrecords:true,emptyrecords:"",sortorder:"desc",toppager:true,height:"auto",autowidth:true,shrinkToFit:true,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,hoverrows:false,loadComplete:obj.callbackLoader,jsonReader:{id:"jqgrid-rowid"}}).navGrid("#pager",{add:false,edit:false,del:false,search:false,refreshtitle:true});
this.paintAfterReady();}else{if($.cookie("catalog_searchStr_passurl")!==undefined&&$.cookie("catalog_searchStr_passurl")!=""&&$.cookie("catalog_searchStr_passurl")!=null){if(learnerId!=0&&learnerId!=""&&learnerId!=null&&learnerId!=undefined){urlStr=urlStr+$.cookie("catalog_searchStr_passurl")+"&language="+Drupal.settings.user.language+"&callfrom=passurl";}else{urlStr=urlStr+$.cookie("catalog_searchStr_passurl")+"&callfrom=passurl";}}else{if($.cookie("catalog_searchStr")!==undefined&&$.cookie("catalog_searchStr")!=""&&$.cookie("catalog_searchStr")!=null){if(learnerId!=0&&learnerId!=""&&learnerId!=null&&learnerId!=undefined){urlStr=urlStr+$.cookie("catalog_searchStr")+"&language="+Drupal.settings.user.language+"&callfrom=passurl";}else{urlStr=urlStr+$.cookie("catalog_searchStr")+"&callfrom=passurl";}}}$("#paintContentResults").jqGrid({url:obj.constructUrl("learning/catalog-search/search/all/"+urlStr),datatype:"json",mtype:"GET",colNames:["Cell"],colModel:[{name:"cell",index:"cell",title:false,width:iconsWidth,widgetObj:objStr,formatter:obj.testReturn}],page:pagenumber,rowNum:rownumber,rowList:rowlist,pager:"#pager",viewrecords:true,emptyrecords:"",sortorder:"desc",toppager:true,height:"auto",autowidth:true,shrinkToFit:true,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,hoverrows:false,loadComplete:obj.callbackLoader,jsonReader:{id:"jqgrid-rowid"}}).navGrid("#pager",{add:false,edit:false,del:false,search:false,refreshtitle:true});
}$(".sort-by-links li").each(function(){$(this).find("a").removeClass("sortype-high-lighter");});if(this.sortbyValue!=""){if(this.sortbyValue=="ZA"){$(".type2").addClass("sortype-high-lighter");}else{if(this.sortbyValue=="Time"){$(".type3").addClass("sortype-high-lighter");}else{if(this.sortbyValue=="ClassStartDate"){$(".type4").addClass("sortype-high-lighter");}else{if(this.sortbyValue=="Mandatory"){$(".type5").addClass("sortype-high-lighter");}else{$(".type1").addClass("sortype-high-lighter");}}}}}else{$(".type1").addClass("sortype-high-lighter");}}catch(e){}},callbackLoader:function(response,postdata,formid,updateShowMore){try{var obj=$("#lnr-catalog-search").data("lnrcatalogsearch");var prefSet=Drupal.settings.user_preferences.catalog_refine;var userId=obj.getLearnerId();if(response.user_preferences!=undefined&&userId>0){Drupal.settings.user_preferences=response.user_preferences;}if(prefSet!=Drupal.settings.user_preferences.catalog_refine){obj.pinUnpinFilterCriteria("","toggle");}$("#paintContentResults").show();
var recs=parseInt($("#paintContentResults").getGridParam("records"),10);if(recs==0){$("#no-records").css("display","block");var html=Drupal.t("MSG381");$("#no-records").html(html);}else{$("#no-records").css("display","none");$("#no-records").html("");}Drupal.attachBehaviors();var reccount=parseInt($("#paintContentResults").getGridParam("reccount"),10);var hideAllPageControls=true;if(recs>10){hideAllPageControls=false;}var recs=response.records;var showMore=$("#paintCatalog-show_more");updateShowMore=((updateShowMore==undefined||updateShowMore==null)?true:updateShowMore);if(updateShowMore){$("#paintContentResults").data("totalrecords",recs);if($("#paintContentResults").getGridParam("reccount")<recs){showMore.show();}else{showMore.hide();}}$("#paintContentResults").find("tr.ui-widget-content").filter(":last").addClass("ui-widget-content-last-row");$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("lnr-catalog-search");$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("searchRecordsPaint");
$(".loadercontent").remove();if($("#lnr-catalog-search").data("lnrcatalogsearch").defaults.start){$("#search-filter-content").html(response.filter);$("#find-trng-sort-display").show();$("#lnr-catalog-search").data("lnrcatalogsearch").defaults.start=false;var req=window.location.search;req=req.substring(3,req.length);var reqArr=req.split("/");if($("#lang_list").val()>6){$("#paintLanguage").css({height:"160px",width:"135px","margin-top":"10px"});$("#paintLanguage").jScrollPane({});}var trunk8options=[];trunk8options.push({selector:".content-title .limit-title",lines:trunk8.embedwidget_title});trunk8options.push({selector:".content-description .limit-desc",lines:trunk8.embedwidget_desc});obj.truncateTitleDescription(trunk8options);if($("#filterlist_language").val()>6){$("#paintLanguage .searchtext").css("display","block");$("#language_searchtext").css("display","block");$("#paintLanguagescroll").css({height:"160px",width:"130px"});$("#paintLanguagescroll").jScrollPane({});}if($("#filterlist_country").val()>6){$("#paintCountry .searchtext").css("display","block");
$("#country_searchtext").css("display","block");$("#paintCountryscroll").css({height:"160px",width:"130px"});$("#paintCountryscroll").jScrollPane({});}}else{$("#lnr-catalog-search").data("lnrcatalogsearch").unselectFilter(response);var trunk8options=[];trunk8options.push({selector:".content-title .limit-title",lines:trunk8.embedwidget_title});trunk8options.push({selector:".content-description .limit-desc",lines:trunk8.embedwidget_desc});obj.truncateTitleDescription(trunk8options);}$(".jqgrow").bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="subgrid"){$(ptr).addClass("ui-state-hover");}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("ui-state-hover");});if(document.getElementById("launch-content-container")){var dataObj=$("#paintContentResults").jqGrid("getGridParam","postData");if(dataObj.enrollmentId!=""&&dataObj.enrollmentId!=undefined){$("#launch"+dataObj.enrollmentId).click();}}vtip();resetFadeOutByClass("#paintContentResults","content-detail-code","line-item-container","catalog");
if($("#jobrole_list").val()>4){$("#paintJobrole").css("height","90px").css("width","130px");if(!$("#paintJobrole").hasClass("jspScrollable")){$("#paintJobrole").jScrollPane({});}}var learnerId=obj.getLearnerId();if(learnerId!=0&&learnerId!=""&&learnerId!=null&&learnerId!=undefined){var user_selected_class_id=$.cookie("user_selected_class_id");if(user_selected_class_id!=null&&user_selected_class_id!=undefined){$(window).scrollTop($("#"+user_selected_class_id).offset().top);$("#"+user_selected_class_id).focus();var onclickprop=$("#"+user_selected_class_id).attr("onclick");if(onclickprop!=null&&onclickprop!=""&&onclickprop!=undefined){$("#"+user_selected_class_id).click();}else{if($.trim($("#"+user_selected_class_id).html())==Drupal.t("Register")&&$("#"+user_selected_class_id).hasClass("action-btn-disable")){var status_msg=Drupal.t("MSG829");obj.callMessageWindow(Drupal.t("LBL721"),status_msg);}else{var status_msg=Drupal.t("ERR047");if(user_selected_class_id.indexOf("object-registerCls")>-1==true){status_msg=Drupal.t("MSG430");
}obj.callMessageWindow(Drupal.t("LBL721"),status_msg);}}$.cookie("user_selected_class_id","",{expires:-300});$.cookie("user_selected_url","",{expires:-300});}}if(Drupal.settings.WIDGETMODULEVARIABLE.click_id!=undefined&&Drupal.settings.WIDGETMODULEVARIABLE.click_id!=null){$("#"+Drupal.settings.WIDGETMODULEVARIABLE.click_id).click();Drupal.settings.WIDGETMODULEVARIABLE.click_id=undefined;history.pushState(null,Drupal.t("CATALOG"),"?q=learning/catalog-search");}if(Drupal.settings.widget.widgetCallback==true){if($.browser.msie&&parseInt($.browser.version,10)=="10"){$("#lnr-catalog-search .ui-jqgrid .ui-jqgrid-bdiv").css("height","auto");}$("#pager").css("width","auto");}obj.checkboxValidation();if((Drupal.settings.refer_course.share_details!==undefined&&$.cookie("widget_searchstr")==true)||($.cookie("catalog_searchStr_passurl")!==undefined&&$.cookie("catalog_searchStr_passurl")!=null&&$.cookie("catalog_searchStr_passurl")!="")||($.cookie("catalog_temp_searchStr")!==undefined&&$.cookie("catalog_temp_searchStr")!=null&&$.cookie("catalog_temp_searchStr")!="")){if(Drupal.settings.refer_course.share_details!==undefined&&$.cookie("widget_searchstr")==true){var param=unserialize(Drupal.settings.refer_course.share_details);
Drupal.settings.refer_course.share_details=undefined;}else{if($.cookie("catalog_searchStr_passurl")!==undefined&&$.cookie("catalog_searchStr_passurl")!=null&&$.cookie("catalog_searchStr_passurl")!=""){var param=unserialize($.cookie("catalog_searchStr_passurl"));if(learnerId!=0&&learnerId!=""&&learnerId!=null&&learnerId!=undefined){$.cookie("catalog_searchStr_passurl","",{path:"/",expires:-5});}}else{if(($.cookie("catalog_temp_searchStr")!==undefined&&$.cookie("catalog_temp_searchStr")!=null&&$.cookie("catalog_temp_searchStr")!="")){var cookie_arr=$.cookie("catalog_temp_searchStr").split("&");var param=[];var search_str_arr="";var cnt=cookie_arr.length;var i=0;for(i=0;i<cnt;i++){if(cookie_arr[i]!=""){search_str_arr=cookie_arr[i].split("=");if(search_str_arr[0]=="price"){search_str_arr[1]=decodeURIComponent(search_str_arr[1]);}param[search_str_arr[0]]=search_str_arr[1];}}$.cookie("catalog_temp_searchStr","",{path:"/",expires:-5});}}}if(param.lg_type!=""&&param.lg_type!=undefined){$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.lg_type);
var lang_arr=param.lg_type.split("|");var seemore_check=false;if(lang_arr.length>0){$.each(lang_arr,function(index,value){if($("#lrn_srch_lang_"+value).parents(".srch-checkbox-container-cls").css("display")=="none"){seemore_check=true;return false;}});if(seemore_check==true){$lng_cnt=$("#paintLanguage").find(".srch-label-cls").length;$("#lnr-catalog-search").data("lnrcatalogsearch").moreListDisplay($lng_cnt,"lang_hideshow");}}}if((param.dl_type!=""&&param.dl_type!=undefined)||(param.ob_type!=""&&param.ob_type!=undefined)){$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.dl_type);$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.ob_type);}if(param.mro_type!=""&&param.mro_type!=undefined){$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.mro_type);}if(param.jr_type!=""&&param.jr_type!=undefined){$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.jr_type);}if(param.cy_type!=""&&param.cy_type!=undefined){$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.cy_type);
}if(param.location!=""&&param.location!=undefined){var tmpval=decodeURIComponent(unescape(param.location));tmpval=decodeURIComponent(tmpval);$("#srch_criteria_location").val(tmpval.trim());$("#srch_criteria_location").css({color:"#333333","font-style":"normal"});$("#location-clr").show();}if(param.tag!=""&&param.tag!=undefined){$("#srch_criteria_tag").val(decodeURIComponent(param.tag.trim()));$(".tagscloud-tag").filter(function(){return $(this).text()===param.tag.trim();}).css("text-decoration","underline");$("#tag-clr").show();}if(param.startdate!=""&&param.startdate!=undefined){$("#ad_startdate1").val(param.startdate);$("#ad_startdate1").css({color:"#333333","font-style":"normal"});$("#date-clr").show();}if(param.enddate!=""&&param.enddate!=undefined){$("#ad_startdate2").val(param.enddate);$("#ad_startdate2").css({color:"#333333","font-style":"normal"});$("#date-clr").show();}if(param.price!=""&&param.price!=undefined){var symbol=Drupal.settings.user_prefference.currency_sym;if(symbol==""){symbol="";
}param.price=replaceAll(symbol,"",param.price);var priceStr=param.price.split("-");var minPrice=parseInt(priceStr[0].replace(/[^\d]/g,""));var maxPrice=parseInt(priceStr[1].replace(/[^\d]/g,""));var range=maxPrice-minPrice;if($.cookie("preferredcurrencychange")==1){var min_price=0;$("#price-slide-left").val(symbol+min_price);$("#price-slide-right").val(symbol+price_max_value);obj.clearPriceSlider(false);setTimeout(function(){obj.searchAction("clearprice");},100);$.cookie("preferredcurrencychange","0");}else{$("#price-slider-range .ui-slider-range").css({left:(minPrice/parseInt(price_max_value))*100+"%",width:(range/parseInt(price_max_value))*100+"%"});$("#price-slider-range a").eq(0).css("left",(minPrice/parseInt(price_max_value))*100+"%");$("#price-slider-range a").eq(1).css("left",(maxPrice/parseInt(price_max_value))*100+"%");$("#price-slide-left").val(symbol+minPrice);$("#price-slide-right").val(symbol+maxPrice);}}if(param.title!=""&&param.title!=undefined){$("#search_searchtext").val(unescape(param.title));
$("#search_searchtext").css("color","#333333");}if(param.rating_type!=""&&param.rating_type!=undefined){$("#lnr-catalog-search").data("lnrcatalogsearch").selectFormCheckbox(param.rating_type);}if(param.sortby!=""&&param.sortby!=undefined){$("#lnr-catalog-search").data("lnrcatalogsearch").setSortByValue(param.sortby);}$.cookie("widget_searchstr","",{path:"/",expires:-5});}if(Drupal.settings.widget.widgetCallback==true){$(".top-record-div-left").each(function(){var imageWidth=$(this).find(".catalog-course-compliance-role-bg").width();var imageRole=$(this).find(".catalog-course-role-access-bg").width();if(imageWidth==null){if(imageRole!=null){imageWidth=imageRole;}}var divWidth=$(this).width();var fadeout=$(this).find(".widget-catalog-page-fadeout-container").width();if(imageWidth!=null){var fadeout_imagewidth=imageWidth+fadeout;if(fadeout_imagewidth>divWidth||fadeout==415){var compliace_change=divWidth-(imageWidth+30);$(this).find(".widget-catalog-page-fadeout-container").css("max-width",compliace_change);
}}else{if(fadeout!=415){if(fadeout>divWidth){var value=divWidth-20;$(this).find(".widget-catalog-page-fadeout-container").css("max-width",value);}}else{value=divWidth-20;$(this).find(".widget-catalog-page-fadeout-container").css("max-width",value);}}});}$(".catalog-criteria-refine-icon").addClass("click-binded").mouseenter(function(){obj.showHideFilterCriteria(1);datePickerOpen=false;if($("#filterlist_language").val()>6){$("#paintLanguagescroll").jScrollPane({}).data("jsp").destroy();$("#paintLanguagescroll").jScrollPane();}if($("#filterlist_country").val()>6){$("#paintCountryscroll").jScrollPane({}).data("jsp").destroy();$("#paintCountryscroll").jScrollPane();}if($("#jobrole_list").val()>4){$("#paintJobrole").jScrollPane({}).data("jsp").destroy();$("#paintJobrole").jScrollPane({});}afterRenderRefineIcon("#paintContent");});$("#search-filter-content").mouseenter(function(){if(!$("#ad_startdate1, #ad_startdate2").datepicker("widget").is(":visible")){datePickerOpen=false;}});$(".catalog-criteria-refine-icon, #search-filter-content").mouseout(function(event){try{afterRenderRefineIcon("#paintCriteriaResults");
var comingfrom=event.toElement||event.relatedTarget;var isVtip=($(comingfrom).attr("id")=="vtip"||$(comingfrom).attr("id")=="vtipArrow");var isAutoCompl=($(comingfrom).parents(".ac_results").length>0||$(comingfrom).is(".ac_results"))?true:false;if(!isVtip&&!isAutoCompl&&$(comingfrom).parents("#search-filter-content").length==0&&!$(comingfrom).is(".block-title-middle")&&$(comingfrom).parents(".catalog-criteria-refine-icon").length==0&&!$(comingfrom).is(".catalog-criteria-refine-icon")&&(!datePickerOpen)){obj.showHideFilterCriteria(0);$(".ac_results").hide();}}catch(e){}});obj.collapseFilters("filters-state");if(filtersAdded==false){var filters=obj.getGetJSONCookie("catalogAppliedFilters");var langFilters=filters.filter(function(item){return item.indexOf("lrn_srch_lang_cre_sys_lng_")!=-1;});if(filters.length==0||langFilters.length==0){var filterId=$(".lang-others:checked").data("filter-id");if(filterId!==undefined){filters.push(filterId);obj.getGetJSONCookie("catalogAppliedFilters",filters);
}}obj.addFilters(filters);filtersAdded=true;}$("#paintContentResults").showmore({showAlways:true,grid:"#paintContentResults",gridWrapper:"#searchRecordsPaint",showMore:"#paintCatalog-show_more"});}catch(e){}},preAssMsgBox:function(enrID,vodType){try{var callMsgFlag=true;var contentLaunchFlag=true;if(document.getElementById("launch-content-container")){var dataObj="";if(document.getElementById("paintContentResults")){var dataObj=$("#paintContentResults").jqGrid("getGridParam","postData");}if(document.getElementById("tbl-paintCatalogContentResults")){var dataObj=$("#tbl-paintCatalogContentResults").jqGrid("getGridParam","postData");}if(document.getElementById("paint-classes-list")){var dataObj=$("#paint-classes-list").jqGrid("getGridParam","postData");}if(dataObj.enrollmentId!=""&&dataObj.enrollmentId!=undefined){var callMsgFlag=false;}}if(callMsgFlag){$("#commonMsg-wizard").remove();var html="";html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
html+='<tr><td height="30"></td></tr>';html+="<tr>";html+='<td align="center"><span class="select-greyed-out-text">'+SMARTPORTAL.t("MSG708")+"</span></td>";html+="</tr>";html+="</table>";html+="</div>";$("body").append(html);var closeButt={};closeButt[Drupal.t("LBL123")]=function(){$(this).dialog("destroy");$(this).dialog("close");$("#commonMsg-wizard").remove();contentLaunchFlag=false;if(vodType=="sinVod"){$("#dummylaunch"+enrID).click();}else{eval($("#launch"+enrID).attr("alt"));}};$("#commonMsg-wizard").dialog({position:[(getWindowWidth()-500)/2,100],bgiframe:true,width:520,resizable:false,modal:true,title:SMARTPORTAL.t("Assessment"),buttons:closeButt,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();this.currTheme=Drupal.settings.ajaxPageState.theme;if($.browser.msie&&parseInt($.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||$.browser.msie&&parseInt($.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").before('<div class="white-btn-bg-left"></div>');
$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass(" white-btn-bg-middle");$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").after('<div class="white-btn-bg-right"></div>');$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").next(".white-btn-bg-right").css("margin-right","0px");}if(this.currTheme=="expertusoneV2"){$("#select-class-equalence-dialog").prevAll().removeAttr("select-class-equalence-dialog");$("#commonMsg-wizard").closest(".ui-dialog").wrap("<div id='select-class-equalence-dialog'></div>");$("#select-class-equalence-dialog").find(".ui-dialog-content").addClass("commonMsg-select-class");changeChildDialogPopUI("select-class-equalence-dialog");if($.browser.msie&&parseInt($.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||$.browser.msie&&parseInt($.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){$("#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").prev(".white-btn-bg-left").remove();
$("#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").next(".white-btn-bg-right").remove();}}else{$("#select-class-equalence-dialog").prevAll().removeAttr("select-class-equalence-dialog");$("#commonMsg-wizard").closest(".ui-dialog").wrap("<div id='select-class-equalence-dialog'></div>");changeChildDialogPopUI("select-class-equalence-dialog");}$("#commonMsg-wizard").show();$(".ui-dialog-titlebar-close,.removebutton").click(function(){$("#commonMsg-wizard").remove();if(contentLaunchFlag){eval($("#launch"+enrID).attr("alt"));}contentLaunchFlag=false;});}}catch(e){}},selectFormCheckbox:function(inputStr){try{var tempStr=inputStr.split("|");for(var tempVal in tempStr){var tempLabel=tempStr[tempVal].trim();$("input:checkbox[value='"+tempLabel+"']").attr("checked","checked");$("input:checkbox[value='"+tempLabel+"']").parent().removeClass("checkbox-unselected").addClass("checkbox-selected");}}catch(e){}},callMessageWindow:function(title,message){try{if(title=="registertitle"){title=Drupal.t("LBL721");
}$("#commonMsg-wizard").remove();var html="";html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';html+='<tr><td height="30"></td></tr>';html+="<tr>";html+='<td align="center"><span class="select-greyed-out-text">'+SMARTPORTAL.t(unescape(message))+"</span></td>";html+="</tr>";html+="</table>";html+="</div>";$("body").append(html);var closeButt={};closeButt[Drupal.t("LBL123")]=function(){$(this).dialog("destroy");$(this).dialog("close");$("#commonMsg-wizard").remove();};$("#commonMsg-wizard").dialog({position:[(getWindowWidth()-500)/2,100],bgiframe:true,width:520,resizable:false,modal:true,title:SMARTPORTAL.t(title),buttons:closeButt,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();this.currTheme=Drupal.settings.ajaxPageState.theme;if($.browser.msie&&parseInt($.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||$.browser.msie&&parseInt($.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").before('<div class="white-btn-bg-left"></div>');
$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass(" white-btn-bg-middle");$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").after('<div class="white-btn-bg-right"></div>');$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").next(".white-btn-bg-right").css("margin-right","0px");}if(this.currTheme=="expertusoneV2"){$("#select-class-equalence-dialog").prevAll().removeAttr("select-class-equalence-dialog");$("#commonMsg-wizard").closest(".ui-dialog").wrap("<div id='select-class-equalence-dialog'></div>");$("#select-class-equalence-dialog").find(".ui-dialog-content").addClass("commonMsg-select-class");changeChildDialogPopUI("select-class-equalence-dialog");$("#select-class-equalence-dialog").prev(".ui-widget-overlay").css("display","none");if($.browser.msie&&parseInt($.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||$.browser.msie&&parseInt($.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){$("#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").prev(".white-btn-bg-left").remove();
$("#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").next(".white-btn-bg-right").remove();}}else{$("#select-class-equalence-dialog").prevAll().removeAttr("select-class-equalence-dialog");$("#commonMsg-wizard").closest(".ui-dialog").wrap("<div id='select-class-equalence-dialog'></div>");changeChildDialogPopUI("select-class-equalence-dialog");$("#select-class-equalence-dialog").prev(".ui-widget-overlay").css("display","none");}$("#commonMsg-wizard").show();$(".ui-dialog-titlebar-close,.removebutton").click(function(){$("#commonMsg-wizard").remove();$("#select-class-dialog").next(".ui-widget-overlay").css("display","block");});}catch(e){}},setSortByValue:function(sortVal){try{$(".sort-by-links li").each(function(){$(this).find("a").removeClass("sortype-high-lighter");});switch(sortVal){case"ZA":$(".type2").addClass("sortype-high-lighter");break;case"Time":$(".type3").addClass("sortype-high-lighter");break;case"ClassStartDate":$(".type4").addClass("sortype-high-lighter");
break;case"Mandatory":$(".type5").addClass("sortype-high-lighter");break;default:$(".type1").addClass("sortype-high-lighter");break;}}catch(e){}},fiveStarCheckCompStatus:function(node_id,entity_type,crs_level_class_id){try{if(typeof(crs_level_class_id)=="undefined"){crs_level_class_id="";}Drupal.attachBehaviors();$("body").data("learningcore").disableFiveStarOnVoting();var obj=$("#lnr-catalog-search").data("lnrcatalogsearch");$("#cls-node-"+node_id+" .fivestar-click").click(function(){var fivestarClick=this;var fiveStarClass=$(this).attr("class");var pattern=/[0-9]+/;var rating=fiveStarClass.match(pattern);var nodeId=node_id;var param={rating:rating,nodeId:crs_level_class_id,entityType:entity_type};url=obj.constructUrl("learning/five-star-submit");$.ajax({type:"POST",url:url,data:param,success:function(result){if(result.average_rating=="AlreadyRated"){return false;}else{$("body").data("learningcore").fiveStarCheck(nodeId,"cls-node-");var average_stars=(result.average.value*5)/100;average_stars=average_stars.toFixed(1);
var voteText=(result.count.value==1)?result.votemsg:result.votesmsg;var avgRating='<span class="total-votes"> (<span>'+result.count.value+"</span> "+voteText+")</span>";$(fivestarClick).parent("div").next("div.description").children("div.fivestar-summary").html(avgRating);}}});});}catch(e){}},checkBoxSelected:function(response){try{$(".dt-others").each(function(){var previousObj=this;$.each(response.delivery_type,function(key,value){if($(previousObj).val()==key){$(previousObj).attr("checked","true");}});});this.checkboxValidation();}catch(e){}},typeCheckboxUnSelect:function(){try{$(".dt-others").each(function(){$(this).removeAttr("checked");});}catch(e){}},unselectFilter:function(response){try{}catch(e){}},paintLPSearchIcons:function(cellvalue,options,rowObject){try{return rowObject.image;}catch(e){}},testReturn:function(cellvalue,options,rowObject){try{return(typeof rowObject.cell!="undefined"?rowObject.cell:rowObject);}catch(e){}},paintLPSearchResults:function(cellvalue,options,rowObject){try{return rowObject.details;
}catch(e){}},paintLPSearchResultsAction:function(cellvalue,options,rowObject){try{return rowObject.action;}catch(e){}},priceSlider:function(priceMin,priceMax){try{obj=this;var symbol=Drupal.settings.user_prefference.currency_sym;if(symbol==""){symbol="";}if(priceMax==0){$("#search_price").css("display","none");}else{$("#price-slider-range").slider({range:true,min:priceMin,max:priceMax,values:[priceMin,priceMax],slide:function(event,ui){$("#price-slide-left").val(symbol+ui.values[0]);$("#price-slide-right").val(symbol+ui.values[1]);$.cookie("priceLftCkValue",ui.values[0]);$.cookie("priceRgtCkValue",ui.values[1]);},change:function(e,ui){if(e.originalEvent){$("#lnr-catalog-search").data("lnrcatalogsearch").searchAction(this);}}});$("#price-slide-left").val(symbol+$("#price-slider-range").slider("values",0));$("#price-slide-right").val(symbol+$("#price-slider-range").slider("values",1));var priceLft="";var priceRgt="";priceLft=$.cookie("priceLftCkValue");priceRgt=$.cookie("priceRgtCkValue");
priceLft=(priceLft==""||priceLft==null)?"":priceLft.replace("","");priceRgt=(priceRgt==""||priceRgt==null)?"":priceRgt.replace("","");priceLft=priceLft==""?priceMin:priceLft;priceRgt=priceRgt==""?priceMax:priceRgt;$("#price-slider-range").slider({values:[priceLft,priceRgt]});$("#price-slide-left").val(symbol+priceLft);$("#price-slide-right").val(symbol+priceRgt);$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("lnr-catalog-search");$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("searchRecordsPaint");}}catch(e){}},clearPriceSlider:function(searchAction){try{if(typeof searchAction=="undefined"){var searchAction=true;}obj=this;var priceMin=$("div#price-slider-range").slider("option","min");var priceMax=$("div#price-slider-range").slider("option","max");$.cookie("priceLftCkValue","");$.cookie("priceRgtCkValue","");$("div#price-slider-range").slider("destroy");obj.priceSlider(priceMin,priceMax);if(searchAction){obj.searchAction("clearprice");}}catch(e){}},locationEnterKey:function(){try{obj=this;
$("#srch_criteria_location").keyup(function(event){if(event.keyCode==13){obj.searchAction("location");}});}catch(e){}},paintLocationAutocomplete:function(){try{$("#srch_criteria_location").autocomplete("/?q=learning/location-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(e){}},paintAutocomplete:function(inputId,ValuesEnabled){try{$("#"+inputId).autocomplete(ValuesEnabled,{minLength:2});$("#"+inputId).focus(function(event){try{if($(this).val()==Drupal.t("LBL304")){$(this).css({color:"#474747","font-size":"12px"}).val("");}}catch(e){}}).blur(function(event){try{if($(this).val()==""){$(this).css({color:"#999999","font-size":"12px"}).val(Drupal.t("LBL304"));}if($(this).val()!=Drupal.t("LBL304")){$(this).css({color:"#333333","font-size":"12px"});}}catch(e){}});}catch(e){}},searchActionCheck:function(){try{var req=window.location.search;req=req.substring(3,req.length);var reqArr=req.split("/");var searchStr="";
if(this.currTheme=="expertusoneV2"){var passSearchValue=Drupal.t("LBL304");}else{var passSearchValue=Drupal.t("LBL304").toUpperCase();}if(reqArr.length>2){searchStr=(reqArr[2]!=null&&reqArr[2]!=undefined&&reqArr[2]!="undefined")?reqArr[2]:"";reqTitleSearch=searchStr.split("|");if(reqTitleSearch!=""&&reqTitleSearch!=null&&reqTitleSearch!=undefined&&reqTitleSearch!="undefined"){if(reqTitleSearch.length==1){reqTitleSearch=searchStr.split("%7C");}passSearchTitle=reqTitleSearch[0];passSearchValue=reqTitleSearch[1];}}passSearchValue=passSearchValue.replace("@@","/");var searchTerm=$("#search_searchtext").val(unescape(passSearchValue)).val();if((searchTerm.toLowerCase())!=(Drupal.t("LBL304").toLowerCase())){$("#search_searchtext").css({color:"#333333","font-size":"13px"});}if((passSearchValue.toLowerCase())==(Drupal.t("LBL304").toLowerCase())){return"";}else{return unescape(passSearchValue);}}catch(e){}},hightlightedText:function(event,ID,textType){try{var crrTheme=Drupal.settings.ajaxPageState.theme;
var fontStyle=(crrTheme=="expertusoneV2")?"normal":"italic";if(event.type=="blur"){if($("#"+ID).val()!=textType){$("#"+ID).css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}if($("#"+ID).val()==""){$("#"+ID).val(textType).css("color","#999999").css("fontSize","10px").css("fontStyle",fontStyle);}}else{if(event.type=="focus"){if($("#"+ID).val()!=textType){$("#"+ID).css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}if($("#"+ID).val()==textType){$("#"+ID).val("").css("color","#333333").css("fontSize","11px").css("fontStyle",fontStyle);}}else{if(event.type=="change"){if($("#"+ID).val()!=textType){$("#"+ID).css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}if($("#"+ID).val()==""){$("#"+ID).val(textType).css("color","#999999").css("fontSize","11px").css("fontStyle",fontStyle);}}}}}catch(e){}},dateValidationCheck:function(){try{var v1=$("#ad_startdate1").val();var v2=$("#ad_startdate2").val();if($("#ad_startdate1").val()=="Start: mm-dd-yyyy"){v1="";
}if($("#ad_startdate2").val()=="End: mm-dd-yyyy"){v2="";}var v1Split=v1.split("-");var v2Split=v2.split("-");var date1=v1Split[2]+"-"+v1Split[0]+"-"+v1Split[1];var date2=v2Split[2]+"-"+v2Split[0]+"-"+v2Split[1];var d1=new Date(date1);var d2=new Date(date2);var currentTime=new Date();var month=currentTime.getMonth()+1;var day=currentTime.getDate();var year=currentTime.getFullYear();var date3=year+"-"+month+"-"+day;var today=new Date(date3);var end_date_less_diff=d2-d1;var start_date_less_currdate=d1-today;var end_date_less_currdate=d2-today;$("#date-validate-newid").remove();if((v1!="")&&(v2!="")){if(start_date_less_currdate<0){newDiv=document.createElement("div");newDiv.id="date-validate-newid";$(newDiv).css({color:"red",display:"none","float":"left","font-size":"11px"});$(newDiv).html(SMARTPORTAL.t("Start date cannot be before current date."));$(".catalog-date-format").before(newDiv);$("#date-validate-newid").show();}else{if(end_date_less_diff<0){newDiv=document.createElement("div");newDiv.id="date-validate-newid";
$(newDiv).css({color:"red",display:"none","float":"left","font-size":"11px"});$(newDiv).html(SMARTPORTAL.t("End date cannot be less than the Start date."));$(".catalog-date-format").before(newDiv);$("#date-validate-newid").show();}else{this.searchAction("date");}}}else{if((v1!="")&&(v2=="")){if(start_date_less_currdate<0){newDiv=document.createElement("div");newDiv.id="date-validate-newid";$(newDiv).css({color:"red",display:"none","float":"left","font-size":"11px"});$(newDiv).html(SMARTPORTAL.t("Start date cannot be before current date."));$(".catalog-date-format").before(newDiv);$("#date-validate-newid").show();}else{this.searchAction("date");}}else{if((v2!="")&&(v1=="")){if(end_date_less_currdate<0){newDiv=document.createElement("div");newDiv.id="date-validate-newid";$(newDiv).css({color:"red",display:"none","float":"left","font-size":"11px"});$(newDiv).html(SMARTPORTAL.t("End date cannot be before current date."));$(".catalog-date-format").before(newDiv);$("#date-validate-newid").show();
}else{this.searchAction("date");}}else{this.searchAction("date");}}}}catch(e){}},customRangeDate:function(input){try{var dateMin=null;var dateMax=null;if(input.id=="ad_startdate1"&&$("#ad_startdate2").datepicker("getDate")!=null){dateMin=new Date();dateMax=$("#ad_startdate2").datepicker("getDate");dateMax.setDate(dateMin.getDate()+20000);}else{if(input.id=="ad_startdate2"){dateMax=new Date();if($("#ad_startdate1").datepicker("getDate")!=null){dateMin=$("#ad_startdate1").datepicker("getDate");dateMax=$("#ad_startdate1").datepicker("getDate");dateMax.setDate(dateMax.getDate()+20000);}}}return{minDate:dateMin,maxDate:dateMax};}catch(e){}},displayTagTip:function(elementid,messagecontent){try{$(".qtip-contentWrapper").css("border","0px none");if(!document.getElementById("tooltip"+elementid)){$("#"+elementid).qtip({content:'<div id="tooltip'+elementid+'" class="tooltiptop"></div><div class="tooltipmid"><div style="width:220px;">'+messagecontent+'</div></div><div class="tooltipbottom"></div>',show:{when:{event:"mouseover"},effect:"slide"},hide:{when:{event:"mouseout"},effect:"slide"},position:{adjust:{x:-75,y:0}},style:{width:325,background:"none","font-size":12,color:"#333333"}});
}}catch(e){}},paintAfterReady:function(){try{var dates=$("#ad_startdate1").datepicker({duration:"",showTime:false,constrainInput:false,stepMinutes:5,stepHours:1,time24h:true,dateFormat:"mm-dd-yy",buttonImage:themepath+"/expertusone-internals/images/calendar_icon.JPG",buttonImageOnly:true,firstDay:0,showOn:"both",buttonText:Drupal.t("LBL675"),showButtonPanel:true,changeMonth:true,changeYear:true,beforeShow:$("#lnr-catalog-search").data("lnrcatalogsearch").customRangeDate});var dates=$("#ad_startdate2").datepicker({duration:"",showTime:false,constrainInput:false,stepMinutes:5,stepHours:1,time24h:true,dateFormat:"mm-dd-yy",buttonImage:themepath+"/expertusone-internals/images/calendar_icon.JPG",buttonImageOnly:true,firstDay:0,showOn:"both",buttonText:Drupal.t("LBL676"),showButtonPanel:true,changeMonth:true,changeYear:true,beforeShow:$("#lnr-catalog-search").data("lnrcatalogsearch").customRangeDate});if(document.getElementById("lnr-catalog-search")){$("#first_pager").click(function(e){if(!$("#first_pager").hasClass("ui-state-disabled")){$("#paintContentResults").hide();
$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});$("#prev_pager").click(function(e){if(!$("#prev_pager").hasClass("ui-state-disabled")){$("#paintContentResults").hide();$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});$("#next_pager").click(function(e){if(!$("#next_pager").hasClass("ui-state-disabled")){$("#paintContentResults").hide();$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});$("#last_pager").click(function(e){if(!$("#last_pager").hasClass("ui-state-disabled")){$("#paintContentResults").hide();$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});$(".ui-pg-selbox").bind("change",function(){$("#paintContentResults").hide();
$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").hidePageControls(false);$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");});$(".ui-pg-input").keyup(function(event){if(event.keyCode==13){$("#paintContentResults").hide();$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});if(this.currTheme=="expertusoneV2"){$(".page-show-prev").bind("click",function(){if(parseInt($("#pg_pager .page_count_view").attr("id"))<0){$("#pg_pager .page_count_view").attr("id","0");}else{$("#paintContentResults").hide();$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").hidePageControls(false);$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});$(".page-show-next").bind("click",function(){if(parseInt($("#pg_pager .page_count_view").attr("id"))>=parseInt($("#pg_pager .page-total-view").attr("id"))){$("#pg_pager .page_count_view").attr("id",($("#pg_pager .page_count_view").attr("id")-1));
}else{$("#paintContentResults").hide();$("#gview_paintContentResults").css("min-height","100px");$("#lnr-catalog-search").data("lnrcatalogsearch").hidePageControls(false);$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");}});}}}catch(e){}},showSelectClass:function(userId,courseId){try{this.currTheme=Drupal.settings.ajaxPageState.theme;var chgClassWidth=688;if(this.currTheme=="expertusoneV2"){chgClassWidth=750;}$("#lnr-catalog-search").data("lnrcatalogsearch").defaults.catStart=true;this.renderSelectClassPopup(userId);$("#paintCatalogContentResults"+userId).css("min-height","auto").css("overflow","visible");this.createLoader("paintCatalogContentResults"+userId);$("#loaderdivpaintCatalogContentResults"+userId).css("height","250px");var nAgt=navigator.userAgent;var verOffset;var DetailsW=465;var actionW=85;if((verOffset=nAgt.indexOf("Chrome"))!=-1){DetailsW=420;actionW=100;}var obj=this;var objStr='$("#lnr-catalog-search").data("lnrcatalogsearch")';if(Drupal.settings.widget.widgetCallback==true){$("#tbl-paintCatalogContentResults").jqGrid({url:this.constructUrl("learning/courselevel-search/catalog/"+userId+"/"+courseId),datatype:"json",mtype:"GET",colNames:["Icons","Details","Action"],colModel:[{name:"Icons",index:"Icons",title:false,widgetObj:objStr,formatter:obj.paintSelectClsSearchIcons},{name:"Details",index:"Details",title:false,widgetObj:objStr,formatter:obj.paintSelectClsSearchResults},{name:"Action",index:"Action",title:false,widgetObj:objStr,formatter:obj.paintSelectClsSearchResultsAction}],rowNum:5,rowList:[5,10,15],pager:"#pager1",viewrecords:true,emptyrecords:"",sortorder:"desc",toppager:false,height:"auto",autowidth:true,shrinkToFit:true,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,loadComplete:obj.callbackCatalogSelectClassLoader,gridComplete:obj.callbackGridSelectClassComplete}).navGrid("#pager1",{add:false,edit:false,del:false,search:false,refreshtitle:true});
}else{$("#tbl-paintCatalogContentResults").jqGrid({url:this.constructUrl("learning/courselevel-search/catalog/"+userId+"/"+courseId),datatype:"json",mtype:"GET",colNames:["Icons","Details","Action"],colModel:[{name:"Icons",index:"Icons",title:false,width:55,widgetObj:objStr,formatter:obj.paintSelectClsSearchIcons},{name:"Details",index:"Details",title:false,width:DetailsW,widgetObj:objStr,formatter:obj.paintSelectClsSearchResults},{name:"Action",index:"Action",title:false,width:actionW,widgetObj:objStr,formatter:obj.paintSelectClsSearchResultsAction}],rowNum:5,rowList:[5,10,15],pager:"#pager1",viewrecords:true,emptyrecords:"",sortorder:"desc",toppager:false,height:"auto",width:chgClassWidth,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,loadComplete:obj.callbackCatalogSelectClassLoader,gridComplete:obj.callbackGridSelectClassComplete}).navGrid("#pager1",{add:false,edit:false,del:false,search:false,refreshtitle:true});}$("#shareoption #bubble-face-table").hide();
$("#shareoption .qtip-popup-visible").hide();$("#multishareoption #bubble-face-table").hide();$("#multishareoption .bottom-qtip-tip-up-visible").hide();this.paintCatalogSelectClassAfterReady(userId);}catch(e){}},paintSelectClsSearchIcons:function(cellvalue,options,rowObject){try{return rowObject.image;}catch(e){}},paintSelectClsSearchResults:function(cellvalue,options,rowObject){try{return rowObject.details;}catch(e){}},paintSelectClsSearchResultsAction:function(cellvalue,options,rowObject){try{return rowObject.action;}catch(e){}},renderSelectClassPopup:function(id){try{var obj=this;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var chgclassqtipWidth=750;}else{var chgclassqtipWidth=712;}if(Drupal.settings.widget.widgetCallback==true){var iwidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);chgclassqtipWidth=iwidth-40;}var html="<div id='paintCatalogContentResults"+id+"'></div>";$("#paintCatalogContentResults"+id).remove();$("body").append(html);
var nHtml="<div id='show_expertus_message'></div><div id='paintCatalogHeader'></div><div id='catalog-no-records' style='display: none'></div><table id='tbl-paintCatalogContentResults'></table><div id='paintCatalogFooter'><div id='pager1' style='display:none;'></div></div>";$("#paintCatalogContentResults"+id).html(nHtml);var closeButt={};$("#paintCatalogContentResults"+id).dialog({autoResize:true,position:[(getWindowWidth()-chgclassqtipWidth)/2,100],bgiframe:true,width:chgclassqtipWidth,resizable:false,draggable:false,closeOnEscape:false,modal:true,title:SMARTPORTAL.t('<span class="myteam-header-text">'+Drupal.t("LBL716")+'</span><div id="search-cat-keyword"></div>'),buttons:closeButt,close:function(){$("#paintCatalogContentResults"+id).remove();$("#select-class-dialog").remove();if($(".location-session-detail-clone").size()>0){$(".location-session-detail-clone").remove();}},overlay:{opacity:0.5,background:"#000000"},open:function(){if((typeof(Drupal.settings.widget.widgetCallback)=="undefined"&&Drupal.settings.widget.widgetCallback==null)||Drupal.settings.widget.widgetCallback==false){$(".ui-widget-overlay").eq(-1).css("width",getWindowWidth()-1+"px");
}}});$(".ui-dialog").wrap("<div id='select-class-dialog'></div>");$("#paintCatalogContentResults"+id).css("position","");this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){$("#select-class-dialog").find(".ui-dialog-content").addClass("assign-learning-team");$("#select-class-dialog").find(".ui-dialog").css("overflow","visible");changeDialogPopUI();$("#select-class-dialog").next(".ui-widget-overlay").css("display","block");}}catch(e){}},callbackCatalogSelectClassLoader:function(response,postdata,formid){try{$("#tbl-paintCatalogContentResults").show();$("#select-class-dialog").find("#tbl-paintCatalogContentResults > tbody > tr > td:first-child").addClass("assign-learn-first-row");$("#select-class-dialog").find("#tbl-paintCatalogContentResults > tbody > tr > td:nth-child(2)").addClass("assign-learn-second-row");$("#select-class-dialog").find("#tbl-paintCatalogContentResults > tbody > tr > td:last-child").addClass("assign-learn-last-row");var recs=parseInt($("#tbl-paintCatalogContentResults").getGridParam("records"),10);
if(recs==0){$("#catalog-no-records").css("display","block");var html=Drupal.t("MSG381")+".";$("#catalog-no-records").html(html);}else{$("#catalog-no-records").css("display","none");$("#catalog-no-records").html("");}var obj=$("#lnr-catalog-search").data("lnrcatalogsearch");var reccount=parseInt($("#tbl-paintCatalogContentResults").getGridParam("reccount"),10);var hideAllPageControls=true;if(recs>reccount){hideAllPageControls=false;$("#select-class-dialog .popupBotLeftCorner").hide();}if(recs<=reccount){obj.hideCatalogSelectClassPageControls(hideAllPageControls);$("#select-class-dialog .popupBotLeftCorner").show();}else{obj.showCatalogSelectClassPageControls();$("#select-class-dialog .popupBotLeftCorner").hide();}if($("#lnr-catalog-search").data("lnrcatalogsearch").defaults.catStart){$("#paintCatalogHeader").html(response.header);$("#myteam-find-trng-sort-display").show();$("#lnr-catalog-search").data("lnrcatalogsearch").defaults.catStart=false;}var curHeight=parseInt($(".ui-dialog").eq(-1).css("height"))+parseInt($(".ui-dialog").eq(-1).css("top"));
var curOlay=parseInt($(".ui-widget-overlay").eq(-1).css("height"));if(curOlay<curHeight){$(".ui-widget-overlay").eq(-1).css("height",(curHeight+50)+"px");}if(Drupal.settings.widget.widgetCallback==true){if(Drupal.settings.ajaxPageState.theme!="expertusoneV2"){var leftval=$("#select-class-dialog .ui-dialog").offset().left;$("#select-class-dialog .ui-dialog").css("left",Math.floor(leftval/2)+"px");}}$("#tbl-paintCatalogContentResults tr.ui-widget-content:last td").css("border","0px none");$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("paintCatalogContentResults"+response.userId);if(document.getElementById("launch-content-container")){var dataObj=$("#tbl-paintCatalogContentResults").jqGrid("getGridParam","postData");if(dataObj.enrollmentId!=""&&dataObj.enrollmentId!=undefined){$("#launch"+dataObj.enrollmentId).click();}}vtip();resetFadeOutByClass("#tbl-paintCatalogContentResults","find-training-list-course","line-item-container","catalog");$(".limit-title").trunk8(trunk8.catalogclsmul_title);
$(".limit-desc").trunk8(trunk8.catalogclsmul_desc);scrollBar_Refresh("catalog");}catch(e){}},callbackGridSelectClassComplete:function(response,postdata,formid){try{$(".limit-title").trunk8(trunk8.catalogclsmul_title);$(".limit-desc").trunk8(trunk8.catalogclsmul_desc);scrollBar_Refresh("catalog");}catch(e){}},hideCatalogSelectClassPageControls:function(hideAll){try{var lastDataRow=$("#tbl-paintCatalogContentResults tr.ui-widget-content").filter(":last");if(hideAll){$("#pager-lp").hide();$("#pager1").hide();if(lastDataRow.length!=0){lastDataRow.children("td").css("border","0 none");}}else{$("#pager1").show();$("#pager1 #pager1_center #first_pager1").hide();$("#pager1 #pager1_center #last_pager1").hide();$("#pager1 #pager1_center #next_pager1").hide();$("#pager1 #pager1_center #prev_pager1").hide();$("#pager1 #pager1_center #sp_1_pager1").parent().hide();}}catch(e){}},showCatalogSelectClassPageControls:function(){try{$("#pager1").show();$("#pager1 #pager1_center #first_pager1").show();$("#pager1 #pager1_center #last_pager1").show();
$("#pager1 #pager1_center #next_pager1").show();$("#pager1 #pager1_center #prev_pager1").show();$("#pager1 #pager1_center #sp_1_pager1").parent().show();}catch(e){}},paintCatalogSelectClassAfterReady:function(userId){try{if(document.getElementById("select-class-dialog")!=null){$("#first_pager1").click(function(e){if(!$("#first_pager1").hasClass("ui-state-disabled")){$("#tbl-paintCatalogContentResults").hide();$("#loaderdivpaintCatalogContentResults"+userId).css("min-height","250px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+userId);}});$("#prev_pager1").click(function(e){if(!$("#prev_pager1").hasClass("ui-state-disabled")){$("#tbl-paintCatalogContentResults").hide();$("#loaderdivpaintCatalogContentResults"+userId).css("min-height","250px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+userId);}});$("#next_pager1").click(function(e){if(!$("#next_pager1").hasClass("ui-state-disabled")){$("#tbl-paintCatalogContentResults").hide();
$("#loaderdivpaintCatalogContentResults"+userId).css("min-height","250px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+userId);}});$("#last_pager1").click(function(e){if(!$("#last_pager1").hasClass("ui-state-disabled")){$("#tbl-paintCatalogContentResults").hide();$("#loaderdivpaintCatalogContentResults"+userId).css("min-height","250px");$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+userId);}});$("#pager1 .ui-pg-selbox").bind("change",function(){$("#tbl-paintCatalogContentResults").hide();$("#loaderdivpaintCatalogContentResults"+userId).css("min-height","250px");$("#lnr-catalog-search").data("lnrcatalogsearch").hideCatalogSelectClassPageControls(false);$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+userId);});$("#pager1 .ui-pg-input").keyup(function(event){if(event.keyCode==13){$("#tbl-paintCatalogContentResults").hide();$("#loaderdivpaintCatalogContentResults"+userId).css("min-height","250px");
$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+userId);}});}}catch(e){}},paintCatSltClskeywordAutocomplete:function(userId,courseId){try{var obj=this;var delType=$("#myteam-cat-delivery-type-hidden").val();url=obj.constructUrl("learning/select-class/catalog-autocomplete/"+delType+"/"+userId+"/"+courseId+"/");$("#srch_criteria_catkeyword").autocomplete(url,{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(e){}},deliverySelectClsHideShow:function(){try{$("#myteam-cat-delivery-type-list").slideToggle();$("#myteam-cat-delivery-type-list li:last").css("border-bottom","0px none");}catch(e){}},deliveryTypeSelectClsText:function(dCode,dText,userId,courseId){try{$("#myteam-cat-delivery-type-list").hide();$("#myteam-cat-delivery-type").text(dText);$("#myteam-cat-delivery-type-hidden").val(dCode);$("#lnr-catalog-search").data("lnrcatalogsearch").paintCatSltClskeywordAutocomplete(userId,courseId);
}catch(e){}},highlightedSelectClassText:function(ID,textType){try{$("#"+ID).blur(function(){if($("#"+ID).val()!=textType){$(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if($("#"+ID).val()==""){$(this).val(textType).css("color","#999999").css("fontSize","12px").css("fontStyle","normal");}});$("#"+ID).focus(function(){if($("#"+ID).val()!=textType){$(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if($("#"+ID).val()==textType){$(this).val("").css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}});$("#"+ID).change(function(){if($("#"+ID).val()!=textType){$(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if($("#"+ID).val()==""){$(this).val(textType).css("color","#999999").css("fontSize","12px").css("fontStyle","normal");}});}catch(e){}},catkeywordSelectClassEnterKey:function(userId,courseId){try{obj=this;$("#srch_criteria_catkeyword").keyup(function(event){if(event.keyCode==13){obj.catalogSearchSelectClassAction("","",userId,courseId);
}});}catch(e){}},catalogSearchSelectClassAction:function(sortbytxt,className,userId,courseId){try{var searchStr="";var title=$("#srch_criteria_catkeyword").val();if(title==Drupal.t("LBL545")){title="";}else{$("#cat-title-clr").css("display","block");}var dl_type=$("#myteam-cat-delivery-type-hidden").val();if(dl_type==Drupal.t("LBL428")){dl_type="";}else{$("#cat-title-clr").css("display","block");}var sortby=sortbytxt;if(title==undefined){title="";}searchStr="&title="+encodeURIComponent(title)+"&dl_type="+encodeURIComponent(dl_type)+"&sortby="+sortby;this.searchStrValue=searchStr;$("#lnr-catalog-search").data("lnrcatalogsearch").hideCatalogSelectClassPageControls(true);$("#tbl-paintCatalogContentResults").hide();this.createLoader("paintCatalogContentResults"+userId);$("#loaderdivpaintCatalogContentResults"+userId).css("height","250px");$("#tbl-paintCatalogContentResults").setGridParam({url:this.constructUrl("learning/courselevel-search/catalog/"+userId+"/"+courseId+"/"+searchStr)});$("#tbl-paintCatalogContentResults").trigger("reloadGrid",[{page:1}]);
$("."+className).parents("li").siblings().find("a").removeClass("sortype-high-lighter");if(className!=""){$("."+className).addClass("sortype-high-lighter");}else{$("#paintCatalogHeader .catalog-type1").addClass("sortype-high-lighter");}}catch(e){}},underlineTagAndTriggerSearch:function(tagName,currElem){try{$(".tagscloud-tag").css("text-decoration","");$(".hovertag").css("text-decoration","");$(currElem).css("text-decoration","underline");$("#srch_criteria_tag").val(tagName);this.searchAction("cloud-tag");}catch(e){}},underlineTagCloudAndTriggerSearch:function(tagName,currElem,tagWeight){try{$(".tagscloud-tag").css("text-decoration","");$(".hovertag").css("text-decoration","");$(currElem).css("text-decoration","underline");$("#srch_criteria_tag").val(tagName);this.searchAction("cloud-tag");var tagpos=$.inArray($(currElem).html(),existtagArr,0);if(tagpos==-1){$tagText=$(currElem).html();existtagArr.unshift($tagText);existtagArr.pop();$("#tagcloudcontainerid").find("span:last-child").remove();
$(currElem).html(descController("FADE OUT",$tagText,weightArr[tagWeight-1]));var selectedTag=$(currElem).parent().html();$("#tagcloudcontainerid").prepend('<span class="tagscloud-term">'+selectedTag+"</span>");$(currElem).html($tagText);}else{if(tagpos>=0){$tagText=$(currElem).html();$("#tagcloudcontainerid").find("span:nth-child("+(tagpos+1)+")").remove();if(tagpos>-1){existtagArr.splice(tagpos,1);}existtagArr.unshift($tagText);$(currElem).html(descController("FADE OUT",$tagText,weightArr[tagWeight-1]));var selectedTag=$(currElem).parent().html();$("#tagcloudcontainerid").prepend('<span class="tagscloud-term">'+selectedTag+"</span>");$(currElem).html($tagText);}}}catch(e){}},truncateTitleDescription:function(trunk8options){try{if(trunk8options===undefined){var trunk8options=[];trunk8options.push({selector:".content-title .limit-title",lines:trunk8.embedwidget_title});trunk8options.push({selector:".content-description .limit-desc",lines:trunk8.embedwidget_desc});$(trunk8options).each(function(){$(this.selector).trunk8("revert");
$(this.selector).trunk8();});}else{$(trunk8options).each(function(){$(this.selector).trunk8(this.lines);});}}catch(e){}},pinUnpinFilterCriteria:function(options,type){try{var _this=this;$("#paintContent").toggleClass("catalog-extended");_this.showHideFilterCriteria(!$("#paintContent").hasClass("catalog-extended"));$("#page-container .searchcriteria-div").toggleClass("searchcriteria-div-unpinned");$("#paintContentResults").jqGrid("setGridWidth",($("#paintContent").width()-2));_this.truncateTitleDescription();var userId=_this.getLearnerId();var refineHidden=$("#paintContent").hasClass("catalog-extended");if(type!="toggle"){$.ajax({type:"POST",url:_this.constructUrl("learning/save-preference/1"),data:{catalog_refine:(refineHidden?1:0)},success:function(result){if(userId==0){Drupal.settings.user_preferences.catalog_refine=refineHidden?1:0;}else{Drupal.settings.user_preferences=result;}}});}$("#paintContentResults .content-detail-code").find(".fadeout-applied").removeClass("fadeout-applied");
setTimeout(function(){resetFadeOutByClass("#paintContentResults","content-detail-code","line-item-container","catalog");},100);}catch(e){}},showHideFilterCriteria:function(show,toggleCompleteHandler){try{if(show==true){$("#page-container .searchcriteria-div").addClass("active");}else{if(show==false){$("#page-container .searchcriteria-div").removeClass("active");}else{$("#page-container .searchcriteria-div").toggleClass("active");}}$("#paintCriteriaResults").find(".fade-out-title-container:not(.title-processed)").each(function(){if($(this).width()>=$(this).find(".title-lengthy-text").width()&&$(this).find(".title-lengthy-text").width()!=0){$(this).find(".fade-out-image").remove();}}).addClass("title-processed");}catch(e){}},collapseFilters:function(cookieName,count){try{var obj=this;if(cookieName!==undefined&&$.cookie(cookieName)!==undefined&&$.cookie(cookieName)!==null){var filters=JSON.parse($.cookie("filters-state"));for(var handlerId in filters){if(filters[handlerId]){$("#"+handlerId).removeClass("cls-hide").addClass("cls-show").parents(".find-list-items").siblings(".catalog-criteria-filter-set").show();
}else{$("#"+handlerId).removeClass("cls-show").addClass("cls-hide").parents(".find-list-items").siblings(".catalog-criteria-filter-set").hide();}}}else{(count===undefined)&&(count=-5);$("#paintCriteriaResults").find(".catalog-criteria-filter-set").slice(count).each(function(){var handlerId=$(this).siblings().find(".cls-show").attr("id");var targetId=$(this).attr("id");obj.showHide(handlerId,targetId,true);});}}catch(e){}},parseParams:function(paramString){try{var result={};paramString.split("&").forEach(function(part){var item=part.split("=");result[item[0]]=decodeURIComponent(item[1]);});return result;}catch(e){}},addFilters:function(filters){try{var filtersList=[];if($.isArray(filters)){filtersList=filters;}else{filtersList.push(filters);}var filterLength=0;$(filtersList).each(function(index,filterId){var selector='[data-filter-id="'+filterId+'"]';var filter=$(selector);var filterId=filter.data("filter-id");var filterName=filter.data("filter-name");var displayName=filter.data("filter-label");
var menustr='<span class="cls-filtermenu-wrapper"><span class="cls-filtermenu">';var showFilter=false;if(filter.is(":checkbox")){if(filter.is(":checked")){var delAction='<label data-filter-tag-name="'+filterName+'" class="enable-delete-icon" id="filter-delete-handler-'+filterId+'" for="'+filterId+'"></label>';if(filterName=="rating"){displayName='<span class="lrn_srch_rating">'+filter.parent().siblings("span.lrn_srch_rating").html()+"</span>";}menustr+=displayName;showFilter=true;filterLength++;}}else{if(filterName=="price-slider"){var Lprice=$("#price-slide-left").val();if(Lprice!=undefined&&Lprice!="undefined"){Lprice=encodeURIComponent(Lprice.charAt(0))+Lprice.substring(1);}var Rprice=$("#price-slide-right").val();if(Rprice!=undefined&&Rprice!="undefined"){Rprice=encodeURIComponent(Rprice.charAt(0))+Rprice.substring(1);}var price=$.trim(Lprice+"-"+Rprice);price=price.replace(/ /g,"");if(price=="undefined-undefined"||price==undefined-undefined||price=="-"){price="";}var displayName=decodeURIComponent(price.replace(/-/g," - "));
var delAction='<label data-filter-tag-name="'+filterName+'" class="enable-delete-icon" id="filter-delete-handler-'+filterId+"\"  onclick=\"$('#lnr-catalog-search').data('lnrcatalogsearch').clearPriceSlider();\"></label>";menustr+=displayName;if(($("#price-slider-range").slider("option","min")!=$("#price-slider-range").slider("option","values")[0])||($("#price-slider-range").slider("option","max")!=$("#price-slider-range").slider("option","values")[1])){showFilter=true;filterLength++;}else{var symbol=Drupal.settings.user_prefference.currency_sym;var minPrice=replaceAll(symbol,"",$("#price-slide-left").val());var maxPrice=replaceAll(symbol,"",$("#price-slide-right").val());minPrice=parseInt(minPrice.replace(/[^\d]/g,""));maxPrice=parseInt(maxPrice.replace(/[^\d]/g,""));if(($("#price-slider-range").slider("option","min")!=minPrice)||($("#price-slider-range").slider("option","max")!=maxPrice)){showFilter=true;filterLength++;}}}else{if(filterName=="date-range"){var startdate=$("#ad_startdate1").val();
var enddate=$("#ad_startdate2").val();if(startdate==Drupal.t("LBL251")+":"+Drupal.t("LBL112")){startdate="";}if(enddate==Drupal.t("LBL113")){enddate="";}if(startdate!=""&&enddate!=""){var displayName=startdate+"<span class='lower-case'> "+Drupal.t("LBL621")+" </span>"+enddate;showFilter=true;filterLength++;}else{if(startdate!=""||enddate!=""){var displayName=(startdate!=""?startdate:enddate);showFilter=true;filterLength++;}}var delAction='<label data-filter-tag-name="'+filterName+'" class="enable-delete-icon" id="filter-delete-handler-'+filterId+"\"  onclick=\"$('#lnr-catalog-search').data('lnrcatalogsearch').clearField('Date');\"></label>";menustr+=displayName;}else{if(filterName=="cloud-tag"){var delAction='<label data-filter-tag-name="'+filterName+'" class="enable-delete-icon" id="filter-delete-handler-'+filterId+"\"  onclick=\"$('#lnr-catalog-search').data('lnrcatalogsearch').clearField('Tag');\"></label>";menustr+=decodeURIComponent($("#srch_criteria_tag").val());if($("#srch_criteria_tag").length>0&&$("#srch_criteria_tag").val()!=""){showFilter=true;
filterLength++;}}else{if(filterName=="location"){var delAction='<label data-filter-tag-name="'+filterName+'" class="enable-delete-icon" id="filter-delete-handler-'+filterId+"\"  onclick=\"$('#lnr-catalog-search').data('lnrcatalogsearch').clearField('Location');\"></label>";menustr+=decodeURIComponent($("#srch_criteria_location").val());if($.trim($("#srch_criteria_location").val())!=Drupal.t("LBL1321")){showFilter=true;filterLength++;}}else{if(filterName=="top-search"){var delAction='<label data-filter-tag-name="'+filterName+'" class="enable-delete-icon" id="filter-delete-handler-'+filterId+"\"  onclick=\"$('#search_searchtext').val('');$('#lnr-catalog-search').data('lnrcatalogsearch').searchAction('top-search');\"></label>";menustr+=$("#search_searchtext").val();if($("#search_searchtext").val().toLowerCase()!=Drupal.t("LBL304").toLowerCase()){showFilter=true;filterLength++;}}}}}}}menustr+="</span></span>"+delAction;if($("#paintContent .catalog-applied-filters").length==0&&filterLength!=0){$('<div class="catalog-applied-filters-wrapper"><div id="catalog-applied-filter-grid" class="catalog-applied-filters"></div></div>').insertBefore("#paintContent #no-records");
}if(filterName!=undefined&&displayName!=undefined&&showFilter){$("#paintContent #catalog-applied-filter-grid").append("<div class='checkedmenu' id='filter-"+filterId+"'>"+menustr+"</div>");}});$(".checkedmenu").each(function(){try{if($(this).find(".cls-filtermenu-wrapper").width()<$(this).find(".cls-filtermenu").width()){$(this).find(".cls-filtermenu-wrapper").append('<span class="cls-filtermenu-fade"></span>');}var displayName=$(this).find(".cls-filtermenu").contents().get(0).nodeValue;if(displayName!=null&&displayName!=""){$(this).find(".cls-filtermenu-wrapper").attr("title",displayName).addClass("vtip");}}catch(e){}});vtip(".checkedmenu");if($("#catalog-applied-filter-grid").find(".cls-filter-clear").length==0&&$("#paintContent #catalog-applied-filter-grid").find(".checkedmenu").length>0){var clearAllStr=Drupal.t("clear all");$("<a class=\"cls-filter-clear\" onclick=\"$('#lnr-catalog-search').data('lnrcatalogsearch').clearAllSearch();\">"+clearAllStr+"</a>").appendTo("#catalog-applied-filter-grid");
}else{$("#catalog-applied-filter-grid .cls-filter-clear").appendTo("#catalog-applied-filter-grid");}}catch(e){}},removeFilters:function(filters,filterCounter){try{var filtersList=[];if($.isArray(filters)){filtersList=filters;}else{filtersList.push(filters);}$(filtersList).each(function(index,filterId){$("#filter-"+filterId).remove();});if($("#catalog-applied-filter-grid").find(".checkedmenu").length==0){$("#catalog-applied-filter-grid").find(".cls-filter-clear").remove();$(".catalog-applied-filters-wrapper").remove();}}catch(e){}},getGetJSONCookie:function(cookieName,value){try{if(value!==undefined){value=value.filter(function(item,i,ar){return ar.indexOf(item)===i;});Drupal.settings.catalog_variables[cookieName]=value;}else{var cookie=[];if(typeof Drupal.settings.catalog_variables[cookieName]!="undefined"&&Drupal.settings.catalog_variables[cookieName]!=null){cookie=(Drupal.settings.catalog_variables[cookieName]);}return cookie;}}catch(e){}},clearAllSearch:function(triggerSearch){try{var obj=this;
$(".ot-others, .mro-others, .dt-others, .lang-others, .jobrole-others, .country-others, .rating-others").each(function(){$(this).attr("checked",false);$(this).parent().removeClass("checkbox-selected").addClass("checkbox-unselected");});obj.clearPriceSlider(false);obj.clearField("Date",false);obj.clearField("Location",false);obj.clearField("Tag",false);$("#search_searchtext").css({color:"#999999","font-size":"12px"}).val(Drupal.t("LBL304"));if(triggerSearch===undefined||triggerSearch!=false){obj.searchAction("clearAll");}}catch(e){}},refreshLastAccessedCatalogRow:function(gridRow){try{var rowFound=false;var grid=$("#paintContentResults");if(gridRow===undefined){var gridRow=grid.jqGrid("getGridParam","lastAccessedRow");}if(gridRow!==undefined&&gridRow!=null){var rowData=((typeof gridRow.id!="undefined"&&gridRow.id)?gridRow.id.split("-"):null);var options={data:{ent_id:rowData[0],ent_type:rowData[1]}};grid.jqGrid("updateRowByRowId",options);rowFound=true;grid.jqGrid("setGridParam",{lastAccessedRow:null});
}else{rowFound=false;}}catch(e){rowFound=false;}return rowFound;}});$.extend($.ui.lnrcatalogsearch.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget,{defaults:{start:true,catStart:true}});})(jQuery);$(function(){try{$("#lnr-catalog-search").lnrcatalogsearch();var d=window.location.search.substring(1);var c=d.split("/");var b=c[1];$("#search_searchtext").keyup(function(g){try{if(g.keyCode==13){if(b!="catalog-search"){var j=$("#search_searchtext").val();var f="Search";if(j!=undefined){j=j.replace("/","@@");}aUrl=resource.base_url;aUrl+="?q=learning/catalog-search/"+escape(f)+"|"+escape(j);location.href=aUrl;}else{$("#lnr-catalog-search").data("lnrcatalogsearch").searchAction("top-search");}}}catch(h){}}).attr("data-filter-id","top-search").attr("data-filter-name","top-search").attr("data-filter-label",Drupal.t("LBL304"));$("#searchTxtFrmPages").click(function(){try{if(b!="catalog-search"){var j=$("#search_searchtext").val();var h=Drupal.t("LBL304").toUpperCase();
if((j.toLowerCase())==(h.toLowerCase())){j="";}var f="Search";if(j!=undefined){j=j.replace("/","@@");}aUrl=resource.base_url;aUrl+="?q=learning/catalog-search/"+escape(f)+"|"+escape(j);location.href=aUrl;}else{$("#lnr-catalog-search").data("lnrcatalogsearch").clearSearchParam("title");$("#lnr-catalog-search").data("lnrcatalogsearch").searchAction("top-search");}}catch(g){}});if($("#search_searchtext")){try{$("#search_searchtext").autocomplete("/?q=learning/catalog-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(a){}}datePickerOpen=false;$("#ad_startdate1, #ad_startdate2").live("focus",function(){try{datePickerOpen=true;}catch(f){}});}catch(a){}});function preventBackspace(c){var a=c||window.event;if(a){var b=a.charCode||a.keyCode;if(b===8||b===13){if(a.preventDefault){a.preventDefault();}else{a.returnValue=false;}}}}function passUrlCommonCall(e){var d=window.location.href;var f=d.substring(0,d.indexOf("&"));
var a=f.replace("widget/catalog-search","share/training");var c=$(".ui-pg-input").val();var b=$(".ui-corner-bottom #data-table-page-view .page_count_view").html();a=a+"&page_number="+c+"&click_id="+e+"&row_number="+b;window.open(a,"_blank");}function replaceAll(c,a,b){return b.replace(new RegExp(c,"g"),a);}function filtersearch(c){try{var g="";var a="";var f="";if(c.id=="language"||c=="language"){g=$("#search_language input.language").val();a=$(".search_filter_language");f=$(".languagefilter").attr("id");}else{if(c.id=="country"||c=="country"){g=$("#search_country input.country").val();a=$(".search_filter_country");f=$(".countryfilter").attr("id");}}if(g&&g!=Drupal.t("LBL304")){g=g.replace(/\s+/g,"");a.hide();var d=$("#"+f+" div[id*="+g+"]");d.show();}else{a.show();}}catch(b){}}function searchKeyPress(a,c){try{if(a.keyCode==13||srch==1){if(c.id=="language_searchtext"){filtersearch("language");}else{if(c.id=="country_searchtext"){filtersearch("country");}}}}catch(b){}}