(function(a){Drupal.wysiwyg.editor.attach.nicedit=function(c,f,e){var b=bkLib.addEvent;bkLib.addEvent=function(i,h,g){if(h!="submit"){b(i,h,g);}};var d=new nicEditor(e);d.panelInstance(f.field);bkLib.addEvent=b;d.addEvent("focus",function(){Drupal.wysiwyg.activeId=f.field;});};Drupal.wysiwyg.editor.detach.nicedit=function(f,j,c){if(typeof j!="undefined"){var b=nicEditors.findEditor(j.field);if(b){if(c=="serialize"){b.saveContent();}else{b.ne.removeInstance(j.field);b.ne.removePanel();}}}else{for(var h in nicEditors.editors){var g=nicEditors.editors[h].nicInstances;for(var d=0;d<g.length;d++){if(c=="serialize"){g[d].saveContent();}else{g[d].remove();}}if(c!="serialize"){nicEditors.editors[h].nicInstances=[];}}}};Drupal.wysiwyg.editor.instance.nicedit={insert:function(f){var b=nicEditors.findEditor(this.field);var d=b.getElm();var g=b.getSel();if(document.selection){d.focus();g.createRange().pasteHTML(f);}else{var c;if(g.getRangeAt){c=g.getRangeAt(0);}else{c=d.ownerDocument.createRange();
c.setStart(g.anchorNode,g.anchorOffset);c.setEnd(g.focusNode,userSeletion.focusOffset);}var e=d.ownerDocument.createDocumentFragment();var h=d.ownerDocument.createElement("div");h.innerHTML=f;while(h.firstChild){e.appendChild(h.firstChild);}c.deleteContents();c.insertNode(e);}},setContent:function(b){nicEditors.findEditor(this.field).setContent(b);},getContent:function(){return nicEditors.findEditor(this.field).getContent();}};})(jQuery);