registernamespace("EXPERTUS.SMARTPORTAL.ProfileconfigManager");EXPERTUS.SMARTPORTAL.ProfileconfigManager=function(){try{this.generateRenderRequest=function(){try{var c=new Object();c.query=new SOAPObject("GetInitialData").attr("xsi:type","null");c.query.appendChild(new SOAPObject("dummy").attr("xsi:type","null"));var b=new SOAPRequest("GetInitialData",c);b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();return b;}catch(d){}};this.generateLoadProfileReq=function(f){try{var c=new Object();c.query=new SOAPObject("LoadProfileFields").attr("xsi:type","null");c.query.appendChild(new SOAPObject("id").attr("xsi:type","null").val(f.cat_id));var b=new SOAPRequest("LoadProfileFields",c);b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();return b;}catch(d){}};this.generateScreenRequest=function(f){try{var c=new Object();c.query=new SOAPObject("GetScreenData").attr("xsi:type","null");c.query.appendChild(new SOAPObject("func_name").attr("xsi:type","null").val(f.func_name));var b=new SOAPRequest("GetScreenData",c);
b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();return b;}catch(d){}};this.generateAvailColsRequest=function(f){try{var c=new Object();c.query=new SOAPObject("AvailCols").attr("xsi:type","null");c.query.appendChild(new SOAPObject("id").attr("xsi:type","null").val(f.cat_id));var b=new SOAPRequest("AvailCols",c);b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();return b;}catch(d){}};this.generateSaveProfFieldRequest=function(f){try{var c=new Object();c.query=new SOAPObject("SaveProfileField").attr("xsi:type","null");c.query.appendChild(new SOAPObject("config_id").attr("xsi:type","null").val(f.config_id));c.query.appendChild(new SOAPObject("entity_id").attr("xsi:type","null").val(f.entity_id));c.query.appendChild(new SOAPObject("category_id").attr("xsi:type","null").val(f.category_id));c.query.appendChild(new SOAPObject("profile_field_id").attr("xsi:type","null").val(f.profile_field_id));c.query.appendChild(new SOAPObject("field_name").attr("xsi:type","null").val(f.field_name));
c.query.appendChild(new SOAPObject("code").attr("xsi:type","null").val(f.profile_code));c.query.appendChild(new SOAPObject("language_code").attr("xsi:type","null").val(f.language_code));c.query.appendChild(new SOAPObject("attr1").attr("xsi:type","null").val(f.attr1));c.query.appendChild(new SOAPObject("attr2").attr("xsi:type","null").val(f.attr2));c.query.appendChild(new SOAPObject("attr3").attr("xsi:type","null").val(f.attr3));c.query.appendChild(new SOAPObject("attr4").attr("xsi:type","null").val(f.attr4));c.query.appendChild(new SOAPObject("data_type_id").attr("xsi:type","null").val(f.data_type_id));if(f.hier_id!=undefined){c.query.appendChild(new SOAPObject("hier_id").attr("xsi:type","null").val(f.hier_id));}if(f.sel_id!=undefined){c.query.appendChild(new SOAPObject("sel_id").attr("xsi:type","null").val(f.sel_id));}if(f.bool_id!=undefined){c.query.appendChild(new SOAPObject("bool_id").attr("xsi:type","null").val(f.bool_id));}c.query.appendChild(new SOAPObject("ui_id").attr("xsi:type","null").val(f.ui_id));
c.query.appendChild(new SOAPObject("column").attr("xsi:type","null").val(f.column));c.query.appendChild(new SOAPObject("function").attr("xsi:type","null").val(f.functions));c.query.appendChild(new SOAPObject("display_on").attr("xsi:type","null").val(f.display_on));var b=new SOAPRequest("SaveProfileField",c);b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();return b;}catch(d){}};this.generateEditProfileRequest=function(f){try{var c=new Object();c.query=new SOAPObject("LoadProfileField").attr("xsi:type","null");c.query.appendChild(new SOAPObject("id").attr("xsi:type","null").val(f.id));var b=new SOAPRequest("LoadProfileField",c);b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();return b;}catch(d){}};this.generateDeleteProfileRequest=function(f){try{var c=new Object();c.query=new SOAPObject("DeleteProfileField").attr("xsi:type","null");c.query.appendChild(new SOAPObject("id").attr("xsi:type","null").val(f.id));var b=new SOAPRequest("DeleteProfileField",c);b="<?xml version='1.0' encoding='UTF-8'?>"+b;
b=b.toString();return b;}catch(d){}};}catch(a){}};$.extend(EXPERTUS.SMARTPORTAL.ProfileconfigManager.prototype,EXPERTUS.SMARTPORTAL.AbstractManager);registernamespace("EXPERTUS.SMARTPORTAL.ProfileConfigWidget");EXPERTUS.SMARTPORTAL.ProfileConfigWidget=function(){try{this.widgetGlobalName="EXPERTUS.SMARTPORTAL.ProfileConfigWidget";this.objDataType;this.objFunctions;this.objUI;this.objFields;this.objHier;this.categoryId;this.objCategory;this.delId;this.objSel;this.objBoolTypes;this.objFunctionsVal;this.objLanguage;this.renderResults=function(){try{}catch(b){}};this.render=function(g){try{this.renderBase(g,this);$("#"+this.getUniqueWidgetId()).html(this.renderHtml());var c,f,d;}catch(b){}};this.renderHtml=function(){try{var b=[{divId:"titleDiv",funcName:"titleMessage"},{divId:"parentDiv",funcName:"showMain"}];$("#"+this.getUniqueWidgetId()).setPageLayout(b,this);var c=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();c.initialize(this);c.setCallBack("displayTable");c.requestXml=c.generateRenderRequest();
c.execute();}catch(d){}};this.titleMessage=function(){try{return'<div class="front-block-header block-header sp_content_header"><h2 style="width: auto;">'+SMARTPORTAL.t("Profile Config Dictionary")+"</h2></div>";}catch(b){}};this.showMain=function(){try{return"";}catch(b){}};this.displayTable=function(){try{$("#msgDiv").hide();var b="";this.objCategory=$(this.responseXml).find("Category");this.objDataType=$(this.responseXml).find("DataType");this.objFunctions=$(this.responseXml).find("Functions");this.objUI=$(this.responseXml).find("UI");this.objHier=$(this.responseXml).find("Hierarchy");this.objLanguage=$(this.responseXml).find("Languages");this.objSel=$(this.responseXml).find("Select");this.objBoolTypes=$(this.responseXml).find("BoolTypes");b=this.showCategory();b+='<table id="datafields" ><tr><td class="sp_erromsg">'+SMARTPORTAL.t("Please select a category to configure Profile Fields")+"</td></tr><table>";$("#"+this.getUniqueWidgetId()+"parentDiv").html(b);$("#datafields tr:eq(1) td:first").css("border-left","1px solid #aaaaaa");
$("#datafields tr:eq(1) td:last").css("border-right","1px solid #aaaaaa");}catch(c){}};this.loadProfileFields=function(){try{$("#msgDiv").hide();this.categoryId=$("#category").val();this.invokeLoadProfileFields();}catch(b){}};this.showCategory=function(){try{var b="";b+="<table width='100%'>";b+="<td colspan='2'>"+SMARTPORTAL.t("Category")+"</td>";b+="<td>";b+='<select id="category" onchange="'+this.getWidgetInstanceName()+'.loadProfileFields();"><option value="" >'+SMARTPORTAL.t("Select")+"</option>";$(this.objCategory).find("Item").each(function(){b+='<option value="'+$(this).find("Code").text()+'">'+$(this).find("Name").text()+"</option>";});b+="</td></tr></table>";return b;}catch(c){}};this.showUpdatedProfileList=function(){try{if($(this.responseXml).find("ResponseCode").length==0){$("#profilecode_exist_err").hide();var b=[{divId:"titleDiv",funcName:"titleMessage"},{divId:"parentDiv",funcName:"showCategory"}];$("#"+this.getUniqueWidgetId()).setPageLayout(b,this);$("#category").val(this.categoryId);
this.invokeLoadProfileFields();}else{$("#profilecode_exist_err").show();}}catch(c){}};this.invokeLoadProfileFields=function(){try{var b=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();b.initialize(this);b.setCallBack("showProfileFields");b.requestXml=b.generateLoadProfileReq({cat_id:this.categoryId});b.execute();}catch(c){}};this.showProfileFields=function(){try{$("#datafields").remove();$("#functions").remove();$("#profileDets").remove();var d=this;if($(this.responseXml).find("Item").length==0){$("#"+this.getUniqueWidgetId()+"parentDiv").append(d.getEmptyFieldTable());return;}var b="";if($("#category").length==0){$("#msgDiv").html("Profile Field saved successfully.");$("#msgDiv").show();b+="<table width='100%'>";b+="<td colspan='2'>Category</td>";b+="<td>";b+='<select id="category" onchange="'+this.getWidgetInstanceName()+'.loadProfileFields();"><option value="" >'+SMARTPORTAL.t("Select")+"</option>";$(this.objCategory).find("Item").each(function(){b+='<option value="'+$(this).find("Code").text()+'">'+$(this).find("Name").text()+"</option>";
});b+="</td></tr></table>";}b+='<table width="100%" id="datafields" cellspacing="0" style="margin-top:25px;">';$(this.responseXml).find("StoredValues>field").each(function(){b+='<tr id="field'+$(this).find("id").text()+'"><td style="padding:10px 0;line-height:1.5em;" width="85%">';b+='<span style="color:#003399;font-weight:bold;">'+$(this).find("name").text()+"</span><br> "+SMARTPORTAL.t("Data Type")+' <span style="color:#003399;">'+$(this).find("data_type").text()+"</span>";if($(this).find("data_type").text()=="Hierarchy"){b+=' Mapped to <span style="color:#003399;">'+$(this).find("profile_value_name").text()+"</span>";}b+='<br>Displayed as <span style="color:#003399;">'+$(this).find("ui").text()+"</span>";b+='</td><td width="15%"><img title="Edit Profile Field" class="imglink" src="'+themepath+'/images/edit1.jpeg" onclick="'+d.getWidgetInstanceName()+".editProfileField('"+$(this).find("id").text()+"')\" />";b+='&nbsp;&nbsp;&nbsp;<img title="Delete Profile Field" class="imglink" src="'+themepath+'/images/delete1.jpeg" onclick="'+d.getWidgetInstanceName()+".deleteProfileField('"+$(this).find("id").text()+"')\" />";
b+="</td></tr>";});b+='<tr><td colspan="2" align="right" style="padding-top:10px;"><input type="button" value="Add Profile Field" onclick="'+this.getWidgetInstanceName()+'.getAvailCols();"/></td></tr>';b+="</table>";$("#"+this.getUniqueWidgetId()+"parentDiv").append(b);$("#category").val(this.categoryId);this.drawBorders();}catch(c){}};this.drawBorders=function(){try{$("#datafields tr td").css("border","none");$("#datafields tr:first td").css("border-top","1px solid #aaaaaa");$("#datafields tr td").css("border-bottom","1px solid #aaaaaa");$("#datafields tr:last td").css("border","none");}catch(b){}};this.deleteProfileField=function(d){try{lconfirm=confirm(SMARTPORTAL.t("Are you sure you want to delete this Profile Field?"));if(!lconfirm){return false;}this.delId=d;var b=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();b.initialize(this);b.setCallBack("remProfileFields");b.requestXml=b.generateDeleteProfileRequest({id:d});b.execute();}catch(c){}};this.remProfileFields=function(c){try{$("#field"+this.delId).remove();
$("#msgDiv").html(SMARTPORTAL.t("Profile Field deleted successfully"));$("#msgDiv").show();if($("#datafields tr").length==1){$("#datafields").html(this.getEmptyFieldRow());}else{this.drawBorders();}}catch(b){}};this.getEmptyFieldTable=function(){try{return'<table id="datafields">'+this.getEmptyFieldRow()+"</table>";}catch(b){}};this.getEmptyFieldRow=function(){try{return'<tr><td class="sp_erromsg" width="70%">'+SMARTPORTAL.t("No Profile Fields are defined")+'</td><td><input type="button" value="Add Profile Field" onclick="'+this.getWidgetInstanceName()+'.getAvailCols();"/></td></tr>';}catch(b){}};this.editProfileField=function(d){try{var b=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();b.initialize(this);b.setCallBack("setDefProfileFields");b.requestXml=b.generateEditProfileRequest({id:d});b.execute();}catch(c){}};this.setDefProfileFields=function(){try{this.addProfileFields();$("#field_name").val($(this.responseXml).find("profile_field_name").text());$("#profile_code").val($(this.responseXml).find("code").text());
$("#profile_code").attr("readonly",true);$("#language_code").val($(this.responseXml).find("lang_code").text());$("#language_code").attr("disabled","disabled");$("#attr1").val($(this.responseXml).find("attr1").text());$("#attr2").val($(this.responseXml).find("attr2").text());$("#attr3").val($(this.responseXml).find("attr3").text());$("#attr4").val($(this.responseXml).find("attr4").text());$("#dtype").val($(this.responseXml).find("data_type_id").text());$("#col").val($(this.responseXml).find("cols").text());$("#config_id").val($(this.responseXml).find("id").text());$("#profile_field_id").val($(this.responseXml).find("profile_field_id").text());var f=$(this.responseXml).find("display_on").text();$("input[name='display_on']").each(function(){if($(this).val()==f){$(this).attr("checked","checked");}});this.toggleCol();var j=$(this.responseXml).find("data_type").text();if(j=="Hierarchy"){$("#hier").val($(this.responseXml).find("profile_value_id").text());}else{if(j=="Single Select"||j=="Multi Select"){$("#sel").val($(this.responseXml).find("profile_value_id").text());
}else{if(j=="Boolean"){$("#blTyp").val($(this.responseXml).find("profile_value_id").text());}}}this.toggleHier($("#dtype"));$("#ui").val($(this.responseXml).find("ui_id").text());$("#field_name").focus();var d=$(this.responseXml).find("functions").text();this.objFunctionsVal=d;var b=d.split(",");for(var c=0;c<b.length;c++){var g=b[c].split(":");if(g[1]==1){$("#chk"+g[0]).attr("checked","true");}}}catch(h){}};this.getAvailCols=function(){try{var b=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();b.initialize(this);b.setCallBack("addProfileFields");b.requestXml=b.generateAvailColsRequest({cat_id:this.categoryId});b.execute();}catch(c){}};this.showLinks=function(){try{var b="";params={width:"140",items:[{title:SMARTPORTAL.t("View/Edit Profile Fields"),jsFunc:"showUpdatedProfileList()",desc:SMARTPORTAL.t("View/Edit Profile Fields")}]};return this.formatRelatedLinks(params);}catch(c){}};this.showAddProfileFields=function(){try{var b="";b+='<div id="'+this.getUniqueWidgetId()+'profileDets" style="width:100%">';
b+='<table class="addProfile">';b+='<tr><td width="30%">Name:<div class="sp_label_mandatory">*</div></td>';b+='<td width="70%"><input type="text" name="Name" id="field_name" value="" class="mandatory validateText"/></td></tr>';b+='<tr><td width="30%">Code:<div class="sp_label_mandatory">*</div></td>';b+='<td width="70%"><input type="text" name="ProfileCode" id="profile_code" value="" class="mandatory"/><span id="profilecode_exist_err" class="error" style="display: none;">This code is already in use. Please choose another one.</span></td></tr>';b+='<tr><td width="30%">Language:<div class="sp_label_mandatory">*</div></td>';b+='<td width="70%"><select id="language_code" name="Language" class="mandatory" ><option value="">'+SMARTPORTAL.t("Select")+"</option>";b+=this.getDataTypes(this.objLanguage)+"</select></td></tr>";b+="<tr><td>Attribute 1:</td>";b+='<td><input type="text" id="attr1" value="" /></td></tr>';b+="<tr><td>Attribute 2:</td>";b+='<td><input type="text" id="attr2" value="" /></td></tr>';
b+="<tr><td>Attribute 3:</td>";b+='<td><input type="text" id="attr3" value="" /></td></tr>';b+="<tr><td>Attribute 4:</td>";b+='<td><input type="text" id="attr4" value="" /></td></tr>';b+='<tr><td>Data Type:<div class="sp_label_mandatory">*</div></td>';b+='<td><select id="dtype" class="mandatory" name="Data Type" onchange="'+this.getWidgetInstanceName()+'.toggleHier($(this));"><option value="">'+SMARTPORTAL.t("Select")+"</option>";b+=this.getDataTypes(this.objDataType);b+="</select><br />";b+='<select id="sel" name="Select Field"  style="display:none;"><option value="">Select</option>'+this.getDataTypesID(this.objSel)+"</select>";b+='<select id="hier" name="Hierarchy"  style="display:none;"><option value="">Select</option>'+this.getDataTypesID(this.objHier)+"</select>";b+='<select id="blTyp" name="Boolean" style="display:none;"><option value="">Select</option>'+this.getDataTypesID(this.objBoolTypes)+"</select></td></tr>";b+='<tr><td>Mapped To:<div class="sp_label_mandatory">*</div></td>';
b+='<td><select id="col" class="mandatory" name="Mapped To">';$(this.responseXml).find("col").each(function(){b+='<option value="'+$(this).text()+'">Column '+$(this).text()+"</option>";});b+="</select></td></tr>";b+='<tr><td>Display as:<div class="sp_label_mandatory">*</div></td>';b+='<td><select id="ui" class="mandatory" name="Display as"><option value="">'+SMARTPORTAL.t("Select")+"</option>";b+=this.getDataTypes(this.objUI);b+="</select></td></tr>";b+='<tr><td>Display on:<div class="sp_label_mandatory">*</div></td>';b+="<td>";b+='<input type="radio" checked id="d" name="display_on" value="L" onclick="'+this.getWidgetInstanceName()+'.toggleCol();"/> Left <input id="d2" type="radio" name="display_on" value="R" onclick="'+this.getWidgetInstanceName()+'.toggleCol();"/> Right';b+="</td></tr>";b+="</table>";b+='<input type="hidden" id="profile_field_id" value="" />';b+='<input type="hidden" id="config_id" value="" />';b+="</div>";b+="<div id='"+this.getUniqueWidgetId()+"functionAccordianList'>";
b+='<div class="sp_labeldatadiv">';b+="<table>";b+='<tr><td class="sp_label">';b+='<div onclick="javascript:'+this.getWidgetInstanceName()+".addAccordionToTable('open_close','0 0','0 -61px','dt-child-row',"+this.getWidgetInstanceName()+".showFunctionList,this,"+this.getWidgetInstanceName()+');" style="float:left" title="'+SMARTPORTAL.t("Click to show Participating Functions")+'">';b+='<div class="open_close"></div>';b+='<div id="accordion_part_func" class="accordion-text" style="width:180px;">'+SMARTPORTAL.t("Participating Functions")+"</div></div>";b+="</td>";b+="</tr>";b+="</table>";b+="</div>";return b;}catch(c){}};this.showSaveButton=function(){try{var b="";b+='<div class="sp_labeldatadiv" style="text-align:right;margin-right:160px;">';b+='<input type="button" style="left:145px;position:relative;" value="'+SMARTPORTAL.t("Save")+'" onclick="'+this.getWidgetInstanceName()+'.saveProfileField()">';b+="</div>";return b;}catch(c){}};this.showFunctionList=function(k,b,d){try{var g="";g+='<div id="'+d.getUniqueWidgetId()+'functions" class="catalog-accordion" style="border:0px;">';
g+='<table class="addProfile">';var f=0;$(d.objFunctions).find("Item").each(function(){g+="<tr>";g+='<td width="30"><input type="checkbox" id="chk'+$(this).find("Code").text()+'" value="0" /></td>';g+="<td>"+$(this).find("Name").text()+"</td>";g+="</tr>";f++;});g+="</table>";g+="</div>";k.html(g);k.css("display","block");var c=$(d.responseXml).find("functions").text();this.objFunctionsVal=c;var h=c.split(",");for(var f=0;f<h.length;f++){var l=h[f].split(":");if(l[1]==1){$("#chk"+l[0]).attr("checked","true");}}}catch(j){}};this.addProfileFields=function(){try{var b=[{divId:"titleDiv",funcName:"titleMessage"},{divId:"linkDiv",funcName:"showLinks"},{divId:"parentDiv",funcName:"showAddProfileFields"},{divId:"buttonDiv",funcName:"showSaveButton"}];$("#"+this.getUniqueWidgetId()).setPageLayout(b,this);$("#language_code").val("cre_sys_lng_eng");}catch(c){}};this.showFunctions=function(){try{$("#functions").slideDown();}catch(b){}};this.toggleCol=function(){try{if($("input[name='display_on']:checked").val()=="R"){$("#col").attr("disabled","disabled");
}else{$("#col").attr("disabled","");}}catch(b){}};this.saveProfileField=function(){try{if(this.mandatoryCheck(this.getUniqueWidgetId()+"profileDets")){if(this.validateFieldCheck(this.getUniqueWidgetId()+"profileDets")){var c=0,b="";if(document.getElementById(this.getUniqueWidgetId()+"functions")!=null){$(this.objFunctions).find("Item").each(function(){if(c!=0){b+=",";}b+=$(this).find("Code").text()+":"+($("#chk"+$(this).find("Code").text()).attr("checked")?"1":"0");c++;});}else{b=this.objFunctionsVal;}var g={config_id:$("#config_id").val(),entity_id:"1",category_id:this.categoryId,profile_field_id:$("#profile_field_id").val(),field_name:$("#field_name").val(),data_type_id:$("#dtype").val(),hier_id:($("#dtype option:selected").text()=="Hierarchy"?$("#hier").val():""),sel_id:(($("#dtype option:selected").text()=="Single Select"||$("#dtype option:selected").text()=="Multi Select")?$("#sel").val():""),profile_code:$("#profile_code").val(),language_code:$("#language_code").val(),bool_id:(($("#dtype option:selected").text()=="Boolean")?$("#blTyp").val():""),column:$("#col").val(),ui_id:$("#ui").val(),functions:b,display_on:$("input[name='display_on']:checked").val(),attr1:$("#attr1").val(),attr2:$("#attr2").val(),attr3:$("#attr3").val(),attr4:$("#attr4").val()};
var d=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();d.initialize(this);d.setCallBack("showUpdatedProfileList");d.setLoaderObj("parentPageLayout");d.requestXml=d.generateSaveProfFieldRequest(g);d.execute();}}}catch(f){}};this.showProfile=function(){try{$("#functions").hide("slide",{direction:"right"},1000);$("#profileDets").show("slide",{direction:"left"},1000);}catch(b){}};this.showFunc=function(){try{$("#functions").animate({width:"show"});}catch(b){}};this.appProfileFields=function(){try{$("#datafields tr:gt(0)").remove();var c="";var d=this.getDataTypes(this.objDataType);var g=this.getDataTypes(this.objUI);var b=this.getDataTypes(this.objHier);var j=0;var i=this;this.objFields=$(this.responseXml).find("Items");$(this.responseXml).find("Item").each(function(){c+="<tr height='65'>";c+='<td style="border-left:1px solid #aaaaaa;padding-left:5px;vertical-align:top;padding-top:10px;">'+$(this).find("name").text();c+='<input type="hidden" id="field'+j+'" value="'+$(this).find("id").text()+'" />';
c+="</td>";c+='<td style="vertical-align:top;padding-top:10px;"><select id="dtype'+j+'" onchange="'+i.getWidgetInstanceName()+'.toggleHier($(this))">'+d+"</select>";c+='<div style="display:none;padding-top:5px;"><select id="hier'+j+'"><option value="">Select</option>'+b+"</select></div>";c+="</td>";c+='<td style="vertical-align:top;padding-top:10px;"><select id="ui'+j+'">'+g+"</select></td>";c+='<td style="border-right:1px solid #aaaaaa;vertical-align:top;padding-top:10px;"><select id="col'+j+'">';for(var e=1;e<=26;e++){c+='<option value="'+e+'">Col'+e+"</option>";}c+="</select></td>";c+="</tr>";c+="<tr><td colspan='4' style='padding:0 5px;border-left:1px solid #aaaaaa;border-right:1px solid #aaaaaa;'>";c+='<div style="color:orange;cursor:pointer;" onclick="'+i.getWidgetInstanceName()+".toggleFuncs('funcs"+j+"')\">Functions>></div>";c+='<div id="funcs'+j+'" style="overflow:auto;display:none;"><table><tr>';$(i.objFunctions).find("Item").each(function(){c+="<td style='text-align:center;' width='30'>"+$(this).find("name").text()+"</td>";
});c+="</tr><tr>";for(var e=0;e<$(i.objFunctions).find("Item").length;e++){c+="<td style='text-align:center;'>";c+='<input type="checkbox" id="chk'+j+e+'" value="0" />';c+="</td>";}c+="</tr></table>";c+="</div>";c+='<div class="line-separater" style="margin-top:5px;"></div>';c+="</td></tr>";j++;});var f=4+$(this.objFunctions).find("Item").length;$("#datafields").append(c);$(".line-separater:last").removeClass("line-separater");c='<tr><td colspan="'+f+'" align="right" colspan="6" style="padding-right: 30px; height: 50px;border-top:1px solid #aaaaaa"><input type="button" value="Save" onclick="'+this.getWidgetInstanceName()+'.saveDataMap();" align="center"/></td></tr>';$("#datafields").append(c);}catch(h){}};this.getDataTypes=function(d){try{var b="";$(d).find("Item").each(function(){b+='<option value="'+$(this).find("Code").text()+'">'+$(this).find("Name").text()+"</option>";});return b;}catch(c){}};this.getDataTypesID=function(d){try{var b="";$(d).find("Item").each(function(){b+='<option value="'+$(this).find("Id").text()+'">'+$(this).find("Name").text()+"</option>";
});return b;}catch(c){}};this.toggleHier=function(d){try{var b=$(d).find("option:selected").text();if(b=="Hierarchy"){$("#blTyp_newid").html("");$("#sel_newid").html("");$("#hier_newid").html("Please enter a value for Hierarchy.");$("#sel").css("display","none");$("#blTyp").css("display","none");$("#hier").css("display","inline");$("#hier").addClass("mandatory");$("#blTyp").removeClass("mandatory");$("#sel").removeClass("mandatory");$("#hier").focus();}else{if(b=="Single Select"||b=="Multi Select"){$("#hier_newid").html("");$("#blTyp_newid").html("");$("#sel_newid").html("Please enter a value for Select.");$("#hier").css("display","none");$("#blTyp").css("display","none");$("#sel").css("display","inline");$("#sel").addClass("mandatory");$("#blTyp").removeClass("mandatory");$("#hier").removeClass("mandatory");$("#sel").focus();}else{if(b=="Boolean"){$("#hier_newid").html("");$("#sel_newid").html("");$("#blTyp_newid").html("Please enter a value for Boolean.");$("#hier").css("display","none");
$("#sel").css("display","none");$("#blTyp").css("display","inline");$("#blTyp").addClass("mandatory");$("#sel").removeClass("mandatory");$("#hier").removeClass("mandatory");$("#blTyp").focus();}else{$("#blTyp").css("display","none");$("#hier").css("display","none");$("#sel").css("display","none");$("#hier_newid").html("");$("#sel_newid").html("");$("#blTyp_newid").html("");$("#sel").removeClass("mandatory");$("#hier").removeClass("mandatory");$("#blTyp").removeClass("mandatory");}}}if(b=="Boolean"){$("#ui").find("option:all").each(function(){if($(this).text()!="Radio Button"){$(this).attr("disabled","disabled");}else{$(this).attr("disabled","");$(this).attr("selected","selected");}});}else{if(b=="Date"){$("#ui").find("option:all").each(function(){if($(this).text()!="Date Picker"){$(this).attr("disabled","disabled");}else{$(this).attr("disabled","");$(this).attr("selected","selected");}});}else{if(b=="Single Select"){$("#ui").find("option:all").each(function(){if($(this).text()!="Dropdown"&&$(this).text()!="Radio Button"){$(this).attr("disabled","disabled");
}else{$(this).attr("disabled","");$(this).attr("selected","selected");}});}else{if(b=="Multi Select"){$("#ui").find("option:all").each(function(){if($(this).text()!="Listbox"&&$(this).text()!="Checkbox"){$(this).attr("disabled","disabled");}else{$(this).attr("disabled","");$(this).attr("selected","selected");}});}else{if(b=="Text"){$("#ui").find("option:all").each(function(){if($(this).text()!="Textbox"&&$(this).text()!="Textarea"){$(this).attr("disabled","disabled");}else{$(this).attr("disabled","");$(this).attr("selected","selected");}});}else{if(b=="Hierarchy"){$("#ui").find("option:all").each(function(){if($(this).text()!="Tree"){$(this).attr("disabled","disabled");}else{$(this).attr("disabled","");$(this).attr("selected","selected");}});}}}}}}}catch(c){}};this.toggleFuncs=function(c){try{if($("#"+c).css("display")=="block"){$("#"+c).slideUp();}else{$("#"+c).slideDown();}}catch(b){}};this.saveDataMap=function(){try{var d=new Object();d.query=new SOAPObject("SaveDataMap").attr("xsi:type","null");
d.query.appendChild(new SOAPObject("entity").attr("xsi:type","null").val("1"));d.query.appendChild(new SOAPObject("category").attr("xsi:type","null").val($("#category").val()));var g=$(this.objFields).find("Item").length;if(!this.validateCols(g)){return;}for(var h=0;h<g;h++){var m=d.query.appendChild(new SOAPObject("field").attr("xsi:type","null"));m.appendChild(new SOAPObject("field_id").attr("xsi:type","null").val($("#field"+h).val()));m.appendChild(new SOAPObject("data_type").attr("xsi:type","null").val($("#dtype"+h).val()));if($("#dtype"+h).find("option:selected").text()=="Hierarchy"&&$("#hier"+h).val()!=""){m.appendChild(new SOAPObject("hier_id").attr("xsi:type","null").val($("#hier"+h).val()));}else{m.appendChild(new SOAPObject("hier_id").attr("xsi:type","null"));}if(($("#dtype"+h).find("option:selected").text()=="Single Select"||$("#dtype"+h).find("option:selected").text()=="Multi Select")&&$("#sel"+h).val()!=""){m.appendChild(new SOAPObject("sel_id").attr("xsi:type","null").val($("#sel"+h).val()));
}else{m.appendChild(new SOAPObject("sel_id").attr("xsi:type","null"));}m.appendChild(new SOAPObject("ui").attr("xsi:type","null").val($("#ui"+h).val()));m.appendChild(new SOAPObject("column").attr("xsi:type","null").val($("#col"+h).val()));var f=0,k="";$(this.objFunctions).find("Item").each(function(){if(f!=0){k+=",";}k+=$(this).find("Code").text()+":"+($("#chk"+h+f).attr("checked")?"1":"0");f++;});m.appendChild(new SOAPObject("function").attr("xsi:type","null").val(k));}var b=new SOAPRequest("SaveDataMap",d);b="<?xml version='1.0' encoding='UTF-8'?>"+b;b=b.toString();var c=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();c.initialize(this);c.setCallBack("showMesg");c.requestXml=b;c.execute();}catch(l){}};this.validateCols=function(c){try{var b=new Array();for(var d=0;d<c;d++){if(b[$("#col"+d).val()]=="1"){alert(SMARTPORTAL.t("Please choose different column"));$("#col"+d).focus();return false;}else{b[$("#col"+d).val()]="1";}}return true;}catch(f){}};this.showMesg=function(){try{$("#msgDiv").html(SMARTPORTAL.t("Profile Config saved successfully."));
$("#msgDiv").show();}catch(b){}};this.getScreenData=function(b){try{var c=new EXPERTUS.SMARTPORTAL.ProfileconfigManager();c.initialize(this);c.setActionKey("ProfileConfig");c.setEndPointURL(this.getEndPointURL());c.requestXml=c.generateScreenRequest({func_name:b});c.execute();}catch(d){}};}catch(a){}};$.extend(EXPERTUS.SMARTPORTAL.ProfileConfigWidget.prototype,EXPERTUS.SMARTPORTAL.AbstractDetailsWidget);function callprofileconfigdetail(){try{var profileconfigDetailObj;if(typeof eval("EXPERTUS.SMARTPORTAL.ProfileConfigWidget")=="object"){profileconfigDetailObj=eval("EXPERTUS.SMARTPORTAL.ProfileConfigWidget");}else{profileconfigDetailObj=new EXPERTUS.SMARTPORTAL.ProfileConfigWidget();profileconfigDetailObj.setUniqueWidgetId("ProfileConfigService");profileconfigDetailObj.setWidgetObject(profileconfigDetailObj);profileconfigDetailObj.setWidgetTitle("ProfileConfig Details");profileconfigDetailObj.render({id:"ProfileConfigService"});}}catch(e){}}function getProfileConfig(){try{var a=new EXPERTUS.SMARTPORTAL.ProfileConfigWidget();
a.setUniqueWidgetId("CatalogService");a.setWidgetObject(a);a.setWidgetTitle("ProfileConfig Details");a.renderBase({id:"CatalogService"},a);return a;}catch(b){}}$(document).ready(function(){if(document.getElementById("ProfileConfigService")!=null){try{callprofileconfigdetail();}catch(a){}}});