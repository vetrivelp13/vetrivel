(function(a){try{if(a("#search_leaderboard-users_txt")){a("#search_leaderboard-users_txt").autocomplete("/?q=administration/sitesetup/moduleinfo/userpoints/user-autocomplete",{extraParams:{exclude_logged_user:1,search_by_username:1},minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false});}a("#search_leaderboard-users_txt").keyup(function(c){try{if(c.keyCode==13){a("#leaderboard_users").click();a(".ac_results").hide();}}catch(d){}});a.widget("ui.pointsleaderboard",{setIntervalId:null,_init:function(){try{this.renderLeaderBoardUsersList();this.logUserId=this.getLearnerId();}catch(c){}},paintLeaderBoardUsers:function(c,p,h){try{var d=h.id;var o=h.personid;var l=h.screen_name;var m=h.image_url;var k=h.totalpoints;if(k==null){k=0;}var n=a("#userpoints-leaderboard").data("pointsleaderboard").logUserId;var i=h.css;var f="{'entityId':'1','entityType':'enr_crs_usr','url':'learning/ajax/myprofile/user/"+o+"','popupDispId':'profile-qtipid-"+d+"','qtipDisplayPosition':'tipfaceRight','catalogVisibleId':'qtipprofileqtip_visible_disp_lb_"+d+"','dataloaderid':'userpoints-leaderboard','dataIntId':'pointsleaderboard','wBubble':'350','hBubble':'auto'}";
var g="";if(!document.getElementById("qtipprofileqtip_visible_disp_lb_"+d+"_disp")){g+='<div id="qtipprofileqtip_visible_disp_lb_'+d+'_disp"></div>';}g+='<div class="profile-item clearfix '+i+'" id="leaderboard-qtipid-'+d+'">';g+='<div class="leader-board-seperator"><span class="lb-block-seperator">';g+='<a class="profile-image user-list-border-img" >';g+='<img class="vtip" title="'+htmlEntities(l)+'" src="'+m+'"/>';g+="</a>";g+='<div class="user-desc">';g+='<span class="user-profile-link">';if(n!=""&&n>0){g+='<a id="'+d+'" class="user-name user-profile" href="javascript:void(0);" onclick="$(\'body\').data(\'learningcore\').paintOtherUserProfile('+f+')">';}g+='<div class="limit-title-row"><span class="limit-title leaderboard-limit-title lb-user-name vtip" title="'+l+'">'+l+"</span></div>";if(n!=""&&n>0){g+="</a>";}g+='<span class="job-title">'+Drupal.t("LBL1064")+': <span class="points-text">'+k+"</span></span>";g+="</span>";g+="</div>";g+="</span></div>";g+="</div>";return g;a(".leaderboard-limit-title").trunk8(trunk8.spotleader_title);
}catch(j){}},renderLeaderBoardUsersList:function(){try{this.createLoader("leader-board-loader",false);var f=this;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var c=295;}else{if(navigator.userAgent.indexOf("Chrome")>=0){var c=292;}else{var c=287;}}a("#leader-board-users-jqgrid").jqGrid({url:f.constructUrl("administration/sitesetup/moduleinfo/userpoints/leaderboard-user/null"),datatype:"json",mtype:"GET",colNames:[""],colModel:[{name:"id",index:"id",width:c,title:false,sortable:false,formatter:f.paintLeaderBoardUsers}],rowNum:10,viewrecords:true,loadui:false,height:"auto",toppager:false,emptyrecords:"",loadtext:"",recordtext:"",loadComplete:f.catalogUsersLoadComplete});a(".ui-jqgrid").css("margin","0px");a(".leaderboard-limit-title").trunk8(trunk8.spotleader_title);}catch(d){}},catalogUsersBeforeRequest:function(){try{if(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId!=null){clearInterval(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId);
a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId=null;}a(".leaderboard-limit-title").trunk8(trunk8.spotleader_title);}catch(c){}},catalogUsersLoadComplete:function(d){try{var c=a("#leader-board-users-jqgrid").jqGrid("getDataIDs");if(c.length<=0){a("#expertus-no-user-with-points").show();a("#usr-leader-board-list").hide();}else{a("#expertus-no-user-with-points").hide();a("#usr-leader-board-list").show();}a("#leader-board-users-jqgrid").jqGrid("setGridWidth",a("#usr-leader-board-list").width());a("#leader-board-users-jqgrid").trigger("reloadGrid");vtip();a("#userpoints-leaderboard").data("pointsleaderboard").destroyLoader("leader-board-loader");a(".leaderboard-limit-title").trunk8(trunk8.spotleader_title);}catch(f){}},catalogUsersLoadError:function(g,c,d){try{a("#userpoints-leaderboard").data("pointsleaderboard").destroyLoader("leader-board-loader");if(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId!=null){clearInterval(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId);
a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId=null;}}catch(f){}},reloadUsersGrid:function(){try{if(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId!=null){clearInterval(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId);a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId=null;}a("#leader-board-users-jqgrid").setGridParam({page:1}).trigger("reloadGrid");}catch(c){}},catalogUsersPaging:function(d){try{a("#userpoints-leaderboard").data("pointsleaderboard").createLoader("leader-board-loader");if(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId!=null){clearInterval(a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId);a("#userpoints-leaderboard").data("pointsleaderboard").setIntervalId=null;}}catch(c){}},callSearchProcess:function(){try{this.currTheme=Drupal.settings.ajaxPageState.theme;if(a("#lb-users-autocomplete").css("display")=="none"){a("#lb-users-autocomplete").css("display","block");
if(this.currTheme=="expertusoneV2"){a(".overallusersearchlist").find(".eol-search-go").removeClass("user-search-rightcorner");a(".overallusersearchlist").find(".eol-search-go").addClass("user-search-rightcorner");}else{a(".overallusersearchlist").find(".eol-search-go").removeClass("user-search-rightcorner");}}else{var c=encodeURIComponent(a("#search_leaderboard-users_txt").val());var f=this;this.createLoader("leader-board-loader");a("#leader-board-users-jqgrid").setGridParam({url:f.constructUrl("administration/sitesetup/moduleinfo/userpoints/leaderboard-user/"+encodeURIComponent(c))});a("#leader-board-users-jqgrid").trigger("reloadGrid",[{page:1}]);if(this.currTheme=="expertusoneV2"){a("#lb-users-autocomplete").css("display","none");a("#search_leaderboard-users_txt").val(Drupal.t("LBL036")+" "+Drupal.t("LBL107"));a(".overallusersearchlist").find(".eol-search-go").removeClass("user-search-rightcorner");}}a(".leaderboard-limit-title").trunk8(trunk8.spotleader_title);}catch(d){}}});a.extend(a.ui.pointsleaderboard.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);
}catch(b){}})(jQuery);function addslashes(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0");}$(function(){try{$("#userpoints-leaderboard").pointsleaderboard();$(".user-popout-container .profile-name-inline .limit-title").trunk8(trunk8.profile_title);$(".user-popout-container #userprofile-part .limit-desc").trunk8(trunk8.profile_desc);}catch(a){}});