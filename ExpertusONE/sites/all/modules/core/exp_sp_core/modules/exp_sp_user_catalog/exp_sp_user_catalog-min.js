(function(a){try{if(a("#search_users_txt")){a("#search_users_txt").autocomplete("/?q=learning/user-catalog-autocomplete",{extraParams:{exclude_logged_user:1,search_by_username:1},minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false});}a("#search_users_txt").keyup(function(c){try{if(c.keyCode==13){a("#search_users").click();}}catch(d){}});a.widget("ui.lnrcatalogusersonline",{setIntervalId:null,_init:function(){try{this.renderCatalogUsersList();}catch(c){}},paintCatalogUsers:function(c,p,i){try{var d=i.id;var n=i.personid;var l=i.screen_name;var f=i.screen_name;var m=i.image_url;var o=i.job_title;if(o==null){o="";}var j=i.css;var g="{'entityId':'1','entityType':'enr_crs_usr','url':'learning/ajax/myprofile/user/"+n+"','popupDispId':'profile-qtipid-"+d+"','qtipDisplayPosition':'tipfaceRight','catalogVisibleId':'qtipprofileqtip_visible_disp_"+d+"','dataloaderid':'catalog-users','dataIntId':'lnrcatalogusersonline','wBubble':'350','hBubble':'auto'}";var h="";if(!document.getElementById("qtipprofileqtip_visible_disp_"+d+"_disp")){h+='<div id="qtipprofileqtip_visible_disp_'+d+'_disp"></div>';
}h+='<div class="profile-item clearfix '+j+'" id="profile-qtipid-'+d+'">';h+='<a class="profile-image user-list-border-img" >';h+='<img class="vtip" title="'+htmlEntities(f)+'" src="'+m+'"/>';h+="</a>";h+='<div class="profile-desc">';h+='<span class="user-profile-link">';h+='<a id="'+d+'" class="limit-title-row user-name user-profile" href="javascript:void(0);" onclick="$(\'body\').data(\'learningcore\').paintOtherUserProfile('+g+')">';h+='<span class="limit-title vtip" title="'+htmlEntities(i.screen_name)+'">'+l+"</span>";h+="</a>";h+='<span class="limit-title-row job-title vtip" title="'+htmlEntities(i.job_title)+'"> <span class="limit-title">'+htmlEntities(o)+"</span></span>";h+="</span>";h+="</div>";h+="</div>";return h;changeDialogPopUI();a(".user-profile-link .user-name .limit-title").trunk8(trunk8.usercatalog_title);a(".user-profile-link .job-title .limit-title").trunk8(trunk8.usrcatjobrole_title);}catch(k){}},renderCatalogUsersList:function(){try{this.createLoader("catalog-users-loader");
var f=this;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var c=(navigator.userAgent.indexOf("Chrome")>=0)?258:253;}else{var c=265;}a("#catalog-users-jqgrid").jqGrid({url:this.constructUrl("learning/fetch-catalog-users-list/null"),datatype:"json",mtype:"GET",colNames:[""],colModel:[{name:"id",index:"id",width:c,title:false,sortable:false,formatter:f.paintCatalogUsers}],rowNum:5,viewrecords:true,loadui:false,height:"auto",pager:"#expertus-online-datatable-pager",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",toppager:false,emptyrecords:"",loadtext:"",recordtext:"",beforeRequest:f.catalogUsersBeforeRequest,gridComplete:f.catalogUsersGridComplete,loadComplete:f.catalogUsersLoadComplete,onPaging:f.catalogUsersPaging,loadError:f.catalogUsersLoadError});a(".ui-jqgrid").css("margin","0px");a(".user-profile-link .user-name .limit-title").trunk8(trunk8.usercatalog_title);a(".user-profile-link .job-title .limit-title").trunk8(trunk8.usrcatjobrole_title);}catch(d){}},catalogUsersBeforeRequest:function(){try{if(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId!=null){clearInterval(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId);
a("#catalog-users").data("lnrcatalogusersonline").setIntervalId=null;}}catch(c){}},catalogUsersLoadComplete:function(f){try{var d=a("#exp_sp_user_catalog_block_max_list_count").val();if(f.total>1){a("#expertus-online-datatable-pager").css("display","block");}else{a("#expertus-online-datatable-pager").css("display","none");}var c=a("#catalog-users-jqgrid").jqGrid("getDataIDs");if(c.length<=0){a("#expertus-no-online-users-msg").show();a("#catalog-users-list").hide();}else{a("#expertus-no-online-users-msg").hide();a("#catalog-users-list").show();}vtip();a("#catalog-users").data("lnrcatalogusersonline").destroyLoader("catalog-users-loader");a(".user-profile-link .user-name .limit-title").trunk8(trunk8.usercatalog_title);a(".user-profile-link .job-title .limit-title").trunk8(trunk8.usrcatjobrole_title);}catch(g){}},catalogUsersLoadError:function(g,c,d){try{a("#catalog-users").data("lnrcatalogusersonline").destroyLoader("catalog-users-loader");if(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId!=null){clearInterval(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId);
a("#catalog-users").data("lnrcatalogusersonline").setIntervalId=null;}}catch(f){}},reloadUsersGrid:function(){try{if(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId!=null){clearInterval(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId);a("#catalog-users").data("lnrcatalogusersonline").setIntervalId=null;}a("#catalog-users-jqgrid").setGridParam({page:1}).trigger("reloadGrid");}catch(c){}},catalogUsersPaging:function(d){try{a("#catalog-users").data("lnrcatalogusersonline").createLoader("catalog-users-loader");if(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId!=null){clearInterval(a("#catalog-users").data("lnrcatalogusersonline").setIntervalId);a("#catalog-users").data("lnrcatalogusersonline").setIntervalId=null;}}catch(c){}},callSearchProcess:function(){try{this.currTheme=Drupal.settings.ajaxPageState.theme;if(a("#li-users-autocomplete").css("display")=="none"){a("#li-users-autocomplete").css("display","block");if(this.currTheme=="expertusoneV2"){a(".overallusersearchlist").find(".eol-search-go").removeClass("user-search-rightcorner");
a(".overallusersearchlist").find(".eol-search-go").addClass("user-search-rightcorner");}else{a(".overallusersearchlist").find(".eol-search-go").removeClass("user-search-rightcorner");}}else{var c=a("#search_users_txt").val();if(c==Drupal.t("LBL036")+" "+Drupal.t("LBL107")){c=null;}var f=this;this.createLoader("catalog-users-loader");a("#catalog-users-jqgrid").setGridParam({url:f.constructUrl("learning/fetch-catalog-users-list/"+c)});a("#catalog-users-jqgrid").trigger("reloadGrid",[{page:1}]);if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#li-users-autocomplete").css("display","none");a("#search_users_txt").val(Drupal.t("LBL036")+" "+Drupal.t("LBL107"));a(".overallusersearchlist").find(".eol-search-go").removeClass("user-search-rightcorner");}}a(".user-profile-link .user-name .limit-title").trunk8(trunk8.usercatalog_title);a(".user-profile-link .job-title .limit-title").trunk8(trunk8.usrcatjobrole_title);}catch(d){}}});a.extend(a.ui.lnrcatalogusersonline.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);
}catch(b){}})(jQuery);$(function(){try{$("#catalog-users").lnrcatalogusersonline();}catch(a){}});