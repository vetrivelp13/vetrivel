Drupal.viewsUi={};Drupal.behaviors.viewsUiAddView={};Drupal.behaviors.viewsUiAddView.attach=function(b,f){var g=jQuery;var c,d,j;c=new RegExp("[^a-z0-9\\-]+","g");d="-";var a=g(b).find('[id^="edit-page-title"], [id^="edit-block-title"], [id^="edit-page-link-properties-title"]');if(a.length){if(!this.fieldsFiller){this.fieldsFiller=new Drupal.viewsUi.FormFieldFiller(a);}else{this.fieldsFiller.rebind(a);}}var e=g(b).find('[id^="edit-page-path"]');if(e.length){if(!this.pathFiller){this.pathFiller=new Drupal.viewsUi.FormFieldFiller(e,c,d);}else{this.pathFiller.rebind(e);}}var h=g(b).find('[id^="edit-page-feed-properties-path"]');if(h.length){if(!this.feedFiller){j=".xml";this.feedFiller=new Drupal.viewsUi.FormFieldFiller(h,c,d,j);}else{this.feedFiller.rebind(h);}}};Drupal.viewsUi.FormFieldFiller=function(a,c,d,f){var e=jQuery;this.source=e("#edit-human-name");this.target=a;this.exclude=c||false;this.replace=d||"";this.suffix=f||"";var b=this;this.populate=function(){return b._populate.call(b);
};this.unbind=function(){return b._unbind.call(b);};this.bind();};Drupal.viewsUi.FormFieldFiller.prototype.bind=function(){this.unbind();this.source.bind("keyup.viewsUi change.viewsUi",this.populate);this.target.bind("focus.viewsUi",this.unbind);};Drupal.viewsUi.FormFieldFiller.prototype.getTransliterated=function(){var a=this.source.val();if(this.exclude){a=a.toLowerCase().replace(this.exclude,this.replace);}return a+this.suffix;};Drupal.viewsUi.FormFieldFiller.prototype._populate=function(){var a=this.getTransliterated();this.target.val(a);};Drupal.viewsUi.FormFieldFiller.prototype._unbind=function(){this.source.unbind("keyup.viewsUi change.viewsUi",this.populate);this.target.unbind("focus.viewsUi",this.unbind);};Drupal.viewsUi.FormFieldFiller.prototype.rebind=function(a){this.target=a;this.bind();};Drupal.behaviors.addItemForm={};Drupal.behaviors.addItemForm.attach=function(b){var c=jQuery;var a=c(b).find('form[id^="views-ui-add-item-form"]').first();a=a.once("views-ui-add-item-form");
if(a.length){new Drupal.viewsUi.addItemForm(a);}};Drupal.viewsUi.addItemForm=function(a){this.$form=a;this.$form.find(".views-filterable-options :checkbox").click(jQuery.proxy(this.handleCheck,this));this.$selected_div=this.$form.find(".views-selected-options").parent();this.$selected_div.hide();this.checkedItems=[];};Drupal.viewsUi.addItemForm.prototype.handleCheck=function(f){var b=jQuery(f.target);var c=jQuery.trim(b.next().text());if(b.is(":checked")){this.$selected_div.show();this.checkedItems.push(c);}else{var e=this.checkedItems.length;var a=jQuery.inArray(c,this.checkedItems);for(var d=0;d<this.checkedItems.length;d++){if(d==a){this.checkedItems.splice(d,1);d--;break;}}if(this.checkedItems.length==0){this.$selected_div.hide();}}this.refreshCheckedItems();};Drupal.viewsUi.addItemForm.prototype.refreshCheckedItems=function(){this.$selected_div.find(".views-selected-options").html(this.checkedItems.join(", "));Drupal.viewsUi.resizeModal("",true);};Drupal.behaviors.viewsUiRenderAddViewButton={};
Drupal.behaviors.viewsUiRenderAddViewButton.attach=function(b,d){var e=jQuery;var c=e("#views-display-menu-tabs",b).once("views-ui-render-add-view-button-processed");if(!c.length){return;}var f=e('<li class="add"><a href="#"><span class="icon add"></span>Add</a><ul class="action-list" style="display:none;"></ul></li>');var a=c.nextAll("input.add-display").detach();a.appendTo(f.find(".action-list")).wrap("<li>").parent().first().addClass("first").end().last().addClass("last");a.each(function(){var g=e(this).val();if(g.substr(0,4)=="Add "){e(this).val(g.substr(4));}});f.appendTo(c);e("li.add > a",c).bind("click",function(h){h.preventDefault();var g=e(this);Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu(g);});e("li.add",c).live("mouseleave",function(h){var j=e(this);var g=j.children('a[href="#"]');if(j.children(".action-list").is(":visible")){Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu(g);}});};Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu=function(a){a.parent().toggleClass("open");
a.next().slideToggle("fast");};Drupal.behaviors.viewsUiSearchOptions={};Drupal.behaviors.viewsUiSearchOptions.attach=function(b){var c=jQuery;var a=c(b).find('form[id^="views-ui-add-item-form"]').first();a=a.once("views-ui-filter-options");if(a.length){new Drupal.viewsUi.OptionsSearch(a);}};Drupal.viewsUi.OptionsSearch=function(a){this.$form=a;this.$searchBox=this.$form.find("#edit-options-search");this.$searchBox.keyup(jQuery.proxy(this.handleKeyup,this));this.options=this.getOptions(this.$form.find(".filterable-option"));this.handleKeyup();this.$searchBox.keypress(function(b){if(b.which==13){b.preventDefault();}});};Drupal.viewsUi.OptionsSearch.prototype.getOptions=function(f){var e=jQuery;var c,a,g;var b=[];var d=f.length;for(c=0;c<d;c++){g=e(f[c]);a=g.find("label");b[c]={labelText:a.text().toLowerCase(),"$div":g};}return b;};Drupal.viewsUi.OptionsSearch.prototype.handleKeyup=function(a){var l,e,d,f,m,h,g,k,c;m=this.$searchBox.val().toLowerCase();h=m.split(" ");g=h.length;c=0;var b=this.options.length;
for(e=0;e<b;e++){f=this.options[e];l=true;for(d=0;d<g;d++){if(f.labelText.indexOf(h[d])===-1){l=false;}}if(l){k=(c%2)?"odd":"even";f.$div.show();f.$div.removeClass("even odd");f.$div.addClass(k);c++;}else{f.$div.hide();}}};Drupal.behaviors.viewsUiPreview={};Drupal.behaviors.viewsUiPreview.attach=function(b,c){var e=jQuery;var a=e(".views-display-column .views-ui-display-tab-bucket.contextual-filters",b);if(a.length==0){return;}var d=e(".views-display-setting a",a);if(d.length){e("#preview-args").parent().show();}else{e("#preview-args").parent().hide();}};Drupal.behaviors.viewsUiRearrangeFilter={};Drupal.behaviors.viewsUiRearrangeFilter.attach=function(b,c){var e=jQuery;if(typeof Drupal.tableDrag=="undefined"||typeof Drupal.tableDrag["views-rearrange-filters"]=="undefined"){return;}var d=e("#views-rearrange-filters",b).once("views-rearrange-filters");var a=e(".form-item-filter-groups-operator",b).once("views-rearrange-filters");if(d.length){new Drupal.viewsUi.rearrangeFilterHandler(d,a);
}};Drupal.viewsUi.rearrangeFilterHandler=function(b,a){var c=jQuery;this.table=b;this.operator=a;this.hasGroupOperator=this.operator.length>0;this.draggableRows=c(".draggable",b);this.addGroupButton=c("input#views-add-group");this.removeGroupButtons=c("input.views-remove-group",b);this.insertAddRemoveFilterGroupLinks();if(this.hasGroupOperator){this.dropdowns=this.duplicateGroupsOperator();this.syncGroupsOperators();}this.modifyTableDrag();this.redrawOperatorLabels();c(".views-group-title select",b).once("views-rearrange-filter-handler").bind("change.views-rearrange-filter-handler",c.proxy(this,"redrawOperatorLabels"));c("a.views-groups-remove-link",this.table).once("views-rearrange-filter-handler").bind("click.views-rearrange-filter-handler",c.proxy(this,"updateRowspans")).bind("click.views-rearrange-filter-handler",c.proxy(this,"redrawOperatorLabels"));};Drupal.viewsUi.rearrangeFilterHandler.prototype.insertAddRemoveFilterGroupLinks=function(){var d=jQuery;d('<ul class="action-links"><li><a id="views-add-group-link" href="#">'+this.addGroupButton.val()+"</a></li></ul>").prependTo(this.table.parent()).once("views-rearrange-filter-handler").bind("click.views-rearrange-filter-handler",d.proxy(this,"clickAddGroupButton"));
var c=this.removeGroupButtons.length;for(i=0;i<c;i++){var b=d(this.removeGroupButtons[i]);var a=b.attr("id");d('<a href="#" class="views-remove-group-link">'+Drupal.t("Remove group")+"</a>").insertBefore(b).once("views-rearrange-filter-handler").bind("click.views-rearrange-filter-handler",{buttonId:a},d.proxy(this,"clickRemoveGroupButton"));}};Drupal.viewsUi.rearrangeFilterHandler.prototype.clickAddGroupButton=function(){this.addGroupButton.mousedown();this.addGroupButton.submit();return false;};Drupal.viewsUi.rearrangeFilterHandler.prototype.clickRemoveGroupButton=function(a){jQuery("input#"+a.data.buttonId,this.table).submit();return false;};Drupal.viewsUi.rearrangeFilterHandler.prototype.duplicateGroupsOperator=function(){var f=jQuery;var g,a;var h=f("tr.views-group-title"),e;this.operator.find("label").add("div.description").addClass("element-invisible");this.operator.find("select").addClass("form-select");g=this.operator;e=f("tr#views-group-title-1");a=f('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>');
a.find("td").append(this.operator);a.insertBefore(e);var b,d=h.length;for(b=2;b<d;b++){e=f(h[b]);var c=this.operator.clone();c.attr("id","");a=f('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>');a.find("td").append(c);a.insertBefore(e);g=g.add(c);}return g;};Drupal.viewsUi.rearrangeFilterHandler.prototype.syncGroupsOperators=function(){if(this.dropdowns.length<2){return;}this.dropdowns.change(jQuery.proxy(this,"operatorChangeHandler"));};Drupal.viewsUi.rearrangeFilterHandler.prototype.operatorChangeHandler=function(c){var d=jQuery;var a=d(c.target);var b=this.dropdowns.find("select").not(a);b.val(a.val());};Drupal.viewsUi.rearrangeFilterHandler.prototype.modifyTableDrag=function(){var a=Drupal.tableDrag["views-rearrange-filters"];var b=this;a.row.prototype.onSwap=function(){if(b.hasGroupOperator){var e=jQuery(this.group);var c=e.prev("tr");if(c.length&&!c.hasClass("group-message")&&!c.hasClass("draggable")){var d=e.next();if(d.is("tr")){this.swap("after",d);}}b.updateRowspans();
}b.redrawOperatorLabels();};a.onDrop=function(){var h=jQuery;var e=h(this.oldRowElement).find(".tabledrag-changed");if(e.length){var c=e.prevAll(".views-operator-label");if(c.length){c.insertAfter(e);}}var g=h(this.rowObject.element).prevAll("tr.group-message").get(0);var j=g.className.replace(/([^ ]+[ ]+)*group-([^ ]+)-message([ ]+[^ ]+)*/,"$2");var d=h("select.views-group-select",this.rowObject.element);if(h(this.rowObject.element).prev("tr").is(".group-message")&&!d.is(".views-group-select-"+j)){var f=d.attr("class").replace(/([^ ]+[ ]+)*views-group-select-([^ ]+)([ ]+[^ ]+)*/,"$2");d.removeClass("views-group-select-"+f).addClass("views-group-select-"+j);d.val(j);}};};Drupal.viewsUi.rearrangeFilterHandler.prototype.redrawOperatorLabels=function(){var f=jQuery;for(i=0;i<this.draggableRows.length;i++){var b=f(this.draggableRows[i]);var g=f("td:first",b);if(g.length){var e=b.prevAll(".views-group-title").find("option:selected").html();var a='<span class="views-operator-label">'+e+"</span>";
var d=b.nextAll(":visible").eq(0);var c=g.find(".views-operator-label");if(d.hasClass("draggable")){if(c.length){c.replaceWith(a);}else{g.append(a);}}else{c.remove();}}}};Drupal.viewsUi.rearrangeFilterHandler.prototype.updateRowspans=function(){var h=jQuery;var d,a,c,b,e;var g=h(this.table).find("tr");var f=g.length;for(d=0;d<f;d++){a=h(g[d]);if(a.hasClass("views-group-title")){e=h(a.find("td.group-operator"));b=0;c=a.next("tr");c.removeClass("group-populated").addClass("group-empty");e.attr("rowspan",2);}else{if((a).hasClass("draggable")&&a.is(":visible")){b++;c.removeClass("group-empty").addClass("group-populated");e.attr("rowspan",b+1);}}}};Drupal.behaviors.viewsFilterConfigSelectAll={};Drupal.behaviors.viewsFilterConfigSelectAll.attach=function(a){var b=jQuery;b("#views-ui-config-item-form div.form-item-options-value-all",a).once(function(){b(this).show();}).find("input[type=checkbox]").click(function(){var c=b(this).is(":checked");b(this).parents(".form-checkboxes").find("input[type=checkbox]").each(function(){b(this).attr("checked",c);
});});};Drupal.behaviors.viewsImplicitFormSubmission={};Drupal.behaviors.viewsImplicitFormSubmission.attach=function(a,b){var c=jQuery;c(":text, :password, :radio, :checkbox",a).once("viewsImplicitFormSubmission",function(){c(this).keypress(function(e){if(e.which==13){var g=this.form.id;if(g&&b.viewsImplicitFormSubmission&&b.viewsImplicitFormSubmission[g]&&b.viewsImplicitFormSubmission[g].defaultButton){e.preventDefault();var d=b.viewsImplicitFormSubmission[g].defaultButton;var f=c("#"+d,this.form);if(f.length==1&&f.is(":enabled")){if(Drupal.ajax&&Drupal.ajax[d]){f.trigger(Drupal.ajax[d].element_settings.event);}else{f.click();}}}}});});};Drupal.behaviors.viewsRemoveIconClass={};Drupal.behaviors.viewsRemoveIconClass.attach=function(a,b){jQuery(".ctools-button",a).once("RemoveIconClass",function(){var c=jQuery;var d=c(this);c(".icon",d).removeClass("icon");c(".horizontal",d).removeClass("horizontal");});};Drupal.behaviors.viewsUiCheckboxify={};Drupal.behaviors.viewsUiCheckboxify.attach=function(c,d){var f=jQuery;
var a=f("#edit-options-expose-button-button").once("views-ui-checkboxify");var e=a.length;var b;for(b=0;b<e;b++){new Drupal.viewsUi.Checkboxifier(a[b]);}};Drupal.viewsUi.Checkboxifier=function(a){var b=jQuery;this.$button=b(a);this.$parent=this.$button.parent("div.views-expose");this.$checkbox=this.$parent.find("input:checkbox");this.$button.hide();this.$parent.find(".exposed-description").hide();this.$checkbox.click(b.proxy(this,"clickHandler"));};Drupal.viewsUi.Checkboxifier.prototype.clickHandler=function(a){this.$button.mousedown();this.$button.submit();};Drupal.behaviors.viewsUiOverrideSelect={};Drupal.behaviors.viewsUiOverrideSelect.attach=function(a,b){var c=jQuery;c("#edit-override-dropdown",a).once("views-ui-override-button-text",function(){var e=c("#edit-submit",a);var d=e.val();e.once("views-ui-override-button-text").bind("mouseup",function(){c(this).val(d);return true;});c(this).bind("change",function(){if(c(this).val()=="default"){e.val(Drupal.t("Apply (all displays)"));}else{e.val(Drupal.t("Apply (this display)"));
}}).trigger("change");});};Drupal.viewsUi.resizeModal=function(h,j){var g=jQuery;var l=g(".views-ui-dialog");var f=g(".scroll",l);if(l.size()==0||l.css("display")=="none"){return;}var n=parseInt(g(window).width()*0.85);var a=parseInt(g(window).width()*0.6);l.css("width",a);var b=a;var m=parseInt(g(window).height()*0.8);var p=200;if(j){p=l.height();}if(p>m){p=m;}var o=0;var q=0;q+=parseInt(f.css("padding-top"));q+=parseInt(f.css("padding-bottom"));f.children().each(function(){var e=g(this).innerWidth();if(e>b){b=e;}q+=g(this).outerHeight(true);});var d=0;d+=parseInt(f.css("padding-top"));d+=parseInt(f.css("padding-bottom"));d+=g(".views-override").outerHeight(true);d+=g(".views-messages").outerHeight(true);d+=g("#views-ajax-title").outerHeight(true);d+=g(".views-add-form-selected").outerHeight(true);d+=g(".form-buttons",l).outerHeight(true);o=q+d;if(o>m){o=m;q=m-d;}else{if(o<p){o=p;q=p-d;}}if(b>n){b=n;}var k=(g(window).height()/2)-(o/2);var c=(g(window).width()/2)-(b/2);l.css({top:k+"px",left:c+"px",width:b+"px",height:o+"px"});
g(Drupal.settings.views.ajax.popup).css("height",o+"px");f.css({height:q+"px","max-height":q+"px"});};jQuery(function(){jQuery(window).bind("resize",Drupal.viewsUi.resizeModal);jQuery(window).bind("scroll",Drupal.viewsUi.resizeModal);});