var loadObj=EXPERTUS_SMARTPORTAL_AbstractDetailsWidget;function searchAddUserOrderDataGrid(g,j,b,c,d,a){try{var i="add-user-admin-order";$("body").data("mulitselectdatagrid").createLoader("datagrid-div-"+i);b=b.replace(/\//g,"|");var f=loadObj.constructUrl("administration/order/user-select/"+encodeURIComponent(b)+"/"+a);$("#datagrid-container-"+i).setGridParam({url:f});$("#datagrid-container-"+i).trigger("reloadGrid",[{page:1}]);}catch(h){}}function adminUserFirstnameOrderSelection(f,c){try{var a=f.split(",");$("input[name=first_name]").val(a[1]);var b=$("#form-user-id").val();$("input[name=formitem_userid]:hidden").val(b);loadObj.createLoader("order_create_form_wrapper");$("input[name = 'user_order_creation']").click();}catch(d){}}function adminUserLastnameOrderSelection(f,c){try{var a=f.split(",");$("#edit-panes-productorg-last-name").val(a[1]);var b=$("#form-user-id").val();$("input[name=formitem_userid]:hidden").val(b);loadObj.createLoader("order_create_form_wrapper");$("input[name = 'user_order_creation']").click();
}catch(d){}}function adminUserUsernameOrderSelection(f,c){try{var a=f.split(",");$("input[name=user_name]").val(a[1]);var b=$("#form-user-id").val();$("input[name=formitem_userid]:hidden").val(b);loadObj.createLoader("order_create_form_wrapper");$("input[name = 'user_order_creation']").click();}catch(d){}}function adminUserEmailOrderSelection(f,c){try{var a=f.split(",");$("input[name=email]").val(a[1]);var b=$("#form-user-id").val();$("input[name=formitem_userid]:hidden").val(b);loadObj.createLoader("order_create_form_wrapper");$("input[name = 'user_order_creation']").click();}catch(d){}}function loadAddProductDataGrid(i,f,m,g,p,n){try{var c=(i=="edit")?true:false;var a=(i=="edit")?false:true;var t="";var h=$("body").data("mulitselectdatagrid");h.mode=i;h.type=f;h.entityId=g;h.entityType=p;h.uniqueId="add-product-admin-order";uniqueId="add-product-admin-order";var w=$("#addproduct-autocomplete").val();if(w==Drupal.t("LBL545")){w="";}var b=$("#addproduct-autocomplete_hidden").val();b=b.replace("u0027","'");
if(b==Drupal.t("LBL428")){b="";}h.createLoader("admin_product_addorder_container");var j="&title="+encodeURIComponent(w)+"&dl_type="+encodeURIComponent(b);var l=160,u=120,v=100,q=90,s=80,d=90,k=120;if(Drupal.settings.user.language!==undefined&&$.inArray(Drupal.settings.user.language,["pt-pt","de","es","fr","it","ru"])!=-1){v=140;}var o=l+u+v+q+s+d+k;$("#datagrid-container-"+uniqueId).jqGrid({url:loadObj.constructUrl("administration/order/product-select/"+encodeURIComponent(m)+"/"+n+"/"+j),datatype:"json",mtype:"GET",colNames:[Drupal.t("LBL083"),Drupal.t("LBL096"),Drupal.t("LBL036"),Drupal.t("LBL038"),Drupal.t("LBL040"),Drupal.t("LBL102"),""],colModel:[{name:"Title",index:"cls_title",title:false,width:l,widgetObj:t,sortable:true,formatter:h.displayGridValues},{name:"Code",index:"cls_code",title:false,width:u,widgetObj:t,sortable:true,formatter:h.displayGridValues},{name:"DeliveryType",index:"delivery_type_name",title:false,width:v,widgetObj:t,sortable:true,formatter:h.displayGridValues},{name:"Language",index:"language",title:false,width:q,widgetObj:t,sortable:true,formatter:h.displayGridValues},{name:"Price",index:"price",title:false,width:s,widgetObj:t,sortable:true,formatter:h.displayGridValues},{name:"Status",index:"Status",title:false,width:d,widgetObj:t,sortable:false,formatter:h.displayGridValues},{name:"Add Product",index:"AddProductOrder",title:false,width:k,widgetObj:t,sortable:false,formatter:h.displayGridValues}],rowNum:10,rowList:[10,25,50],pager:"#pager-datagrid-"+uniqueId,viewrecords:true,multiselect:false,emptyrecords:"",sortorder:"asc",toppager:true,botpager:false,height:"auto",width:o,loadtext:"",recordtext:"",pgtext:"{0} of {1}",loadui:false,onSortCol:function(){h.createLoader("admin_product_addorder_container");
},loadComplete:h.callbackDataGrid}).navGrid("#pager-datagrid-"+uniqueId,{add:false,edit:false,del:false,search:false,refreshtitle:true});$("#jqgh_datagrid-container-add-product-admin-order_Status").removeClass("ui-jqgrid-sortable");$("#admin_product_addorder_container #datagrid-div-add-product-admin-order").find("#datagrid-container-add-product-admin-order_toppager").css({position:"absolute",right:"0",top:"-34px",width:"200px"});chkorderpg();}catch(r){}}function chkorderpg(){setTimeout(function(){var a=$("#admin_product_addorder_container #datagrid-div-add-product-admin-order").find("#datagrid-container-add-product-admin-order_toppager").css("display");var b=$("#datagrid-container-"+uniqueId).jqGrid("getGridParam","records");if(a=="block"||b>10){$("#admin-data-grid #admin_product_addorder_container").find(".admin_add_multi_search_container").css("padding-bottom","35px");}else{$("#admin-data-grid #admin_product_addorder_container").find(".admin_add_multi_search_container").css("padding-bottom","35px");
}},1800);}function searchAddOrderProductDataGrid(g,k,b,c,f,h){try{var j="add-product-admin-order";$("body").data("mulitselectdatagrid").createLoader("datagrid-div-"+j);b=b.replace(/\//g,"|");var m=b;if(m==Drupal.t("LBL545")){m="";}var l=$("#addproduct-autocomplete_hidden").val();if(l==Drupal.t("LBL428")){l="";}var a="&title="+encodeURIComponent(m)+"&dl_type="+encodeURIComponent(l);var d=loadObj.constructUrl("administration/order/product-select/"+0+"/"+h+"/"+a);$("#datagrid-container-"+j).setGridParam({url:d});$("#datagrid-container-"+j).trigger("reloadGrid",[{page:1}]);chkorderpg();}catch(i){}}function customAttributeOrderJsValidation(){try{var d=$("#hid_custom_attr_order_mandatroy").data("hval");var b=0;if(d!=""&&d!=undefined){var a=d.split("~~");if(a.length>0){$.each(a,function(m,k){var l=k.split("|");if(l.length>0){var j=l[0];var e=l[1];var i=l[2];if(j=="cattr_type_txtbox"||j=="cattr_type_txtarea"){var f="#edit-panes-billing-"+e;var g=$(f).val();g=g.trim();if(g==""||g==i){b++;}}if(j=="cattr_type_dropdown"||j=="cattr_type_checkbox"||j=="cattr_type_radio"){if(j=="cattr_type_dropdown"){var h="select[id*="+e+"] option:selected";
}else{var h="input[name*=panes[billing]["+e+"]]:checked";}var g=$(h).val();if(g==""||g==undefined||g=="0"||g==0){b++;}}}});}}return b;}catch(c){}}function adminProductOrderSelection(f){try{var c=customAttributeOrderJsValidation();if($("#edit-panes-billing-billing-first-name").val()==""||$("#edit-panes-billing-billing-last-name").val()==""||$("#edit-panes-billing-billing-street1").val()==""||$("#edit-panes-billing-billing-city").val()==""||$("select[id*=billing-country] option:selected").val()==0||$("select[id*=billing-country] option:selected").val()==undefined||$("select[id*=billing-zone] option:selected").val()==0||$("#edit-panes-billing-billing-postal-code").val()==""||c>0){var b=new Array();b[0]=Drupal.t("ERR244");var a=expertus_error_message(b,"error");$(".page-administration-order-create #paintAdminOrderResults #show_expertus_message").html(a);$(".page-administration-order-create #paintAdminOrderResults #show_expertus_message").show();return;}$("input[name=form_selected_nid]:hidden").val(f);
if(f>0){$("input[name = 'order_product_creation']").click();}}catch(d){}}function adminMultiTpOrderSelection(a){try{$("input[name=form_selected_classid]:hidden").val(a);if(a.length>0){$("input[name = 'order_product_creation']").click();}}catch(b){}}function removeAdminCartItem(b){try{$("input[name=form_removed_nid]:hidden").val(b);loadObj.createLoader("order_create_form_wrapper");$("input[name = 'order_remove_cart']").click();}catch(a){}}function deliveryProductHideShow(){try{$("#select-list-dropdown-list").slideToggle();$("#select-list-dropdown-list li:last").css("border-bottom","0px none");}catch(a){}}function deliveryTypeSearch(i,d,c){try{var g="add-product-admin-order";$("#select-list-dropdown-list").hide();$("#select-list-dropdown").text(d);$("#addproduct-autocomplete_hidden").val(i);if(i!=null){$("#select-list-dropdown-list li").each(function(){$("#select-list-dropdown-list li").removeClass("sortype-high-lighter");});$("."+i).addClass("sortype-high-lighter");if(i==Drupal.t("LBL428")){$(".searchany").addClass("sortype-high-lighter");
}}else{$("#select-list-dropdown-list li").each(function(){$("#select-list-dropdown-list li").removeClass("sortype-high-lighter");});}var j=$("#addproduct-autocomplete").val();if(j==Drupal.t("LBL545")){j="";}var h=$("#addproduct-autocomplete_hidden").val();if(h==Drupal.t("LBL428")){h="";}var a="&title="+encodeURIComponent(j)+"&dl_type="+encodeURIComponent(h);$("body").data("mulitselectdatagrid").createLoader("datagrid-div-"+g);var b=loadObj.constructUrl("administration/order/product-select/0/"+c+"/"+a);$("#datagrid-container-"+g).setGridParam({url:b});$("#datagrid-container-"+g).trigger("reloadGrid",[{page:1}]);chkorderpg();}catch(f){}}function setAdminLinkSelected(){try{if($('#block-system-main-menu a[href="/?q=administration"]').hasClass("active")==false){$('#block-system-main-menu a[href="/?q=administration"]').addClass("active-trail active");$('#block-system-main-menu a[href="/?q=administration"]').parent().addClass("active-trail");}}catch(a){}}$(function(){Drupal.ajax.prototype.commands.renderOrderClassPopup=function(h,a,c,d){try{$("#paintAdminOrderResults").remove();
var g=this;this.currTheme=Drupal.settings.ajaxPageState.theme;var k=160,q=120,s=100,m=90,p=80,b=90,l=120;if(Drupal.settings.user.language!==undefined&&$.inArray(Drupal.settings.user.language,["pt-pt","de","es","fr","it","ru"])!=-1){s=140;}var j=k+q+s+m+p+b+l+40;var f="<div id='paintAdminOrderResults'></div>";$("body").append(f);var i="<div id='show_expertus_message'></div><div id='paintAdminOrderResults'></div>";$("#paintAdminOrderResults").html(i);var r={};r[Drupal.t("LBL123")]=function(){$(this).dialog("destroy");$(this).dialog("close");$("#select-order-dialog").remove();};$("#paintAdminOrderResults").dialog({autoResize:true,position:[(getWindowWidth()-j)/2,100],bgiframe:true,width:j,resizable:false,draggable:false,closeOnEscape:false,modal:true,title:SMARTPORTAL.t('<span class="myteam-header-text">'+Drupal.t("Trainings")+'</span><div id="search-cat-keyword"></div>'),buttons:r,overlay:{opacity:0.5,background:"#000000"},open:function(){$(".ui-widget-overlay").eq(-1).css("width",getWindowWidth()-1+"px");
}});$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();$(".ui-dialog").wrap("<div id='select-order-dialog'></div>");$("#paintAdminOrderResults").css("position","");this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){changeDialogPopUI();$("#select-order-dialog").next(".ui-widget-overlay").css("display","block");}$(".ui-dialog-titlebar-close, .removebutton").click(function(){$("#select-class-dialog").next(".ui-widget-overlay").css("display","block");refreshcartpane();$("#paintAdminOrderResults").remove();});var n=$("#paintAdminOrderResults").children().last();n.replaceWith(a.html);Drupal.attachBehaviors();}catch(o){}};});$(function(){try{var b=$("#orderpage_custom_attributes #custom_attr_container").length;if(b>0){var a=$("#orderpage_custom_attributes #custom_attr_container .mul-opt-dd-img").length;if(a>0){$("#orderpage_custom_attributes #custom_attr_container .mul-opt-dd-img").each(function(){$(this).trigger("load");
});}$('#orderpage_custom_attributes #custom_attr_container span[id^="char_count_c_"]').each(function(){var d=$(this).attr("id");var f=$(this).attr("id").replace("char_count_c_","edit-panes-billing-c-").replace("_","-");var h=$("#"+f).data("default-text");var e=$("#"+f).html();if(h!=e&&h!=""){var g=$("#"+f).html().length;$("#"+d).html(g);}});}$("#edit-panes-productorg-first-name").autocomplete("/?q=administration/order/userinfo-autocomplete/first_name",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading",formatItem:function(e){var d="";d+='<div class="order-user-auto"><h4 class="fname-bold">'+e[1]+"</h4>";d+='<div class="fname-detail"><span class="username-class">'+e[2];d+=(e[3])?'</span> | <span class="org-name">'+e[3]+"</span>":"</span></div></div>";return d;},extraParams:{id:"form-user-id",callback:"adminUserFirstnameOrderSelection"}});$("#edit-panes-productorg-last-name").autocomplete("/?q=administration/order/userinfo-autocomplete/last_name",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading",formatItem:function(e){var d="";
d+='<div class="order-user-auto"><h4 class="fname-bold">'+e[1]+"</h4>";d+='<div class="fname-detail"><span class="username-class">'+e[2];d+=(e[3])?'</span> | <span class="org-name">'+e[3]+"</span>":"</span></div></div>";return d;},extraParams:{id:"form-user-id",callback:"adminUserLastnameOrderSelection"}});$("#edit-panes-productorg-username").autocomplete("/?q=administration/order/userinfo-autocomplete/user_name",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading",formatItem:function(e){var d="";d+='<div class="order-user-auto"><h4 class="fname-bold">'+e[1]+"</h4>";d+='<div class="fname-detail"><span class="username-class">'+e[2];d+=(e[3])?'</span> | <span class="org-name">'+e[3]+"</span>":"</span></div></div>";return d;},extraParams:{id:"form-user-id",callback:"adminUserUsernameOrderSelection"}});$("#edit-panes-productorg-email").autocomplete("/?q=administration/order/userinfo-autocomplete/email",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading",formatItem:function(e){var d="";
d+='<div class="order-user-auto"><h4 class="fname-bold">'+e[1]+"</h4>";d+='<div class="fname-detail"><span class="username-class">'+e[2];d+=(e[3])?'</span> | <span class="org-name">'+e[3]+"</span>":"</span></div></div>";return d;},extraParams:{id:"form-user-id",callback:"adminUserEmailOrderSelection"}});}catch(c){}});Drupal.behaviors.removeInputGreyfromCustomAttribute={attach:function(a,b){try{if($("#custom_attr_container input").hasClass("input-field-grey")||$("#custom_attr_container textarea").hasClass("input-field-grey")){$("#custom_attr_container .input-field-grey").each(function(){var e=$(this).val().toLowerCase();var d=$(this).data("default-text").toLowerCase();if(e!=d){$(this).removeClass("input-field-grey");}});}}catch(c){}}};Drupal.behaviors.orderAdminApplyDiscountTextArea={attach:function(a,b){$("#uc-discounts-codes").each(function(){try{textareaId=$(this).attr("id");$.data(this,"default",this.value);if(this.value==Drupal.t("MSG472")){$("#"+textareaId).css("color","#999999");$("#"+textareaId).css("font-size","10px");
$("#"+textareaId).css("line-height","21px");}else{$("#"+textareaId).css("color","#333333");$("#"+textareaId).css("font-size","12px");}}catch(c){}}).focus(function(){try{if(this.value!=Drupal.t("MSG472")){$.data(this,"edited",this.value);}if(!$.data(this,"edited")){this.value="";$("#"+textareaId).css("color","#333333");$("#"+textareaId).css("font-size","12px");}}catch(c){}}).change(function(){try{$.data(this,"edited",this.value!="");}catch(c){}}).blur(function(){try{if(this.value==""&&!$.data(this,"edited")){this.value=Drupal.t("MSG472");$.data(this,"default",this.value);$("#"+textareaId).css("color","#999999");$("#"+textareaId).css("font-size","10px");}}catch(c){}});}};function refreshcartpane(){try{$.ajax({type:"GET",url:"?q=ajax/order/cartpane/update",success:function(b){$("#clone_cart-pane").html(b);textareaVal=$.trim($("textarea[id*=uc-discounts-codes]").val());if(textareaVal!=Drupal.t("MSG472")&&textareaVal!=null&&textareaVal!=""&&textareaVal!=undefined){setTimeout(function(){$("#uc-discounts-button").click();
},200);}Drupal.attachBehaviors();}});}catch(a){alert(a);}}