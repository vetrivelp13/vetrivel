(function(a){a.widget("ui.lnrmyteamapproval",{_init:function(){try{var c=this;var b="";this.searchStrValue=b;this.renderSearchResults(b);this.blockHighlight();}catch(d){}},blockHighlight:function(){try{if(a('#block-system-main-menu a[href="/?q=learning/myteam-search"]').hasClass("active")==false){a('#block-system-main-menu a[href="/?q=learning/myteam-search"]').addClass("active-trail active");a('#block-system-main-menu a[href="/?q=learning/myteam-search"]').parent().addClass("active-trail");}}catch(b){}},renderSearchResults:function(b){try{this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var l=726;var i=70;var d=475;var g=100;}else{var c=Drupal.settings.user.language;if(c=="it"){var l=764;var i=68;var d=519;var g=200;}else{var l=764;var i=68;var d=589;var g=130;}}this.createLoader("lnr-myteam-search");var f=this;var h=(b!="")?("&title="+encodeURIComponent(b)):"";var k='$("#lnr-myteam-approval").data("lnrmyteamapproval")';a("#paintContentResults").jqGrid({url:f.constructUrl("learning/myteam-myapproval/search/all/"+h),datatype:"json",mtype:"GET",colNames:["Icons","Details","Action"],colModel:[{name:"Icons",index:"Icons",title:false,width:i,widgetObj:k,formatter:f.paintLPSearchIcons},{name:"Details",index:"Details",title:false,width:d,widgetObj:k,formatter:f.paintLPSearchResults},{name:"Action",index:"Action",title:false,width:g,widgetObj:k,formatter:f.paintLPSearchResultsAction}],rowNum:10,rowList:[10,20,30],pager:"#pager",viewrecords:true,emptyrecords:"",toppager:true,height:"auto",width:l,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,loadComplete:f.callbackLoader}).navGrid("#pager",{add:false,edit:false,del:false,search:false,refreshtitle:true});
a(".sort-by-links li").each(function(){a(this).find("a").removeClass("sortype-high-lighter");});a(".type1").addClass("sortype-high-lighter");}catch(j){}},callbackLoader:function(c,k,i){try{var j=parseInt(a("#paintContentResults").getGridParam("records"),10);a("#search-link-content").html(c.links);a("#paintContentResults").show();if(j==0){a("#gview_paintContentResults").css("display","none");var f=Drupal.t("MSG403")+".";a("#no-records").css("display","block").css("padding","10px").css("color","#777777").css("textAlign","center").css("lineHeight","40px");a("#no-records").html(f);}else{a("#gview_paintContentResults").css("display","block");a("#no-records").css("display","none");a("#no-records").html("");}var d=a("#lnr-myteam-approval").data("lnrmyteamapproval");var b=parseInt(a("#paintContentResults").getGridParam("reccount"),10);var g=true;if(c.records>10){g=false;}if(j<=b){d.hidePageControls(g);}else{d.showPageControls();}a("#lnr-myteam-approval").data("lnrmyteamapproval").destroyLoader("lnr-myteam-approval");
a("#lnr-myteam-approval").data("lnrmyteamapproval").destroyLoader("lnr-myteam-approval");a("#lnr-myteam-approval").data("lnrmyteamapproval").destroyLoader("searchRecordsPaint");if(a("#lnr-myteam-approval").data("lnrmyteamapproval").defaults.start){a("#search-filter-content").html(c.filter);a("#find-trng-sort-display").show();a("#lnr-myteam-approval").data("lnrmyteamapproval").defaults.start=false;}else{a("#lnr-myteam-approval").data("lnrmyteamapproval").unselectFilter(c);}a("#search-link-content").html(c.links);a("#search-filter-content").html(c.filter);vtip();resetFadeOutByClass("#paintContentResults","content-detail-code","line-item-container","team");a(".limit-title").trunk8(trunk8.myteamname_title);a("#lnr-myteam-search #paintCountry").jScrollPane({});}catch(h){console.log(h);}},unselectFilter:function(b){try{}catch(c){}},paintLPSearchIcons:function(b,c,f){try{return f.image;}catch(d){}},paintLPSearchResults:function(b,c,f){try{return f.details;}catch(d){}},paintLPSearchResultsAction:function(b,c,f){try{return f.action;
}catch(d){}},showMoreApprovalAction:function(f,c){try{var b=0;if(a("#more-"+c).css("display")=="block"){b=1;}a(".team-more-action").hide();if(b==0){a("#more-"+c).css("display","block");}else{a("#more-"+c).css("display","none");}}catch(d){}},paintUsrNameAutocomplete:function(){try{a("#srch_criteria_location").autocomplete("/?q=learning/myteam-myapproval/username-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(b){}},highlightedText:function(c,h){try{if(h=="it"||h=="ru"){var b="10px";}else{var b="12px";}var d=a("#"+c).data("default-text");var g=this;a("#"+c).blur(function(){if(a("#"+c).val()!=d){a(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if(a("#"+c).val()==""){a(this).val(d).css("color","#999999").css("fontSize",b);if(g.currTheme!="expertusoneV2"){a(this).css("fontStyle","italic");}}});a("#"+c).focus(function(){if(a("#"+c).val()!=d){a(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");
}if(a("#"+c).val()==d){a(this).val("").css("color","#333333").css("fontSize",b);if(g.currTheme!="expertusoneV2"){a(this).css("fontStyle","italic");}}});a("#"+c).change(function(){if(a("#"+c).val()!=d){a(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if(a("#"+c).val()==""){a(this).val(d).css("color","#999999").css("fontSize",b);if(g.currTheme!="expertusoneV2"){a(this).css("fontStyle","italic");}}});}catch(f){}},searchAction:function(h,k){try{var c="";var f="";a(".country-others").each(function(){if(a(this).is(":checked")){f+=f!=""?"|":"";f+=a(this).val();}});var m=a("#search_searchtext").val();if(m==Drupal.t("LBL304").toUpperCase()){m="";}var o=a("#approval_startdate1").val();var d=a("#approval_startdate2").val();var p=/^\d{2}-\d{2}-\d{4}$/;if(o==Drupal.t("LBL112")||o.match(p)==null){o="";}else{a("#date-clr").css("display","block");}if(d==Drupal.t("LBL113")||d==Drupal.t("LBL112")||d.match(p)==null){d="";}else{a("#date-clr").css("display","block");}var n=a("#srch_criteria_location").val();
if(n==Drupal.t("Type Name")){n="";}else{a("#location-clr").css("display","block");}var g=a("#srch_criteria_username").val();if(g==Drupal.t("LBL181")){g="";}else{a("#username-clr").css("display","block");}var l=h;var b="";a(".report-others").each(function(){if(a(this).is(":checked")){b+=b!=""?"|":"";b+=a(this).val();}});var i=a("#myteam_searchtext").val();if(i.toLowerCase()==(Drupal.t("LBL304").toLowerCase())){i="";}c="&title="+encodeURIComponent(m)+"&reporttype="+b+"&startdate="+o+"&enddate="+d+"&location="+n+"&cy_type="+f+"&sortby="+l+"&searchusername="+i;this.searchStrValue=c;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){a("#paintContentResults tr.cus-accord:not(.noborder)").prev("tr").children("td").css("border-bottom","1px solid #EDEDED");}else{a("#paintContentResults tr.cus-accord:not(.noborder)").prev("tr").children("td").css("border-bottom","dotted 1px #ccc");}a("#paintContentResults tr.cus-accord").remove();this.createLoader("searchRecordsPaint");
a("#paintContentResults").setGridParam({url:this.constructUrl("learning/myteam-myapproval/search/all/"+c)});a("#paintContentResults").trigger("reloadGrid",[{page:1}]);this.checkboxValidation();a(".sort-by-links li").each(function(){a(this).find("a").removeClass("sortype-high-lighter");});if(!k){a(".type1").addClass("sortype-high-lighter");}else{a("."+k).addClass("sortype-high-lighter");}}catch(j){}},paintAfterReady:function(){try{var c=a("#approval_startdate1").datepicker({duration:"",showTime:false,constrainInput:false,stepMinutes:5,stepHours:1,time24h:true,dateFormat:"mm-dd-yy",buttonImage:themepath+"/expertusone-internals/images/calendar_icon.JPG",buttonImageOnly:true,firstDay:0,showOn:"both",buttonText:Drupal.t("LBL675"),showButtonPanel:true,changeMonth:true,changeYear:true});var c=a("#approval_startdate2").datepicker({duration:"",showTime:false,constrainInput:false,stepMinutes:5,stepHours:1,time24h:true,dateFormat:"mm-dd-yy",buttonImage:themepath+"/expertusone-internals/images/calendar_icon.JPG",buttonImageOnly:true,firstDay:0,showOn:"both",buttonText:Drupal.t("LBL676"),showButtonPanel:true,changeMonth:true,changeYear:true,beforeShow:a("#lnr-myteam-approval").data("lnrmyteamapproval").customRangeDate});
}catch(b){}},customRangeDate:function(b){try{var f=null;var c=null;if(b.id=="approval_startdate1"&&a("#approval_startdate2").datepicker("getDate")!=null){f=new Date();c=a("#approval_startdate2").datepicker("getDate");c.setDate(f.getDate()+20000);}else{if(b.id=="approval_startdate2"){c=new Date();if(a("#approval_startdate1").datepicker("getDate")!=null){f=a("#approval_startdate1").datepicker("getDate");c=a("#approval_startdate1").datepicker("getDate");c.setDate(c.getDate()+20000);}}}return{minDate:f,maxDate:c};}catch(d){}},clearField:function(b){try{if(b=="Location"){a("#srch_criteria_location").val(Drupal.t("Type Name")).css("color","#999999").css("fontSize","11px");if(this.currTheme!="expertusoneV2"){a("#srch_criteria_location").css("fontStyle","italic");}a("#location-clr").css("display","none");}else{if(b=="Username"){a("#srch_criteria_username").val(Drupal.t("LBL181")).css("color","#999999").css("fontSize","11px");if(this.currTheme!="expertusoneV2"){a("#srch_criteria_username").css("fontStyle","italic");
}a("#username-clr").css("display","none");}else{if(b=="Date"){a("#approval_startdate1").val(Drupal.t("LBL251")+":"+Drupal.t("LBL112")).css("color","#999999").css("fontSize","11px");a("#approval_startdate2").val(Drupal.t("LBL113")).css("color","#999999").css("fontSize","11px");a("#date-clr").css("display","none");}}}this.searchAction();}catch(c){}},locationEnterKey:function(){try{obj=this;a("#srch_criteria_location").keyup(function(c){if(c.keyCode==13){obj.searchAction();}});}catch(b){}},VerifyRejectCert:function(h,c){try{var b=a(".ui-pg-input").val();var d="/?q=learning/profile/certificate/verify/"+h+"/"+c+"";var g=this;a.ajax({type:"POST",url:d,success:function(){a("#paintContentResults").trigger("reloadGrid",[{page:b}]);}});}catch(f){}},checkboxValidation:function(){try{a("#searchopts-content").find("input[type=checkbox]").each(function(){if(a(this).is(":checked")){if(a(this).val()!="All"){a(this).parent().next("label").removeClass("highlight-light-blue");a(this).parent().next("label").addClass("highlight-light-gray");
a(this).parent().removeClass("checkbox-unselected");a(this).parent().addClass("checkbox-selected");}}else{if(a(this).val()!="All"){a(this).parent().next("label").removeClass("highlight-light-gray");a(this).parent().next("label").addClass("highlight-light-blue");a(this).parent().removeClass("checkbox-selected");a(this).parent().addClass("checkbox-unselected");}}});}catch(b){}},showHide:function(f,d){try{a("#"+d).toggle();var c=a("#"+f).hasClass("cls-show");if(c){a("#"+f).removeClass("cls-show");a("#"+f).addClass("cls-hide");}else{a("#"+f).removeClass("cls-hide");a("#"+f).addClass("cls-show");}a("#srch_criteria_catkeyword").flushCache();}catch(b){}},hightlightedText:function(d,b,g){try{var c=Drupal.settings.ajaxPageState.theme;var h=(c=="expertusoneV2")?"normal":"italic";if(d.type=="blur"){if(a("#"+b).val()!=g){a("#"+b).css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}if(a("#"+b).val()==""){a("#"+b).val(g).css("color","#999999").css("fontSize","10px").css("fontStyle",h);
}}else{if(d.type=="focus"){if(a("#"+b).val()!=g){a("#"+b).css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}if(a("#"+b).val()==g){a("#"+b).val("").css("color","#333333").css("fontSize","11px").css("fontStyle",h);}}else{if(d.type=="change"){if(a("#"+b).val()!=g){a("#"+b).css("color","#333333").css("fontSize","11px").css("fontStyle","normal");}if(a("#"+b).val()==""){a("#"+b).val(g).css("color","#999999").css("fontSize","11px").css("fontStyle",h);}}}}}catch(f){}},dateValidationCheck:function(){try{var f=a("#approval_startdate1").val();var c=a("#approval_startdate2").val();if(a("#approval_startdate1").val()=="Start: mm-dd-yyyy"){f="";}if(a("#approval_startdate2").val()=="End: mm-dd-yyyy"){c="";}var b=f.split("-");var h=c.split("-");var l=b[2]+"-"+b[0]+"-"+b[1];var k=h[2]+"-"+h[0]+"-"+h[1];var t=new Date(l);var s=new Date(k);var n=new Date();var q=n.getMonth()+1;var m=n.getDate();var i=n.getFullYear();var j=i+"-"+q+"-"+m;var p=new Date(j);var r=s-t;var g=t-p;var d=s-p;
a("#date-validate-newid").remove();this.searchAction("date");}catch(o){}},hideMoreApprovalAction:function(c){try{this.prevMoreLPObj="";}catch(b){}},ShowCertificateDet:function(b,c,d,k,f){try{var g=this;var h="";h+='<div  class = "cert_name"><label>'+Drupal.t("LBL205")+":</label>";h+='<span  class = "cls-crt-lbl-val vtip " title = "'+b+'"> '+titleRestrictionFadeoutImage(b,"my-cert-name-fadeout-container")+"</span></div>";h+='<div  class = "cert_name"><label>'+Drupal.t("Company")+":</label>";h+='<span  class = "cls-crt-lbl-val vtip" title = "'+c+'">'+titleRestrictionFadeoutImage(c,"my-company-name-fadeout-container")+"</span></span></div>";h+='<div  class = "cert_name"><label>'+Drupal.t("LBL205")+" "+Drupal.t("LBL161")+":</label>";h+='<span  class = "cls-crt-lbl-val vtip" title = "'+d+'">'+titleRestrictionFadeoutImage(d,"my-cert-number-fadeout-container")+"</span></div>";h+='<div  class = "cert_name"><label>'+Drupal.t("LBL604")+":</label>";h+='<span  class = "cls-crt-lbl-val vtip" title = "'+k+'">'+titleRestrictionFadeoutImage(k,"my-validity-date-fadeout-container")+"</span></div>";
h+='<div  class = "cert_name"><label>'+Drupal.t("LBL610")+" "+Drupal.t("LBL205").toLowerCase()+":</label>";h+='<span  class = "cls-crt-lbl-val vtip" title = "'+f+'">'+titleRestrictionFadeoutImage(f,"my-file-name-fadeout-container")+"</span></div>";var i='<div id="certificate_det_container" class="view_cert-container"></div>';a("#certificate_det_container").remove();a("#cert_dialouge_holder").remove();a("body").append(i);a("#certificate_det_container").html(h);var l={};l[SMARTPORTAL.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#certificate_det_container").remove();};a("#certificate_det_container").dialog({bgiframe:true,width:420,resizable:false,draggable:false,closeOnEscape:false,modal:true,title:Drupal.t("Certificate"),buttons:l,close:function(){a("#certificate_det_container").remove();a("#cert_dialouge_holder").remove();},overlay:{opacity:0.4,background:"#000000"}});a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');
a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").attr("tabindex",6);a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").attr("tabindex",7);this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){changeDialogPopUI();}a(".ui-dialog").wrap("<div id='cert_dialouge_holder' class='refer-course-holder'></div>");a("#cert_dialouge_holder a.ui-dialog-titlebar-close").html("X");a(".refer-class-container").css("width","93.2%");a(".refer-class-container").css("height","auto");vtip(".view_cert-container");}catch(j){}},viewCertificate:function(b,i,h){try{var c=this;var d="";d+='<div  class = "cert_name">';if(h=="pdf"||h=="PDF"){d+='<iframe src="'+i+'" class="vtip" /></div>';
}else{if(h=="png"||h=="PNG"){d+='<img src="'+i+'" class="vtip" /></div>';}}var f='<div id="certificate_det_container" class="view_cert-container pdfWrap" style="padding:0"></div>';a("#certificate_det_container").remove();a("#cert_dialouge_holder").remove();a("body").append(f);a("#certificate_det_container").html(d);var j={};j[SMARTPORTAL.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#certificate_det_container").remove();};if(b.length>70){var k='<div class="line-item-container float-left cusSpanStyle"><span title="'+Drupal.t(b)+'" class="vtip">'+titleRestrictionFadeoutImage(Drupal.t(b),"certificateTitle")+"</span></div>";}else{var k='<div class="line-item-container float-left cusSpanStyle"><span title="'+Drupal.t(b)+'" class="vtip">'+Drupal.t(b)+"</span></div>";}a("#certificate_det_container").dialog({bgiframe:true,width:688,resizable:false,draggable:false,closeOnEscape:false,modal:true,title:k,buttons:j,close:function(){a("#certificate_det_container").remove();
a("#cert_dialouge_holder").remove();},overlay:{opacity:0.4,background:"#000000"}});a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").attr("tabindex",6);a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").attr("tabindex",7);this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){changeDialogPopUI();}a(".ui-dialog").wrap("<div id='cert_dialouge_holder' class='refer-course-holder'></div>");a("#cert_dialouge_holder a.ui-dialog-titlebar-close").html("X");a(".refer-class-container").css("width","93.2%");a(".refer-class-container").css("height","auto");
}catch(g){}},hidePageControls:function(b){try{var d=a("#paintContentResults tr.ui-widget-content").filter(":last");if(b){if(this.currTheme=="expertusoneV2"){a("#paintContent .block-footer-left").show();}a("#pager").hide();if(d.length!=0){d.children("td").css("border","0 none");}}else{a("#pager").show();if(this.currTheme=="expertusoneV2"){a("#paintContent .block-footer-left").hide();}a("#pager #pager_center #first_pager").hide();a("#pager #pager_center #last_pager").hide();a("#pager #pager_center #next_pager").hide();a("#pager #pager_center #prev_pager").hide();a("#pager #pager_center #sp_1_pager").parent().hide();}}catch(c){}},showPageControls:function(){try{a("#pager").show();if(this.currTheme=="expertusoneV2"){a("#paintContent .block-footer-left").hide();}a("#pager #pager_center #first_pager").show();a("#pager #pager_center #last_pager").show();a("#pager #pager_center #next_pager").show();a("#pager #pager_center #prev_pager").show();a("#pager #pager_center #sp_1_pager").parent().show();
}catch(b){}}});a.extend(a.ui.lnrmyteamapproval.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget,{defaults:{start:true,catStart:true}});})(jQuery);$(function(){try{$("#lnr-myteam-approval").lnrmyteamapproval();}catch(a){}});function highlightLink(){$("#myteamlink").css("text-decoration","");$("#myapprovallink").css("text-decoration","underline");}$("#myteam-search-txt").click(function(){try{if($(".page-myapproval-myteam-certificate").length>0){$("#lnr-myteam-approval").data("lnrmyteamapproval").searchAction();}}catch(a){}});