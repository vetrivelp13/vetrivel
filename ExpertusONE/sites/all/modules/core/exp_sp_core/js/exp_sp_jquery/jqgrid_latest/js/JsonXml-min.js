var xmlJsonClass={xml2json:function(b,d){if(b.nodeType===9){b=b.documentElement;}var a=this.removeWhite(b);var e=this.toObj(a);var c=this.toJson(e,b.nodeName,"\t");return"{\n"+d+(d?c.replace(/\t/g,d):c.replace(/\t|\n/g,""))+"\n}";},json2xml:function(d,c){var e=function(q,f,h){var o="";var l,g;if(q instanceof Array){if(q.length===0){o+=h+"<"+f+">__EMPTY_ARRAY_</"+f+">\n";}else{for(l=0,g=q.length;l<g;l+=1){var p=h+e(q[l],f,h+"\t")+"\n";o+=p;}}}else{if(typeof(q)==="object"){var k=false;o+=h+"<"+f;var j;for(j in q){if(q.hasOwnProperty(j)){if(j.charAt(0)==="@"){o+=" "+j.substr(1)+'="'+q[j].toString()+'"';}else{k=true;}}}o+=k?">":"/>";if(k){for(j in q){if(q.hasOwnProperty(j)){if(j==="#text"){o+=q[j];}else{if(j==="#cdata"){o+="<![CDATA["+q[j]+"]]>";}else{if(j.charAt(0)!=="@"){o+=e(q[j],j,h+"\t");}}}}}o+=(o.charAt(o.length-1)==="\n"?h:"")+"</"+f+">";}}else{if(typeof(q)==="function"){o+=h+"<"+f+"><![CDATA["+q+"]]></"+f+">";}else{if(q.toString()==='""'||q.toString().length===0){o+=h+"<"+f+">__EMPTY_STRING_</"+f+">";
}else{o+=h+"<"+f+">"+q.toString()+"</"+f+">";}}}}return o;};var b="";var a;for(a in d){if(d.hasOwnProperty(a)){b+=e(d[a],a,"");}}return c?b.replace(/\t/g,c):b.replace(/\t|\n/g,"");},toObj:function(b){var g={};var f=/function/i;if(b.nodeType===1){if(b.attributes.length){var e;for(e=0;e<b.attributes.length;e+=1){g["@"+b.attributes[e].nodeName]=(b.attributes[e].nodeValue||"").toString();}}if(b.firstChild){var a=0,d=0,c=false;var h;for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===1){c=true;}else{if(h.nodeType===3&&h.nodeValue.match(/[^ \f\n\r\t\v]/)){a+=1;}else{if(h.nodeType===4){d+=1;}}}}if(c){if(a<2&&d<2){this.removeWhite(b);for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===3){g["#text"]=this.escape(h.nodeValue);}else{if(h.nodeType===4){if(f.test(h.nodeValue)){g[h.nodeName]=[g[h.nodeName],h.nodeValue];}else{g["#cdata"]=this.escape(h.nodeValue);}}else{if(g[h.nodeName]){if(g[h.nodeName] instanceof Array){g[h.nodeName][g[h.nodeName].length]=this.toObj(h);}else{g[h.nodeName]=[g[h.nodeName],this.toObj(h)];
}}else{g[h.nodeName]=this.toObj(h);}}}}}else{if(!b.attributes.length){g=this.escape(this.innerXml(b));}else{g["#text"]=this.escape(this.innerXml(b));}}}else{if(a){if(!b.attributes.length){g=this.escape(this.innerXml(b));if(g==="__EMPTY_ARRAY_"){g="[]";}else{if(g==="__EMPTY_STRING_"){g="";}}}else{g["#text"]=this.escape(this.innerXml(b));}}else{if(d){if(d>1){g=this.escape(this.innerXml(b));}else{for(h=b.firstChild;h;h=h.nextSibling){if(f.test(b.firstChild.nodeValue)){g=b.firstChild.nodeValue;break;}else{g["#cdata"]=this.escape(h.nodeValue);}}}}}}}if(!b.attributes.length&&!b.firstChild){g=null;}}else{if(b.nodeType===9){g=this.toObj(b.documentElement);}else{alert("unhandled node type: "+b.nodeType);}}return g;},toJson:function(b,a,d,e){if(e===undefined){e=true;}var p=a?('"'+a+'"'):"",f="\t",g="\n";if(!e){f="";g="";}if(b==="[]"){p+=(a?":[]":"[]");}else{if(b instanceof Array){var c,k,j=[];for(k=0,c=b.length;k<c;k+=1){j[k]=this.toJson(b[k],"",d+f,e);}p+=(a?":[":"[")+(j.length>1?(g+d+f+j.join(","+g+d+f)+g+d):j.join(""))+"]";
}else{if(b===null){p+=(a&&":")+"null";}else{if(typeof(b)==="object"){var l=[],h;for(h in b){if(b.hasOwnProperty(h)){l[l.length]=this.toJson(b[h],h,d+f,e);}}p+=(a?":{":"{")+(l.length>1?(g+d+f+l.join(","+g+d+f)+g+d):l.join(""))+"}";}else{if(typeof(b)==="string"){p+=(a&&":")+'"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"';}else{p+=(a&&":")+'"'+b.toString()+'"';}}}}}return p;},innerXml:function(d){var b="";if("innerHTML" in d){b=d.innerHTML;}else{var a=function(j){var g="",f;if(j.nodeType===1){g+="<"+j.nodeName;for(f=0;f<j.attributes.length;f+=1){g+=" "+j.attributes[f].nodeName+'="'+(j.attributes[f].nodeValue||"").toString()+'"';}if(j.firstChild){g+=">";for(var h=j.firstChild;h;h=h.nextSibling){g+=a(h);}g+="</"+j.nodeName+">";}else{g+="/>";}}else{if(j.nodeType===3){g+=j.nodeValue;}else{if(j.nodeType===4){g+="<![CDATA["+j.nodeValue+"]]>";}}}return g;};for(var e=d.firstChild;e;e=e.nextSibling){b+=a(e);}}return b;},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r");
},removeWhite:function(b){b.normalize();var c;for(c=b.firstChild;c;){if(c.nodeType===3){if(!c.nodeValue.match(/[^ \f\n\r\t\v]/)){var a=c.nextSibling;b.removeChild(c);c=a;}else{c=c.nextSibling;}}else{if(c.nodeType===1){this.removeWhite(c);c=c.nextSibling;}else{c=c.nextSibling;}}}return b;}};