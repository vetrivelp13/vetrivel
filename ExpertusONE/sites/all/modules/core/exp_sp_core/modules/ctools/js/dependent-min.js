(function(a){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.dependent={};Drupal.CTools.dependent.bindings={};Drupal.CTools.dependent.activeBindings={};Drupal.CTools.dependent.activeTriggers=[];Drupal.CTools.dependent.inArray=function(d,c){var b=d.length;while(b--){if(d[b]==c){return true;}}return false;};Drupal.CTools.dependent.autoAttach=function(){for(i in Drupal.CTools.dependent.activeTriggers){a(Drupal.CTools.dependent.activeTriggers[i]).unbind("change");}Drupal.CTools.dependent.activeTriggers=[];Drupal.CTools.dependent.activeBindings={};Drupal.CTools.dependent.bindings={};if(!Drupal.settings.CTools){return;}for(id in Drupal.settings.CTools.dependent){Drupal.CTools.dependent.activeBindings[id]=0;for(bind_id in Drupal.settings.CTools.dependent[id].values){if(!Drupal.CTools.dependent.bindings[bind_id]){Drupal.CTools.dependent.bindings[bind_id]=[];}Drupal.CTools.dependent.bindings[bind_id].push(id);if(bind_id.substring(0,6)=="radio:"){var d="input[name='"+bind_id.substring(6)+"']";}else{var d="#"+bind_id;
}Drupal.CTools.dependent.activeTriggers.push(d);if(a(d).attr("type")=="checkbox"){a(d).siblings("label").addClass("hidden-options");}var c=function(f,e){if(a(e).size()==0){return null;}if(f.substring(0,6)=="radio:"){var g=a(e+":checked").val();}else{switch(a(e).attr("type")){case"checkbox":var g=a(e).attr("checked")||0;if(g){a(e).siblings("label").removeClass("hidden-options").addClass("expanded-options");}else{a(e).siblings("label").removeClass("expanded-options").addClass("hidden-options");}break;default:var g=a(e).val();}}return g;};var b=function(f,g){var e=function(){var l=c(g,f);if(l==null){return;}for(i in Drupal.CTools.dependent.bindings[g]){var m=Drupal.CTools.dependent.bindings[g][i];if(typeof m!="string"){continue;}if(!Drupal.CTools.dependent.activeBindings[m]){Drupal.CTools.dependent.activeBindings[m]={};}if(l!=null&&Drupal.CTools.dependent.inArray(Drupal.settings.CTools.dependent[m].values[g],l)){Drupal.CTools.dependent.activeBindings[m][g]="bind";}else{delete Drupal.CTools.dependent.activeBindings[m][g];
}var h=0;for(i in Drupal.CTools.dependent.activeBindings[m]){h++;}var k=a("#"+m+"-wrapper");if(!k.size()){var j=a("#"+m);if(j.is("fieldset")||j.is("textarea")){continue;}k=a("#"+m).parent();}if(Drupal.settings.CTools.dependent[m].type=="disable"){if(Drupal.settings.CTools.dependent[m].num<=h){k.attr("disabled",false);k.addClass("dependent-options");k.children().attr("disabled",false);}else{k.attr("disabled",true);k.children().attr("disabled",true);}}else{if(Drupal.settings.CTools.dependent[m].num<=h){k.show(0);k.addClass("dependent-options");}else{k.css("display","none");}}}};a(f).change(function(){e(f,g);});e(f,g);};b(d,bind_id);}}};Drupal.behaviors.CToolsDependent={attach:function(b){Drupal.CTools.dependent.autoAttach();a("select.ctools-master-dependent:not(.ctools-processed)").addClass("ctools-processed").change(function(){var c=a(this).val();if(c=="all"){a(".ctools-dependent-all").show(0);}else{a(".ctools-dependent-all").hide(0);a(".ctools-dependent-"+c).show(0);}}).trigger("change");
}};})(jQuery);