(function($){$.widget("ui.contentLaunch",{_init:function(){try{var self=this;this.obj=null;var scorm_api_init=null;}catch(e){}},launchWBTContent:function(data){try{if(isLaunched||(winobj!==undefined&&!winobj.closed)){$("body").data("learningcore").enrollChangeClassErrorMessage(Drupal.t("Content"),Drupal.t("MSG754"),1);return false;}var pmType=data.contentType;var classid=data.classId;var courseid=data.courseId;var stdid=this.getLearnerId();var stdname=this.getUserName();var pmPath=data.url1;var contentVersion;var contentType;var contentQuizStatus=data.contentQuizStatus;if(stdid=="0"||stdid==""){self.location="?q=learning/enrollment-search";return;}if(data.LaunchFrom=="LP"){$("#learningplan-tab-inner").data("learningplan").createLoader("enroll-lp-result-container");$("#learningplan-tab-inner").data("contentLaunch").updateFrom="LP";if(document.getElementById("learner-enrollment-tab-inner")){$("#learner-enrollment-tab-inner").data("contentLaunch").updateFrom="";}disableWidgetDeleteAction("block-exp-sp-lnrlearningplan-tab-my-learningplan");
}else{if(data.LaunchFrom=="CL"){$("#lnr-catalog-search").data("contentLaunch").updateFrom="CL";}else{$("#learner-enrollment-tab-inner").data("enrollment").createLoader("enroll-result-container");$("#learner-enrollment-tab-inner").data("contentLaunch").updateFrom="ME";if(document.getElementById("learningplan-tab-inner")){$("#learningplan-tab-inner").data("contentLaunch").updateFrom="";}disableWidgetDeleteAction("block-exp-sp-lnrenrollment-tab-my-enrollment");}}this.launchParam={launchUrl:data.url1,userId:stdid,username:stdname,courseid:courseid,classid:classid,lessonid:data.Id,versionid:data.VersionId,enrollid:data.enrollId,prevcontentstatus:data.Status,LaunchFrom:data.LaunchFrom,aicc_sid:data.AICC_SID};if(pmType.toLowerCase()=="scorm 1.2"||pmType.toLowerCase()=="scorm 2004"){pmType=pmType;var pmTypeVer=pmType.split(" ");contentType=pmTypeVer[0];contentVersion=pmTypeVer[1];}else{contentVersion="";contentType=pmType;}var x={version:contentVersion,type:contentType};scoobj=new SCORM_API_WRAPPER(x);
var lessonlocation=data.LessonLocation==null||data.LessonLocation==undefined||data.LessonLocation=="null"||data.LessonLocation==""?"":data.LessonLocation;var launch_data=data.launch_data==null||data.launch_data==undefined||data.launch_data=="null"||data.launch_data==""?"":data.launch_data;var suspend_data=data.suspend_data==null||data.suspend_data==undefined||data.suspend_data=="null"||data.suspend_data==""?"":unescape(data.suspend_data);var exit=data.exit==null||data.exit==undefined||data.exit==""?"":data.exit;var AICC_SID=data.AICC_SID==null||data.AICC_SID==undefined||data.AICC_SID==""?"":data.AICC_SID;suspend_data=decodeURIComponent(suspend_data);lessonlocation=decodeURIComponent(lessonlocation);var launchButton=$("#"+data.Id+"_"+data.enrollId+"_launch_button");if(launchButton.length>0){var launchButtonData=eval(launchButton.data("relaunch"));if(launchButtonData.length){lessonlocation=launchButtonData[0].lessonlocation;launch_data=launchButtonData[0].launchData;suspend_data=decodeURIComponent(unescape(launchButtonData[0].suspendData));
exit=launchButtonData[0].exit;}}if(checkEncodedState(suspend_data)==false){}else{suspend_data=decodeURIComponent(suspend_data);}if(checkEncodedState(lessonlocation)==false){}else{lessonlocation=decodeURIComponent(lessonlocation);}var newobj=this;$.ajax({url:"?q=ajax/getcdnurl/"+data.Id,success:function(result){if(document.getElementById("learningplan-tab-inner")){$("#learningplan-tab-inner").data("learningplan").destroyLoader("enroll-lp-result-container");}if(document.getElementById("learner-enrollment-tab-inner")){$("#learner-enrollment-tab-inner").data("enrollment").destroyLoader("enroll-result-container");}if(document.getElementById("lnr-catalog-search")){$("#lnr-catalog-search").data("enrollment").destroyLoader("enroll-result-container");}var output=result.split("~~");url1=output[0];cdnstatus=output[1];if(scoobj._type.toLowerCase()=="scorm"){scorm_api_init=new Object();scorm_api_init.session_time="0000:00:00.00";scorm_api_init.lesson_location=lessonlocation;scorm_api_init.launch_data=launch_data;
scorm_api_init.suspend_data=suspend_data;scorm_api_init.version=scoobj._version;if(scoobj._version=="2004"){scorm_api_init.completion_status="not attempted";scorm_api_init.success_status="unknown";}else{scorm_api_init.lesson_status="not attempted";}}if(cdnstatus==1){var data1={url:url1,callback:newobj.updateScore,learnerId:stdid,learnerName:stdname,completionStatus:"not attempted",successStatus:"unknown",scoreMax:"0",scoreMin:"0",score:"0",location:lessonlocation,courseid:courseid,classid:classid,lessonid:data.Id,versionid:data.VersionId,enrollid:data.enrollId,launch_data:launch_data,suspend_data:suspend_data,exit:exit,aicc_sid:AICC_SID,MasteryScore:data.MasteryScore};scoobj.Initialize(data1);}else{var data1={url:pmPath,callback:newobj.updateScore,learnerId:stdid,learnerName:stdname,contentQuizStatus:data.contentQuizStatus,completionStatus:"not attempted",successStatus:"unknown",scoreMax:"0",scoreMin:"0",score:"0",location:lessonlocation,courseid:courseid,classid:classid,lessonid:data.Id,versionid:data.VersionId,enrollid:data.enrollId,launch_data:launch_data,suspend_data:suspend_data,exit:exit,aicc_sid:AICC_SID,MasteryScore:data.MasteryScore};
scoobj.Initialize(data1);}}});}catch(e){}},updateScore:function(callback_param){try{var setObj;var updateFrom;if(document.getElementById("learningplan-tab-inner")){if($("#learningplan-tab-inner").data("contentLaunch").updateFrom=="LP"){setObj=$("#learningplan-tab-inner").data("contentLaunch");updateFrom="LP";}activateWidgetDeleteAction("block-exp-sp-lnrlearningplan-tab-my-learningplan");}if(document.getElementById("learner-enrollment-tab-inner")){if($("#learner-enrollment-tab-inner").data("contentLaunch").updateFrom=="ME"){setObj=$("#learner-enrollment-tab-inner").data("contentLaunch");updateFrom="ME";}activateWidgetDeleteAction("block-exp-sp-lnrenrollment-tab-my-enrollment");}if(document.getElementById("lnr-catalog-search")){if($("#lnr-catalog-search").data("contentLaunch").updateFrom=="CL"){setObj=$("#lnr-catalog-search").data("contentLaunch");updateFrom="CL";}if($("#lnr-catalog-search").data("contentLaunch").updateFrom=="ME"){setObj=$("#lnr-catalog-search").data("contentLaunch");updateFrom="ME";
}}var sestime="0";var courseComplitionStatus="";var lObj="'"+setObj+"'";var launchflag=0;var crid=setObj.launchParam.courseid;var clid=setObj.launchParam.classid;var lesid=setObj.launchParam.lessonid;var versionid=setObj.launchParam.versionid;var enrollid=setObj.launchParam.enrollid;var stid=setObj.launchParam.userId;var prevcontentstatus=setObj.launchParam.prevcontentstatus;var regId=setObj.launchParam.enrollid;var aicc_sid=setObj.launchParam.aicc_sid;var contentType="scorm 1.2";var contentVersion="";var result=(callback_param!==undefined&&(scoobj._type.toLowerCase()=="scorm"||scoobj._type.toLowerCase()=="knowledge content"))?callback_param:scoobj.Finish();var status="";var scmax="";var scmin="";var score="";var loc="";var compstatus="";var launch_data="";var suspend_data="";var exit="";var grade="";var xstatus="";if(typeof(result)!=undefined&&typeof(result)!="undefined"){status=result.status;score=result.score;sestime=result.sessionTime;loc=result.location;compstatus=result.completionStatus;
launch_data=result.launch_data;suspend_data=result.suspend_data;exit=result.exit;launchflag=(callback_param!==undefined)?result.launchflag:0;}var is_scorm_api_changed=true;if(scoobj._type!="Knowledge Content"&&scoobj._type!="Tin Can"){if(prevcontentstatus!="Completed"){if(scoobj._type.toLowerCase()=="scorm"&&scoobj._version=="2004"){var completion_status=compstatus.toLowerCase();var success_status=status.toLowerCase();if(completion_status=="completed"){xstatus="lrn_crs_cmp_cmp";}else{if(completion_status=="unknown"&&(success_status=="unknown"||success_status=="passed")){xstatus="lrn_crs_cmp_cmp";}else{xstatus="lrn_crs_cmp_inp";}}}else{if(status.toLowerCase()=="passed"||status.toLowerCase()=="failed"||status.toLowerCase()=="completed"||status.toLowerCase()=="unknown"){xstatus="lrn_crs_cmp_cmp";}else{xstatus="lrn_crs_cmp_inp";}}}else{xstatus="lrn_crs_cmp_cmp";}if(scoobj._type.toLowerCase()=="scorm"){if(scoobj._version=="2004"){if(compstatus=="not attempted"&&scorm_api_init.session_time==sestime&&scorm_api_init.lesson_location==loc&&scorm_api_init.launch_data==launch_data&&scorm_api_init.suspend_data==suspend_data&&scorm_api_init.success_status==status){is_scorm_api_changed=false;
}}else{if(status=="not attempted"&&scorm_api_init.session_time==sestime&&scorm_api_init.lesson_location==loc&&scorm_api_init.launch_data==launch_data&&scorm_api_init.suspend_data==suspend_data){is_scorm_api_changed=false;}}}}else{if(scoobj._type=="Tin Can"){xstatus="lrn_crs_cmp_inp";}else{if(scoobj._type=="Knowledge Content"){if(status.toLowerCase()=="completed"){xstatus="lrn_crs_cmp_cmp";}else{xstatus="lrn_crs_cmp_inp";}}else{xstatus="lrn_crs_cmp_cmp";status="Completed";}}}if(score==undefined||score==""){score="0";grade="";}$("#"+lesid+"_launch_score").html(score);$("#"+lesid+"launch_grade").html(grade);$("#"+lesid+"_launch_status").html(xstatus);$("#surveybutton_"+clid).css("display","block");$("#lanchlinks1_"+clid+"").click();var type="";if(setObj.launchParam.launchUrl!=null&&setObj.launchParam.launchUrl.indexOf("h5p/embed")>0){type="h5p";var mystr=setObj.launchParam.launchUrl;var myarr=mystr.split("/");var h5p_cnt_id=myarr[2];}var launchData={regid:regId,stid:stid,classid:clid,courseid:crid,lessonid:lesid,versionid:versionid,status:xstatus,max:scmax,min:scmin,score:score,grade:grade,sestime:sestime,location:loc,enrollid:enrollid,courseComplitionStatus:courseComplitionStatus,launch_data:launch_data,suspend_data:encodeURIComponent(suspend_data),exit:exit,contentstatus:status,compstatus:compstatus,contenttype:scoobj._type,contentversion:scoobj._version,aicc_sid:aicc_sid,is_scorm_api_changed:is_scorm_api_changed,launchflag:launchflag,type:type,h5p_cnt_id:h5p_cnt_id};
var passUrl="launch&regid="+regId+"&stid="+stid+"&classid="+clid+"&courseid="+crid+"&lessonid="+lesid+"&versionid="+versionid+"&status="+xstatus+"&max="+scmax+"&min="+scmin;passUrl=passUrl+"&score="+score+"&grade="+grade+"&sestime="+sestime+"&location="+loc+"&enrollid="+enrollid+"&courseComplitionStatus="+courseComplitionStatus;passUrl=passUrl+"&contentstatus="+status+"&launch_data="+launch_data+"&suspend_data="+suspend_data+"&exit="+exit+"&aicc_sid="+aicc_sid;var url="";var post_data="";if(scoobj._type=="AICC"||scoobj._type=="AICC Course Structure"){var sid=aicc_sid;passUrl="session_id="+sid+"&command=UPDATELMSDATA";url=resource.base_url+"/sites/all/commonlib/AICC_Handler.php";post_data={session_id:callback_param,command:"UPDATELMSDATA",launchflag:launchflag};}else{if(scoobj._type=="Tin Can"){var sid=aicc_sid;passUrl="Authorization="+sid+"&command=UPDATELMSDATA";url=resource.base_url+"/sites/all/commonlib/TinCan_Handler.php";post_data={"Authorization=":callback_param,command:"UPDATELMSDATA",launchflag:launchflag};
}else{url=resource.base_url+"/?q=ajax/update-launch/launch";post_data=launchData;}}if(launchflag==0){if(document.getElementById("launch-wizard")){$("#launch-wizard").css("overflow-x","hidden");setObj.createLoader("launch-wizard");}if(document.getElementById("launch-lp-wizard")){$("#launch-lp-wizard").css("overflow-x","hidden");setObj.createLoader("launch-lp-wizard");}if(document.getElementById("learningplan-tab-inner")){setObj.createLoader("enroll-lp-result-container");}if(document.getElementById("lnr-catalog-search")){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");if(document.getElementById("course-details-display-content")){$("#course-details-display-content").data("lnrcoursedetails").createLoader("class-list-loader");}if(document.getElementById("learning-plan-details-display-content")){$("#learning-plan-details-display-content").data("lnrplandetails").createLoader("class-container-loader-"+clid);}if(document.getElementById("class_detail_content")){$("#class_detail_content").data("lnrclassdetails").createLoader("class_detail_content");
}if(document.getElementById("tbl-paintCatalogContentResults")){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("paintCatalogContentResults"+stid);}}}var obj=this;if(callback_param==null&&$("#content-to-maximize").find("iframe").length>0){$("#content-to-maximize").find("iframe").each(function(){$(this).remove();});Drupal.CTools.Modal.dismiss();winobj.closed=true;isLaunched=false;}$.ajax({type:"POST",url:url,data:post_data,success:function(result){if(launchflag==1){return;}scoobj=new Object();if(document.getElementById("learner-enrollment-tab-inner")){if(document.getElementById("launch-content-container")){$("#paintEnrollmentResults").setGridParam({postData:{lessonId:lesid,enrollmentId:regId}});if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentResults")==false){$("#paintEnrollmentResults").trigger("reloadGrid");}}else{if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentResults")==false){$("#paintEnrollmentResults").trigger("reloadGrid");
}}setObj.destroyLoader("launch-wizard");$("#launch-wizard").css("overflow","auto");}if(document.getElementById("learningplan-tab-inner")){if(document.getElementById("lplaunch-content-container")){$("#paintEnrollmentLPResults").setGridParam({postData:{lessonId:lesid,enrollmentId:regId}});if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentLPResults")==false){$("#paintEnrollmentLPResults").trigger("reloadGrid");}}else{if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentLPResults")==false){$("#paintEnrollmentLPResults").trigger("reloadGrid");}}setObj.destroyLoader("launch-lp-wizard");$("#launch-lp-wizard").css("overflow","auto");}if(document.getElementById("lnr-catalog-search")){if(document.getElementById("launch-wizard")){setObj.createLoader("launch-wizard");}$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");
url=setObj.constructUrl("ajax/learningcore/register-to-launch/"+stid+"/"+clid+"/"+crid+"/"+regId+"/lrn_cls_dty_wbt/1/"+lesid);$.ajax({type:"POST",url:url,success:function(result){if(result){result_arr=result.split("*~*");var launched_info=$.parseJSON(result_arr[1]);var lessonCnt=result_arr[2];$("#lnr-catalog-search").data("enrollment").updateMultiContentLaunchDialog(regId,lesid,launched_info.triggering_lesson_details,launched_info.triggering_content_quiz_status);var html_out="<div "+result_arr[0]+"</div>";if(document.getElementById("launch"+regId)){$("#launch"+regId).replaceWith(html_out);Drupal.attachBehaviors($("#launch"+regId));}if(document.getElementById("registerCls_"+clid)){$("#registerCls_"+clid).replaceWith(html_out);Drupal.attachBehaviors($("#registerCls_"+clid));}paintContentStatus(launched_info,crid,clid,"",lessonCnt,regId);}$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("searchRecordsPaint");if(document.getElementById("launch-content-container")){$("#lnr-catalog-search").data("enrollment").scrollBarContentDialog();
}if(document.getElementById("tbl-paintCatalogContentResults")){if(document.getElementById("launch"+regId)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("launch"+regId);}else{if(document.getElementById("registerCls_"+clid)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("registerCls_"+clid);}}$("#tbl-paintCatalogContentResults").trigger("reloadGrid");}if(document.getElementById("paintContentResults")){if(document.getElementById("launch"+regId)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("launch"+regId);}else{if(document.getElementById("registerCls_"+clid)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("registerCls_"+clid);}}if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch")=="undefined"||$("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow()==false){$("#paintContentResults").trigger("reloadGrid");}}if(document.getElementById("launch-wizard")){setObj.destroyLoader("launch-wizard");}if(document.getElementById("course-details-display-content")){$("#course-details-display-content").data("lnrcoursedetails").destroyLoader("class-list-loader");
}if(document.getElementById("learning-plan-details-display-content")){$("#learning-plan-details-display-content").data("lnrplandetails").destroyLoader("class-container-loader-"+clid);}if(document.getElementById("class_detail_content")){$("#class_detail_content").data("lnrclassdetails").destroyLoader("class_detail_content");}}});}if(document.getElementById("my_transcript_jqgrid")){$("#my_transcript_jqgrid").trigger("reloadGrid");}for(var line_item in result){if(line_item==0){if(result[line_item].CompMessage=="Attempts Over"){callLaunchMessageWindow(Drupal.t("LBL929"),Drupal.t("MSG915"));}}}}});}catch(e){}},updateVODScoreOnCtoolsModalClose:function(launchedFrom,courseId,classId,lessonId,versionId,enrollId,prevContentStatus,videoSessionId,type,h5p_cnt_id){try{if(winobj!==undefined){winobj.closed=true;}var setObj;var updateFrom;if(launchedFrom=="LP"){setObj=$("#learningplan-tab-inner").data("contentLaunch");updateFrom="LP";$("#launch-lp-wizard").parent().css("display","block");activateWidgetDeleteAction("block-exp-sp-lnrlearningplan-tab-my-learningplan");
if(launchflag==0){if(document.getElementById("launch-lp-wizard")){setObj.createLoader("launch-lp-wizard");$("#launch-lp-wizard").css("overflow-x","hidden");}else{if(document.getElementById("enroll-lp-result-container")){setObj.createLoader("enroll-lp-result-container");}}}}else{if(launchedFrom=="ME"){if(document.getElementById("lnr-catalog-search")){setObj=$("#lnr-catalog-search").data("contentLaunch");}else{setObj=$("#learner-enrollment-tab-inner").data("contentLaunch");}updateFrom="ME";$("#class_detail_content #launch-wizard").show();$("#launch-wizard").parent().css("display","block");activateWidgetDeleteAction("block-exp-sp-lnrenrollment-tab-my-enrollment");if(launchflag==0){if(document.getElementById("launch-wizard")){setObj.createLoader("launch-wizard");$("#launch-wizard").css("overflow-x","hidden");}else{if(document.getElementById("paintEnrollmentResults")){setObj.createLoader("enroll-result-container");}}}}}var crid=parseInt(courseId);var clid=parseInt(classId);var lesid=parseInt(lessonId);
var versionid=parseInt(versionId);var enrollid=parseInt(enrollId);var stid=this.getLearnerId();var regId=parseInt(enrollId);var status="";var xstatus="";if(stid=="0"||stid==""){self.location="?q=learning/enrollment-search";return;}status="Completed";xstatus="lrn_crs_cmp_cmp";$("#"+lesid+"_launch_status").html(xstatus);$("#surveybutton_"+clid).css("display","block");$("#lanchlinks1_"+clid+"").click();var video_suspend_data=null;if(typeof videoTrackerProgress!="undefined"&&videoTrackerProgress!=null){videoTrackerProgress.progress=Math.round((videoTrackerProgress.current_position/videoTrackerProgress.video_duration)*100);videoTrackerProgress.progress=videoTrackerProgress.progress>100?100:videoTrackerProgress.progress;video_suspend_data=videoTrackerProgress;}var launchflag=0;if(videoSessionId!=undefined&&videoSessionId==1){launchflag=1;}var launchData={regid:regId,stid:stid,classid:clid,courseid:crid,lessonid:lesid,versionid:versionid,enrollid:enrollid,prev_content_status:prevContentStatus,video_suspend_data:JSON.stringify(video_suspend_data),type:type,h5p_cnt_id:h5p_cnt_id,launchflag:launchflag};
url=resource.base_url+"/?q=ajax/update-launch/launch";post_data=launchData;if(launchflag==0){if(document.getElementById("lnr-catalog-search")){if(document.getElementById("course-details-display-content")){$("#course-details-display-content").data("lnrcoursedetails").createLoader("class-list-loader");}if(document.getElementById("learning-plan-details-display-content")){$("#learning-plan-details-display-content").data("lnrplandetails").createLoader("class-container-loader-"+classId);}if(document.getElementById("class_detail_content")){$("#class_detail_content").data("lnrclassdetails").createLoader("class_detail_content");}}}var obj=this;$.ajax({type:"POST",url:url,data:post_data,success:function(result){if(launchflag==1){return;}disposeVideoJSPlayer("all");for(i=0;i<result.length;i++){if(result[i].ID==parseInt(lesid)){$("#"+lesid+"_"+regId+"attempts_left").html(result[i].contValidateMsg);}}if(launchedFrom=="LP"){if(document.getElementById("launch-lp-wizard")){setObj.destroyLoader("launch-lp-wizard");
$("#launch-lp-wizard").css("overflow-x","hidden");}else{if(document.getElementById("paintEnrollmentLPResults")){setObj.destroyLoader("paintEnrollmentLPResults");}}}else{if(launchedFrom=="ME"){if(document.getElementById("launch-wizard")){setObj.destroyLoader("launch-wizard");$("#launch-wizard").css("overflow-x","hidden");}else{if(document.getElementById("enroll-result-container")){setObj.destroyLoader("enroll-result-container");}}}}if(document.getElementById("lnr-catalog-search")){if(document.getElementById("launch-wizard")){$("#launch-wizard").css("overflow","hidden");obj.createLoader("launch-wizard");}$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("searchRecordsPaint");url=obj.constructUrl("ajax/learningcore/register-to-launch/"+stid+"/"+clid+"/"+crid+"/"+regId+"/lrn_cls_dty_vod/1/"+lesid);$.ajax({type:"POST",url:url,success:function(result){if(result){result_arr=result.split("*~*");var launched_info=$.parseJSON(result_arr[1]);var lessonCnt=result_arr[2];$("#lnr-catalog-search").data("enrollment").updateMultiContentLaunchDialog(regId,lesid,launched_info.triggering_lesson_details,launched_info.triggering_content_quiz_status);
var html_out="<div "+result_arr[0]+"</div>";if(document.getElementById("launch"+regId)){$("#launch"+regId).replaceWith(html_out);Drupal.attachBehaviors($("#launch"+regId));}if(document.getElementById("registerCls_"+clid)){$("#registerCls_"+clid).replaceWith(html_out);Drupal.attachBehaviors($("#registerCls_"+clid));}paintContentStatus(launched_info,crid,clid,"",lessonCnt,regId);}if(document.getElementById("launch-content-container")){$("#lnr-catalog-search").data("enrollment").scrollBarContentDialog();}if(document.getElementById("tbl-paintCatalogContentResults")){if(document.getElementById("launch"+regId)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("launch"+regId);}else{if(document.getElementById("registerCls_"+clid)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("registerCls_"+clid);}}$("#tbl-paintCatalogContentResults").trigger("reloadGrid");}if(document.getElementById("paintContentResults")){if(document.getElementById("launch"+regId)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("launch"+regId);
}else{if(document.getElementById("registerCls_"+clid)){$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader("registerCls_"+clid);}}if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch")=="undefined"||$("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow()==false){$("#paintContentResults").trigger("reloadGrid");}}$("#lnr-catalog-search").data("lnrcatalogsearch").destroyLoader("searchRecordsPaint");if(document.getElementById("launch-wizard")){obj.destroyLoader("launch-wizard");}$("#class_detail_content #launch-wizard").hide();if(document.getElementById("course-details-display-content")){$("#course-details-display-content").data("lnrcoursedetails").destroyLoader("class-list-loader");}if(document.getElementById("learning-plan-details-display-content")){$("#learning-plan-details-display-content").data("lnrplandetails").destroyLoader("class-container-loader-"+clid);}if(document.getElementById("class_detail_content")){$("#class_detail_content").data("lnrclassdetails").destroyLoader("class_detail_content");
}resetFadeOutByClass("#launch-wizard","item-title-code","line-item-container","mylearning");}});}if(document.getElementById("learner-enrollment-tab-inner")){if(document.getElementById("launch-content-container")){$("#paintEnrollmentResults").setGridParam({postData:{lessonId:lesid,enrollmentId:regId}});if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentResults")==false){$("#paintEnrollmentResults").trigger("reloadGrid");}}else{if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentResults")==false){$("#paintEnrollmentResults").trigger("reloadGrid");}}}if(document.getElementById("learningplan-tab-inner")){if(document.getElementById("lplaunch-content-container")){$("#paintEnrollmentLPResults").setGridParam({postData:{lessonId:lesid,enrollmentId:regId}});if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentLPResults")==false){$("#paintEnrollmentLPResults").trigger("reloadGrid");
}}else{if(typeof $("body").data("learningcore")=="undefined"||$("body").data("learningcore").refreshLastAccessedLearningRow("#paintEnrollmentLPResults")==false){$("#paintEnrollmentLPResults").trigger("reloadGrid");}}}if(xstatus=="lrn_crs_cmp_cmp"&&document.getElementById("my_transcript_jqgrid")){$("#my_transcript_jqgrid").trigger("reloadGrid");}for(var line_item in result){if(line_item==0){if(result[line_item].CompMessage=="Attempts Over"){callLaunchMessageWindow(Drupal.t("LBL929"),Drupal.t("MSG915"));}}}}});}catch(e){}}});$.extend($.ui.contentLaunch.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);})(jQuery);var obj;$(function(){try{if(document.getElementById("learner-enrollment-tab-inner")){$("#learner-enrollment-tab-inner").contentLaunch();}if(document.getElementById("learningplan-tab-inner")){$("#learningplan-tab-inner").contentLaunch();}if(document.getElementById("lnr-catalog-search")){$("#lnr-catalog-search").contentLaunch();}}catch(a){}});
function callLaunchMessageWindow(f,c){try{if(f=="registertitle"){f=Drupal.t("LBL721");}$("#commonMsg-wizard").remove();var b="";b+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';b+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';b+='<tr><td height="30"></td></tr>';b+="<tr>";b+='<td align="center"><span class="select-greyed-out-text">'+SMARTPORTAL.t(c)+"</span></td>";b+="</tr>";b+="</table>";b+="</div>";$("body").append(b);var a={};a[Drupal.t("LBL123")]=function(){$(this).dialog("destroy");$(this).dialog("close");$("#commonMsg-wizard").remove();};$("#commonMsg-wizard").dialog({position:[(getWindowWidth()-500)/2,100],bgiframe:true,width:520,resizable:false,modal:true,title:SMARTPORTAL.t(f),buttons:a,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();this.currTheme=Drupal.settings.ajaxPageState.theme;if($.browser.msie&&parseInt($.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||$.browser.msie&&parseInt($.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").before('<div class="white-btn-bg-left"></div>');
$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass(" white-btn-bg-middle");$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").after('<div class="white-btn-bg-right"></div>');$(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").next(".white-btn-bg-right").css("margin-right","0px");}if(this.currTheme=="expertusoneV2"){$("#select-class-equalence-dialog").prevAll().removeAttr("select-class-equalence-dialog");$("#commonMsg-wizard").closest(".ui-dialog").wrap("<div id='select-class-equalence-dialog'></div>");$("#select-class-equalence-dialog").find(".ui-dialog-content").addClass("commonMsg-select-class");changeChildDialogPopUI("select-class-equalence-dialog");if($.browser.msie&&parseInt($.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||$.browser.msie&&parseInt($.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){$("#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").prev(".white-btn-bg-left").remove();
$("#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").next(".white-btn-bg-right").remove();}}else{$("#select-class-equalence-dialog").prevAll().removeAttr("select-class-equalence-dialog");$("#commonMsg-wizard").closest(".ui-dialog").wrap("<div id='select-class-equalence-dialog'></div>");changeChildDialogPopUI("select-class-equalence-dialog");$("#select-class-equalence-dialog").prev(".ui-widget-overlay").css("display","none");}$("#commonMsg-wizard").show();$(".ui-dialog-titlebar-close,.removebutton").click(function(){$("#commonMsg-wizard").remove();$("#select-class-dialog").next(".ui-widget-overlay").css("display","block");});}catch(d){}}