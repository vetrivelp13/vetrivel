
/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(E,B){function ka(a,b,d){if(d===B&&a.nodeType===1){d=a.getAttribute("data-"+b);if(typeof d==="string"){try{d=d==="true"?true:d==="false"?false:d==="null"?null:!c.isNaN(d)?parseFloat(d):Ja.test(d)?c.parseJSON(d):d}catch(e){}c.data(a,b,d)}else d=B}return d}function U(){return false}function ca(){return true}function la(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function Ka(a){var b,d,e,f,h,l,k,o,x,r,A,C=[];f=[];h=c.data(this,this.nodeType?"events":"__events__");if(typeof h==="function")h=
h.events;if(!(a.liveFired===this||!h||!h.live||a.button&&a.type==="click")){if(a.namespace)A=RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");a.liveFired=this;var J=h.live.slice(0);for(k=0;k<J.length;k++){h=J[k];h.origType.replace(X,"")===a.type?f.push(h.selector):J.splice(k--,1)}f=c(a.target).closest(f,a.currentTarget);o=0;for(x=f.length;o<x;o++){r=f[o];for(k=0;k<J.length;k++){h=J[k];if(r.selector===h.selector&&(!A||A.test(h.namespace))){l=r.elem;e=null;if(h.preType==="mouseenter"||
h.preType==="mouseleave"){a.type=h.preType;e=c(a.relatedTarget).closest(h.selector)[0]}if(!e||e!==l)C.push({elem:l,handleObj:h,level:r.level})}}}o=0;for(x=C.length;o<x;o++){f=C[o];if(d&&f.level>d)break;a.currentTarget=f.elem;a.data=f.handleObj.data;a.handleObj=f.handleObj;A=f.handleObj.origHandler.apply(f.elem,arguments);if(A===false||a.isPropagationStopped()){d=f.level;if(A===false)b=false;if(a.isImmediatePropagationStopped())break}}return b}}function Y(a,b){return(a&&a!=="*"?a+".":"")+b.replace(La,
"`").replace(Ma,"&")}function ma(a,b,d){if(c.isFunction(b))return c.grep(a,function(f,h){return!!b.call(f,h,f)===d});else if(b.nodeType)return c.grep(a,function(f){return f===b===d});else if(typeof b==="string"){var e=c.grep(a,function(f){return f.nodeType===1});if(Na.test(b))return c.filter(b,e,!d);else b=c.filter(b,e)}return c.grep(a,function(f){return c.inArray(f,b)>=0===d})}function na(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var e=c.data(a[d++]),f=c.data(this,
e);if(e=e&&e.events){delete f.handle;f.events={};for(var h in e)for(var l in e[h])c.event.add(this,h,e[h][l],e[h][l].data)}}})}function Oa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function oa(a,b,d){var e=b==="width"?a.offsetWidth:a.offsetHeight;if(d==="border")return e;c.each(b==="width"?Pa:Qa,function(){d||(e-=parseFloat(c.css(a,"padding"+this))||0);if(d==="margin")e+=parseFloat(c.css(a,
"margin"+this))||0;else e-=parseFloat(c.css(a,"border"+this+"Width"))||0});return e}function da(a,b,d,e){if(c.isArray(b)&&b.length)c.each(b,function(f,h){d||Ra.test(a)?e(a,h):da(a+"["+(typeof h==="object"||c.isArray(h)?f:"")+"]",h,d,e)});else if(!d&&b!=null&&typeof b==="object")c.isEmptyObject(b)?e(a,""):c.each(b,function(f,h){da(a+"["+f+"]",h,d,e)});else e(a,b)}function S(a,b){var d={};c.each(pa.concat.apply([],pa.slice(0,b)),function(){d[this]=a});return d}function qa(a){if(!ea[a]){var b=c("<"+
a+">").appendTo("body"),d=b.css("display");b.remove();if(d==="none"||d==="")d="block";ea[a]=d}return ea[a]}function fa(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var t=E.document,c=function(){function a(){if(!b.isReady){try{t.documentElement.doScroll("left")}catch(j){setTimeout(a,1);return}b.ready()}}var b=function(j,s){return new b.fn.init(j,s)},d=E.jQuery,e=E.$,f,h=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,l=/\S/,k=/^\s+/,o=/\s+$/,x=/\W/,r=/\d/,A=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,
C=/^[\],:{}\s]*$/,J=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,I=/(?:^|:|,)(?:\s*\[)+/g,L=/(webkit)[ \/]([\w.]+)/,g=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,n=/(mozilla)(?:.*? rv:([\w.]+))?/,m=navigator.userAgent,p=false,q=[],u,y=Object.prototype.toString,F=Object.prototype.hasOwnProperty,M=Array.prototype.push,N=Array.prototype.slice,O=String.prototype.trim,D=Array.prototype.indexOf,R={};b.fn=b.prototype={init:function(j,
s){var v,z,H;if(!j)return this;if(j.nodeType){this.context=this[0]=j;this.length=1;return this}if(j==="body"&&!s&&t.body){this.context=t;this[0]=t.body;this.selector="body";this.length=1;return this}if(typeof j==="string")if((v=h.exec(j))&&(v[1]||!s))if(v[1]){H=s?s.ownerDocument||s:t;if(z=A.exec(j))if(b.isPlainObject(s)){j=[t.createElement(z[1])];b.fn.attr.call(j,s,true)}else j=[H.createElement(z[1])];else{z=b.buildFragment([v[1]],[H]);j=(z.cacheable?z.fragment.cloneNode(true):z.fragment).childNodes}return b.merge(this,
j)}else{if((z=t.getElementById(v[2]))&&z.parentNode){if(z.id!==v[2])return f.find(j);this.length=1;this[0]=z}this.context=t;this.selector=j;return this}else if(!s&&!x.test(j)){this.selector=j;this.context=t;j=t.getElementsByTagName(j);return b.merge(this,j)}else return!s||s.jquery?(s||f).find(j):b(s).find(j);else if(b.isFunction(j))return f.ready(j);if(j.selector!==B){this.selector=j.selector;this.context=j.context}return b.makeArray(j,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},
toArray:function(){return N.call(this,0)},get:function(j){return j==null?this.toArray():j<0?this.slice(j)[0]:this[j]},pushStack:function(j,s,v){var z=b();b.isArray(j)?M.apply(z,j):b.merge(z,j);z.prevObject=this;z.context=this.context;if(s==="find")z.selector=this.selector+(this.selector?" ":"")+v;else if(s)z.selector=this.selector+"."+s+"("+v+")";return z},each:function(j,s){return b.each(this,j,s)},ready:function(j){b.bindReady();if(b.isReady)j.call(t,b);else q&&q.push(j);return this},eq:function(j){return j===
-1?this.slice(j):this.slice(j,+j+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(N.apply(this,arguments),"slice",N.call(arguments).join(","))},map:function(j){return this.pushStack(b.map(this,function(s,v){return j.call(s,v,s)}))},end:function(){return this.prevObject||b(null)},push:M,sort:[].sort,splice:[].splice};b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var j,s,v,z,H,G=arguments[0]||{},K=1,Q=arguments.length,ga=false;
if(typeof G==="boolean"){ga=G;G=arguments[1]||{};K=2}if(typeof G!=="object"&&!b.isFunction(G))G={};if(Q===K){G=this;--K}for(;K<Q;K++)if((j=arguments[K])!=null)for(s in j){v=G[s];z=j[s];if(G!==z)if(ga&&z&&(b.isPlainObject(z)||(H=b.isArray(z)))){if(H){H=false;v=v&&b.isArray(v)?v:[]}else v=v&&b.isPlainObject(v)?v:{};G[s]=b.extend(ga,v,z)}else if(z!==B)G[s]=z}return G};b.extend({noConflict:function(j){E.$=e;if(j)E.jQuery=d;return b},isReady:false,readyWait:1,ready:function(j){j===true&&b.readyWait--;
if(!b.readyWait||j!==true&&!b.isReady){if(!t.body)return setTimeout(b.ready,1);b.isReady=true;if(!(j!==true&&--b.readyWait>0))if(q){var s=0,v=q;for(q=null;j=v[s++];)j.call(t,b);b.fn.trigger&&b(t).trigger("ready").unbind("ready")}}},bindReady:function(){if(!p){p=true;if(t.readyState==="complete")return setTimeout(b.ready,1);if(t.addEventListener){t.addEventListener("DOMContentLoaded",u,false);E.addEventListener("load",b.ready,false)}else if(t.attachEvent){t.attachEvent("onreadystatechange",u);E.attachEvent("onload",
b.ready);var j=false;try{j=E.frameElement==null}catch(s){}t.documentElement.doScroll&&j&&a()}}},isFunction:function(j){return b.type(j)==="function"},isArray:Array.isArray||function(j){return b.type(j)==="array"},isWindow:function(j){return j&&typeof j==="object"&&"setInterval"in j},isNaN:function(j){return j==null||!r.test(j)||isNaN(j)},type:function(j){return j==null?String(j):R[y.call(j)]||"object"},isPlainObject:function(j){if(!j||b.type(j)!=="object"||j.nodeType||b.isWindow(j))return false;if(j.constructor&&
!F.call(j,"constructor")&&!F.call(j.constructor.prototype,"isPrototypeOf"))return false;for(var s in j);return s===B||F.call(j,s)},isEmptyObject:function(j){for(var s in j)return false;return true},error:function(j){throw j;},parseJSON:function(j){if(typeof j!=="string"||!j)return null;j=b.trim(j);if(C.test(j.replace(J,"@").replace(w,"]").replace(I,"")))return E.JSON&&E.JSON.parse?E.JSON.parse(j):(new Function("return "+j))();else b.error("Invalid JSON: "+j)},noop:function(){},globalEval:function(j){if(j&&
l.test(j)){var s=t.getElementsByTagName("head")[0]||t.documentElement,v=t.createElement("script");v.type="text/javascript";if(b.support.scriptEval)v.appendChild(t.createTextNode(j));else v.text=j;s.insertBefore(v,s.firstChild);s.removeChild(v)}},nodeName:function(j,s){return j.nodeName&&j.nodeName.toUpperCase()===s.toUpperCase()},each:function(j,s,v){var z,H=0,G=j.length,K=G===B||b.isFunction(j);if(v)if(K)for(z in j){if(s.apply(j[z],v)===false)break}else for(;H<G;){if(s.apply(j[H++],v)===false)break}else if(K)for(z in j){if(s.call(j[z],
z,j[z])===false)break}else for(v=j[0];H<G&&s.call(v,H,v)!==false;v=j[++H]);return j},trim:O?function(j){return j==null?"":O.call(j)}:function(j){return j==null?"":j.toString().replace(k,"").replace(o,"")},makeArray:function(j,s){var v=s||[];if(j!=null){var z=b.type(j);j.length==null||z==="string"||z==="function"||z==="regexp"||b.isWindow(j)?M.call(v,j):b.merge(v,j)}return v},inArray:function(j,s){if(s.indexOf)return s.indexOf(j);for(var v=0,z=s.length;v<z;v++)if(s[v]===j)return v;return-1},merge:function(j,
s){var v=j.length,z=0;if(typeof s.length==="number")for(var H=s.length;z<H;z++)j[v++]=s[z];else for(;s[z]!==B;)j[v++]=s[z++];j.length=v;return j},grep:function(j,s,v){var z=[],H;v=!!v;for(var G=0,K=j.length;G<K;G++){H=!!s(j[G],G);v!==H&&z.push(j[G])}return z},map:function(j,s,v){for(var z=[],H,G=0,K=j.length;G<K;G++){H=s(j[G],G,v);if(H!=null)z[z.length]=H}return z.concat.apply([],z)},guid:1,proxy:function(j,s,v){if(arguments.length===2)if(typeof s==="string"){v=j;j=v[s];s=B}else if(s&&!b.isFunction(s)){v=
s;s=B}if(!s&&j)s=function(){return j.apply(v||this,arguments)};if(j)s.guid=j.guid=j.guid||s.guid||b.guid++;return s},access:function(j,s,v,z,H,G){var K=j.length;if(typeof s==="object"){for(var Q in s)b.access(j,Q,s[Q],z,H,v);return j}if(v!==B){z=!G&&z&&b.isFunction(v);for(Q=0;Q<K;Q++)H(j[Q],s,z?v.call(j[Q],Q,H(j[Q],s)):v,G);return j}return K?H(j[0],s):B},now:function(){return(new Date).getTime()},uaMatch:function(j){j=j.toLowerCase();j=L.exec(j)||g.exec(j)||i.exec(j)||j.indexOf("compatible")<0&&n.exec(j)||
[];return{browser:j[1]||"",version:j[2]||"0"}},browser:{}});b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(j,s){R["[object "+s+"]"]=s.toLowerCase()});m=b.uaMatch(m);if(m.browser){b.browser[m.browser]=true;b.browser.version=m.version}if(b.browser.webkit)b.browser.safari=true;if(D)b.inArray=function(j,s){return D.call(s,j)};if(!/\s/.test("\u00a0")){k=/^[\s\xA0]+/;o=/[\s\xA0]+$/}f=b(t);if(t.addEventListener)u=function(){t.removeEventListener("DOMContentLoaded",u,
false);b.ready()};else if(t.attachEvent)u=function(){if(t.readyState==="complete"){t.detachEvent("onreadystatechange",u);b.ready()}};return E.jQuery=E.$=b}();(function(){c.support={};var a=t.documentElement,b=t.createElement("script"),d=t.createElement("div"),e="script"+c.now();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var f=d.getElementsByTagName("*"),h=d.getElementsByTagName("a")[0],l=t.createElement("select"),
k=l.appendChild(t.createElement("option"));if(!(!f||!f.length||!h)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(h.getAttribute("style")),hrefNormalized:h.getAttribute("href")==="/a",opacity:/^0.55$/.test(h.style.opacity),cssFloat:!!h.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:k.selected,deleteExpando:true,optDisabled:false,checkClone:false,
scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};l.disabled=true;c.support.optDisabled=!k.disabled;b.type="text/javascript";try{b.appendChild(t.createTextNode("window."+e+"=1;"))}catch(o){}a.insertBefore(b,a.firstChild);if(E[e]){c.support.scriptEval=true;delete E[e]}try{delete b.test}catch(x){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function r(){c.support.noCloneEvent=
false;d.detachEvent("onclick",r)});d.cloneNode(true).fireEvent("onclick")}d=t.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=t.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var r=t.createElement("div");r.style.width=r.style.paddingLeft="1px";t.body.appendChild(r);c.boxModel=c.support.boxModel=r.offsetWidth===2;if("zoom"in r.style){r.style.display="inline";r.style.zoom=
1;c.support.inlineBlockNeedsLayout=r.offsetWidth===2;r.style.display="";r.innerHTML="<div style='width:4px;'></div>";c.support.shrinkWrapBlocks=r.offsetWidth!==2}r.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var A=r.getElementsByTagName("td");c.support.reliableHiddenOffsets=A[0].offsetHeight===0;A[0].style.display="";A[1].style.display="none";c.support.reliableHiddenOffsets=c.support.reliableHiddenOffsets&&A[0].offsetHeight===0;r.innerHTML="";t.body.removeChild(r).style.display=
"none"});a=function(r){var A=t.createElement("div");r="on"+r;var C=r in A;if(!C){A.setAttribute(r,"return;");C=typeof A[r]==="function"}return C};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=f=h=null}})();var ra={},Ja=/^(?:\{.*\}|\[.*\])$/;c.extend({cache:{},uuid:0,expando:"jQuery"+c.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(a,b,d){if(c.acceptData(a)){a=a==E?ra:a;var e=a.nodeType,f=e?a[c.expando]:null,h=
c.cache;if(!(e&&!f&&typeof b==="string"&&d===B)){if(e)f||(a[c.expando]=f=++c.uuid);else h=a;if(typeof b==="object")if(e)h[f]=c.extend(h[f],b);else c.extend(h,b);else if(e&&!h[f])h[f]={};a=e?h[f]:h;if(d!==B)a[b]=d;return typeof b==="string"?a[b]:a}}},removeData:function(a,b){if(c.acceptData(a)){a=a==E?ra:a;var d=a.nodeType,e=d?a[c.expando]:a,f=c.cache,h=d?f[e]:e;if(b){if(h){delete h[b];d&&c.isEmptyObject(h)&&c.removeData(a)}}else if(d&&c.support.deleteExpando)delete a[c.expando];else if(a.removeAttribute)a.removeAttribute(c.expando);
else if(d)delete f[e];else for(var l in a)delete a[l]}},acceptData:function(a){if(a.nodeName){var b=c.noData[a.nodeName.toLowerCase()];if(b)return!(b===true||a.getAttribute("classid")!==b)}return true}});c.fn.extend({data:function(a,b){var d=null;if(typeof a==="undefined"){if(this.length){var e=this[0].attributes,f;d=c.data(this[0]);for(var h=0,l=e.length;h<l;h++){f=e[h].name;if(f.indexOf("data-")===0){f=f.substr(5);ka(this[0],f,d[f])}}}return d}else if(typeof a==="object")return this.each(function(){c.data(this,
a)});var k=a.split(".");k[1]=k[1]?"."+k[1]:"";if(b===B){d=this.triggerHandler("getData"+k[1]+"!",[k[0]]);if(d===B&&this.length){d=c.data(this[0],a);d=ka(this[0],a,d)}return d===B&&k[1]?this.data(k[0]):d}else return this.each(function(){var o=c(this),x=[k[0],b];o.triggerHandler("setData"+k[1]+"!",x);c.data(this,a,b);o.triggerHandler("changeData"+k[1]+"!",x)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var e=
c.data(a,b);if(!d)return e||[];if(!e||c.isArray(d))e=c.data(a,b,c.makeArray(d));else e.push(d);return e}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),e=d.shift();if(e==="inprogress")e=d.shift();if(e){b==="fx"&&d.unshift("inprogress");e.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===B)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,
a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var sa=/[\n\t]/g,ha=/\s+/,Sa=/\r/g,Ta=/^(?:href|src|style)$/,Ua=/^(?:button|input)$/i,Va=/^(?:button|input|object|select|textarea)$/i,Wa=/^a(?:rea)?$/i,ta=/^(?:radio|checkbox)$/i;c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",
colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};c.fn.extend({attr:function(a,b){return c.access(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(x){var r=c(this);r.addClass(a.call(this,x,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ha),d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===
1)if(f.className){for(var h=" "+f.className+" ",l=f.className,k=0,o=b.length;k<o;k++)if(h.indexOf(" "+b[k]+" ")<0)l+=" "+b[k];f.className=c.trim(l)}else f.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(o){var x=c(this);x.removeClass(a.call(this,o,x.attr("class")))});if(a&&typeof a==="string"||a===B)for(var b=(a||"").split(ha),d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===1&&f.className)if(a){for(var h=(" "+f.className+" ").replace(sa," "),
l=0,k=b.length;l<k;l++)h=h.replace(" "+b[l]+" "," ");f.className=c.trim(h)}else f.className=""}return this},toggleClass:function(a,b){var d=typeof a,e=typeof b==="boolean";if(c.isFunction(a))return this.each(function(f){var h=c(this);h.toggleClass(a.call(this,f,h.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var f,h=0,l=c(this),k=b,o=a.split(ha);f=o[h++];){k=e?k:!l.hasClass(f);l[k?"addClass":"removeClass"](f)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,
"__className__",this.className);this.className=this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(sa," ").indexOf(a)>-1)return true;return false},val:function(a){if(!arguments.length){var b=this[0];if(b){if(c.nodeName(b,"option")){var d=b.attributes.value;return!d||d.specified?b.value:b.text}if(c.nodeName(b,"select")){var e=b.selectedIndex;d=[];var f=b.options;b=b.type==="select-one";
if(e<0)return null;var h=b?e:0;for(e=b?e+1:f.length;h<e;h++){var l=f[h];if(l.selected&&(c.support.optDisabled?!l.disabled:l.getAttribute("disabled")===null)&&(!l.parentNode.disabled||!c.nodeName(l.parentNode,"optgroup"))){a=c(l).val();if(b)return a;d.push(a)}}return d}if(ta.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Sa,"")}return B}var k=c.isFunction(a);return this.each(function(o){var x=c(this),r=a;if(this.nodeType===1){if(k)r=
a.call(this,o,x.val());if(r==null)r="";else if(typeof r==="number")r+="";else if(c.isArray(r))r=c.map(r,function(C){return C==null?"":C+""});if(c.isArray(r)&&ta.test(this.type))this.checked=c.inArray(x.val(),r)>=0;else if(c.nodeName(this,"select")){var A=c.makeArray(r);c("option",this).each(function(){this.selected=c.inArray(c(this).val(),A)>=0});if(!A.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},
attr:function(a,b,d,e){if(!a||a.nodeType===3||a.nodeType===8)return B;if(e&&b in c.attrFn)return c(a)[b](d);e=a.nodeType!==1||!c.isXMLDoc(a);var f=d!==B;b=e&&c.props[b]||b;var h=Ta.test(b);if((b in a||a[b]!==B)&&e&&!h){if(f){b==="type"&&Ua.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");if(d===null)a.nodeType===1&&a.removeAttribute(b);else a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&
b.specified?b.value:Va.test(a.nodeName)||Wa.test(a.nodeName)&&a.href?0:B;return a[b]}if(!c.support.style&&e&&b==="style"){if(f)a.style.cssText=""+d;return a.style.cssText}f&&a.setAttribute(b,""+d);if(!a.attributes[b]&&a.hasAttribute&&!a.hasAttribute(b))return B;a=!c.support.hrefNormalized&&e&&h?a.getAttribute(b,2):a.getAttribute(b);return a===null?B:a}});var X=/\.(.*)$/,ia=/^(?:textarea|input|select)$/i,La=/\./g,Ma=/ /g,Xa=/[^\w\s.|`]/g,Ya=function(a){return a.replace(Xa,"\\$&")},ua={focusin:0,focusout:0};
c.event={add:function(a,b,d,e){if(!(a.nodeType===3||a.nodeType===8)){if(c.isWindow(a)&&a!==E&&!a.frameElement)a=E;if(d===false)d=U;else if(!d)return;var f,h;if(d.handler){f=d;d=f.handler}if(!d.guid)d.guid=c.guid++;if(h=c.data(a)){var l=a.nodeType?"events":"__events__",k=h[l],o=h.handle;if(typeof k==="function"){o=k.handle;k=k.events}else if(!k){a.nodeType||(h[l]=h=function(){});h.events=k={}}if(!o)h.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,
arguments):B};o.elem=a;b=b.split(" ");for(var x=0,r;l=b[x++];){h=f?c.extend({},f):{handler:d,data:e};if(l.indexOf(".")>-1){r=l.split(".");l=r.shift();h.namespace=r.slice(0).sort().join(".")}else{r=[];h.namespace=""}h.type=l;if(!h.guid)h.guid=d.guid;var A=k[l],C=c.event.special[l]||{};if(!A){A=k[l]=[];if(!C.setup||C.setup.call(a,e,r,o)===false)if(a.addEventListener)a.addEventListener(l,o,false);else a.attachEvent&&a.attachEvent("on"+l,o)}if(C.add){C.add.call(a,h);if(!h.handler.guid)h.handler.guid=
d.guid}A.push(h);c.event.global[l]=true}a=null}}},global:{},remove:function(a,b,d,e){if(!(a.nodeType===3||a.nodeType===8)){if(d===false)d=U;var f,h,l=0,k,o,x,r,A,C,J=a.nodeType?"events":"__events__",w=c.data(a),I=w&&w[J];if(w&&I){if(typeof I==="function"){w=I;I=I.events}if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(f in I)c.event.remove(a,f+b)}else{for(b=b.split(" ");f=b[l++];){r=f;k=f.indexOf(".")<0;o=[];if(!k){o=f.split(".");f=o.shift();x=RegExp("(^|\\.)"+
c.map(o.slice(0).sort(),Ya).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(A=I[f])if(d){r=c.event.special[f]||{};for(h=e||0;h<A.length;h++){C=A[h];if(d.guid===C.guid){if(k||x.test(C.namespace)){e==null&&A.splice(h--,1);r.remove&&r.remove.call(a,C)}if(e!=null)break}}if(A.length===0||e!=null&&A.length===1){if(!r.teardown||r.teardown.call(a,o)===false)c.removeEvent(a,f,w.handle);delete I[f]}}else for(h=0;h<A.length;h++){C=A[h];if(k||x.test(C.namespace)){c.event.remove(a,r,C.handler,h);A.splice(h--,1)}}}if(c.isEmptyObject(I)){if(b=
w.handle)b.elem=null;delete w.events;delete w.handle;if(typeof w==="function")c.removeData(a,J);else c.isEmptyObject(w)&&c.removeData(a)}}}}},trigger:function(a,b,d,e){var f=a.type||a;if(!e){a=typeof a==="object"?a[c.expando]?a:c.extend(c.Event(f),a):c.Event(f);if(f.indexOf("!")>=0){a.type=f=f.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[f]&&c.each(c.cache,function(){this.events&&this.events[f]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===
8)return B;a.result=B;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(e=d.nodeType?c.data(d,"handle"):(c.data(d,"__events__")||{}).handle)&&e.apply(d,b);e=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+f]&&d["on"+f].apply(d,b)===false){a.result=false;a.preventDefault()}}catch(h){}if(!a.isPropagationStopped()&&e)c.event.trigger(a,b,e,true);else if(!a.isDefaultPrevented()){var l;e=a.target;var k=f.replace(X,""),o=c.nodeName(e,"a")&&k===
"click",x=c.event.special[k]||{};if((!x._default||x._default.call(d,a)===false)&&!o&&!(e&&e.nodeName&&c.noData[e.nodeName.toLowerCase()])){try{if(e[k]){if(l=e["on"+k])e["on"+k]=null;c.event.triggered=true;e[k]()}}catch(r){}if(l)e["on"+k]=l;c.event.triggered=false}}},handle:function(a){var b,d,e,f;d=[];var h=c.makeArray(arguments);a=h[0]=c.event.fix(a||E.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;if(!b){e=a.type.split(".");a.type=e.shift();d=e.slice(0).sort();e=RegExp("(^|\\.)"+
d.join("\\.(?:.*\\.)?")+"(\\.|$)")}a.namespace=a.namespace||d.join(".");f=c.data(this,this.nodeType?"events":"__events__");if(typeof f==="function")f=f.events;d=(f||{})[a.type];if(f&&d){d=d.slice(0);f=0;for(var l=d.length;f<l;f++){var k=d[f];if(b||e.test(k.namespace)){a.handler=k.handler;a.data=k.data;a.handleObj=k;k=k.handler.apply(this,h);if(k!==B){a.result=k;if(k===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[c.expando])return a;var b=a;a=c.Event(b);for(var d=this.props.length,e;d;){e=this.props[--d];a[e]=b[e]}if(!a.target)a.target=a.srcElement||t;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=t.documentElement;d=t.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(a.which==null&&(a.charCode!=null||a.keyCode!=null))a.which=a.charCode!=null?a.charCode:a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==B)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,Y(a.origType,a.selector),c.extend({},a,{handler:Ka,guid:a.handler.guid}))},remove:function(a){c.event.remove(this,
Y(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,d){if(c.isWindow(this))this.onbeforeunload=d},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};c.removeEvent=t.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=a;this.type=a.type}else this.type=a;this.timeStamp=
c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ca;var a=this.originalEvent;if(a)if(a.preventDefault)a.preventDefault();else a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=ca;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ca;this.stopPropagation()},isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U};
var va=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},wa=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?wa:va,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?wa:va)}}});if(!c.support.submitBubbles)c.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!==
"form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length){a.liveFired=B;return la("submit",this,arguments)}});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13){a.liveFired=B;return la("submit",this,arguments)}})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};if(!c.support.changeBubbles){var V,
xa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(e){return e.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},Z=function(a,b){var d=a.target,e,f;if(!(!ia.test(d.nodeName)||d.readOnly)){e=c.data(d,"_change_data");f=xa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",f);if(!(e===B||f===e))if(e!=null||f){a.type="change";a.liveFired=
B;return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:Z,beforedeactivate:Z,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return Z.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return Z.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,"_change_data",xa(a))}},setup:function(){if(this.type===
"file")return false;for(var a in V)c.event.add(this,a+".specialChange",V[a]);return ia.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ia.test(this.nodeName)}};V=c.event.special.change.filters;V.focus=V.beforeactivate}t.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(e){e=c.event.fix(e);e.type=b;return c.event.trigger(e,null,e.target)}c.event.special[b]={setup:function(){ua[b]++===0&&t.addEventListener(a,d,true)},teardown:function(){--ua[b]===
0&&t.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,e,f){if(typeof d==="object"){for(var h in d)this[b](h,e,d[h],f);return this}if(c.isFunction(e)||e===false){f=e;e=B}var l=b==="one"?c.proxy(f,function(o){c(this).unbind(o,l);return f.apply(this,arguments)}):f;if(d==="unload"&&b!=="one")this.one(d,e,f);else{h=0;for(var k=this.length;h<k;h++)c.event.add(this[h],d,l,e)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault)for(var d in a)this.unbind(d,
a[d]);else{d=0;for(var e=this.length;d<e;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,e){return this.live(b,d,e,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var d=c.Event(a);d.preventDefault();d.stopPropagation();c.event.trigger(d,b,this[0]);return d.result}},toggle:function(a){for(var b=arguments,d=
1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(e){var f=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,f+1);e.preventDefault();return b[f].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var ya={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,e,f,h){var l,k=0,o,x,r=h||this.selector;h=h?this:c(this.context);if(typeof d===
"object"&&!d.preventDefault){for(l in d)h[b](l,e,d[l],r);return this}if(c.isFunction(e)){f=e;e=B}for(d=(d||"").split(" ");(l=d[k++])!=null;){o=X.exec(l);x="";if(o){x=o[0];l=l.replace(X,"")}if(l==="hover")d.push("mouseenter"+x,"mouseleave"+x);else{o=l;if(l==="focus"||l==="blur"){d.push(ya[l]+x);l+=x}else l=(ya[l]||l)+x;if(b==="live"){x=0;for(var A=h.length;x<A;x++)c.event.add(h[x],"live."+Y(l,r),{data:e,selector:r,handler:f,origType:l,origHandler:f,preType:o})}else h.unbind("live."+Y(l,r),f)}}return this}});
c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(d,e){if(e==null){e=d;d=null}return arguments.length>0?this.bind(b,d,e):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});E.attachEvent&&!E.addEventListener&&c(E).bind("unload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});
(function(){function a(g,i,n,m,p,q){p=0;for(var u=m.length;p<u;p++){var y=m[p];if(y){var F=false;for(y=y[g];y;){if(y.sizcache===n){F=m[y.sizset];break}if(y.nodeType===1&&!q){y.sizcache=n;y.sizset=p}if(y.nodeName.toLowerCase()===i){F=y;break}y=y[g]}m[p]=F}}}function b(g,i,n,m,p,q){p=0;for(var u=m.length;p<u;p++){var y=m[p];if(y){var F=false;for(y=y[g];y;){if(y.sizcache===n){F=m[y.sizset];break}if(y.nodeType===1){if(!q){y.sizcache=n;y.sizset=p}if(typeof i!=="string"){if(y===i){F=true;break}}else if(k.filter(i,
[y]).length>0){F=y;break}}y=y[g]}m[p]=F}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,h=false,l=true;[0,0].sort(function(){l=false;return 0});var k=function(g,i,n,m){n=n||[];var p=i=i||t;if(i.nodeType!==1&&i.nodeType!==9)return[];if(!g||typeof g!=="string")return n;var q,u,y,F,M,N=true,O=k.isXML(i),D=[],R=g;do{d.exec("");if(q=d.exec(R)){R=q[3];D.push(q[1]);if(q[2]){F=q[3];
break}}}while(q);if(D.length>1&&x.exec(g))if(D.length===2&&o.relative[D[0]])u=L(D[0]+D[1],i);else for(u=o.relative[D[0]]?[i]:k(D.shift(),i);D.length;){g=D.shift();if(o.relative[g])g+=D.shift();u=L(g,u)}else{if(!m&&D.length>1&&i.nodeType===9&&!O&&o.match.ID.test(D[0])&&!o.match.ID.test(D[D.length-1])){q=k.find(D.shift(),i,O);i=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]}if(i){q=m?{expr:D.pop(),set:C(m)}:k.find(D.pop(),D.length===1&&(D[0]==="~"||D[0]==="+")&&i.parentNode?i.parentNode:i,O);u=q.expr?k.filter(q.expr,
q.set):q.set;if(D.length>0)y=C(u);else N=false;for(;D.length;){q=M=D.pop();if(o.relative[M])q=D.pop();else M="";if(q==null)q=i;o.relative[M](y,q,O)}}else y=[]}y||(y=u);y||k.error(M||g);if(f.call(y)==="[object Array]")if(N)if(i&&i.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&k.contains(i,y[g])))n.push(u[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&n.push(u[g]);else n.push.apply(n,y);else C(y,n);if(F){k(F,p,n,m);k.uniqueSort(n)}return n};k.uniqueSort=function(g){if(w){h=
l;g.sort(w);if(h)for(var i=1;i<g.length;i++)g[i]===g[i-1]&&g.splice(i--,1)}return g};k.matches=function(g,i){return k(g,null,null,i)};k.matchesSelector=function(g,i){return k(i,null,null,[g]).length>0};k.find=function(g,i,n){var m;if(!g)return[];for(var p=0,q=o.order.length;p<q;p++){var u,y=o.order[p];if(u=o.leftMatch[y].exec(g)){var F=u[1];u.splice(1,1);if(F.substr(F.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");m=o.find[y](u,i,n);if(m!=null){g=g.replace(o.match[y],"");break}}}}m||(m=i.getElementsByTagName("*"));
return{set:m,expr:g}};k.filter=function(g,i,n,m){for(var p,q,u=g,y=[],F=i,M=i&&i[0]&&k.isXML(i[0]);g&&i.length;){for(var N in o.filter)if((p=o.leftMatch[N].exec(g))!=null&&p[2]){var O,D,R=o.filter[N];D=p[1];q=false;p.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(F===y)y=[];if(o.preFilter[N])if(p=o.preFilter[N](p,F,n,y,m,M)){if(p===true)continue}else q=O=true;if(p)for(var j=0;(D=F[j])!=null;j++)if(D){O=R(D,p,j,F);var s=m^!!O;if(n&&O!=null)if(s)q=true;else F[j]=false;else if(s){y.push(D);q=true}}if(O!==
B){n||(F=y);g=g.replace(o.match[N],"");if(!q)return[];break}}}if(g===u)if(q==null)k.error(g);else break;u=g}return F};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var o=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},relative:{"+":function(g,i){var n=typeof i==="string",m=n&&!/\W/.test(i);n=n&&!m;if(m)i=i.toLowerCase();m=0;for(var p=g.length,q;m<p;m++)if(q=g[m]){for(;(q=q.previousSibling)&&q.nodeType!==1;);g[m]=n||q&&q.nodeName.toLowerCase()===
i?q||false:q===i}n&&k.filter(i,g,true)},">":function(g,i){var n,m=typeof i==="string",p=0,q=g.length;if(m&&!/\W/.test(i))for(i=i.toLowerCase();p<q;p++){if(n=g[p]){n=n.parentNode;g[p]=n.nodeName.toLowerCase()===i?n:false}}else{for(;p<q;p++)if(n=g[p])g[p]=m?n.parentNode:n.parentNode===i;m&&k.filter(i,g,true)}},"":function(g,i,n){var m,p=e++,q=b;if(typeof i==="string"&&!/\W/.test(i)){m=i=i.toLowerCase();q=a}q("parentNode",i,p,g,m,n)},"~":function(g,i,n){var m,p=e++,q=b;if(typeof i==="string"&&!/\W/.test(i)){m=
i=i.toLowerCase();q=a}q("previousSibling",i,p,g,m,n)}},find:{ID:function(g,i,n){if(typeof i.getElementById!=="undefined"&&!n)return(g=i.getElementById(g[1]))&&g.parentNode?[g]:[]},NAME:function(g,i){if(typeof i.getElementsByName!=="undefined"){for(var n=[],m=i.getElementsByName(g[1]),p=0,q=m.length;p<q;p++)m[p].getAttribute("name")===g[1]&&n.push(m[p]);return n.length===0?null:n}},TAG:function(g,i){return i.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,i,n,m,p,q){g=" "+g[1].replace(/\\/g,
"")+" ";if(q)return g;q=0;for(var u;(u=i[q])!=null;q++)if(u)if(p^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))n||m.push(u);else if(n)i[q]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},CHILD:function(g){if(g[1]==="nth"){var i=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=i[1]+(i[2]||1)-0;g[3]=i[3]-0}g[0]=e++;return g},ATTR:function(g,i,n,
m,p,q){i=g[1].replace(/\\/g,"");if(!q&&o.attrMap[i])g[1]=o.attrMap[i];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,i,n,m,p){if(g[1]==="not")if((d.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,i);else{g=k.filter(g[3],i,n,true^p);n||m.push.apply(m,g);return false}else if(o.match.POS.test(g[0])||o.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===
true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,i,n){return!!k(n[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===
g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},setFilters:{first:function(g,i){return i===0},last:function(g,i,n,m){return i===m.length-1},even:function(g,i){return i%2===0},odd:function(g,i){return i%2===1},lt:function(g,i,n){return i<n[3]-0},gt:function(g,i,n){return i>n[3]-0},nth:function(g,i,n){return n[3]-
0===i},eq:function(g,i,n){return n[3]-0===i}},filter:{PSEUDO:function(g,i,n,m){var p=i[1],q=o.filters[p];if(q)return q(g,n,i,m);else if(p==="contains")return(g.textContent||g.innerText||k.getText([g])||"").indexOf(i[3])>=0;else if(p==="not"){i=i[3];n=0;for(m=i.length;n<m;n++)if(i[n]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+p)},CHILD:function(g,i){var n=i[1],m=g;switch(n){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(n===
"first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":n=i[2];var p=i[3];if(n===1&&p===0)return true;var q=i[0],u=g.parentNode;if(u&&(u.sizcache!==q||!g.nodeIndex)){var y=0;for(m=u.firstChild;m;m=m.nextSibling)if(m.nodeType===1)m.nodeIndex=++y;u.sizcache=q}m=g.nodeIndex-p;return n===0?m===0:m%n===0&&m/n>=0}},ID:function(g,i){return g.nodeType===1&&g.getAttribute("id")===i},TAG:function(g,i){return i==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===
i},CLASS:function(g,i){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(i)>-1},ATTR:function(g,i){var n=i[1];n=o.attrHandle[n]?o.attrHandle[n](g):g[n]!=null?g[n]:g.getAttribute(n);var m=n+"",p=i[2],q=i[4];return n==null?p==="!=":p==="="?m===q:p==="*="?m.indexOf(q)>=0:p==="~="?(" "+m+" ").indexOf(q)>=0:!q?m&&n!==false:p==="!="?m!==q:p==="^="?m.indexOf(q)===0:p==="$="?m.substr(m.length-q.length)===q:p==="|="?m===q||m.substr(0,q.length+1)===q+"-":false},POS:function(g,i,n,m){var p=o.setFilters[i[2]];
if(p)return p(g,n,i,m)}}},x=o.match.POS,r=function(g,i){return"\\"+(i-0+1)},A;for(A in o.match){o.match[A]=RegExp(o.match[A].source+/(?![^\[]*\])(?![^\(]*\))/.source);o.leftMatch[A]=RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[A].source.replace(/\\(\d+)/g,r))}var C=function(g,i){g=Array.prototype.slice.call(g,0);if(i){i.push.apply(i,g);return i}return g};try{Array.prototype.slice.call(t.documentElement.childNodes,0)}catch(J){C=function(g,i){var n=0,m=i||[];if(f.call(g)==="[object Array]")Array.prototype.push.apply(m,
g);else if(typeof g.length==="number")for(var p=g.length;n<p;n++)m.push(g[n]);else for(;g[n];n++)m.push(g[n]);return m}}var w,I;if(t.documentElement.compareDocumentPosition)w=function(g,i){if(g===i){h=true;return 0}if(!g.compareDocumentPosition||!i.compareDocumentPosition)return g.compareDocumentPosition?-1:1;return g.compareDocumentPosition(i)&4?-1:1};else{w=function(g,i){var n,m,p=[],q=[];n=g.parentNode;m=i.parentNode;var u=n;if(g===i){h=true;return 0}else if(n===m)return I(g,i);else if(n){if(!m)return 1}else return-1;
for(;u;){p.unshift(u);u=u.parentNode}for(u=m;u;){q.unshift(u);u=u.parentNode}n=p.length;m=q.length;for(u=0;u<n&&u<m;u++)if(p[u]!==q[u])return I(p[u],q[u]);return u===n?I(g,q[u],-1):I(p[u],i,1)};I=function(g,i,n){if(g===i)return n;for(g=g.nextSibling;g;){if(g===i)return-1;g=g.nextSibling}return 1}}k.getText=function(g){for(var i="",n,m=0;g[m];m++){n=g[m];if(n.nodeType===3||n.nodeType===4)i+=n.nodeValue;else if(n.nodeType!==8)i+=k.getText(n.childNodes)}return i};(function(){var g=t.createElement("div"),
i="script"+(new Date).getTime(),n=t.documentElement;g.innerHTML="<a name='"+i+"'/>";n.insertBefore(g,n.firstChild);if(t.getElementById(i)){o.find.ID=function(m,p,q){if(typeof p.getElementById!=="undefined"&&!q)return(p=p.getElementById(m[1]))?p.id===m[1]||typeof p.getAttributeNode!=="undefined"&&p.getAttributeNode("id").nodeValue===m[1]?[p]:B:[]};o.filter.ID=function(m,p){var q=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&q&&q.nodeValue===p}}n.removeChild(g);
n=g=null})();(function(){var g=t.createElement("div");g.appendChild(t.createComment(""));if(g.getElementsByTagName("*").length>0)o.find.TAG=function(i,n){var m=n.getElementsByTagName(i[1]);if(i[1]==="*"){for(var p=[],q=0;m[q];q++)m[q].nodeType===1&&p.push(m[q]);m=p}return m};g.innerHTML="<a href='#'></a>";if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")o.attrHandle.href=function(i){return i.getAttribute("href",2)};g=null})();t.querySelectorAll&&
function(){var g=k,i=t.createElement("div");i.innerHTML="<p class='TEST'></p>";if(!(i.querySelectorAll&&i.querySelectorAll(".TEST").length===0)){k=function(m,p,q,u){p=p||t;m=m.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!u&&!k.isXML(p))if(p.nodeType===9)try{return C(p.querySelectorAll(m),q)}catch(y){}else if(p.nodeType===1&&p.nodeName.toLowerCase()!=="object"){var F=p.getAttribute("id"),M=F||"__sizzle__";F||p.setAttribute("id",M);try{return C(p.querySelectorAll("#"+M+" "+m),q)}catch(N){}finally{F||
p.removeAttribute("id")}}return g(m,p,q,u)};for(var n in g)k[n]=g[n];i=null}}();(function(){var g=t.documentElement,i=g.matchesSelector||g.mozMatchesSelector||g.webkitMatchesSelector||g.msMatchesSelector,n=false;try{i.call(t.documentElement,"[test!='']:sizzle")}catch(m){n=true}if(i)k.matchesSelector=function(p,q){q=q.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(p))try{if(n||!o.match.PSEUDO.test(q)&&!/!=/.test(q))return i.call(p,q)}catch(u){}return k(q,null,null,[p]).length>0}})();(function(){var g=
t.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){o.order.splice(1,0,"CLASS");o.find.CLASS=function(i,n,m){if(typeof n.getElementsByClassName!=="undefined"&&!m)return n.getElementsByClassName(i[1])};g=null}}})();k.contains=t.documentElement.contains?function(g,i){return g!==i&&(g.contains?g.contains(i):true)}:t.documentElement.compareDocumentPosition?
function(g,i){return!!(g.compareDocumentPosition(i)&16)}:function(){return false};k.isXML=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false};var L=function(g,i){for(var n,m=[],p="",q=i.nodeType?[i]:i;n=o.match.PSEUDO.exec(g);){p+=n[0];g=g.replace(o.match.PSEUDO,"")}g=o.relative[g]?g+"*":g;n=0;for(var u=q.length;n<u;n++)k(g,q[n],m);return k.filter(p,m)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=k.getText;c.isXMLDoc=k.isXML;
c.contains=k.contains})();var Za=/Until$/,$a=/^(?:parents|prevUntil|prevAll)/,ab=/,/,Na=/^.[^:#\[\.,]*$/,bb=Array.prototype.slice,cb=c.expr.match.POS;c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,e=0,f=this.length;e<f;e++){d=b.length;c.find(a,this[e],b);if(e>0)for(var h=d;h<b.length;h++)for(var l=0;l<d;l++)if(b[l]===b[h]){b.splice(h--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,e=b.length;d<e;d++)if(c.contains(this,b[d]))return true})},
not:function(a){return this.pushStack(ma(this,a,false),"not",a)},filter:function(a){return this.pushStack(ma(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){var d=[],e,f,h=this[0];if(c.isArray(a)){var l,k={},o=1;if(h&&a.length){e=0;for(f=a.length;e<f;e++){l=a[e];k[l]||(k[l]=c.expr.match.POS.test(l)?c(l,b||this.context):l)}for(;h&&h.ownerDocument&&h!==b;){for(l in k){e=k[l];if(e.jquery?e.index(h)>-1:c(h).is(e))d.push({selector:l,elem:h,level:o})}h=
h.parentNode;o++}}return d}l=cb.test(a)?c(a,b||this.context):null;e=0;for(f=this.length;e<f;e++)for(h=this[e];h;)if(l?l.index(h)>-1:c.find.matchesSelector(h,a)){d.push(h);break}else{h=h.parentNode;if(!h||!h.ownerDocument||h===b)break}d=d.length>1?c.unique(d):d;return this.pushStack(d,"closest",a)},index:function(a){if(!a||typeof a==="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a==="string"?c(a,b||this.context):
c.makeArray(a),e=c.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,
2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,
b){c.fn[a]=function(d,e){var f=c.map(this,b,d);Za.test(a)||(e=d);if(e&&typeof e==="string")f=c.filter(e,f);f=this.length>1?c.unique(f):f;if((this.length>1||ab.test(e))&&$a.test(a))f=f.reverse();return this.pushStack(f,a,bb.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return b.length===1?c.find.matchesSelector(b[0],a)?[b[0]]:[]:c.find.matches(a,b)},dir:function(a,b,d){var e=[];for(a=a[b];a&&a.nodeType!==9&&(d===B||a.nodeType!==1||!c(a).is(d));){a.nodeType===1&&
e.push(a);a=a[b]}return e},nth:function(a,b,d){b=b||1;for(var e=0;a;a=a[d])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var za=/ jQuery\d+="(?:\d+|null)"/g,$=/^\s+/,Aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ba=/<([\w:]+)/,db=/<tbody/i,eb=/<|&#?\w+;/,Ca=/<(?:script|object|embed|option|style)/i,Da=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/\=([^="'>\s]+\/)>/g,P={option:[1,
"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};P.optgroup=P.option;P.tbody=P.tfoot=P.colgroup=P.caption=P.thead;P.th=P.td;if(!c.support.htmlSerialize)P._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==B)return this.empty().append((this[0]&&this[0].ownerDocument||t).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,e;(e=this[d])!=null;d++)if(!a||c.filter(a,[e]).length){if(!b&&e.nodeType===1){c.cleanData(e.getElementsByTagName("*"));c.cleanData([e])}e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,e=this.ownerDocument;if(!d){d=e.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(za,"").replace(fb,'="$1">').replace($,"")],e)[0]}else return this.cloneNode(true)});if(a===true){na(this,b);na(this.find("*"),b.find("*"))}return b},html:function(a){if(a===B)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(za,""):null;
else if(typeof a==="string"&&!Ca.test(a)&&(c.support.leadingWhitespace||!$.test(a))&&!P[(Ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Aa,"<$1></$2>");try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(e){this.empty().append(a)}}else c.isFunction(a)?this.each(function(f){var h=c(this);h.html(a.call(this,f,h.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=
c(this),e=d.html();d.replaceWith(a.call(this,b,e))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){var e,f,h,l=a[0],k=[];if(!c.support.checkClone&&arguments.length===3&&typeof l==="string"&&Da.test(l))return this.each(function(){c(this).domManip(a,
b,d,true)});if(c.isFunction(l))return this.each(function(x){var r=c(this);a[0]=l.call(this,x,b?r.html():B);r.domManip(a,b,d)});if(this[0]){e=l&&l.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:c.buildFragment(a,this,k);h=e.fragment;if(f=h.childNodes.length===1?h=h.firstChild:h.firstChild){b=b&&c.nodeName(f,"tr");f=0;for(var o=this.length;f<o;f++)d.call(b?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):
this[f]:this[f],f>0||e.cacheable||this.length>1?h.cloneNode(true):h)}k.length&&c.each(k,Oa)}return this}});c.buildFragment=function(a,b,d){var e,f,h;b=b&&b[0]?b[0].ownerDocument||b[0]:t;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===t&&!Ca.test(a[0])&&(c.support.checkClone||!Da.test(a[0]))){f=true;if(h=c.fragments[a[0]])if(h!==1)e=h}if(!e){e=b.createDocumentFragment();c.clean(a,b,e,d)}if(f)c.fragments[a[0]]=h?e:1;return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var e=[];d=c(d);var f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&d.length===1){d[b](this[0]);return this}else{f=0;for(var h=d.length;f<h;f++){var l=(f>0?this.clone(true):this).get();c(d[f])[b](l);e=e.concat(l)}return this.pushStack(e,a,d.selector)}}});c.extend({clean:function(a,b,d,e){b=b||t;if(typeof b.createElement==="undefined")b=b.ownerDocument||
b[0]&&b[0].ownerDocument||t;for(var f=[],h=0,l;(l=a[h])!=null;h++){if(typeof l==="number")l+="";if(l){if(typeof l==="string"&&!eb.test(l))l=b.createTextNode(l);else if(typeof l==="string"){l=l.replace(Aa,"<$1></$2>");var k=(Ba.exec(l)||["",""])[1].toLowerCase(),o=P[k]||P._default,x=o[0],r=b.createElement("div");for(r.innerHTML=o[1]+l+o[2];x--;)r=r.lastChild;if(!c.support.tbody){x=db.test(l);k=k==="table"&&!x?r.firstChild&&r.firstChild.childNodes:o[1]==="<table>"&&!x?r.childNodes:[];for(o=k.length-
1;o>=0;--o)c.nodeName(k[o],"tbody")&&!k[o].childNodes.length&&k[o].parentNode.removeChild(k[o])}!c.support.leadingWhitespace&&$.test(l)&&r.insertBefore(b.createTextNode($.exec(l)[0]),r.firstChild);l=r.childNodes}if(l.nodeType)f.push(l);else f=c.merge(f,l)}}if(d)for(h=0;f[h];h++)if(e&&c.nodeName(f[h],"script")&&(!f[h].type||f[h].type.toLowerCase()==="text/javascript"))e.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]);else{f[h].nodeType===1&&f.splice.apply(f,[h+1,0].concat(c.makeArray(f[h].getElementsByTagName("script"))));
d.appendChild(f[h])}return f},cleanData:function(a){for(var b,d,e=c.cache,f=c.event.special,h=c.support.deleteExpando,l=0,k;(k=a[l])!=null;l++)if(!(k.nodeName&&c.noData[k.nodeName.toLowerCase()]))if(d=k[c.expando]){if((b=e[d])&&b.events)for(var o in b.events)f[o]?c.event.remove(k,o):c.removeEvent(k,o,b.handle);if(h)delete k[c.expando];else k.removeAttribute&&k.removeAttribute(c.expando);delete e[d]}}});var Ea=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/-([a-z])/ig,ib=/([A-Z])/g,Fa=/^-?\d+(?:px)?$/i,
jb=/^-?\d/,kb={position:"absolute",visibility:"hidden",display:"block"},Pa=["Left","Right"],Qa=["Top","Bottom"],W,Ga,aa,lb=function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){if(arguments.length===2&&b===B)return this;return c.access(this,a,b,true,function(d,e,f){return f!==B?c.style(d,e,f):c.css(d,e)})};c.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=W(a,"opacity","opacity");return d===""?"1":d}else return a.style.opacity}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,
zoom:true,lineHeight:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var f,h=c.camelCase(b),l=a.style,k=c.cssHooks[h];b=c.cssProps[h]||h;if(d!==B){if(!(typeof d==="number"&&isNaN(d)||d==null)){if(typeof d==="number"&&!c.cssNumber[h])d+="px";if(!k||!("set"in k)||(d=k.set(a,d))!==B)try{l[b]=d}catch(o){}}}else{if(k&&"get"in k&&(f=k.get(a,false,e))!==B)return f;return l[b]}}},css:function(a,b,d){var e,f=c.camelCase(b),
h=c.cssHooks[f];b=c.cssProps[f]||f;if(h&&"get"in h&&(e=h.get(a,true,d))!==B)return e;else if(W)return W(a,b,f)},swap:function(a,b,d){var e={},f;for(f in b){e[f]=a.style[f];a.style[f]=b[f]}d.call(a);for(f in b)a.style[f]=e[f]},camelCase:function(a){return a.replace(hb,lb)}});c.curCSS=c.css;c.each(["height","width"],function(a,b){c.cssHooks[b]={get:function(d,e,f){var h;if(e){if(d.offsetWidth!==0)h=oa(d,b,f);else c.swap(d,kb,function(){h=oa(d,b,f)});if(h<=0){h=W(d,b,b);if(h==="0px"&&aa)h=aa(d,b,b);
if(h!=null)return h===""||h==="auto"?"0px":h}if(h<0||h==null){h=d.style[b];return h===""||h==="auto"?"0px":h}return typeof h==="string"?h:h+"px"}},set:function(d,e){if(Fa.test(e)){e=parseFloat(e);if(e>=0)return e+"px"}else return e}}});if(!c.support.opacity)c.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var d=a.style;d.zoom=1;var e=c.isNaN(b)?"":"alpha(opacity="+b*100+")",f=
d.filter||"";d.filter=Ea.test(f)?f.replace(Ea,e):d.filter+" "+e}};if(t.defaultView&&t.defaultView.getComputedStyle)Ga=function(a,b,d){var e;d=d.replace(ib,"-$1").toLowerCase();if(!(b=a.ownerDocument.defaultView))return B;if(b=b.getComputedStyle(a,null)){e=b.getPropertyValue(d);if(e===""&&!c.contains(a.ownerDocument.documentElement,a))e=c.style(a,d)}return e};if(t.documentElement.currentStyle)aa=function(a,b){var d,e,f=a.currentStyle&&a.currentStyle[b],h=a.style;if(!Fa.test(f)&&jb.test(f)){d=h.left;
e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;h.left=b==="fontSize"?"1em":f||0;f=h.pixelLeft+"px";h.left=d;a.runtimeStyle.left=e}return f===""?"auto":f};W=Ga||aa;if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!c.support.reliableHiddenOffsets&&(a.style.display||c.css(a,"display"))==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var mb=c.now(),nb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
ob=/^(?:select|textarea)/i,pb=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,qb=/^(?:GET|HEAD)$/,Ra=/\[\]$/,T=/\=\?(&|$)/,ja=/\?/,rb=/([?&])_=[^&]*/,sb=/^(\w+:)?\/\/([^\/?#]+)/,tb=/%20/g,ub=/#.*$/,Ha=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!=="string"&&Ha)return Ha.apply(this,arguments);else if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}e="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b===
"object"){b=c.param(b,c.ajaxSettings.traditional);e="POST"}var h=this;c.ajax({url:a,type:e,dataType:"html",data:b,complete:function(l,k){if(k==="success"||k==="notmodified")h.html(f?c("<div>").append(l.responseText.replace(nb,"")).find(f):l.responseText);d&&h.each(d,[l.responseText,k,l])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ob.test(this.nodeName)||pb.test(this.type))}).map(function(a,b){var d=c(this).val();return d==null?null:c.isArray(d)?c.map(d,function(e){return{name:b.name,value:e}}):{name:b.name,value:d}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,e){if(c.isFunction(b)){e=e||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:e})},
getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,e){if(c.isFunction(b)){e=e||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:e})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new E.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",
script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(a){var b=c.extend(true,{},c.ajaxSettings,a),d,e,f,h=b.type.toUpperCase(),l=qb.test(h);b.url=b.url.replace(ub,"");b.context=a&&a.context!=null?a.context:b;if(b.data&&b.processData&&typeof b.data!=="string")b.data=c.param(b.data,b.traditional);if(b.dataType==="jsonp"){if(h==="GET")T.test(b.url)||(b.url+=(ja.test(b.url)?"&":"?")+(b.jsonp||"callback")+"=?");else if(!b.data||
!T.test(b.data))b.data=(b.data?b.data+"&":"")+(b.jsonp||"callback")+"=?";b.dataType="json"}if(b.dataType==="json"&&(b.data&&T.test(b.data)||T.test(b.url))){d=b.jsonpCallback||"jsonp"+mb++;if(b.data)b.data=(b.data+"").replace(T,"="+d+"$1");b.url=b.url.replace(T,"="+d+"$1");b.dataType="script";var k=E[d];E[d]=function(m){if(c.isFunction(k))k(m);else{E[d]=B;try{delete E[d]}catch(p){}}f=m;c.handleSuccess(b,w,e,f);c.handleComplete(b,w,e,f);r&&r.removeChild(A)}}if(b.dataType==="script"&&b.cache===null)b.cache=
false;if(b.cache===false&&l){var o=c.now(),x=b.url.replace(rb,"$1_="+o);b.url=x+(x===b.url?(ja.test(b.url)?"&":"?")+"_="+o:"")}if(b.data&&l)b.url+=(ja.test(b.url)?"&":"?")+b.data;b.global&&c.active++===0&&c.event.trigger("ajaxStart");o=(o=sb.exec(b.url))&&(o[1]&&o[1].toLowerCase()!==location.protocol||o[2].toLowerCase()!==location.host);if(b.dataType==="script"&&h==="GET"&&o){var r=t.getElementsByTagName("head")[0]||t.documentElement,A=t.createElement("script");if(b.scriptCharset)A.charset=b.scriptCharset;
A.src=b.url;if(!d){var C=false;A.onload=A.onreadystatechange=function(){if(!C&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){C=true;c.handleSuccess(b,w,e,f);c.handleComplete(b,w,e,f);A.onload=A.onreadystatechange=null;r&&A.parentNode&&r.removeChild(A)}}}r.insertBefore(A,r.firstChild);return B}var J=false,w=b.xhr();if(w){b.username?w.open(h,b.url,b.async,b.username,b.password):w.open(h,b.url,b.async);try{if(b.data!=null&&!l||a&&a.contentType)w.setRequestHeader("Content-Type",
b.contentType);if(b.ifModified){c.lastModified[b.url]&&w.setRequestHeader("If-Modified-Since",c.lastModified[b.url]);c.etag[b.url]&&w.setRequestHeader("If-None-Match",c.etag[b.url])}o||w.setRequestHeader("X-Requested-With","XMLHttpRequest");w.setRequestHeader("Accept",b.dataType&&b.accepts[b.dataType]?b.accepts[b.dataType]+", */*; q=0.01":b.accepts._default)}catch(I){}if(b.beforeSend&&b.beforeSend.call(b.context,w,b)===false){b.global&&c.active--===1&&c.event.trigger("ajaxStop");w.abort();return false}b.global&&
c.triggerGlobal(b,"ajaxSend",[w,b]);var L=w.onreadystatechange=function(m){if(!w||w.readyState===0||m==="abort"){J||c.handleComplete(b,w,e,f);J=true;if(w)w.onreadystatechange=c.noop}else if(!J&&w&&(w.readyState===4||m==="timeout")){J=true;w.onreadystatechange=c.noop;e=m==="timeout"?"timeout":!c.httpSuccess(w)?"error":b.ifModified&&c.httpNotModified(w,b.url)?"notmodified":"success";var p;if(e==="success")try{f=c.httpData(w,b.dataType,b)}catch(q){e="parsererror";p=q}if(e==="success"||e==="notmodified")d||
c.handleSuccess(b,w,e,f);else c.handleError(b,w,e,p);d||c.handleComplete(b,w,e,f);m==="timeout"&&w.abort();if(b.async)w=null}};try{var g=w.abort;w.abort=function(){w&&Function.prototype.call.call(g,w);L("abort")}}catch(i){}b.async&&b.timeout>0&&setTimeout(function(){w&&!J&&L("timeout")},b.timeout);try{w.send(l||b.data==null?null:b.data)}catch(n){c.handleError(b,w,null,n);c.handleComplete(b,w,e,f)}b.async||L();return w}},param:function(a,b){var d=[],e=function(h,l){l=c.isFunction(l)?l():l;d[d.length]=
encodeURIComponent(h)+"="+encodeURIComponent(l)};if(b===B)b=c.ajaxSettings.traditional;if(c.isArray(a)||a.jquery)c.each(a,function(){e(this.name,this.value)});else for(var f in a)da(f,a[f],b,e);return d.join("&").replace(tb,"+")}});c.extend({active:0,lastModified:{},etag:{},handleError:function(a,b,d,e){a.error&&a.error.call(a.context,b,d,e);a.global&&c.triggerGlobal(a,"ajaxError",[b,a,e])},handleSuccess:function(a,b,d,e){a.success&&a.success.call(a.context,e,d,b);a.global&&c.triggerGlobal(a,"ajaxSuccess",
[b,a])},handleComplete:function(a,b,d){a.complete&&a.complete.call(a.context,b,d);a.global&&c.triggerGlobal(a,"ajaxComplete",[b,a]);a.global&&c.active--===1&&c.event.trigger("ajaxStop")},triggerGlobal:function(a,b,d){(a.context&&a.context.url==null?c(a.context):c.event).trigger(b,d)},httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),
e=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(e)c.etag[b]=e;return a.status===304},httpData:function(a,b,d){var e=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&&e.indexOf("xml")>=0;a=f?a.responseXML:a.responseText;f&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b==="json"||!b&&e.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&e.indexOf("javascript")>=0)c.globalEval(a);return a}});
if(E.ActiveXObject)c.ajaxSettings.xhr=function(){if(E.location.protocol!=="file:")try{return new E.XMLHttpRequest}catch(a){}try{return new E.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}};c.support.ajax=!!c.ajaxSettings.xhr();var ea={},vb=/^(?:toggle|show|hide)$/,wb=/^([+\-]=)?([\d+.\-]+)(.*)$/,ba,pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b,d){if(a||a===0)return this.animate(S("show",
3),a,b,d);else{d=0;for(var e=this.length;d<e;d++){a=this[d];b=a.style.display;if(!c.data(a,"olddisplay")&&b==="none")b=a.style.display="";b===""&&c.css(a,"display")==="none"&&c.data(a,"olddisplay",qa(a.nodeName))}for(d=0;d<e;d++){a=this[d];b=a.style.display;if(b===""||b==="none")a.style.display=c.data(a,"olddisplay")||""}return this}},hide:function(a,b,d){if(a||a===0)return this.animate(S("hide",3),a,b,d);else{a=0;for(b=this.length;a<b;a++){d=c.css(this[a],"display");d!=="none"&&c.data(this[a],"olddisplay",
d)}for(a=0;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b,d){var e=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||e?this.each(function(){var f=e?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(S("toggle",3),a,b,d);return this},fadeTo:function(a,b,d,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d,e)},animate:function(a,b,d,e){var f=c.speed(b,
d,e);if(c.isEmptyObject(a))return this.each(f.complete);return this[f.queue===false?"each":"queue"](function(){var h=c.extend({},f),l,k=this.nodeType===1,o=k&&c(this).is(":hidden"),x=this;for(l in a){var r=c.camelCase(l);if(l!==r){a[r]=a[l];delete a[l];l=r}if(a[l]==="hide"&&o||a[l]==="show"&&!o)return h.complete.call(this);if(k&&(l==="height"||l==="width")){h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(c.css(this,"display")==="inline"&&c.css(this,"float")==="none")if(c.support.inlineBlockNeedsLayout)if(qa(this.nodeName)===
"inline")this.style.display="inline-block";else{this.style.display="inline";this.style.zoom=1}else this.style.display="inline-block"}if(c.isArray(a[l])){(h.specialEasing=h.specialEasing||{})[l]=a[l][1];a[l]=a[l][0]}}if(h.overflow!=null)this.style.overflow="hidden";h.curAnim=c.extend({},a);c.each(a,function(A,C){var J=new c.fx(x,h,A);if(vb.test(C))J[C==="toggle"?o?"show":"hide":C](a);else{var w=wb.exec(C),I=J.cur()||0;if(w){var L=parseFloat(w[2]),g=w[3]||"px";if(g!=="px"){c.style(x,A,(L||1)+g);I=(L||
1)/J.cur()*I;c.style(x,A,I+g)}if(w[1])L=(w[1]==="-="?-1:1)*L+I;J.custom(I,L,g)}else J.custom(I,C,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);this.each(function(){for(var e=d.length-1;e>=0;e--)if(d[e].elem===this){b&&d[e](true);d.splice(e,1)}});b||this.dequeue();return this}});c.each({slideDown:S("show",1),slideUp:S("hide",1),slideToggle:S("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){c.fn[a]=function(d,e,f){return this.animate(b,
d,e,f)}});c.extend({speed:function(a,b,d){var e=a&&typeof a==="object"?c.extend({},a):{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};e.duration=c.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(){e.queue!==false&&c(this).dequeue();c.isFunction(e.old)&&e.old.call(this)};return e},easing:{linear:function(a,b,d,e){return d+e*a},swing:function(a,b,d,e){return(-Math.cos(a*
Math.PI)/2+0.5)*e+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a=parseFloat(c.css(this.elem,this.prop));return a&&a>-1E4?a:0},custom:function(a,b,d){function e(l){return f.step(l)}
var f=this,h=c.fx;this.startTime=c.now();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;this.pos=this.state=0;e.elem=this.elem;if(e()&&c.timers.push(e)&&!ba)ba=setInterval(h.tick,h.interval)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;
this.custom(this.cur(),0)},step:function(a){var b=c.now(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var e in this.options.curAnim)if(this.options.curAnim[e]!==true)d=false;if(d){if(this.options.overflow!=null&&!c.support.shrinkWrapBlocks){var f=this.elem,h=this.options;c.each(["","X","Y"],function(k,o){f.style["overflow"+o]=h.overflow[k]})}this.options.hide&&c(this.elem).hide();if(this.options.hide||
this.options.show)for(var l in this.options.curAnim)c.style(this.elem,l,this.options.orig[l]);this.options.complete.call(this.elem)}return false}else{a=b-this.startTime;this.state=a/this.options.duration;b=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||b](this.state,a,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=
c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(ba);ba=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===
b.elem}).length};var xb=/^t(?:able|d|h)$/i,Ia=/^(?:body|html)$/i;c.fn.offset="getBoundingClientRect"in t.documentElement?function(a){var b=this[0],d;if(a)return this.each(function(l){c.offset.setOffset(this,a,l)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,h=f.documentElement;if(!d||!c.contains(h,b))return d||{top:0,left:0};b=f.body;f=fa(f);return{top:d.top+(f.pageYOffset||c.support.boxModel&&
h.scrollTop||b.scrollTop)-(h.clientTop||b.clientTop||0),left:d.left+(f.pageXOffset||c.support.boxModel&&h.scrollLeft||b.scrollLeft)-(h.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(x){c.offset.setOffset(this,a,x)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d,e=b.offsetParent,f=b.ownerDocument,h=f.documentElement,l=f.body;d=(f=f.defaultView)?f.getComputedStyle(b,null):b.currentStyle;
for(var k=b.offsetTop,o=b.offsetLeft;(b=b.parentNode)&&b!==l&&b!==h;){if(c.offset.supportsFixedPosition&&d.position==="fixed")break;d=f?f.getComputedStyle(b,null):b.currentStyle;k-=b.scrollTop;o-=b.scrollLeft;if(b===e){k+=b.offsetTop;o+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&xb.test(b.nodeName))){k+=parseFloat(d.borderTopWidth)||0;o+=parseFloat(d.borderLeftWidth)||0}e=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"){k+=
parseFloat(d.borderTopWidth)||0;o+=parseFloat(d.borderLeftWidth)||0}d=d}if(d.position==="relative"||d.position==="static"){k+=l.offsetTop;o+=l.offsetLeft}if(c.offset.supportsFixedPosition&&d.position==="fixed"){k+=Math.max(h.scrollTop,l.scrollTop);o+=Math.max(h.scrollLeft,l.scrollLeft)}return{top:k,left:o}};c.offset={initialize:function(){var a=t.body,b=t.createElement("div"),d,e,f,h=parseFloat(c.css(a,"marginTop"))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",
height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(b,a.firstChild);d=b.firstChild;e=d.firstChild;f=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==5;this.doesAddBorderForTableAndCells=
f.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==h;a.removeChild(b);c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.css(a,
"marginTop"))||0;d+=parseFloat(c.css(a,"marginLeft"))||0}return{top:b,left:d}},setOffset:function(a,b,d){var e=c.css(a,"position");if(e==="static")a.style.position="relative";var f=c(a),h=f.offset(),l=c.css(a,"top"),k=c.css(a,"left"),o=e==="absolute"&&c.inArray("auto",[l,k])>-1;e={};var x={};if(o)x=f.position();l=o?x.top:parseInt(l,10)||0;k=o?x.left:parseInt(k,10)||0;if(c.isFunction(b))b=b.call(a,d,h);if(b.top!=null)e.top=b.top-h.top+l;if(b.left!=null)e.left=b.left-h.left+k;"using"in b?b.using.call(a,
e):f.css(e)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),e=Ia.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.css(a,"marginTop"))||0;d.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(b[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(b[0],"borderLeftWidth"))||0;return{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||t.body;a&&!Ia.test(a.nodeName)&&
c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(e){var f=this[0],h;if(!f)return null;if(e!==B)return this.each(function(){if(h=fa(this))h.scrollTo(!a?e:c(h).scrollLeft(),a?e:c(h).scrollTop());else this[d]=e});else return(h=fa(f))?"pageXOffset"in h?h[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&h.document.documentElement[d]||h.document.body[d]:f[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();
c.fn["inner"+b]=function(){return this[0]?parseFloat(c.css(this[0],d,"padding")):null};c.fn["outer"+b]=function(e){return this[0]?parseFloat(c.css(this[0],d,e?"margin":"border")):null};c.fn[d]=function(e){var f=this[0];if(!f)return e==null?null:this;if(c.isFunction(e))return this.each(function(l){var k=c(this);k[d](e.call(this,l,k[d]()))});if(c.isWindow(f))return f.document.compatMode==="CSS1Compat"&&f.document.documentElement["client"+b]||f.document.body["client"+b];else if(f.nodeType===9)return Math.max(f.documentElement["client"+
b],f.body["scroll"+b],f.documentElement["scroll"+b],f.body["offset"+b],f.documentElement["offset"+b]);else if(e===B){f=c.css(f,d);var h=parseFloat(f);return c.isNaN(h)?f:h}else return this.css(d,typeof e==="string"?e:e+"px")}})})(window);
;

/**
 * jQuery Once Plugin v1.2
 * http://plugins.jquery.com/project/once
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function ($) {
  var cache = {}, uuid = 0;

  /**
   * Filters elements by whether they have not yet been processed.
   *
   * @param id
   *   (Optional) If this is a string, then it will be used as the CSS class
   *   name that is applied to the elements for determining whether it has
   *   already been processed. The elements will get a class in the form of
   *   "id-processed".
   *
   *   If the id parameter is a function, it will be passed off to the fn
   *   parameter and the id will become a unique identifier, represented as a
   *   number.
   *
   *   When the id is neither a string or a function, it becomes a unique
   *   identifier, depicted as a number. The element's class will then be
   *   represented in the form of "jquery-once-#-processed".
   *
   *   Take note that the id must be valid for usage as an element's class name.
   * @param fn
   *   (Optional) If given, this function will be called for each element that
   *   has not yet been processed. The function's return value follows the same
   *   logic as $.each(). Returning true will continue to the next matched
   *   element in the set, while returning false will entirely break the
   *   iteration.
   */
  $.fn.once = function (id, fn) {
    if (typeof id != 'string') {
      // Generate a numeric ID if the id passed can't be used as a CSS class.
      if (!(id in cache)) {
        cache[id] = ++uuid;
      }
      // When the fn parameter is not passed, we interpret it from the id.
      if (!fn) {
        fn = id;
      }
      id = 'jquery-once-' + cache[id];
    }
    // Remove elements from the set that have already been processed.
    var name = id + '-processed';
    var elements = this.not('.' + name).addClass(name);

    return $.isFunction(fn) ? elements.each(fn) : elements;
  };

  /**
   * Filters elements that have been processed once already.
   *
   * @param id
   *   A required string representing the name of the class which should be used
   *   when filtering the elements. This only filters elements that have already
   *   been processed by the once function. The id should be the same id that
   *   was originally passed to the once() function.
   * @param fn
   *   (Optional) If given, this function will be called for each element that
   *   has not yet been processed. The function's return value follows the same
   *   logic as $.each(). Returning true will continue to the next matched
   *   element in the set, while returning false will entirely break the
   *   iteration.
   */
  $.fn.removeOnce = function (id, fn) {
    var name = id + '-processed';
    var elements = this.filter('.' + name).removeClass(name);

    return $.isFunction(fn) ? elements.each(fn) : elements;
  };
})(jQuery);
;

var Drupal = Drupal || { 'settings': {}, 'behaviors': {}, 'locale': {} };

// Allow other JavaScript libraries to use $.
jQuery.noConflict();

(function ($) {

/**
 * Attach all registered behaviors to a page element.
 *
 * Behaviors are event-triggered actions that attach to page elements, enhancing
 * default non-JavaScript UIs. Behaviors are registered in the Drupal.behaviors
 * object using the method 'attach' and optionally also 'detach' as follows:
 * @code
 *    Drupal.behaviors.behaviorName = {
 *      attach: function (context, settings) {
 *        ...
 *      },
 *      detach: function (context, settings, trigger) {
 *        ...
 *      }
 *    };
 * @endcode
 *
 * Drupal.attachBehaviors is added below to the jQuery ready event and so
 * runs on initial page load. Developers implementing AHAH/Ajax in their
 * solutions should also call this function after new page content has been
 * loaded, feeding in an element to be processed, in order to attach all
 * behaviors to the new content.
 *
 * Behaviors should use
 * @code
 *   $(selector).once('behavior-name', function () {
 *     ...
 *   });
 * @endcode
 * to ensure the behavior is attached only once to a given element. (Doing so
 * enables the reprocessing of given elements, which may be needed on occasion
 * despite the ability to limit behavior attachment to a particular element.)
 *
 * @param context
 *   An element to attach behaviors to. If none is given, the document element
 *   is used.
 * @param settings
 *   An object containing settings for the current context. If none given, the
 *   global Drupal.settings object is used.
 */
Drupal.attachBehaviors = function (context, settings) {
  context = context || document;
  settings = settings || Drupal.settings;
  // Execute all of them.
  $.each(Drupal.behaviors, function () {
    if ($.isFunction(this.attach)) {
      this.attach(context, settings);
    }
  });
};

/**
 * Detach registered behaviors from a page element.
 *
 * Developers implementing AHAH/Ajax in their solutions should call this
 * function before page content is about to be removed, feeding in an element
 * to be processed, in order to allow special behaviors to detach from the
 * content.
 *
 * Such implementations should look for the class name that was added in their
 * corresponding Drupal.behaviors.behaviorName.attach implementation, i.e.
 * behaviorName-processed, to ensure the behavior is detached only from
 * previously processed elements.
 *
 * @param context
 *   An element to detach behaviors from. If none is given, the document element
 *   is used.
 * @param settings
 *   An object containing settings for the current context. If none given, the
 *   global Drupal.settings object is used.
 * @param trigger
 *   A string containing what's causing the behaviors to be detached. The
 *   possible triggers are:
 *   - unload: (default) The context element is being removed from the DOM.
 *   - move: The element is about to be moved within the DOM (for example,
 *     during a tabledrag row swap). After the move is completed,
 *     Drupal.attachBehaviors() is called, so that the behavior can undo
 *     whatever it did in response to the move. Many behaviors won't need to
 *     do anything simply in response to the element being moved, but because
 *     IFRAME elements reload their "src" when being moved within the DOM,
 *     behaviors bound to IFRAME elements (like WYSIWYG editors) may need to
 *     take some action.
 *   - serialize: When an Ajax form is submitted, this is called with the
 *     form as the context. This provides every behavior within the form an
 *     opportunity to ensure that the field elements have correct content
 *     in them before the form is serialized. The canonical use-case is so
 *     that WYSIWYG editors can update the hidden textarea to which they are
 *     bound.
 *
 * @see Drupal.attachBehaviors
 */
Drupal.detachBehaviors = function (context, settings, trigger) {
  context = context || document;
  settings = settings || Drupal.settings;
  trigger = trigger || 'unload';
  // Execute all of them.
  $.each(Drupal.behaviors, function () {
    if ($.isFunction(this.detach)) {
      this.detach(context, settings, trigger);
    }
  });
};

/**
 * Encode special characters in a plain-text string for display as HTML.
 */
Drupal.checkPlain = function (str) {
  var character, regex,
  // Changes made by Vincent on 07 Sep 2011 for handling single quote in admin pages
  //    replace = { '&': '&amp;', '"': '&quot;', '<': '&lt;', '>': '&gt;' };
   replace = { '&': '&amp;', '"': '&quot;', '<': '&lt;', '>': '&gt;', "'":"''" };
  str = String(str);
  for (character in replace) {
    if (replace.hasOwnProperty(character)) {
      regex = new RegExp(character, 'g');
      str = str.replace(regex, replace[character]);
    }
  }
  return str;
};

/**
 * Translate strings to the page language or a given language.
 *
 * See the documentation of the server-side t() function for further details.
 *
 * @param str
 *   A string containing the English string to translate.
 * @param args
 *   An object of replacements pairs to make after translation. Incidences
 *   of any key in this array are replaced with the corresponding value.
 *   Based on the first character of the key, the value is escaped and/or themed:
 *    - !variable: inserted as is
 *    - @variable: escape plain text to HTML (Drupal.checkPlain)
 *    - %variable: escape text and theme as a placeholder for user-submitted
 *      content (checkPlain + Drupal.theme('placeholder'))
 * @return
 *   The translated string.
 */
Drupal.t = function (str, args) {
  // Fetch the localized version of the string.
  if (Drupal.locale.strings && Drupal.locale.strings[str]) {
    str = Drupal.locale.strings[str];
  }

  if (args) {
    // Transform arguments before inserting them.
    for (var key in args) {
      switch (key.charAt(0)) {
        // Escaped only.
        case '@':
          args[key] = Drupal.checkPlain(args[key]);
        break;
        // Pass-through.
        case '!':
          break;
        // Escaped and placeholder.
        case '%':
        default:
          args[key] = Drupal.theme('placeholder', args[key]);
          break;
      }
      str = str.replace(key, args[key]);
    }
  }
  return str;
};

/**
 * Format a string containing a count of items.
 *
 * This function ensures that the string is pluralized correctly. Since Drupal.t() is
 * called by this function, make sure not to pass already-localized strings to it.
 *
 * See the documentation of the server-side format_plural() function for further details.
 *
 * @param count
 *   The item count to display.
 * @param singular
 *   The string for the singular case. Please make sure it is clear this is
 *   singular, to ease translation (e.g. use "1 new comment" instead of "1 new").
 *   Do not use @count in the singular string.
 * @param plural
 *   The string for the plural case. Please make sure it is clear this is plural,
 *   to ease translation. Use @count in place of the item count, as in "@count
 *   new comments".
 * @param args
 *   An object of replacements pairs to make after translation. Incidences
 *   of any key in this array are replaced with the corresponding value.
 *   Based on the first character of the key, the value is escaped and/or themed:
 *    - !variable: inserted as is
 *    - @variable: escape plain text to HTML (Drupal.checkPlain)
 *    - %variable: escape text and theme as a placeholder for user-submitted
 *      content (checkPlain + Drupal.theme('placeholder'))
 *   Note that you do not need to include @count in this array.
 *   This replacement is done automatically for the plural case.
 * @return
 *   A translated string.
 */
Drupal.formatPlural = function (count, singular, plural, args) {
  var args = args || {};
  args['@count'] = count;
  // Determine the index of the plural form.
  var index = Drupal.locale.pluralFormula ? Drupal.locale.pluralFormula(args['@count']) : ((args['@count'] == 1) ? 0 : 1);

  if (index == 0) {
    return Drupal.t(singular, args);
  }
  else if (index == 1) {
    return Drupal.t(plural, args);
  }
  else {
    args['@count[' + index + ']'] = args['@count'];
    delete args['@count'];
    return Drupal.t(plural.replace('@count', '@count[' + index + ']'), args);
  }
};

/**
 * Generate the themed representation of a Drupal object.
 *
 * All requests for themed output must go through this function. It examines
 * the request and routes it to the appropriate theme function. If the current
 * theme does not provide an override function, the generic theme function is
 * called.
 *
 * For example, to retrieve the HTML for text that should be emphasized and
 * displayed as a placeholder inside a sentence, call
 * Drupal.theme('placeholder', text).
 *
 * @param func
 *   The name of the theme function to call.
 * @param ...
 *   Additional arguments to pass along to the theme function.
 * @return
 *   Any data the theme function returns. This could be a plain HTML string,
 *   but also a complex object.
 */
Drupal.theme = function (func) {
  var args = Array.prototype.slice.apply(arguments, [1]);

  return (Drupal.theme[func] || Drupal.theme.prototype[func]).apply(this, args);
};

/**
 * Freeze the current body height (as minimum height). Used to prevent
 * unnecessary upwards scrolling when doing DOM manipulations.
 */
Drupal.freezeHeight = function () {
  Drupal.unfreezeHeight();
  $('<div id="freeze-height"></div>').css({
    position: 'absolute',
    top: '0px',
    left: '0px',
    width: '1px',
    height: $('body').css('height')
  }).appendTo('body');
};

/**
 * Unfreeze the body height.
 */
Drupal.unfreezeHeight = function () {
  $('#freeze-height').remove();
};

/**
 * Encodes a Drupal path for use in a URL.
 *
 * For aesthetic reasons slashes are not escaped.
 */
Drupal.encodePath = function (item, uri) {
  uri = uri || location.href;
  return encodeURIComponent(item).replace(/%2F/g, '/');
};

/**
 * Get the text selection in a textarea.
 */
Drupal.getSelection = function (element) {
  if (typeof element.selectionStart != 'number' && document.selection) {
    // The current selection.
    var range1 = document.selection.createRange();
    var range2 = range1.duplicate();
    // Select all text.
    range2.moveToElementText(element);
    // Now move 'dummy' end point to end point of original range.
    range2.setEndPoint('EndToEnd', range1);
    // Now we can calculate start and end points.
    var start = range2.text.length - range1.text.length;
    var end = start + range1.text.length;
    return { 'start': start, 'end': end };
  }
  return { 'start': element.selectionStart, 'end': element.selectionEnd };
};

/**
 * Build an error message from an Ajax response.
 */
Drupal.ajaxError = function (xmlhttp, uri) {
  var statusCode, statusText, pathText, responseText, readyStateText, message;
  if (xmlhttp.status) {
    statusCode = "\n" + Drupal.t("An AJAX HTTP error occurred.") +  "\n" + Drupal.t("HTTP Result Code: !status", {'!status': xmlhttp.status});
  }
  else {
    statusCode = "\n" + Drupal.t("An AJAX HTTP request terminated abnormally.");
  }
  statusCode += "\n" + Drupal.t("Debugging information follows.");
  pathText = "\n" + Drupal.t("Path: !uri", {'!uri': uri} );
  statusText = '';
  // In some cases, when statusCode == 0, xmlhttp.statusText may not be defined.
  // Unfortunately, testing for it with typeof, etc, doesn't seem to catch that
  // and the test causes an exception. So we need to catch the exception here.
  try {
    statusText = "\n" + Drupal.t("StatusText: !statusText", {'!statusText': $.trim(xmlhttp.statusText)});
  }
  catch (e) {}

  responseText = '';
  // Again, we don't have a way to know for sure whether accessing
  // xmlhttp.responseText is going to throw an exception. So we'll catch it.
  try {
    responseText = "\n" + Drupal.t("ResponseText: !responseText", {'!responseText': $.trim(xmlhttp.responseText) } );
  } catch (e) {}

  // Make the responseText more readable by stripping HTML tags and newlines.
  responseText = responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");
  responseText = responseText.replace(/[\n]+\s+/g,"\n");

  // We don't need readyState except for status == 0.
  readyStateText = xmlhttp.status == 0 ? ("\n" + Drupal.t("ReadyState: !readyState", {'!readyState': xmlhttp.readyState})) : "";

  message = statusCode + pathText + statusText + responseText + readyStateText;

  // Expertusone custom error log
  if (window.console != 'undefined') {
	  console.error('Expertusone error log: ' + message);
  }

  // Expertusone custom error message to end users
  var statusCodeFromExpertus = "\n" + Drupal.t("ERR057");
  if(xmlhttp.responseText == "Login again since your session has expired" || xmlhttp.responseText == "" || xmlhttp.responseText == Drupal.t("ERR055"))
	  statusCodeFromExpertus = "\n" + Drupal.t("ERR055");


  return statusCodeFromExpertus;
};

// Class indicating that JS is enabled; used for styling purpose.
$('html').addClass('js');

// 'js enabled' cookie.
document.cookie = 'has_js=1; path=/';

/**
 * Additions to jQuery.support.
 */
$(function () {
  /**
   * Boolean indicating whether or not position:fixed is supported.
   */
  if (jQuery.support.positionFixed === undefined) {
    var el = $('<div style="position:fixed; top:10px" />').appendTo(document.body);
    jQuery.support.positionFixed = el[0].offsetTop === 10;
    el.remove();
  }
});

//Attach all behaviors.
$(function () {
  Drupal.attachBehaviors(document, Drupal.settings);
});

/**
 * The default themes.
 */
Drupal.theme.prototype = {

  /**
   * Formats text for emphasized display in a placeholder inside a sentence.
   *
   * @param str
   *   The text to format (plain-text).
   * @return
   *   The formatted text (html).
   */
  placeholder: function (str) {
    return '<em class="placeholder">' + Drupal.checkPlain(str) + '</em>';
  }
};

})(jQuery);
;

/*!
 * jQuery UI 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.7",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,
"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");
if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,
"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,
d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});
c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&
b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);
;

/*!
 * jQuery UI Widget 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,
a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;
e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;

/*!
 * jQuery UI Mouse 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(c){c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(true===c.data(b.target,a.widgetName+".preventClickEvent")){c.removeData(b.target,a.widgetName+".preventClickEvent");b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=
a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var b=this,e=a.which==1,f=typeof this.options.cancel=="string"?c(a.target).parents().add(a.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}this._mouseMoveDelegate=function(d){return b._mouseMove(d)};this._mouseUpDelegate=function(d){return b._mouseUp(d)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return a.originalEvent.mouseHandled=true}},_mouseMove:function(a){if(c.browser.msie&&!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);
return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;

/*
 * jQuery UI Draggable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;return true},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();
d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);return true},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,
b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone():this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||
0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment==
"parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[(a.containment=="document"?0:d(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(a.containment=="document"?0:d(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?
0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=d(a.containment)[0];if(b){a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),
10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor==
Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,g=a.pageY;
if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/
b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;e=this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=
this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.7"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var g=d.data(this,"sortable");if(g&&!g.options.disabled){c.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=
c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,
true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=
0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=
a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","iframeFix",{start:function(){var a=d(this).data("draggable").options;d(a.iframeFix===true?"iframe":a.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")})},
stop:function(){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=
document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!="x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-
c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-
(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable",
"snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,g=b.offset.left,n=g+c.helperProportions.width,m=b.offset.top,o=m+c.helperProportions.height,h=
c.snapElements.length-1;h>=0;h--){var i=c.snapElements[h].left,k=i+c.snapElements[h].width,j=c.snapElements[h].top,l=j+c.snapElements[h].height;if(i-e<g&&g<k+e&&j-e<m&&m<l+e||i-e<g&&g<k+e&&j-e<o&&o<l+e||i-e<n&&n<k+e&&j-e<m&&m<l+e||i-e<n&&n<k+e&&j-e<o&&o<l+e){if(f.snapMode!="inner"){var p=Math.abs(j-o)<=e,q=Math.abs(l-m)<=e,r=Math.abs(i-n)<=e,s=Math.abs(k-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",
{top:l,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k}).left-c.margins.left}var t=p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(j-m)<=e;q=Math.abs(l-o)<=e;r=Math.abs(i-g)<=e;s=Math.abs(k-n)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:l-c.helperProportions.height,
left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[h].snapping&&(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=p||q||r||s||t}else{c.snapElements[h].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,
b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
;

/*
 * jQuery UI Position 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,
left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=
k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+parseInt(c.curCSS(this,"marginRight",true))||0,w=m+q+parseInt(c.curCSS(this,"marginBottom",true))||0,i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=m/2;
i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=
d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=
a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),
g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);
;

/*
 * jQuery UI Dialog 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(c,j){var k={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},l={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};c.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;b<0&&
c(this).css("top",a.top-b)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=b.title||"&#160;",e=c.ui.dialog.getTitleId(a.element),g=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",
-1).css("outline",0).keydown(function(i){if(b.closeOnEscape&&i.keyCode&&i.keyCode===c.ui.keyCode.ESCAPE){a.close(i);i.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(i){a.moveToTop(false,i)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),h=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(i){a.close(i);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(h);c("<span></span>").addClass("ui-dialog-title").attr("id",e).html(d).prependTo(f);if(c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose))b.beforeClose=
b.beforeclose;f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=false;c.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy();a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");a.uiDialog.remove();a.originalTitle&&
a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(false!==b._trigger("beforeClose",a)){b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)});else{b.uiDialog.hide();b._trigger("close",a)}c.ui.dialog.overlay.resize();if(b.options.modal){d=0;c(".ui-dialog").each(function(){if(this!==b.uiDialog[0]){e=c(this).css("z-index");
isNaN(e)||(d=Math.max(d,e))}});c.ui.dialog.maxZ=d}return b}},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this,e=d.options;if(e.modal&&!a||!e.stack&&!e.modal)return d._trigger("focus",b);if(e.zIndex>c.ui.dialog.maxZ)c.ui.dialog.maxZ=e.zIndex;if(d.overlay){c.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ)}a={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")};c.ui.dialog.maxZ+=1;d.uiDialog.css("z-index",c.ui.dialog.maxZ);
d.element.attr(a);d._trigger("focus",b);return d},open:function(){if(!this._isOpen){var a=this,b=a.options,d=a.uiDialog;a.overlay=b.modal?new c.ui.dialog.overlay(a):null;a._size();a._position(b.position);d.show(b.show);a.moveToTop(true);b.modal&&d.bind("keypress.ui-dialog",function(e){if(e.keyCode===c.ui.keyCode.TAB){var g=c(":tabbable",this),f=g.filter(":first");g=g.filter(":last");if(e.target===g[0]&&!e.shiftKey){f.focus(1);return false}else if(e.target===f[0]&&e.shiftKey){g.focus(1);return false}}});
c(a.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus();a._isOpen=true;a._trigger("open");return a}},_createButtons:function(a){var b=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();typeof a==="object"&&a!==null&&c.each(a,function(){return!(d=true)});if(d){c.each(a,function(f,
h){h=c.isFunction(h)?{click:h,text:f}:h;f=c('<button type="button"></button>').attr(h,true).unbind("click").click(function(){h.click.apply(b.element[0],arguments)}).appendTo(g);c.fn.button&&f.button()});e.appendTo(b.uiDialog)}},_makeDraggable:function(){function a(f){return{position:f.position,offset:f.offset}}var b=this,d=b.options,e=c(document),g;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,h){g=
d.height==="auto"?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",f,a(h))},drag:function(f,h){b._trigger("drag",f,a(h))},stop:function(f,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(g);b._trigger("dragStop",f,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(f){return{originalPosition:f.originalPosition,originalSize:f.originalSize,
position:f.position,size:f.size}}a=a===j?this.options.resizable:a;var d=this,e=d.options,g=d.uiDialog.css("position");a=typeof a==="string"?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(f,h){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",f,b(h))},resize:function(f,h){d._trigger("resize",f,b(h))},stop:function(f,
h){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",f,b(h));c.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if(typeof a==="string"||typeof a==="object"&&"0"in a){b=a.split?a.split(" "):[a[0],a[1]];if(b.length===
1)b[1]=b[0];c.each(["left","top"],function(g,f){if(+b[g]===b[g]){d[g]=b[g];b[g]=f}});a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")}}a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=false;c.each(a,function(g,f){b._setOption(g,f);if(g in k)e=true;if(g in
l)d[g]=f});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this,e=d.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":d._createButtons(b);break;case "closeText":d.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");
break;case "draggable":var g=e.is(":data(draggable)");g&&!b&&e.draggable("destroy");!g&&b&&d._makeDraggable();break;case "position":d._position(b);break;case "resizable":(g=e.is(":data(resizable)"))&&!b&&e.resizable("destroy");g&&typeof b==="string"&&e.resizable("option","handles",b);!g&&b!==false&&d._makeResizable(b);break;case "title":c(".ui-dialog-title",d.uiDialogTitlebar).html(""+(b||"&#160;"));break}c.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var a=this.options,b,d,e=
this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(a.minWidth>a.width)a.width=a.minWidth;b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);if(a.height==="auto")if(c.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();a=this.element.css("height","auto").height();e||this.uiDialog.hide();this.element.height(Math.max(a,d))}else this.element.height(Math.max(a.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.7",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");if(!a){this.uuid+=1;a=this.uuid}return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){if(this.instances.length===
0){setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(d){if(c(d.target).zIndex()<c.ui.dialog.overlay.maxZ)return false})},1);c(document).bind("keydown.dialog-overlay",function(d){if(a.options.closeOnEscape&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);b!=-1&&this.oldInstances.push(this.instances.splice(b,1)[0]);this.instances.length===0&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;if(c.browser.msie&&c.browser.version<7){a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return a<b?c(window).height()+"px":a+"px"}else return c(document).height()+"px"},width:function(){var a,b;if(c.browser.msie&&c.browser.version<7){a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return a<b?c(window).width()+"px":a+"px"}else return c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,
function(){a=a.add(this)});a.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
;

/*
 * jQuery UI Resizable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var c=this.handles.split(",");this.handles={};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle '+("ui-resizable-"+f)+'"></div>');/sw|se|ne|nw/.test(f)&&g.css({zIndex:++a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(h){h=h||this.element;for(var i in this.handles){if(this.handles[i].constructor==
String)this.handles[i]=e(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var j=e(this.handles[i],this.element),k=0;k=/sw|ne|nw|se|n|s/.test(i)?j.outerHeight():j.outerWidth();j=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");h.css(j,k);this._proportionallyResize()}e(this.handles[i])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!b.resizing){if(this.className)var h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=h&&h[1]?h[1]:"se"}});if(a.autoHide){this._handles.hide();e(this.element).addClass("ui-resizable-autohide").hover(function(){e(this).removeClass("ui-resizable-autohide");b._handles.show()},function(){if(!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(c){e(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=false;for(var c in this.handles)if(e(this.handles[c])[0]==b.target)a=true;return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),
d=this.element;this.resizing=true;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};if(d.is(".ui-draggable")||/absolute/.test(d.css("position")))d.css({position:"absolute",top:c.top,left:c.left});e.browser.opera&&/relative/.test(d.css("position"))&&d.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();c=m(this.helper.css("left"));var f=m(this.helper.css("top"));if(a.containment){c+=e(a.containment).scrollLeft()||0;f+=e(a.containment).scrollTop()||0}this.offset=
this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio=typeof a.aspectRatio=="number"?a.aspectRatio:
this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",a=="auto"?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return true},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return false;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",
b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return false},_mouseStop:function(b){this.resizing=false;var a=this.options,c=this;if(this._helper){var d=this._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName);d=f&&e.ui.hasScroll(d[0],"left")?0:c.sizeDiff.height;
f={width:c.size.width-(f?0:c.sizeDiff.width),height:c.size.height-d};d=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var g=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;a.animate||this.element.css(e.extend(f,{top:g,left:d}));c.helper.height(c.size.height);c.helper.width(c.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",
b);this._helper&&this.helper.remove();return false},_updateCache:function(b){this.offset=this.helper.offset();if(l(b.left))this.position.left=b.left;if(l(b.top))this.position.top=b.top;if(l(b.height))this.size.height=b.height;if(l(b.width))this.size.width=b.width},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;if(b.height)b.width=c.height*this.aspectRatio;else if(b.width)b.height=c.width/this.aspectRatio;if(d=="sw"){b.left=a.left+(c.width-b.width);b.top=null}if(d=="nw"){b.top=
a.top+(c.height-b.height);b.left=a.left+(c.width-b.width)}return b},_respectSize:function(b){var a=this.options,c=this.axis,d=l(b.width)&&a.maxWidth&&a.maxWidth<b.width,f=l(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=l(b.width)&&a.minWidth&&a.minWidth>b.width,h=l(b.height)&&a.minHeight&&a.minHeight>b.height;if(g)b.width=a.minWidth;if(h)b.height=a.minHeight;if(d)b.width=a.maxWidth;if(f)b.height=a.maxHeight;var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,
k=/sw|nw|w/.test(c);c=/nw|ne|n/.test(c);if(g&&k)b.left=i-a.minWidth;if(d&&k)b.left=i-a.maxWidth;if(h&&c)b.top=j-a.minHeight;if(f&&c)b.top=j-a.maxHeight;if((a=!b.width&&!b.height)&&!b.left&&b.top)b.top=null;else if(a&&!b.top&&b.left)b.left=null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),
c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(g,h){g=parseInt(g,10)||0;h=parseInt(f[h],10)||0;return g+h})}e.browser.msie&&(e(b).is(":hidden")||e(b).parents(":hidden").length)||c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=
this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var a=e.browser.msie&&e.browser.version<7,c=a?1:0;a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+
a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,
arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);b!="resize"&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,
{version:"1.8.7"});e.ui.plugin.add("resizable","alsoResize",{start:function(){var b=e(this).data("resizable").options,a=function(c){e(c).each(function(){var d=e(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10),position:d.css("position")})})};if(typeof b.alsoResize=="object"&&!b.alsoResize.parentNode)if(b.alsoResize.length){b.alsoResize=b.alsoResize[0];a(b.alsoResize)}else e.each(b.alsoResize,
function(c){a(c)});else a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable");b=c.options;var d=c.originalSize,f=c.originalPosition,g={height:c.size.height-d.height||0,width:c.size.width-d.width||0,top:c.position.top-f.top||0,left:c.position.left-f.left||0},h=function(i,j){e(i).each(function(){var k=e(this),q=e(this).data("resizable-alsoresize"),p={},r=j&&j.length?j:k.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(n,o){if((n=
(q[o]||0)+(g[o]||0))&&n>=0)p[o]=n||null});if(e.browser.opera&&/relative/.test(k.css("position"))){c._revertToRelativePosition=true;k.css({position:"absolute",top:"auto",left:"auto"})}k.css(p)})};typeof b.alsoResize=="object"&&!b.alsoResize.nodeType?e.each(b.alsoResize,function(i,j){h(i,j)}):h(b.alsoResize)},stop:function(){var b=e(this).data("resizable"),a=b.options,c=function(d){e(d).each(function(){var f=e(this);f.css({position:f.data("resizable-alsoresize").position})})};if(b._revertToRelativePosition){b._revertToRelativePosition=
false;typeof a.alsoResize=="object"&&!a.alsoResize.nodeType?e.each(a.alsoResize,function(d){c(d)}):c(a.alsoResize)}e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height;f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g};g=parseInt(a.element.css("left"),10)+(a.position.left-
a.originalPosition.left)||null;var h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var i={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:i.width,height:i.height});a._updateCache(i);a._propagate("resize",
b)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c){b.containerElement=e(a);if(/document/.test(c)||c==document){b.containerOffset={left:0,top:0};b.containerPosition={left:0,top:0};b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{var d=e(a),f=[];e(["Top",
"Right","Left","Bottom"]).each(function(i,j){f[i]=m(d.css("padding"+j))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};c=b.containerOffset;var g=b.containerSize.height,h=b.containerSize.width;h=e.ui.hasScroll(a,"left")?a.scrollWidth:h;g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,
f=a.position;b=a._aspectRatio||b.shiftKey;var g={top:0,left:0},h=a.containerElement;if(h[0]!=document&&/static/.test(h.css("position")))g=d;if(f.left<(a._helper?d.left:0)){a.size.width+=a._helper?a.position.left-d.left:a.position.left-g.left;if(b)a.size.height=a.size.width/c.aspectRatio;a.position.left=c.helper?d.left:0}if(f.top<(a._helper?d.top:0)){a.size.height+=a._helper?a.position.top-d.top:a.position.top;if(b)a.size.width=a.size.height*c.aspectRatio;a.position.top=a._helper?d.top:0}a.offset.left=
a.parentData.left+a.position.left;a.offset.top=a.parentData.top+a.position.top;c=Math.abs((a._helper?a.offset.left-g.left:a.offset.left-g.left)+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));if(f&&g)c-=a.parentData.left;if(c+a.size.width>=a.parentData.width){a.size.width=a.parentData.width-c;if(b)a.size.height=a.size.width/a.aspectRatio}if(d+
a.size.height>=a.parentData.height){a.size.height=a.parentData.height-d;if(b)a.size.width=a.size.height*a.aspectRatio}},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width;g=g.outerHeight()-b.sizeDiff.height;b._helper&&!a.animate&&/relative/.test(f.css("position"))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&!a.animate&&/static/.test(f.css("position"))&&
e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof a.ghost=="string"?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",
height:b.size.height,width:b.size.width})},stop:function(){var b=e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid=typeof a.grid=="number"?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1);a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);if(/^(se|s|e)$/.test(g)){b.size.width=
d.width+h;b.size.height=d.height+a}else if(/^(ne)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}else{if(/^(sw)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a}else{b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}b.position.left=f.left-h}}});var m=function(b){return parseInt(b,10)||0},l=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
;
/*
 * Metadata - jQuery plugin for parsing metadata from elements
 *
 * Copyright (c) 2006 John Resig, Yehuda Katz, J�örn Zaefferer, Paul McLanahan
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.metadata.js,v 1.1 2011-01-03 13:10:27 srprabhu Exp $
 *
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(9($){$.r({3:{7:{8:\'l\',h:\'3\',q:/({.*})/,4:\'3\'},w:9(a,b){g.7.8=a;g.7.h=b},j:9(b,c){5 d=$.r({},g.7,c);2(!d.4.o)d.4=\'3\';5 a=$.n(b,d.4);2(a)6 a;a="{}";2(d.8=="l"){5 m=d.q.v(b.u);2(m)a=m[1]}k 2(d.8=="t"){2(!b.i)6;5 e=b.i(d.h);2(e.o)a=$.s(e[0].C)}k 2(b.p!=A){5 f=b.p(d.h);2(f)a=f}2(a.z(\'{\')<0)a="{"+a+"}";a=y("("+a+")");$.n(b,d.4,a);6 a}}});$.x.3=9(a){6 $.3.j(g[0],a)}})(B);',39,39,'||if|metadata|single|var|return|defaults|type|function|||||||this|name|getElementsByTagName|get|else|class||data|length|getAttribute|cre|extend|trim|elem|className|exec|setType|fn|eval|indexOf|undefined|jQuery|innerHTML'.split('|'),0,{}))
var $ =jQuery;;
/**

 * Configurable Parameters of Expertus SmartPortal
 */
var config={
    "data":[
          /* Position 0 - Base URL */
          {"url":[
                  {
                	  admin_url:(typeof resource != "undefined") ? resource.lnr_service_url : "",
                      learner_url:(typeof resource != "undefined") ? resource.lnr_service_url : ""
                  },
                  ]
          },

          /*  Position 1 - Service Action Key */
          {
              "serviceaction":
                  [
                   {
                	   LnrAdvSearchService : 'AdvanceSerarchView',
                	   AnnouncementService : 'AnnouncementEdit',
                	   LnrAnnouncementService : 'AnnouncementView',
                	   AssociateSurveyService : 'AssociateSurvey',
                	   AttachSurveyQuestionService : 'AttachQuestion',
                	   authenticate : 'Authenticate',
                	   AutocompleteService : 'Autocomplete',
                	   BatchMonitorService : 'BatchMonitor',
                	   BulkRegistrationService : 'BulkRegistration',
                	   CatalogService : 'Catalog',
                	   CertMasterService : 'CertificationEdit',
                	   LnrCertificationService : 'CertificationView',
                	   ContentMasterService : 'Content',
                	   LnrCourseDetailService : 'CourseDetailView',
                	   DatatableService : 'Datatable',
                	   LnrEnrollmentService : 'Enrollment',
                	   EnrollStatisticsService : 'EnrollStatistic',
                	   EntityProfileService : 'EntityProfile',
                	   ForumService : 'Forum',
                	   HelpService : 'Help',
                	   LnrHighlyRatedService : 'HighlyRatedView',
                	   InstructorService : 'InstructorEdit',
                	   InstructorService : 'InstructorView',
                	   LaunchService : 'Launch',
                	   LnrLaunchService : 'LaunchView',
                	   LearnerListService : 'LearnerList',
                	   LnrLearningService : 'LearningRequest',
                	   LnrMostViewedService : 'MostViewed',
                	   NotificationService : 'Notification',
                	   LnrOnlineUserService : 'OnlineUserView',
                	   OrganizationService : 'OrganizationEdit',
                	   PreRequisiteService : 'Prerequisite',
                	   PriceUnitService : 'Price',
                	   ProfileConfigService : 'ProfileConfig',
                	   PickListService : 'ProfileList',
                	   ProfileTabService : 'ProfileTab',
                	   ProfileService : 'Profile',
                	   PromoteService : 'Promote',
                	   ReadingService : 'Reading',
                	   ReferService : 'Refer',
                	   LnrRegistrationService : 'RegistrationDetailView',
                	   ReportMasterService : 'Report',
                	   ReportConfigService : 'ReportConfig',
                	   ReportThemeService : 'ReportTheme',
                	   ResourceLocationService : 'Resource',
                	   SavequeryService : 'SaveQuery',
                	   SecurityManagementService : 'SecurityManagement',
                	   LnrSearchService : 'SerarchView',
                	   LnrShoppingCartService : 'ShoppingCart',
                	   SurveyService : 'SurveyEdit',
                	   SurveyQuestionService : 'SurveyQuestionEdit',
                	   LnrsurveyService : 'SurveyView',
                	   TableExport : 'TableExport',
                	   TagsService : 'Tags',
                	   TagsAdminService : 'TagsEdit',
                	   ThemeAssociateService : 'ThemeAssociate',
                	   LnrTrainingProgramCalendarViewService : 'TPCalendarView',
                	   TrainingProgramService : 'TrainingProgramEdit',
                	   LnrTrainingProgramService : 'TrainingProgramView',
                	   TreeService : 'Tree',
                	   UserService : 'UserEdit',
                	   UserRoleMappingService : 'UserRoleMapping',
                	   LnrUserService : 'UserView',
                	   LnrNewReleasesService : 'NewReleases',
                	   MyTeamService : 'MyTeam',
                	   LnrNewUserService : 'NewUser',
					   LnrUserProfileEditService : 'UserProfileEdit',
                	   LnrAlertsService : 'LnrAlerts',
                	   NotificationMappingService : 'NotificationMapping',
                	   LnrPaymentCatalogService : 'PaymentCatalogView',
                	   LinkPathService : 'LinkPath',
                	   LnrMostActiveUserService : 'LnrMostActiveUser'
                    }
                  ]
          },
          /* Position 2 - SmartConnect Licensekey details */
          {"licensekey":[
               {
            	   admin_licensekey:(typeof resource != "undefined") ? resource.admin_licensekey : ""
               }
          ]},
          /* Position 3 - SmartConnect service numner details */
          {"SCServiceno":
            [
             {
                 all:"0002",
                 FederatedSearch:"0003",
                 UserService:'0006',
                 LnrUserService:'0012'
                 //SecurityManagementService:'0009'
             }
             ]
          },
          /* Position 4 - Search Config details */
          {"SearchConfig":
            {"advanced":true, "faq":true,"CategoryBrowse":false}
          },
          /* Position 5 - TimeZone Details */
          {"TimeZone":
                 [
                    {id:'1', value:'Samoa Standard Time (GMT-11:00)'},
                    {id:'2', value:'Hawaii-Aleutian Standard Time (GMT-10:00)'},
                    {id:'3', value:'Hawaii Standard Time (GMT-10:00)'},
                    {id:'4', value:'Alaska Standard Time (GMT-09:00)'},
                    {id:'5', value:'Pacific Standard Time (GMT-08:00)'},
                    {id:'6', value:'Mountain Standard Time (GMT-07:00)'},
                    {id:'7', value:'Mountain Standard Time (GMT-07:00)'},
                    {id:'8', value:'Central Standard Time (GMT-06:00)'},
                    {id:'9', value:'Central Standard Time (GMT-06:00)'},
                    {id:'10', value:'Eastern Standard Time (GMT-05:00)'},
                    {id:'11', value:'Eastern Standard Time (GMT-05:00)'},
                    {id:'12', value:'Atlantic Standard Time (GMT-04:00)'},
                    {id:'13', value:'Atlantic Standard Time (GMT-04:00)'},
                    {id:'14', value:'Newfoundland Standard Time (GMT-03:30)'},
                    {id:'15', value:'India Standard Time (GMT+05:30)'},
                    {id:'16', value:'Chamorro Standard Time (GMT+10:00)'},
                    {id:'17', value:'Moscow Standard Time (GMT+03:00)'},
                    {id:'20', value:'Greenwich Mean Time (GMT)'},
                    {id:'21', value:'Australia-Eastern Standard Time (GMT+10:00)'},
                    {id:'22', value:'Australia-Eastern Standard Time (GMT+10:00)'},
                    {id:'23', value:'Australia-Central Standard Time (GMT+09:30)'},
                    {id:'24', value:'Australia-Central Standard Time (GMT+09:30)'},
                    {id:'25', value:'Western Standard Time (GMT+08:00)'},
                    {id:'26', value:'Central European Standard Time (GMT+01:00)'},
                    {id:'27', value:'Abu Dabi, Muscat (GMT+04:00)'},
                    {id:'28', value:'Kuwait, Riyadh (GMT+03:00)'},
                    {id:'29', value:'Singapore, Malaysia Time (GMT+08:00)'},
                    {id:'30', value:'Pacific DayLight Time (GMT-09:00)'}
                ]
          },
          /* Position 6 - Delivery Type Details */
          {"DeliveryType":
              [
               {
                   "DT_lrn_cls_dty_ilt":{name:'ILT',id:'35619'},
                   "DT_lrn_cls_dty_wbt":{name:'WBT',id:'35620'},
                   "DT_lrn_cls_dty_vcl":{name:'VC',id:'35658',decode:'LIVE',decodeNm:'Virtual Class'},
                   "DT_lrn_cls_dty_vod":{name:"VOD",id:'37129'}
               }
               ]
          }
      ]
};

/**
* It is used to registernamespace
* @param ns
* @public
*/
 function registernamespace(ns)
{
	 try{
    var nsParts = ns.split(".");
    var root = window;

    for(var i=0; i<nsParts.length; i++)
    {
        if(typeof root[nsParts[i]] == "undefined")
        root[nsParts[i]] = new Object();
        root = root[nsParts[i]];
    }
	 }catch(e){
			// to do
		}
};

registernamespace("SMARTPORTAL");
SMARTPORTAL={
    AlertDetailInstance:new Array(),
    SearchWidgetInstance:new Array(),

    t:function(msgstr){
        return Drupal.t(msgstr);
    },

    getAllTimeZonesasSelect:function(pmNameStr,pmSelectId){

        var vTimeZoneStr='<select ' +pmNameStr+'>';
            vTimeZoneStr+="<option value=''>Select</option>";
        var vSelectedId ='';

        for(var i=0; i<config.data[5].TimeZone.length; i++)
        {
            vSelectedId='';
            if(pmSelectId==config.data[5].TimeZone[i].id){
                vSelectedId='selected';
            }
            vTimeZoneStr += "<option "+vSelectedId+" value='"+config.data[5].TimeZone[i].id+"'>"+config.data[5].TimeZone[i].value+'</option>';

        }
        vTimeZoneStr +='</select>';
        return vTimeZoneStr;
    }
};

/* Function is used to load other user profile in the popup page*/
function onLoadClick(otheruserid) {
	try{
		// Issue is fixed For this Ticket #0039337
		onLoadClickSkills();
		if(document.getElementById('myprofile-myactivity-screen')){
			$('#myprofile-myactivity-screen table.myactivity-details').replaceWith('<table cellspacing="2" cellpadding="2" class="myactivity-details" border="0" id="myprofile-activity-userdetails"></table>');
			$('#myprofile-myactivity-screen div#activity-pager').replaceWith('<div id="userdetailsactivity-pager"></div>');
			$("#myprofile-myactivity-screen").myprofileactivity();
		}

	}catch(e){
		// to do
	}
}
/* Function is used to load the skills into the popup page
* Issue is fixed For this Ticket #0039337
*/
function onLoadClickSkills() {
	try{
		if(document.getElementById('myprofile-myskillset-screen')){
			$('#myprofile-myskillset-screen table.myskill-details"').replaceWith('<table cellspacing="2" cellpadding="2" class="myskill-details" border="0" id="myprofile-skill-userdetails"></table>');
			$('#myprofile-myskillset-screen div#skill-pager').replaceWith('<div id="userdetailsskill-pager"></div>');
			$("#myprofile-myskillset-screen").myprofileskills();
		}
	}catch(e){
		// to do
	}
}

/*
window.alert=function(msg){
    callAlertDetail(msg);
};
*/
function isObject(obj){
	try{
    if (obj.constructor.toString().indexOf("Object") == -1)
        return false;
    else
        return true;
	}catch(e){
		// to do
	}
};

function isArray(obj)
{
	try{
    if (obj.constructor.toString().indexOf("Array") == -1)
        return false;
    else
        return true;
	}catch(e){
		// to do
	}
};

function object2string(obj,isparentArray){
	try{
    var outArray = new Array();
    var outstr = "";
    for ( var i in obj) {
        if(i!="prototype")
        {
            if (!isObject(obj[i]) && !isArray(obj[i])){
                if(isparentArray)
                {
                    outArray[outArray.length] = object2string(obj[i]);
                }
                else
                {
                    outArray[outArray.length] = "'" + i + "':'" + obj[i] + "'";
                }
            }
            else if(isObject(obj[i])){
                if(isparentArray)
                {
                    outArray[outArray.length] = object2string(obj[i]);
                }
                else
                {
                    outArray[outArray.length] = "'" + i + "':" + object2string(obj[i])+ "";
                }
            }
            else if(isArray(obj[i])){
                outArray[outArray.length] = "'" + i + "':[" + object2string(obj[i],true)+ "]";
            }
        }
    }

    if(outArray[outArray.length-1]==null)
    {
        outArray.pop();
    }
    outstr += (outArray.join(","));
    if(isparentArray)
    {
        return outstr;
    }
    else if(outstr.length!=0)
    {
        return "{" + outstr + "}";
    }
    else
    {
        return null;
    }
	}catch(e){
		// to do
	}
};


function DateCmp(date1, date2) {
	try{
    /* format 2009-12-31 */

    date1= date1.replace('-','/');
    date1= date1.replace('-','/');
    date2= date2.replace('-','/');
    date2= date2.replace('-','/');

    if(date1.length==10 && date1.length==10) {

    var d1=new Date(date1);
    var d2=new Date(date2);
    var diff=d2 - d1;

    return diff;
    }
    return -1;
	}catch(e){
		// to do
	}
};

function datetimeinmiliseconds(dt){
try{
    var completiondt_month=dt.substring((dt.indexOf('/')-2),dt.indexOf('/'));
    var completiondt_date=dt.substring((dt.lastIndexOf('/')-2),dt.lastIndexOf('/'));
    var completiondt_year=dt.substring((dt.lastIndexOf('/')+5),dt.lastIndexOf('/')+1);

    var completiondt_ts=new Date(completiondt_year,parseInt(completiondt_month,10)-1,completiondt_date);

    completiondt_ts=completiondt_ts.getTime();

    return completiondt_ts
}catch(e){
	// to do
}
}

/**********************************************************************
 * Component ID : after
 * Input        : Name          Type                    Description
 *                ------------- ----------------------- ------------
 *                date1          string                  -
 *                date2          string                  -
 * Output       : int
 * Description  : To check whether date2 is after date1.
 *                Return 0 - if date2 is after date1.
 *                Return 1 - if date1 is blank or is not a valid date.
 *                Return 2 - if date2 is blank or is not a valid date.
 *                Return 3 - if date2 is not after date1.
 **********************************************************************
 */
function after(date1, date2) {
	try{
    if (date1.length == 8 || date1.length == 9 || date1.length == 10) {
        arrTmp = date2.split ("/");

        date2 = new Date();
        date2.setFullYear(arrTmp[2]);
        date2.setMonth(arrTmp[0]-1);
        date2.setDate(arrTmp[1]);
        arrTmp = date1.split ("/");

        date1 = new Date();
        date1.setFullYear(arrTmp[2]);
        date1.setMonth(arrTmp[0]-1); // January = 0
        date1.setDate(arrTmp[1]);

        if (date2 > date1) {
            return 0;
        } else {
            return 3;
        }
    }
    if (date1.length == 6 || date1.length == 7) {
        arrTmp = date2.split ("/");

        date2 = new Date();
        date2.setFullYear(arrTmp[2]);
        date2.setMonth(arrTmp[0]-1);
        date2.setDate(arrTmp[1]);

        arrTmp = date1.split ("/");

        date1 = new Date();
        date1.setFullYear(arrTmp[1]);
        date1.setMonth(arrTmp[0]-1); // January = 0
        date1.setDate("1");

        if (date2 > date1) {
            return 0;
        } else {
            return 3;
        }
    }

    if (date1.length == 4) {
        arrTmp = date2.split ("/");

        date2 = new Date();
        date2.setFullYear(arrTmp[2]);
        date2.setMonth(arrTmp[0]-1);
        date2.setDate(arrTmp[1]);

        date1 = new Date();
        date1.setFullYear(date1);
        date1.setMonth("0");
        date1.setDate("1");

        if (date2 > date1) {
            return 0;
        } else {
            return 3;
        }
    }
    return 3;
	}catch(e){
		// to do
	}
}

function renderStars(val,id)
{
	try{
      if(val>5)
      {
            val = 5;
      }
      val=Math.round(val*100)/100;
      if(val.toString().indexOf('.') <0){
            val = val.toString() + '.00';
      }

      var onstars=Math.floor(val);
      var outhtml="";
      var decPart=0;
      var starcount=0;
       outhtml+="<div class='fivestar-widget-static' title='"+val+"'>";
      /*if(val!=0)
      {
            outhtml+="<div class='fivestar-widget-static' title='"+t("Rating for this item is")+"&nbsp;"+val+"&nbsp;"+t("out of")+"&nbsp;5'>";
      }
      else if(val==0 && id==undefined )
      {
            outhtml+="<div class='fivestar-widget-static' title='"+t("Please complete the course to rate")+".'>";
      }
      else
      {
            outhtml+="<div class='fivestar-widget-static' title='"+t("Course is not yet rated")+".'>";
      }*/
      if(onstars<val)
      {
            var temp=val.toString().split(".")[1];
                decPart=(eval("."+temp)*100)-5;
      }

      for(var i=0;i<onstars;i++)
      {
            outhtml+="<div class='star'><span class='on'></span></div>"
            starcount++;
      }
      if(eval(decPart)!=0)
      {
            var rate=decPart+"%";
            outhtml+="<div class='star'><span class='on' style='width:"+rate+"'></span></div>"
            starcount++;
      }
      if(starcount<5)
      {
            var j=5-starcount;
            for(var i=0;i<j;i++)
            {
                  outhtml+="<div class='star'><span class='off'></span></div>"
            }
      }
      outhtml+="</div>";
      if(id!=undefined && id.length!=0)
      {
            document.getElementById(id).innerHTML=outhtml;
      }
      return outhtml;
	}catch(e){
		// to do
	}
}

function stringToXml(xmlstr){
    try //Internet Explorer
    {
      xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
      xmlDoc.async="false";
      xmlDoc.loadXML(xmlstr);
    }
    catch(e)
    {
        try{
            parser=new DOMParser();
            xmlDoc = parser.parseFromString(xmlstr,"text/xml");
        }catch(e){
            //alert(e.message);

        }
    }

    return xmlDoc;
}

function openDivAtPos(xDivId,xTop,xLeft){
	try{
    var style='top:'+xTop+';left:'+xLeft;
    var html='<div class="featured_video_div" style="'+style+'" id="'+xDivId+'" ></div>';
    if($('#'+xDivId)) $('#'+xDivId).remove();
    if($('body') != undefined) $('body').append(html);
	}catch(e){
		// to do
	}
}

function showDecimal(n) {
	try{
      ans = n * 1000
      ans = Math.round(ans /10) + ""
      while (ans.length < 3) {ans = "0" + ans}
      len = ans.length
      ans = ans.substring(0,len-2) + "." + ans.substring(len-2,len)
      return ans
	}catch(e){
		// to do
	}
}

function getWindowWidth(){
	try{
    var winW=0;
    if (parseInt(navigator.appVersion)>3) {
        if (navigator.appName=="Netscape") {
            winW = window.innerWidth-16;
        }
        if (navigator.appName.indexOf("Microsoft")!=-1) {
            winW = document.body.offsetWidth-20;
        }
    }
    return winW;
	}catch(e){
		// to do
	}
}

function titleRestricted(title,chara) {
	try{
	var restrictTitle;
	if(title.length > chara) {
		restrictTitle = title.substring(0,chara);
		restrictTitle = restrictTitle+'...';
	}else {
		restrictTitle =  title;
	}
	return restrictTitle;
	}catch(e){
		// to do
	}
}

function titleRestrictionFadeoutImage(title, uniqval) {
	try{
		var restrictTitleNew;
		if(title) {
		  class_fadeout = uniqval;
		  restrictTitleNew =  '<div class="fade-out-title-container-unprocessed fade-out-title-container '+class_fadeout+'"><span class="title-lengthy-text">'+title+'</span><span class="fade-out-image"></span></div>';
		}
		else {
			restrictTitleNew = '';
		}

	return restrictTitleNew;
	}catch(e){
		// to do
	}
}

function detailsShowHide(obj) {
	try{
	curObj = $(obj).parent(".more-text").siblings(".item-long-desc");
	elipsis = $(obj).parent(".more-text").siblings(".item-elipsis");
	if($(obj).hasClass("show-full-text")) {
		$(curObj).hide();
		$(elipsis).show();
		$(obj).removeClass("show-full-text");
		$(obj).addClass("show-short-text");
	} else {
		$(curObj).show();
		$(elipsis).hide();
		$(obj).removeClass("show-short-text");
		$(obj).addClass("show-full-text");
	}
	/*-- #34270 - scroll pane for the dynamic contents in team assign learn popup --*/
	if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
		$("#my-team-dialog #gview_tbl-paintCatalogContentResults").jScrollPane();
	}
	}catch(e){
		// to do
	}
}

function getClickMylearn(){
	try{
	$.cookie("isclickmyenroll", "1");
	}catch(e){
		// to do
	}
}
function getClickSignIn(){
	try{
	$.cookie("isclickmyenroll", null);
	}catch(e){
		// to do
	}
}
 (function($) {
	$(document).ready( function() {
		try{
			$.metadata.setType('attr', 'data');
			$('.links-fieldset').find('legend').live("click",function(){
				$('.row_link').slideToggle();
			});
			$('#tabDiv').find("li").css("background-color","#DDDDDD");
			$('#tabDiv').find("li.ui-state-active").css("background-color","#EEEEEE");
			$('.secondary-menu-overlay').css('display','none');

			if($('#learner_announcements').size() == 0){$('#horiz-menu > table > tbody > tr > td> #navigation').css('height','46px');}
			$( "#resetPwdLink" ).parent().css( "display", "none" );

			if($('#learner_announcements').size() == 0){$('#horiz-menu > table > tbody > tr > td> #navigation').css('height','46px');}    
			if($.cookie('SurInvalidUser')) {
				if($.cookie('SurInvalidUser') == 1) {
					$('#signin').click();
					$.cookie('SurInvalidUser', null);
				}
			}
			$('#signin').bind("contextmenu",function(e){
				return false;
			});
			$('#shopping_cart').bind("contextmenu",function(e){
				return false;
			});
			afterRenderRefineIcon();
			lengthyNameFadeout();
			$('#secondary-menu').find('.secondary-menu-account-length').live("click",function(){
				showAccountSettings();
			});
			
		}catch(e){
			// to do
			// window.console.log(e, e.stack);
		}

	});
 })(jQuery);
 
 function lengthyNameFadeout() {
	    var secondaryMenuAccountSetting = $('#secondary-menu').find('#my-account-settings');
	    var secondaryMenuAccountSettingVal = secondaryMenuAccountSetting[0].innerHTML;
	    var secondaryMenuAccountSettingValLength = secondaryMenuAccountSettingVal.length;
	    if(secondaryMenuAccountSettingValLength > 50) {
	    	secondaryMenuAccountSetting[0].innerHTML =  titleRestrictionFadeoutImage(secondaryMenuAccountSetting[0].innerHTML, 'secondary-menu-account-length');
	    	$('#secondary-menu').find('.my-account-arrow-new').each(function() {
	    		$(this).css('background','url("/sites/all/themes/core/expertusoneV2/expertusone-internals/images/layoutBg.gif") no-repeat right -1493px');
	    	});
	    }
	  vtip();
	}
/**
 * Global variable which holds the portal configuration details
 */
 //IE 6 select tag issue

				 function hide_select()
				 {
					 try{
							if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
								var ieversion=new Number(RegExp.$1);// capture x.x portion and store as a number
									if (ieversion<=7){
										$('.select_hide').hide();
									}
							}
					 }catch(e){
							// to do
						}
				}
				 function show_select()
				 {
					 try{
							if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
								var ieversion=new Number(RegExp.$1);// capture x.x portion and store as a number
									if (ieversion<=7){
										$('.select_hide').show();
									}
							}
					 }catch(e){
							// to do
						}
				}
				function hide_findTraining()
				 {
					try{
						if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
							var ieversion=new Number(RegExp.$1);// capture x.x portion and store as a number
								if (ieversion<=7){
									$('.select_fndtrng').hide();
								}
						}
					}catch(e){
						// to do
					}
				}
				 function show_findTraining()
				 {
					 try{
						if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
							var ieversion=new Number(RegExp.$1);// capture x.x portion and store as a number
								if (ieversion<=7){
									$('.select_fndtrng').show();
								}
						}
					 }catch(e){
							// to do
						}
				}
var portalconfig;
var availableFunctionalities;
(function($) {
	try{
	$(document).ready(function(){
		if($('#enabledFunction').length > 0){
			var tmp = eval($('#enabledFunction').val());
			availableFunctionalities=tmp[0];
			$('#enabledFunction').remove();
		}
	});
	}catch(e){
		// to do
	}
})(jQuery);



/* Suresh modified for OAuth Integration */


function getUrlVars()
{
	try{
	 var vars = [], hash;
	    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
	    for(var i = 0; i < hashes.length; i++)
	    {
	        hash = hashes[i].split('=');
	        vars.push(hash[0]);
	        vars[hash[0]] = hash[1];
	    }
    return vars;
	}catch(e){
		// to do
	}
}
var sourceOAuth=getUrlVars()["source"];
if(sourceOAuth=="external")
{
$(document).ready(function()
{
	try{
	// $(".ctools-modal-ctools-login-style").click();
		$("#signin").click();
	}catch(e){
		// to do
	}
});
}

/* Suresh - End */


/* "Vtip" - Dislaying restrcted character in tooltip start */
/* Vtip - Width restricted while character length reach 500 */
function vtip(selector) {
	try{
	
		this.xOffset = -10; // x distance from mouse
		this.yOffset = 10; // y distance from mouse
		if(selector == null || selector == undefined)
			selector = '.vtip';
		else
			selector = selector + ' .vtip';
		$(selector).unbind().hover(
				function(e) {
					this.pageCon=$("#page-container").offset();
					this.docW=$(document).width();
					this.pageConLpos=this.pageCon.left;
					this.pageConw=$("#page-container").width();
					/* change done tio override browse button's default title behavior (No file Chosen)
			Done for Roster Upload icon in Enrollments popup*/
					if($(this).hasClass('browse-button-vtip')) {
						this.titletemp = this.getAttribute('titletemp');
					}
					this.t = (this.title != '' ? this.title : (this.titletemp !== undefined ? this.titletemp : ''));
					this.title = '';
					if(this.t != '') {
						this.top = (e.pageY + yOffset);
						if(this.t == Drupal.t('LBL847') || this.t == Drupal.t('LBL846')) {
							this.top = (e.pageY + yOffset)-95;
						} else {
							this.top = (e.pageY + yOffset);
						}
						this.left = (e.pageX + xOffset);
						var pageUrl = window.location.search;
						if(window.location.href.indexOf("admincalendar") >0 ) {
							if(this.t.length > 100) {
							  timeLen  = $(this).find(".titletimestyle").html().length + 1;
							  this.strLen = this.t.length-timeLen;
							}
							else {
							  this.strLen = this.t.length
							}
						} else {
						this.strLen = this.t.length
						}  
						//this.strLen = this.t.length;
						this.curWidth=this.left - this.pageConLpos;
						this.totWidthC=this.pageConw -this.curWidth;
						if(this.t == Drupal.t('LBL847') || this.t == Drupal.t('LBL846')) {
							$('body').append( '<p id="vtip"><img style="right:5px;" id="vtipArrow" />' + this.t + '</p>' );
						} else if($(this).hasClass('info-enr-upload')) {
							$('body').append( '<p id="vtip"><img style="right:5px;" id="vtipArrow" />' + this.t.replace(/<br>/g, '<br>') + '</p>' );
						} else {
							$('body').append( '<p id="vtip"><img style="left:5px;" id="vtipArrow" />' + htmlEntities(this.t) + '</p>' ); // 46942 - html encode support added
						}

						if(this.t == Drupal.t('LBL847') || this.t == Drupal.t('LBL846')) {
							$('body').append( '<p id="vtip"><span style="right:5px;" id="vtipArrow" class="vtip-arrow" > </span>' + this.t + '</p>' );
						} else if($(this).hasClass('info-enr-upload')) {
							$('body').append( '<p id="vtip"><span style="left:5px;" id="vtipArrow" class="vtip-arrow"> </span>' + this.t.replace(/<br>/g, '<br>') + '</p>' );
						} else {
							$('body').append( '<p id="vtip"><span style="left:5px;" id="vtipArrow" class="vtip-arrow"> </span>' + htmlEntities(this.t) + '</p>' ); // 46942 - html encode support added
						}
						//$('p#vtip #vtipArrow').attr("src", '/sites/all/themes/core/expertusone/expertusone-internals/images/vtip_arrow.png');
						this.vtipW=$('p#vtip').width();
						if(this.strLen>100) {
							var posLeft = this.left;
							if(this.totWidthC < 500){
								if($(this).hasClass('info-enr-upload')){
									$('p#vtip #vtipArrow').css('left','195px');
									posLeft = posLeft -200;
								}else if($("#cp-modalcontainer").hasClass('fullscreen-mode')){
								posLeft = posLeft -pvtipwidth;
								$('p#vtip #vtipArrow').css('left',vtiparrow+'px');
								}else{ 
								$('p#vtip #vtipArrow').css('left','200px');
								posLeft = posLeft -300;
								}
							}
							$('p#vtip').css("top", this.top+"px").css("left", posLeft+"px").css('width','500px').fadeIn(100);
						} else {
							var pvtipwidth = $("p#vtip").width();
							var posLeft = this.left;
							var vtiparrow = pvtipwidth -15;
							if(this.totWidthC < pvtipwidth){
								$('p#vtip #vtipArrow').css('left',vtiparrow+'px');
								posLeft = posLeft -pvtipwidth;
							}
							$('p#vtip').css("top", this.top+"px").css("left", posLeft+"px").fadeIn(100);
							$("p#vtip").css('max-width', '600px');
						}
						if($(this).hasClass('short-vtip')) {
							$("p#vtip").css('width', '200px').css('word-break', 'break-all');
						}
						else if($(this).hasClass('info-enr-upload')) {
							$("p#vtip").css('max-width', '230px');
						}
					}
					this.titletemp = this.t;
					
				},
				function() {
					if($(this).hasClass('browse-button-vtip')) {
						this.title = "";
					} else {
						this.title = this.t;
					}
					$("p#vtip").fadeOut("slow").remove();
				}
		).mousemove(
				function(e) {
					if(this.t != '') {
						this.pageCon=$("#page-container").offset();
						this.docW=$(document).width();
						this.pageConLpos=this.pageCon.left;
						this.pageConw=$("#page-container").width();
						this.curWidth=this.left - this.pageConLpos;
						this.totWidthC=this.pageConw -this.curWidth;
						this.top = (e.pageY + yOffset);
						//this.left = (e.pageX + xOffset);

						if(this.t == Drupal.t('LBL847') || this.t == Drupal.t('LBL846')) {
							this.left = (e.pageX + xOffset)-95;
						} else {
							this.left = (e.pageX + xOffset);
						}
						if(this.strLen>100) {
							var pvtipwidth = $("p#vtip").width();
							var posLeft = this.left;
							var vtiparrow = pvtipwidth -15;
							if(this.totWidthC < 500){
								if($(this).hasClass('info-enr-upload')){
									$('p#vtip #vtipArrow').css('left','195px');
									posLeft = posLeft -200;
								}else if($("#cp-modalcontainer").hasClass('fullscreen-mode')){
								posLeft = posLeft -pvtipwidth;
								$('p#vtip #vtipArrow').css('left',vtiparrow+'px');
								}else{ 
								$('p#vtip #vtipArrow').css('left','200px');
								posLeft = posLeft -300;
								}
							}else{
								$('p#vtip #vtipArrow').css('left','5px');
							}
							
							$('p#vtip').css("top", this.top+"px").css("left", posLeft+"px").css('width','500px').fadeIn(100);
						} else {
							var pvtipwidth = $("p#vtip").width();
							var posLeft = this.left;
							var vtiparrow = pvtipwidth -10;
							if(this.totWidthC < pvtipwidth){
								posLeft = posLeft -pvtipwidth;
								$('p#vtip #vtipArrow').css('left',vtiparrow+'px');
							}else{
								$('p#vtip #vtipArrow').css('left','5px');
							}
							$('p#vtip').css("top", this.top+"px").css("left", posLeft+"px").fadeIn(100);
							$("p#vtip").css('max-width', '600px');
						}
						if($(this).hasClass('short-vtip')) {
							$("p#vtip").css('width', '200px').css('word-break', 'break-all');
						}
						else if($(this).hasClass('info-enr-upload')) {
							$("p#vtip").css('max-width', '230px');
						}
					}
				}
		).mousedown(
				function(e) {
					if($(this).hasClass('browse-button-vtip')) {
						this.title = "";
					} else {
						this.title = this.t;
					}
					$("p#vtip").fadeOut("slow").remove();
				}
		);
		$('.lnrreports-search-display-table-name').removeClass('fade-out-title-container-unprocessed');
		$('.lnrreports-search-table-accordion-content').removeClass('fade-out-title-container-unprocessed');//fix for reports issue
		$('.fade-out-title-container-unprocessed').each(function() {
			//console.log('unprocessed'+$(this).width());
			//console.log('span'+$(this).find('.title-lengthy-text').width());
			if(($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) || $(this).find('.title-lengthy-text').text() == '') {
				$(this).find('.fade-out-image').remove();
			}
			$(this).removeClass('fade-out-title-container-unprocessed');
		});
		/*0051180: Title Restriction - Space available to display the report name */
		$('#paintLearnerReportsResults').find('.spotlight-item-title').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		/*0051207: In Class page,fadeout effect were applied even it is small text. */
		$('#narrow-search-filtersets-holder').find('.narrow-search-filterset-item-label').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		$('#paintLanguage').find('.srch-label-cls').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		$('#admin-add-permissions').find('.user-list-detail').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		$('#group-scroll-wrapper').find('.cls-access-list-select').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		/*$('.session-details-warpper').find('.class-detail-session-instructor-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		$('.content-instructor-detail').find('.class-detail-ins-details-name-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		$('.content-instructor-detail').find('.class-detail-ins-details-job-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});*/
	}catch(e){
		// to do
	}
}
/*
 * Added by Vincent on July 18, 2012 to fix issue #0013955: The tooltip of announcement in homepage is displayed as 'undefined'
 * The root cause of the above issue is the vtip() is called on mouseover then only it has initialized and show the content
 * but before that the browsers default tooltip will be displayed. To avoid that here I called this function to initialize it.
 */

resetFadeOutByClass('.embedWigetPageContainer #class_detail_content .content-row-container','content-detail-code','line-item-container','class_details'); 
resetFadeOutByClass('.embedWigetPageContainer #course_detail_content .content-row-container','content-detail-code','line-item-container','class_details'); 
resetFadeOutByClass('.embedWigetPageContainer #lnp-details-content .content-row-container','content-detail-code','line-item-container','class_details'); 
 
vtip();

/* "Vtip" - tooltip end*/

//#6034 - To popup the user login screen, while user click the account link from mail
$(function() {
	try{
    var curUrl     	= window.location.search.substring(1);
    var splitUrl 	= curUrl.split('&');

    if(splitUrl[1] == 'destination=learning/my-account' || splitUrl[1] == 'destination=learning/enrollment-search' || splitUrl[1] == 'destination=learning/myteam-search') {
    	$(document).ready(function() {
    		//$(".ctools-modal-ctools-login-style").click();
    		$("#signin").click();
    	});
    }
	}catch(e){
		// to do
	}
});
/*
* The below statement is common for all the ctool popup start
*/
$('body').live('hover', function(){
	try{
	if($('#modalBackdrop').is(':visible') == true) {
		var getPopupCurrentHeight = '';
		getPopupCurrentHeight = $(document).height();
		$('#modalBackdrop').css('height',getPopupCurrentHeight+'px');
	}
	}catch(e){
		// to do
	}
});
$('body').live('mouseover', function(){
	try{
	if($('#modalBackdrop').is(':visible') == true) {
		var getPopupCurrentHeight = '';
		getPopupCurrentHeight = $(document).height();
		$('#modalBackdrop').css('height',getPopupCurrentHeight+'px');
	}
	}catch(e){
		// to do
	}
});
$('#modalBackdrop').live('hover', function(){
	try{
	if($('#modalBackdrop').is(':visible') == true) {
		var getPopupCurrentHeight = '';
		getPopupCurrentHeight = $(document).height();
		$('#modalBackdrop').css('height',getPopupCurrentHeight+'px');
	}
	}catch(e){
		// to do
	}
});
$('body').live('mousedown', function(){
	try{
	if($('#modalBackdrop').is(':visible') == true) {
		var getPopupCurrentHeight = '';
		getPopupCurrentHeight = $(document).height();
		$('#modalBackdrop').css('height',getPopupCurrentHeight+'px');
	}
	}catch(e){
		// to do
	}
});
$('body').live('DOMMouseScroll', function(){
	try{
	if($('#modalBackdrop').is(':visible') == true) {
		var getPopupCurrentHeight = '';
		getPopupCurrentHeight = $(document).height();
		$('#modalBackdrop').css('height',getPopupCurrentHeight+'px');
	}
	}catch(e){
		// to do
	}
});
$('body').live('keydown', function(){
	try{
	if($('#modalBackdrop').is(':visible') == true) {
		var getPopupCurrentHeight = '';
		getPopupCurrentHeight = $(document).height();
		$('#modalBackdrop').css('height',getPopupCurrentHeight+'px');
	}
	}catch(e){
		// to do
	}
});
/*
* The changes end
*/
$('body').click(function (event) {
	try{
	if(event.target.id!='pub-unpub-action-btn') {
		$('.narrowsearch-pub-add-list').hide();
	}
	}catch(e){
		// to do
	}
});
$('body').click(function (event) {
	try{
	if(event.target.className!='enroll-launch-more') {
		$('.enroll-action').hide();
	}
	}catch(e){
		// to do
	}
});
$('body').click(function (event) {
	try{
	if(event.target.className!='myteam-learning-arrow') {
		$('.myteam-more-action').hide();
	}
	}catch(e){
		// to do
	}
});
$('body').click(function (event) {
	try{
	if(event.target.className!='resource-add-action-wrapper') {
		$('.resource-add-list').hide();
	}
	}catch(e){
		// to do
	}
});

$('body').click(function (event) {
	try{
	if(event.target.id!='pub-unpub-action-btn' && event.target.id!='completedandsave_trigger' && $('.ui-datepicker').is(':hidden')
			&& !$(event.target).hasClass('enrollement-date-picker') && !$(event.target).hasClass('completion_container_roster')) {
		$('.catalog-pub-add-list').hide();
	}
	}catch(e){
		// to do
	}
});
$('body').click(function (event) {
	try{
	if(event.target.className!='man-opt-selection') {
			$('.sub-menu').hide();
		}
	}catch(e){
		// to do
	}
});
/* Catalog addmore button implemented  */
$('body').click(function (event) {
	try{
	if(event.target.className!='pub-unpub-add-action-wrapper') {
		$('.resource-add-list').hide();
	}
	}catch(e){
		// to do
	}
});
$('body .item-long-desc a,body .detail-desc a,body .item-short-desc a').live("click",function() {
	try{
	 $(this).attr('target', '_blank');
	}catch(e){
		// to do
	}
});
$('body .more-text a').live("click",function(event) {
	try{
	event.preventDefault();
	}catch(e){
		// to do
	}
});
$('body').click(function(event){
	try{
	if(Drupal.settings.ajaxPageState.theme == "expertusoneV2"){
	if(event.target.className != 'find-trng-sort-text' && event.target.className != 'frm-topic-list-sort-text' && event.target.className != 'frm-list-sort-text' && event.target.className != 'sort-by-text' && event.target.className !='narrow-search-sortbar-sorttext' && event.target.className !='find-trng-sortby' && event.target.className !='find-trng-sort-arrow-icon' && event.target.className != 'sort-by-text active') {
         $('.sort-by-links').hide();
		$('.sort-by-links').parents('#find-trng-sort-display').removeClass('sort-active');
         $('.narrow-search-sortbar-sortlinks').hide();
         $('.sort-by-change-links').hide();
        }
	if(event.target.className !='myteam-cat-delivery-type-link')	{
		       $('#myteam-cat-delivery-type-list').hide();
		}
	 var target = $(event.target).parents('.attach-grp-links');
	 if(target.length == 0 && $(event.target).parents('#list-options-tp').length == 0 && !$(event.target).hasClass('msg-close-btn')){
			$('.attach-grp-links').hide();
		}
	}

	}catch(e){
		// to do
	}
    });

/* Vtip tooltip */
$('.vtip').mouseover(function () {
	try{
	vtip();
	}catch(e){
		// to do
	}
});

/* System admin in home page */
$("#secondary-menu li a:contains('System Admin')").replaceWith('<span class="system-admin-arrow-link">System Admin</span>');
$('.system-admin-arrow-link').click(function() {
	try{
	$('#system-admin-menu').toggle();
	}catch(e){
		// to do
	}
});
$('body').click(function (event) {
	try{
	if(event.target.className!='system-admin-arrow-link') {
		$('#system-admin-menu').hide();
	}
	}catch(e){
		// to do
	}
});

/*
 * updateSelectFieldStyleOnChange() - 'Select' text in select fields when showing is to be greyed out.
 */
function updateSelectFieldStyleOnChange(obj) {
	try{
  //console.log('In updateSelectFieldStyleOnChange');
  //console.log(obj);
  var selectTxt = $('option:selected', obj).text();
  //console.log('selectTxt = ' + selectTxt);
  if(selectTxt == 'Select') {
    $(obj).removeClass('select-normal-text');
    $(obj).addClass('select-greyed-out-text');
  } else {
    $(obj).removeClass('select-greyed-out-text');
    $(obj).addClass('select-normal-text');
  }
	}catch(e){
		// to do
	}
}

/*
 * Drupal.behaviors.expSelectFieldStyle to show 'Select' text in select fields as greyed out
 */
Drupal.behaviors.expSelectFieldStyle =  {
  attach: function (context, settings) {
	  try{
    $('.exp-select-field-style:not(.exp-select-style-processed)').addClass('exp-select-style-processed').each(function () {
      var selectTxt = $('option:selected', this).text();
      //console.log('selectTxt = ' + selectTxt);
      if(selectTxt == 'Select') {
        $(this).removeClass('select-normal-text');
        $(this).addClass('select-greyed-out-text');
      } else {
        $(this).removeClass('select-greyed-out-text');
        $(this).addClass('select-normal-text');
      }
    });
	  }catch(e){
			// to do
	  }
  }
};

/**
 * Added by vincent on 09 Jan 2012 to fix serializeToString issue
 * for IE9. IE9 is not supporting serializeToString function and
 * it throws "no such interface supported" error. To avoid this
 * error and make our product to support IE9 the following fix
 * is needed. This is a temporary fix, if this issue is sorted out
 * in IE9 remove this fix.
 */
//if(Sarissa._SARISSA_IS_IE && parseFloat(navigator.appVersion.substring(navigator.appVersion.indexOf("MSIE")+5)) >=9) {
if(parseFloat(navigator.appVersion.substring(navigator.appVersion.indexOf("MSIE")+5)) >=9) {
	try{
	window.XMLSerializer = function(){};
	window.XMLSerializer.prototype.serializeToString=function(oNode){return oNode.xml;}
	}catch(e){
		// to do
	}
}

$(document).keydown(function(e){
	try{
    if ( e.keyCode == 8 && e.target.tagName != 'INPUT' && e.target.tagName != 'TEXTAREA') {
        e.preventDefault();
    }
	}catch(e){
		// to do
	}
});

function showAccountSettings () {
	try{
	if(Drupal.settings.ajaxPageState.theme == "expertusoneV2"){
		$('#account_setting').toggle();
	}else{
		$('#account_setting').show();
	}
	}catch(e){
		// to do
	}
}

//Close styling pop-up
$('.account-close-popup').live('click', function(){
	try{
	$('#account_setting').css('display','none');
	}catch(e){
		// to do
	}
});

$('body').bind('click', function(event) {
 try{
  if(event.target.id != 'my-account-settings'){
   $('#account_setting').css('display','none');
  }
 }catch(e){
		// to do
	}
});


/*
 * descController() - To Return Short and Long Description according to the number of characters required. Already we have same function in core.inc for PHP usage
 * This Function has Two Parameters
 * No.1 : $keyword - a unique keyword to be checked inside to change the function level variable
 * No.2 : $cString - the source string which would be worked upon.
 *
 * RETURN VALUES
 *     1. The Short Description String along with its tag element.
 *     2. The ellipsis along with its tag element
 *     3. The Long Description String along with its tag elements.
 *     4. The Anchor link showing up the arrow, which carries its show/hide functionality.
 */
function descController(keyword, cString,len) {
try{
  var cString 		= cString.replace(/(<([^>]+)>)/ig,"");
  var string_len 	= cString.length;
  var keyword 		= keyword.toUpperCase();
  var maxLength 	= 0;
  switch(keyword) {
    case 'ADMIN FORUM COURSES':
      maxLength = 250;
      break;
    case 'CALENDAR CODE':
      maxLength = 7;
      break;
  }
  if(typeof len != 'undefined')
	  maxLength = len;
  //var isutfstr = cString.fromCharCode(ascii_code);
  var res ='';
  if (typeof(cString) == 'string'){
	  if(string_len > maxLength) {
		  if(keyword != 'FADE OUT'){
	 		res +=  '<span class="item-short-desc">'+cString.substr(0, maxLength-1)+'</span>';
	        res += '<span class="item-elipsis">...</span>';
	        res += '<span class="item-long-desc">'+cString.substr(maxLength-1)+'</span>';
	        res += '<span class="more-text">';
	        res += '<a href="javascript:void(0)" onclick="detailsShowHide(this);" class="show-short-text more-icon-sec">&nbsp;</a></span>';
		  }else{
			  var sText = cString.substr(0, maxLength-1);
			  res += sText+'<span class ="textfade">'+cString.substr(sText.length, 2)+'</span><span class ="textfade1">'+cString.substr((sText.length + 2), 1)+'</span>';
		  }
	  } else {
		  if(keyword != 'FADE OUT'){
			  res += '<span class="item-short-desc">'+cString+'</span>';
		  }else{
			  res += cString;
		  }
	  }
  }else{
		if(string_len > maxLength) {
				var pos=0;
				for(var i = maxLength; i >= 0; i--){
					var chara = Substr(cString,i,1);
					if(empty(chara) || chara == ' ' || ctype_space(chara) || preg_match('/\s/', chara, m, PREG_OFFSET_CAPTURE) || is_null(chara)){
						pos = i;
						break;
					}
				}
				if(pos != 0) {
					if(keyword != 'FADE OUT'){
						res += '<span class="item-short-desc">'+cString.substr(0, pos)+'</span>';
						res += '<span class="item-elipsis">...</span>';
						res += '<span class="item-long-desc">'+cString.substr(pos)+'</span>';
						res += '<span class="more-text">';
						res += '<a href="javascript:void(0)" onclick="detailsShowHide(this);" class="show-short-text">&nbsp;</a></span>';
					}else{
						var sText = cString.substr(0, pos);
						res += sText+'<span class ="textfade">'+cString.substr(sText.length, 2)+'</span><span class ="textfade1">'+cString.substr((sText.length + 2), 1)+'</span>';
					}
	      } else {
	    	  if(keyword != 'FADE OUT'){
	    		  res += '<span class="item-short-desc">'+cString+'</span>';
	    	  }else{
	    		  res += cString;
	    	  }
	      }
  	} else {
  		if(keyword != 'FADE OUT'){
  			res += '<span class="item-short-desc">'+cString+'</span>';
  		}else{
  			res += cString;
  		}
  	}

  }
  return res;
}catch(e){
	// to do
}
}
/*Strip tag for removing html in JS*/

/*function strip_tags_addComments(html) {
	//PROCESS STRING
	if(arguments.length < 3) {
		html=html.replace(/<\/?(?!\!)[^>]*>/gi, '');
	} else {
		var allowed = arguments[1];
		var specified = eval("["+arguments[2]+"]");
		if(allowed){
			var regex='</?(?!(' + specified.join('|') + '))\b[^>]*>';
			html=html.replace(new RegExp(regex, 'gi'), '');
		} else{
			var regex='</?(' + specified.join('|') + ')\b[^>]*>';
			html=html.replace(new RegExp(regex, 'gi'), '');
		}
	}

	//CHANGE NAME TO CLEAN JUST BECAUSE
	var shortForum_string = html;

	//RETURN THE CLEAN STRING
	return shortForum_string;
}*/
/**
 * To display forum description with html entities.
 * @param shortString
 * @param fullString
 * @return
 */
function addExpanColapse(shortString,fullString,dataDelTypeCode,type,enr_id){
	try{
	if(Drupal.settings.ajaxPageState.theme == "expertusoneV2") {
		if(typeof(dataDelTypeCode)==='undefined') dataDelTypeCode = '';
	}else{
		dataDelTypeCode = '';
	}
	var res='';
	//var shortString=strip_tags_addComments(shortString);//strip tag for forum add comments
	var dispLength = shortString.length;
	var fullLenght = fullString.length;
	//console.log(shortDescForum);
	if(shortString.substr(dispLength-3)=="..."){
		res +=  '<span class="item-short-desc">'+shortString.substr(0,dispLength-3)+'</span>';
	    res += '<span class="item-elipsis">...</span>';
	    res += '<span class="item-long-desc">'+fullString+'</span>';
	    res += '<span class="more-text">';
	    if(type!='' && type != null && type!= undefined){
	    	if(type == 'TP')
	    		res += '<a href="javascript:void(0)" onclick="$(\'#prg-accodion-prg_'+enr_id+'\').click();" class="show-short-text more-icon-'+dataDelTypeCode.split('_').pop()+'">&nbsp;</a></span>';
	    	if(type=='ME')
	    		res += '<a href="javascript:void(0)" onclick="$(\'#class-accodion-'+enr_id+'\').click();" class="show-short-text more-icon-'+dataDelTypeCode.split('_').pop()+'">&nbsp;</a></span>';
	    	if(type=='MC')
	    		res += '<a href="javascript:void(0)" onclick="$(\'#enroll-main-action-'+enr_id+' [name='+Drupal.t('LBL816')+']\').click();" class="show-short-text more-icon-'+dataDelTypeCode.split('_').pop()+'">&nbsp;</a></span>';

	    }else
	    	res += '<a href="javascript:void(0)" onclick="descriptionShowHide(this);" class="show-short-text more-icon-'+dataDelTypeCode.split('_').pop()+'">&nbsp;</a></span>';
	}else{
		res += '<span class="item-short-desc">'+/*strip_tags_addComments(*/shortString/*)*/+'</span>';
	}
    return res;
	}catch(e){
		// to do
	}
}

/**
 * Forum description show/hide function
 * @param obj
 * @return
 */

function descriptionShowHide(obj){
	try{
	curObj = $(obj).parent(".more-text").siblings(".item-long-desc");
	shortObj = $(obj).parent(".more-text").siblings(".item-short-desc");
	elipsis = $(obj).parent(".more-text").siblings(".item-elipsis");
	if($(obj).hasClass("show-full-text")) {
		$(curObj).hide();
		$(elipsis).show();
		$(shortObj).show();
		$(obj).removeClass("show-full-text");
		$(obj).addClass("show-short-text");
		if($('#my-team-dialog #tbl-paintCatalogContentResults .find-training-txt span.more-text .show-full-text').length == 0) {
			$('#my-team-dialog #gview_tbl-paintCatalogContentResults').data('jsp') !== undefined && $('#my-team-dialog #gview_tbl-paintCatalogContentResults').data('jsp').destroy();
		}

	} else {
		$(curObj).show();
		$(elipsis).hide();
		$(shortObj).hide();
		$(obj).removeClass("show-short-text");
		$(obj).addClass("show-full-text");
		if($('#my-team-dialog #gview_tbl-paintCatalogContentResults').length){
		  $('#my-team-dialog #gview_tbl-paintCatalogContentResults').jScrollPane();
		}
	}
	/*-- #40207 - Jscrollpane container has more course/class --*/
	if ($('#lnr-prerequisite-container #gview_lnr-prerequisite').length) {
		$('#lnr-prerequisite-container #gview_lnr-prerequisite').jScrollPane();
	}
	if($('#select-class-dialog #gview_tbl-paintCatalogContentResults').length){
		$('#select-class-dialog #gview_tbl-paintCatalogContentResults').jScrollPane();
	}
	if($('.calviewmorepopup-content').length){
		$('.calviewmorepopup-content').jScrollPane();
	}
	}catch(e){
		// to do
	}
}

/**
 * Setting the cursor possion at the end of the content in the html editor
 * @param ed - tinyMCE active editor
 * @param node - tinyMCE active editor body node
 * @param start - (0 or 1)whether to update the dummy character at start or end
 * @param return_node - booleon whether to remove the added dummy character or not
 * @return
 */

function setCursor(ed, node, start, return_node){
	try{
	  tn = ed.getDoc().createTextNode("");
	  if (start){
	    node.insertBefore(tn, node.firstChild);
	  }
	  else node.lastChild.appendChild(tn);
	  rng = ed.selection.getRng();
	  rng.selectNode(tn);
	  rng.setStartBefore(tn);
	  rng.setStartAfter(tn);
	  ed.selection.setRng(rng);
	  if (return_node) return tn;
	  node.lastChild.removeChild(tn);
	  //callMessageWindow('Warnning','Maximum character reached',ed);
	  ed.focus();
	}catch(e){
		// to do
	}
 }

function expertus_error_message(message,type){
	try{
	var nsParts = window.location.href.split("/?q=");
	var html = '';
	var html1 = '';
	var commonErrorMessage = Drupal.t('ERR101');
	var multiplemessage =  Drupal.t('ERR169');
	var conMessage = Drupal.t('LBL647');
	conMessage = conMessage.toLowerCase();
	conMessage = ' '+conMessage+' ';
	var newmessage = new Array();
	newmessage[0] = '';
	var count = message.length;
	var newcount;
	var pos;
	var inc = 1;
	var replace_message;
	if (count>1){
		for(var i=0;i<count;i++){
			message[i] =  $.trim(message[i]);
			if(message[i].indexOf(commonErrorMessage)>=0){
				replace_message = message[i].replace(commonErrorMessage,'');
				replace_message = $.trim(replace_message);
				newmessage[0] = (newmessage[0] =='') ? replace_message : newmessage[0]+','+replace_message;
			}
			else{
				newmessage[inc] = message[i];
		        inc++;
		      }
		}
		if(newmessage[0] != ''){
			var position = newmessage[0].lastIndexOf(',');
			if(position>=0){
				var firstMsg = newmessage[0].substring(0,position);
				var secondMsg = newmessage[0].substring(position);
				secondMsg = secondMsg.replace(',' , conMessage);
				newmessage[0] = firstMsg+secondMsg +multiplemessage;
			}
			else{
				newmessage[0] = newmessage[0]+commonErrorMessage;
			}
			message = newmessage;
		}
	}
	newcount = message.length;
	if(newcount >0){
		html1+='<div id="message-container"><div class="messages '+type+'">';
		if(newcount >1){
			var outputval = '';
			for(var start=0; start < newcount; start++){
				outputval += '<li class="hide"><span>' + message[start]+ '</span></li>';
	        }
			html+='<span class="qtip-error-msg-display"><ul>'+outputval+'</ul></span>';
		}
		else {
			html+='<ul><li><span>'+message[0]+'</span></li></ul>';
		}
	}
	/*if(newcount>1){
		html+= "<div class='msg-minmax-icon'></div>";
      }*/
	if(nsParts[1] == 'cart/checkout'){
	var msgVal = $('#message-container').html();
	if(msgVal == null || msgVal ==''){
		html=html1+html;
		html+='<div class="msg-close-btn" onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();"></div></div></div>';
		html+='<img onload="$(\'body\').data(\'learningcore\').showHideMultipleLi();" style="display:none;" src="sites/all/themes/core/expertusone/expertusone-internals/images/close.png" height="0" width="0" />';
	}else{
		html = '</br>'+html;
	}
	return html;
	}else{
		html=html1+html;
		html+='<div class="msg-close-btn" onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();"></div></div></div>';
		html+='<img onload="$(\'body\').data(\'learningcore\').showHideMultipleLi();" style="display:none;" src="sites/all/themes/core/expertusone/expertusone-internals/images/close.png" height="0" width="0" />';
		return html;
	}
	}catch(e){
		// to do
	}
}
function checkboxSelectedUnselectedCommon(id,entityId,entityType){
	try{
	if($(id).attr('type')!='radio'){
		if($(id).is(':checked')){
			$(id).parent().removeClass('checkbox-unselected');
			$(id).parent().addClass('checkbox-selected');
		}
		else {
			$(id).parent().removeClass('checkbox-selected');
			$(id).parent().addClass('checkbox-unselected');
		}
	}

	var txtInput = $(id).attr('name').split('-');
	if(txtInput[0].indexOf('attach_attributes[]') != -1) {
		var bool=true;
		$("input[name='"+id.name+"']").each(function(){
			if(!($(this).is(":checked")))
			{
				bool=false;
			}
		});
		if(bool)
		{
			$("#usr_select").parent().removeClass('checkbox-unselected');
			$("#usr_select").parent().addClass('checkbox-selected');
		}
		else
		{
			$("#usr_select").parent().removeClass('checkbox-selected');
			$("#usr_select").parent().addClass('checkbox-unselected');
		}
	}
	
	/*--#38292 - issue fix--*/
	if(txtInput[0].indexOf('attach_business_rules') != -1) {
		var cheklen = $('#business-rules-table .brl-checkbox-input').length;
		var tempResult = $('#business-rules-table #business-rule-' + $(id).attr('value')).attr('checked');
		if(cheklen > 1) {
			$('#business-rules-table .brl-checkbox-input').each(function(index, value) {
				$(this).parent('div').addClass('checkbox-unselected');
				$(this).removeAttr('checked');
			});
		}
		if(tempResult == true) {
			$('#business-rules-table #business-rule-' + $(id).attr('value')).parent('div').removeClass('checkbox-selected');
			$('#business-rules-table #business-rule-' + $(id).attr('value')).parent('div').removeClass('checkbox-unselected');
			$('#business-rules-table #business-rule-' + $(id).attr('value')).parent('div').addClass('checkbox-selected');
			$('#business-rules-table #business-rule-' + $(id).attr('value')).attr('checked', 'checked');
		}
	}
	if(txtInput[1] == 'assessment' && $(id).attr('type') == 'radio'){
		var getID = $(id).attr('name').split('_');
        $('#assessment-maxattempt-'+getID[4]).removeAttr('disabled');
        $('#assessment-maxattempt-'+getID[4]).val("1");
        var $inputs = $("#datagrid-container-assessment-"+entityId+"-"+entityType+" :text");
        var values = {};
        $inputs.each(function() {
            values[this.name] = $(this).attr('id');
            if($('#assessment-maxattempt-'+getID[4])){
            	$('#assessment-maxattempt-'+getID[4]).removeAttr('disabled');
                $('#assessment-maxattempt-'+getID[4]).val("1");
            }
            if('#'+values[this.name] != '#assessment-maxattempt-'+getID[4]){
            	$('#'+values[this.name]).attr('disabled','disabled');
            	$('#'+values[this.name]).val("");
            }


        });
	}else if(txtInput[0] == 'groupuser'){
		var attr = $(id).attr('id').split('-'),
		grpId = attr[2],
		usrId = attr[3],
		action = '';
		if($(id).is(':checked')){
			action = 'remove';
		}else{
			action = 'add';
		}
		$('#root-admin').data('peoplegroup').rowEditGroupuser(grpId,usrId,action);
	}

	//Custom Attribute Changes #custom_attribute_0078975
	if(txtInput[0].indexOf('ent_view_opt[]') != -1) {

		/*if($('input[id^="view_opt_"]').parent().hasClass('checkbox-selected')){
			$('input[id^="edit_opt_"]').parent().removeClass('checkbox-unselected');
			$('input[id^="edit_opt_"]').parent().addClass('checkbox-selected'); 
			$('input[id^="edit_opt_"]').prop( "checked", true );
			
		}*/
		if($('#view_opt_' + $(id).attr('value')).parent().hasClass('checkbox-selected')){
			$('#edit_opt_' + $(id).attr('value')).parent().removeClass('checkbox-unselected');
			$('#edit_opt_' + $(id).attr('value')).parent().addClass('checkbox-selected'); 
			$('#edit_opt_' + $(id).attr('value')).prop( "checked", true );
			
		}	
	} else if(txtInput[0].indexOf('ent_edit_opt[]') != -1) {

		/*if($('input[id^="edit_opt_"]').parent().hasClass('checkbox-unselected')){
			$('input[id^="view_opt_"]').parent().removeClass('checkbox-selected');
			$('input[id^="view_opt_"]').parent().addClass('checkbox-unselected');
			$('input[id^="view_opt_"]').prop( "checked", false );
		}*/
		if($('#edit_opt_' + $(id).attr('value')).parent().hasClass('checkbox-unselected')){
			$('#view_opt_' + $(id).attr('value')).parent().removeClass('checkbox-selected');
			$('#view_opt_' + $(id).attr('value')).parent().addClass('checkbox-unselected');
			$('#view_opt_' + $(id).attr('value')).prop( "checked", false );
		}
	}
	
	}catch(e){
		// to do
	}
}

function sortTypeToggle(toggleClassName) {
	try{
	$('.'+toggleClassName).toggle();
	}catch(e){
		// to do
	}
}
//$('#message-container').remove();

function changeDialogPopUI()
{
	try{
	var recls=$('.removebutton').css("display");
	 var chkchangeClsOverride=$( ".ui-dialog" ).hasClass("popupLeftCorner" );
     if(chkchangeClsOverride==false){
	 $('.ui-dialog-titlebar').wrapAll(document.createElement('div'));
	 $('.ui-dialog-titlebar').parents('div').addClass('popupLeftCorner');
	 $('.ui-dialog-titlebar').wrapAll(document.createElement('div'));
	 $('.ui-dialog-titlebar').parents('div').addClass('popupRightCorner');
	 $('.ui-dialog').find('.popupLeftCorner').removeClass('popupRightCorner');
	 $('.ui-dialog').addClass('expertusV2PopupContainer');
	 $('.ui-dialog-buttonpane,.launch-wizard-content,.user-popout-container,.assign-learning-team,.edit-report-wizard, .launch-lp-wizard-content, #lesson-wizard, .pre-select-class').after('<div class="popupBotLeftCorner ui-helper-clearfix"><div class="popupBotRightCorner"><div class="popupBotmiddle"></div></div></div>');

	//close button script
	// $('.removebutton').wrapAll(document.createElement('div'));
	 //$('.removebutton').parent('div').addClass('white-btn-bg-container');
	// alert(recls);
	 if(recls=="block" || recls=='inline-block'){
	 $('.removebutton').before('<div class="white-btn-bg-left"></div>');
	 $('.removebutton').addClass('white-btn-bg-middle');
	 $('.removebutton').after('<div class="white-btn-bg-right"></div>');
	 }
	}}catch(e){
		// to do
	}
}
function changeChildDialogPopUI(parentDiv)
{
	try{
	var recls=$('#' + parentDiv + ' .removebutton').css("display");
	//var chkchangeClsOverride1=$( ".ui-dialog" ).hasClass("popupLeftCorner" );
	var chkchangeClsOverride1=$( '#' + parentDiv + ' .ui-dialog' ).hasClass("popupLeftCorner" );
    if(chkchangeClsOverride1==false){
	 $('#' + parentDiv + ' .ui-dialog-titlebar').wrapAll(document.createElement('div'));
	 $('#' + parentDiv + ' .ui-dialog-titlebar').parents('div').addClass('popupLeftCorner');
	 $('#' + parentDiv + ' .ui-dialog-titlebar').wrapAll(document.createElement('div'));
	 $('#' + parentDiv + ' .ui-dialog-titlebar').parents('div').addClass('popupRightCorner');
	 $('#' + parentDiv + ' .ui-dialog').find('.popupLeftCorner').removeClass('popupRightCorner');
	 $('#' + parentDiv + ' .ui-dialog').addClass('expertusV2PopupContainer');
	 $('#' + parentDiv + ' .ui-dialog-buttonpane').after('<div class="popupBotLeftCorner ui-helper-clearfix"><div class="popupBotRightCorner"><div class="popupBotmiddle"></div></div></div>');

	 if(recls=="block" || recls=='inline-block'){
	   $('#' + parentDiv + ' .removebutton').before('<div class="white-btn-bg-left"></div>');
	   $('#' + parentDiv + ' .removebutton').addClass('white-btn-bg-middle');
	   $('#' + parentDiv + ' .removebutton').after('<div class="white-btn-bg-right"></div>');
	 }
	}}catch(e){
		// to do
	}
}

function xss_validation(x){
	try{
		//change by ayyappans for 40543: Irrelavant Validation message appears
		var Re = /(<[^>]+?[\x00-\x20\"\'])(?:on|xmlns)|(<[^>]+?[\x00-\x20\"\'])(?:script)|(<+?(script|img|image|input|body|alert|meta|&lt;|&gt;|xmlns|iframe|br|frameset)\s)|(<+?(script|xmlns|iframe|frameset|body))/ig;
		x = x.replace(Re," ");
		return x;
	}catch(e){
		// to do
	}
}

var nsParts = window.location.href.split("/?q=");
// Restrict the Page For Expertus Show Message
if(nsParts[1] != 'cart/checkout' && nsParts[1] != 'cart/checkout/paymethod' && nsParts[1] != 'cart/checkout/review' && nsParts[1] != 'user/password'
	&& (window.location.href.indexOf('user/password&language')< 0) && nsParts[1] !='learning/reset-password' && nsParts[1] != 'administration/order/create'
	&& nsParts[1] != 'administration/order/pay' && nsParts[1] != 'cart' && (nsParts[1] !=undefined && nsParts[1].indexOf('clientcreation') < 0)){
	$('#message-container').remove();
}
Drupal.t('English');
Drupal.t('Simplified Chinese');
Drupal.t('German');
Drupal.t('French');
Drupal.t('Spanish');
Drupal.t('Italian');
Drupal.t('Japanese');
Drupal.t('Korean');
Drupal.t('Russian');

function editorOnClick(id){
	try{
	if(document.getElementById('cursor_id')!= null){//id == 'edit-message-value'){
		$('#cursor_id').val(id);
	}
	$('#message-container').remove();
	}catch(e){
			// To Do
		}
}

// Added by Vincent on 17 Jul 2014.
// Since IE8 does not support indexOf on array
// Below code will make that support.
if($.browser.msie && $.browser.version == 8){
	if (!Array.prototype.indexOf) {
		Array.prototype.indexOf = function(val,start){
		    var len = this.length;
		    start = (typeof start === 'number')?start:0;
		    if(start>=0){
		    	for (; start < len; start++){
		  	      if (start in this && this[start] === val) return start;
		  	    }
		    }else{
		    	start = len;
		    	for (; start >= 0; start--){
		  	      if (start in this && this[start] === val) return start;
		  	    }
		    }
		    return -1;
		  };
	}
}

//widget class/course/tp detail page table title controler
function class_course_tp_title_controler_for_widget(title){
	var widget_class_title = titleRestrictionFadeoutImage(title,'widget-class-title-default-value');
	var iwidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
	return widget_class_title;
}

function scrollBar_Refresh(page){
	if(typeof(page)==='undefined') page = '';
	if(page == 'learning'){
		$('#my-team-dialog #gview_tbl-paintCatalogContentResults').css('height','662px'); // Default Height of the change class popup in my learning & programs
	}else if(page == 'catalog'){
		$('#select-class-dialog #gview_tbl-paintCatalogContentResults').css('height','780px'); // Default Height of the Select class popup in catalog
	}else if(page == 'tp-select-class'){
	    $('.lnr-tainingplan-register').css('height','500px');	    
		$('.lnr-tainingplan-register').jScrollPane().data().jsp.reinitialise();
		$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		//return;
	}else{
		$('#my-team-dialog #gview_tbl-paintCatalogContentResults').css('height','600px'); // Default Height of the My team assign popup
	}
	var Resizedheight = $('#tbl-paintCatalogContentResults').height(); // Calculate Height

	if(page != 'catalog'){ // For learning and My team  and prerequisite pages
		if(page == 'prerequisite'){
			var preResizedheight = $('#gview_lnr-prerequisite #lnr-prerequisite').height(); // Calculate Height
			var PredefaultSize = $('#gbox_lnr-prerequisite .ui-jqgrid-view').height();
			if (PredefaultSize > preResizedheight) { // Resize the grid
				preResizedheight = (preResizedheight < 300) ? 300 : preResizedheight;
				$("#gview_lnr-prerequisite ").css("height", (preResizedheight + 5) + "px");
				$("#gview_lnr-prerequisite .jspContainer").css("height", (preResizedheight + 5) + "px");
			}
			if ($('#PrerequisteErrorMsg').length) {
				$("#gview_lnr-prerequisite ").css("height", (150) + "px");
				$("#gview_lnr-prerequisite .jspContainer").css("height", (150) + "px");
			}
			$("#gbox_lnr-prerequisite .jspContainer").jScrollPane();
		}else if(page == 'tp-select-class'){
		var Resizedheight = $('.lnr-tainingplan-register .enroll-show-morecourse').height(); // Calculate Height
		var defaultSize = $('.lnr-tainingplan-register').height();
			if (defaultSize > Resizedheight) { // Resize the grid
				$(".lnr-tainingplan-register").css("height", (Resizedheight + 3) + "px");
				$(".lnr-tainingplan-register .jspContainer").css("height", (Resizedheight + 3) + "px");
			}
		}else{
			var defaultSize = $('#my-team-dialog .ui-jqgrid-view').height();
			if (defaultSize > Resizedheight) { // Resize the grid
				$("#my-team-dialog #gview_tbl-paintCatalogContentResults ").css("height", (Resizedheight + 3) + "px");
				$("#my-team-dialog #gview_tbl-paintCatalogContentResults .jspContainer").css("height", (Resizedheight + 3) + "px");
			}
			$("#my-team-dialog #gview_tbl-paintCatalogContentResults").jScrollPane();
		}

	}else{
		var defaultSize = $('#select-class-dialog .ui-jqgrid-view ').height();
		if (defaultSize > Resizedheight) { // Resize the grid
			$("#select-class-dialog #gview_tbl-paintCatalogContentResults ").css("height", (Resizedheight + 20) + "px");
			$("#select-class-dialog #gview_tbl-paintCatalogContentResults .jspContainer").css("height", (Resizedheight + 20) + "px");
		}
		$("#select-class-dialog #gview_tbl-paintCatalogContentResults").jScrollPane();
	}
}

//after login auto register or add to cart related work start
$(function() {
	try{
		$("#user-login .learner-sign-close-link").live('click',function(){
			var user_selected_class_id = $.cookie("user_selected_class_id");
			 if(user_selected_class_id != null && user_selected_class_id !=undefined){
				 $.cookie("user_selected_class_id",'',{expires: -300});
				 $.cookie("user_selected_url", '',{ expires: -300 });
			 }
			 var user_selected_page_number = $.cookie("user_selected_page_number");
			 if(user_selected_page_number != null && user_selected_page_number !=undefined)
				 $.cookie("user_selected_page_number",'',{expires: -300});
			 var user_selected_row_number = $.cookie("user_selected_row_number");
			 if(user_selected_row_number != null && user_selected_row_number !=undefined)
				$.cookie("user_selected_row_number",'',{expires: -300});
		});
		$(".ctool-login-modal .popups-close").live('hover',function(){
			$('form').each( function(){
				if($(this).attr('id') == 'user-login'){
					$(".ctool-login-modal .popups-close a").each(function(){
					  this.setAttribute('onclick','clearCookie();');
					});
				}
			});
		});
	}catch(e){
		 // to do
	 }
});
function clearCookie(){
	var user_selected_class_id = $.cookie("user_selected_class_id");
	if(user_selected_class_id != null && user_selected_class_id !=undefined){
		 $.cookie("user_selected_class_id",'',{expires: -300});
		 $.cookie("user_selected_url", '',{ expires: -300 });
	}
	var user_selected_page_number = $.cookie("user_selected_page_number");
	if(user_selected_page_number != null && user_selected_page_number !=undefined)
		 $.cookie("user_selected_page_number",'',{expires: -300});
	var user_selected_row_number = $.cookie("user_selected_row_number");
	if(user_selected_row_number != null && user_selected_row_number !=undefined)
		 $.cookie("user_selected_row_number",'',{expires: -300});
}
//after login auto register or add to cart related work End
function HtmlEncode(s)
{
  var el = document.createElement("div");
  el.innerText = el.textContent = s;
  s = el.innerHTML;
  return s;
}

//To replace some special characters into html entities in javascript
function htmlEntities(str) {
    return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;'); //54112
}

//after login auto register or add to cart related work End
$(function() {
	try{
	$('.enroll-launch-more').live("click",function(){
	var chkOverflow=$('#enroll-lp-result-container .enroll-action, #enroll-result-container .enroll-action').css("overflow");
    if(chkOverflow=="hidden" || chkOverflow=="visible" ){
    	$('#enroll-lp-result-container .enroll-action, #enroll-result-container .enroll-action').css("overflow","");
    }
	});
	}catch(e){
		 // to do
	}
});

function generateMyLearningActionList(actionList, actionKey) {
	  var listStr = '';
	  //console.log('actionKey: ' + actionKey);
	  for (var key in actionList) {
		if (key != actionKey) {
			listStr += '<li class="action-enable">' + actionList[key] + '</li>';
		}
	  }
	  return listStr;
}
function calRefreshAftClose() {
	if ($("#calendarprimaryview").size()) {
		calendarallpopupclose();
		getCalendarData();
		if ($.cookie != undefined) {
			$.cookie("delivery_type", "");
        	$.cookie("startdate", "");
		}
	}
}

function adminCalSuffix()
{
	if($.cookie != undefined && $.cookie("startdate") != null && $.cookie("startdate") != '')
		$("#start_date").val($.cookie("startdate"));//, moment(date).format("MM-DD-YYYY"));

	if($.cookie != undefined && $.cookie("delivery_type") != null && $.cookie("delivery_type") != "null" && $.cookie("delivery_type") != "") 
	{
		$("#delivery_type").val($.cookie("delivery_type"));
	}
	if($.cookie != undefined && $.cookie("delivery_type") == "lrn_cls_dty_vcl")
	{
		$(".addedit-edit-new_location").addClass("addedit-readonly-textfield");
		$(".addedit-edit-new_location").attr("disabled","disabled");
		$(".addedit-edit-new_location").attr("value","");
		$("#edit-max-seats").focus();
		
		
	}
}
/**
	function to dispose all/specific videojs player(s)
**/
function disposeVideoJSPlayer(playerId) {
  if(videojs.getPlayers()[playerId] !== undefined && videojs.getPlayers()[playerId] !== null) {
    videojs(playerId).dispose();
  } else if (playerId == 'all') {
	$.each(videojs.getPlayers(), function(index, player){
		if(player !== undefined && player != null) {
			videojs(index).dispose();
		}
	});
  }
 saveInterval = (typeof saveInterval == 'undefined' ? null : saveInterval);
 ajaxInterval = (typeof ajaxInterval == 'undefined' ? null : ajaxInterval);
 updateStatusToDB = (typeof updateStatusToDB == 'undefined' ? null : updateStatusToDB);
 videoTrackerProgress = null;
 clearInterval(saveInterval);
 clearInterval(ajaxInterval);
 clearInterval(updateStatusToDB);
}
function saniztizeJSData(str) {
	if (str == '' || str === null) {
		return '';
	}
	return htmlEntities(decodeURIComponent(str));
}
function openAttachmentCommon(url){
	try{
		url = prepareFileURL(url);
	var woption = "width=800,height=900,toolbar=no,location=yes,status=yes,menubar=no,scrollbars=yes,resizable=1";
	window.open(url, "_blank", woption);
	}catch(e){
		 // to do
	 }
}
function prepareFileURL(url){
	if(url=='')
		return '';
	url =decodeURIComponent(url);
	var url_arr = url.split('/');
	var url_len = url_arr.length;
	var old_file = url_arr[url_len-1];
	var new_file = encodeURIComponent(url_arr[url_len-1]);
	url = url.replace(old_file, new_file);
	return url;
}

function addslashesForReport(string) {
	try{
        return string.replace(/\\/g, '\\\\').replace(/</g, '&lt;').replace(/>/g, '&gt;').
        replace(/'/g, '\\\'').
        replace(/"/g, '&quot;'); 
  	}catch(e){
 		//Nothing to do
	}
}


function qtip_popup_paint(session_id,sessionDate,multisession,label, pageFrom){
	try {
	//	console.log(session_id);
		var html = '';
		var label = (label == 1 ? '(Location TZ)' : '(TZ)');	
		var width = (multisession > 1 ? '370' : '304');     
	    var  session_id = session_id+"-"+Math.floor(Math.random() * 1000000);
		var $qtipOptClassObj = {
			'entityId': session_id,
			'popupDispId' : 'location-session-details_'+session_id,
			'wid': width,
			'heg' : 60,
			'postype' : 'bottomright',
			'linkid' : 'manage-location-time-'+session_id,
			'dispDown' : 'Y'
		}
		
		if(pageFrom == 'mylearning-calendar') {
			$qtipOptClassObj.wid = 214;
			$qtipOptClassObj.top = -14;
			$qtipOptClassObj.heg = 57;
			$qtipOptClassObj.postype = 'bottomleft';
			$qtipOptClassObj.dispDown = 'N';
		}
		var stringified = JSON.stringify($qtipOptClassObj).replace(/"/g, '\'');
		
		html += '<div id="location-session-details_'+session_id+'" class="location-session-detail line-item-container">';
		html += '<span><a id="manage-location-time-'+session_id+'" class="manage-location-time" onclick="locationdetails('+stringified+');" href="javascript:void(0);">'+label+'</a></span>';
		html += '<span id="selSessionId-'+session_id+'" style="display: none;">'+sessionDate+'</span>';
		html += '<span style=" position:absolute; left:0px; top:0px;" class="qtip-popup-visible" id="visible-popup-'+session_id+'"></span>';
		html += '</div>';
		html += '<span id="visible-popup-'+session_id+'" class="qtip-popup-visible" style="display:none; position:absolute; left:0px; top:0px;"></span>';
		//html += '</div>';

		return html;

	} catch (e) {
		// TODO: handle exception
	window.console.log(e, e.stack);
	}
}
function enableLogin(e) {
    if (e.keyCode == 13) {
    	$('#my-login-container').find('form').submit();
 	    return false;  
    }
}
function checkEncodedState(data) {
try{
	if (encodeURIComponent(decodeURIComponent(data)) === data) {
		//console.log('$data is urlencoded');
		return true;
	} else {
		//console.log('$data is NOT urlencoded');
		return false;
	}
	}catch (e) {
       // window.console.log(e, e.stack);
       return false;
    }
}

function afterRenderRefineIcon(selector) {
    try {
        if (selector !== undefined) {
            var refineSelector = $(selector).find('.criteria-refine-icon');
        } else {
            var refineSelector = $('.criteria-refine-icon');
        }
        refineSelector.each(function() {
            //window.console.log($(this).find('div.refine-text'), $(this).find('div.refine-text .refine-text-span'));
            //window.console.log("'div.refine-text').width()", $(this).find('div.refine-text').width(), "('div.refine-text .refine-text-span').width()", $(this).find('div.refine-text .refine-text-span').width());
            if (($(this).find('div.refine-text').width() >= $(this).find('div.refine-text .refine-text-span').width()) && $(this).find('div.refine-text .refine-text-span').width() != 0) {
                $(this).find('div.refine-text .refine-text-fade').remove();
            }
        });
    } catch (e) {
        window.console.log(e, e.stack);
    }
}

function progressBarRound(dataId, value1, section,type,obj) {
	try {
		if(typeof obj == 'undefined'){
			obj = this;
		}
		var elementId = type + dataId;
		var strokeVal = 7;
		// If browser is IE then set value as 6
		if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') != -1 || navigator.userAgent.indexOf('Edge/') != -1) {
			strokeVal = 6;   
		}
		if (!$('#'+elementId).hasClass('progress-updated')) {
    		setTimeout(function(){
    			if(typeof obj.bar == 'undefined' || typeof obj.bar[elementId] == 'undefined') {
    				var bar = new ProgressBar.Circle('#'+elementId, {
					  color: '#505050',
					 
					  // This has to be the same size as the maximum width to
					  // prevent clipping
					  strokeWidth: strokeVal,
					  trailWidth: strokeVal,
					  easing: 'easeInOut',
					  duration: 1400,
					  text: {
					    autoStyleContainer: false
					  },
					  from: { color: '#86D752', width: strokeVal},
					  to: { color: '#86D752', width: strokeVal},
					  // Set default step function for all animate calls
					  step: function(state, circle) {
					    circle.path.setAttribute('stroke', state.color);
					    circle.path.setAttribute('stroke-width', state.width);

					    var value = Math.round(value1 * 100);
					      circle.setText(value+"%");
					  }
					});
					if(typeof obj.bar == 'undefined') {
						obj.bar = [];
					}
    				obj.bar[elementId] = bar;
        			if (section == 'lp_class_progress') {
        				bar.text.style.fontSize = '9px';
        				bar.text.style.marginTop = '1px';
        			} else {
        				bar.text.style.fontSize = '0.8rem';
        			}
					bar.text.style.fontFamily = 'Ariel,,"Raleway", Helvetica, sans-serif';
					bar.animate(value1);
    			} else {
    				obj.bar[elementId].destroy();
    				var bar = new ProgressBar.Circle('#'+elementId, {
  					  color: '#505050',
  					 
  					  // This has to be the same size as the maximum width to
  					  // prevent clipping
  					  strokeWidth: strokeVal,
  					  trailWidth: strokeVal,
  					  easing: 'easeInOut',
  					  duration: 1400,
  					  text: {
  					    autoStyleContainer: false
  					  },
  					  from: { color: '#86D752', width: strokeVal},
  					  to: { color: '#86D752', width: strokeVal},
  					  // Set default step function for all animate calls
  					  step: function(state, circle) {
  					    circle.path.setAttribute('stroke', state.color);
  					    circle.path.setAttribute('stroke-width', state.width);
  					    var value = Math.round(value1 * 100);
					      circle.setText(value+"%");
  					  }
  					});
      				obj.bar[elementId] = bar;
          			if (section == 'lp_class_progress') {
          				bar.text.style.fontSize = '9px';
          				bar.text.style.marginTop = '1px';
          			} else {
          				bar.text.style.fontSize = '0.8rem';
          			}
  					bar.text.style.fontFamily = 'Ariel,,"Raleway", Helvetica, sans-serif';
  					bar.animate(value1);
    			}
			},100);
		}	
	} catch(e) {
		// console.log(e);
	}
}



function resetFadeOutByClass(selector,pcont,lcont,fromPage){
	try{
		// Selector required if page has multiple line item widgets 
		selector = (selector == null || selector == undefined) ? '' : selector; 
		pcont = (pcont == null || pcont == undefined) ? 'content-detail-code' : pcont; // Class of the parent level container
		lcont = (lcont == null || lcont == undefined) ? 'line-item-container' : lcont; // Class of each attribute container
		var lineWidth = $(selector + " ."+pcont).width() - 10; // Total width of the entire attribute line
		$(selector + ' .'+pcont).each(function(){ // Loop start for the parent level 
			var cnt = $(this).find("."+lcont).size(); // Number of line items
			//var parent = this;
			var data = [];
			if(cnt > 1){ // Line has more than one item
				// Calculate container total width with subtract the space of the pipe separator
				var contWidth = lineWidth - ((cnt - 1) * 10);
				// Calculate applicable width allocation for each item
				var avgWidth = Math.ceil(contWidth/cnt);
				var sWidth = contWidth; // Set total width of the container into the sharable width variable
				$(this).find('.'+lcont).not('.fadeout-applied').each(function(){ // Start loop for each items for calculation
					// Max with of the attribute
					if($(this).find('.fade-out-title-container').size() > 0){
						var mWidth = $(this).find('.fade-out-title-container').css('max-width').replace('px','');
						// Actual text width
						var aWidth = $(this).find('.title-lengthy-text').width();
						// Check for fade out required or not
						var fadeReq = (aWidth > avgWidth) ? 1 : 0;
						if(fadeReq == 0){
							// subtract the total container width with the actual text width if fade out not required
							// for identify the sharable width
							sWidth -= aWidth; 
							// Subtract the item count if fade out not required
							cnt--;
						}
						var tmp = {
						           'maxWidth':mWidth,
						           'textWidth':aWidth,
						           'avgSpace':avgWidth,
						           'fade':fadeReq
						};
					}else{
						var aWidth = $(this).width();
						var tmp = {
						           'maxWidth':0,
						           'textWidth':aWidth,
						           'avgSpace':0,
						           'fade':0
						};
						sWidth -= aWidth; 
						cnt--;
					}
					
					data.push(tmp);
				}); // End of line item loop
				//console.log(data);
				contWidth = sWidth; // reset container width with actual sharable width
				var idx = 0;
				$(this).find('.'+lcont).not('.fadeout-applied').each(function(){ // Start loop for each line item for set width
					var removeFade = false;
					if(data[idx].fade == 0){
						if($(this).find('.fade-out-title-container').size() > 0){
							$(this).find('.fade-out-title-container').css('max-width',data[idx].textWidth+"px");
							removeFade = true;
						}
					}else{
						if($(this).find('.location-session-detail').size() > 0){
							// Subtract width of the timezone link
							contWidth -= $(this).find('.location-session-detail').width() + 5;
						}
						//console.log("contewidht "+contWidth+" / "+cnt);
						
						// Recalculate the available space for each item based on the sharable space
						avgWidth = Math.ceil(contWidth/cnt); 
						mWidth = data[idx].maxWidth;
						aWidth = data[idx].textWidth;
						var setWidth = ''; 
						//console.log('aw - '+aWidth+" avw - "+avgWidth + " mw - "+mWidth);
						if(aWidth >= avgWidth){ // if actual text width grater than the available space for each item
							setWidth = avgWidth;
							contWidth -= avgWidth; 
						}else{
							setWidth = aWidth;
							contWidth -= aWidth; 
							removeFade = true;
						}
						
						$(this).find('.fade-out-title-container').css('max-width',setWidth+"px");
						cnt--; 
					}
					idx++;
					// Remove fade out image if not required
					if(removeFade == true) {
						$(this).find('.fade-out-image').remove();
					};
					$(this).addClass('fadeout-applied');
				});
			}else{
				var aWidth = $(this).find('.title-lengthy-text').width();
				if(aWidth <= lineWidth){
					$(this).find('.fade-out-title-container').css('max-width',aWidth+"px");
					$(this).find('.fade-out-image').remove();
				}else{
					$(this).find('.fade-out-title-container').css('max-width',lineWidth+"px");
				}
				$(this).addClass('fadeout-applied');
			}
		});
	}catch(e){
		//console.log(e);
	}
}
/* Need to look at this function later for session-width which might change when the function is called from any page other than My Learning */
function resetFadeOutForAttributes(selector,pcont,lcont,fcont,fromtab){
	try{
		var width = new Array();
		var finalWidth;
		var maxwidth;
		var lineWidth = $(selector).width();
		if(fromtab == 'myenrollment' || fromtab == 'myinstructor')
			lineWidth = lineWidth - 10;
		else if(fromtab == 'myprogramclass' || fromtab == 'myprogramtp')
			 lineWidth = lineWidth - 80;
		$(selector + ' .'+pcont).each(function(){  //Process through each main-item-container
			$(this).find("."+lcont).each(function(){  // Process through each line-item-container
					var awidth  = 	$(this).find("."+fcont).width(); // Width of each container
					if(awidth != null){
						width.push(awidth);
	    			}
	    		maxwidth = Math.max.apply(null,width);
	    		width = [];
	    	});
	    		var session_width = $(this).find('.session-container').width(); // check whether session exist
	    		if(session_width == null)
	    			 finalWidth = lineWidth - maxwidth;
	    		else 
	    			finalWidth = lineWidth - maxwidth - session_width ;
	    	
	    	$(this).find('.fade-out-title-container').css('max-width',finalWidth+"px");
	    });
 }catch(e){
		//console.log(e);
	}
}

//h5pcustomization - 
$(document).ready(function()
{
	try
	{
		if(availableFunctionalities.exp_sp_administration_contentauthor != undefined && availableFunctionalities.exp_sp_administration_contentauthor == "exp_sp_administration_contentauthor" )
		{
			if(window.location.href.indexOf("?q=learning/class-details") > 0 || window.location.href.indexOf("?q=learning/course-details") > 0 || window.location.href.indexOf("?q=learning/learning-plan-details") > 0|| window.location.href.indexOf("?q=learning/catalog-search") > 0 || window.location.href.indexOf("?q=learning/enrollment-search") > 0)
			{
				preLoadH5PFiles();
			}
		}
	}catch(e){}
});
function preLoadH5PFiles()
{
$.ajax({
  type: "GET",
  url: "/h5pmerge/embedpresentjs.js",
  dataType: "text",
  async:true,
  success:function(data){
	var pre=document.createElement('pre');
	pre.style ="display:none;"
	pre.value=data;
	pre.id="previewpresentationjsfiles";
	$("body").append(pre);
	}
	});



$.ajax({
  type: "GET",
  url: "/h5pmerge/embedpresentcss.css",
  dataType: "text",
  async:true,
  success:function(data){
	var pre=document.createElement('pre');
	pre.style ="display:none;"
	pre.value=data;
	pre.id="previewpresentationcssfiles";
	$("body").append(pre);
	}
	});


$.ajax({
  type: "GET",
  url: "/h5pmerge/embedvideojs.js",
  dataType: "text",
  async:true,
  success:function(data){
	var pre=document.createElement('pre');
	pre.style ="display:none;"
	pre.value=data;
	pre.id="previewvideojsfiles";
	$("body").append(pre);
	}
	});



$.ajax({
  type: "GET",
  url: "/h5pmerge/embedvideocss.css",
  dataType: "text",
  async:true,
  success:function(data){
	var pre=document.createElement('pre');
	pre.style ="display:none;"
	pre.value=data;
	pre.id="previewvideocssfiles";
	$("body").append(pre);
	}
	});


}
;
/**
 * The Abstract Details Widget is the base component of LPP framework. It consists the base LPP framework libary methods.
 * It helps to develop a any new learning widget as a subwidget of this.
 * @class AbstractDetailsWidget
 * @module BaseWidget
 * @namespace EXPERTUS.SMARTPORTAL
 * @uses JQuery libraries, prototype library
 * @constructor
 * @param panelAttributes {namedargument}-  It contains the panel level attributes(height, width,etc...)
 * @param serviceAttributes1 {namedargument} It contains the service level attributes ( certificateid, learnerid,etc....)
 */

/**
 * Contains the id of the previous widget which should be destroyed when a new widget is invoked
 * @property destroyPreviousWidget
 * @type String
 * @default null
 * @scope Stores the value through out the application.
*/
//registernamespace("EXPERTUS.SMARTPORTAL.AbstractDetailsWidget");
var EXPERTUS_SMARTPORTAL_AbstractDetailsWidget ={


        /**
        * If it is false it makes the sync request to the LMS system.
        * @property this.asyncReq
        * @type Boolean -
        * @default true
        * @Instance level variable
        */
        asyncReq:true,

        /**
        * It is used to store the labels for the learning components.
        * @property this.labelsBundle
        * @type JSONObject
        * @default null
        * @Instance level variable
        */
        labelsBundle:null,

        /**
        * It is used to display the grey out box in the browser.
        * @property this.isModal
        * @type boolean
        * @default true
        * @Instance level variable
        */
        isModal:true,

        /**
        * It is used to persist the web service response xml as a text from xmlhttprequest
        * @property this.responseText
        * @type String
        * @default null
        * @Instance level variable
        */
        responseText:null,
        /**
        * It is used to persist  the web service response xml object from xmlhttprequest
        * @property this.responseXml
        * @type Object
        * @default null
        * @Instance level variable
        */
        responseXml:null,

        /**
        * It says how long web service request will be alive. If web service request takes processing time more than specified the value,
        * application abort the request. It will throw the error "Connection timeout".
        * @property this.timeOut
        * @type Object
        * @default null
        * @Instance level variable
        */
        timeOut:null,


        /**
        * Endpoint URL. It specifies where web service request has to hit.
        * @property this.url
        * @type String
        * @default null
        * @Instance level variable
        */
        url:null,

        /**
        * It is used to maintain the service level attributes values (Example:- certificateid,learnerid, etc... )
        * @property this.serviceAttributes
        * @type namedargument
        * @default  values populated from sub widget.
        * @Instance level variable
        */
        serviceAttributes:null,

        /**
        * In order to maintain the parent widget reference to the sub widget. It helps.
        * @property this.widgetCallingFrom
        * @type Object
        * @default null
        * @Instance level variable
        */
        widgetCallingFrom:null,

        /**
        * It is used to store the xmlhttprequest this. It will help to do the request object based services.E.g: abort the connection, check the
        * status of http request.
        * @property this.httpRequest
        * @type Object
        * @default null
        * @Instance level variable
        */
        httpRequest:null,

        /**
        * It is used to render the content of the panel. It persist all the html element whichever needs to be render.
        * @property this.bodyHtml
        * @type String
        * @default  ""
        * @Instance level variable
        */
        bodyHtml:"",

        /**
        * panel object will load using this value.It is nothing but unique div id value which is used to load the panel this.
        * @property this.uniqueWidgetId
        * @type String
        * @default null
        * @Instance level variable
        */
        uniqueWidgetId:null,

        /**
        * Message to display the widget title.
        * @property this.widgetTitle
        * @type String
        * @default null
        * @Instance level variable
        */
        widgetTitle:null,

        /**
        * It is used to the xml and cookies related operations.
        * @property this.xmlutil
        * @type Object
        * @default null
        * @Instance level variable
        */
        xmlutil:null,

        /**
        * if inline==true then widget will display using accordian effect. (inline widget).It will not show the header and footer.
        * @property this.inline
        * @type boolean
        * @default false
        * @Instance level variable
        */
        inline:false,

        /**
        * According to the locale value, widget will pick the labels and other properties from i18n repository.
        * @property this.locale
        * @type String
        * @default english
        * @Instance level variable
        */
        locale:null,

        /**
        * Variable to hold the soap action name.
        * @property this.SOAPActionName
        * @type String
        * @default english
        * @Instance level variable
        */
        SOAPActionName:null,

        /**
        * Variable to hold the request method name.
        * @property this.methodName
        * @type String
        * @default english
        * @Instance level variable
        */
        methodName:null,

        /**
        * Variable to hold the service name or number.
        * @property this.serviceName
        * @type String
        * @default english
        * @Instance level variable
        */
        actionKey:null,

        /**
        * It is used to store the widget details. - Dont use this method.
        * @property this.widgetDetailsObject
        * @type Object
        * @default null
        * @Instance level variable
        */
        widgetDetailsObject:null,

        lovXml:null,

        /**
        * Overridable method which is used to set the locale of the widget.
        * @method this.setLocale
        * @param locale{String} locale value
        * @public
        */
        setLocale:function(locale)
        {
            this.locale=locale;
        },

        /**
        * Overridable method which is used to set the soap action name of the widget.
        * @method this.setSOAPActionName
        * @param SOAPActionName{String} soap action name
        * @public
        */
        setSOAPActionName:function(SOAPActionName)
        {
            this.SOAPActionName=SOAPActionName;
        },

        /**
        * Overridable method which is used to get the SOAP action name of the widget.
        * @method this.getSOAPActionName
        * @public
        * @return String
        */
        getSOAPActionName:function()
        {
            return this.SOAPActionName;
        },

        /**
        * Overridable method which is used to set the method name of the request.
        * @method this.setMethodName
        * @param methodName{String} soap action name
        * @public
        */
        setMethodName:function(methodName)
        {
            this.methodName=methodName;
        },

        /**
        * Overridable method which is used to get the name of the request.
        * @method this.getSOAPActionName
        * @public
        * @return String
        */
        getMethodName:function()
        {
            return this.methodName;
        },

        /**
        * Overridable method which is used to get the locale of the widget.
        * @method this.getLocale
        * @return String
        * @public
        */
        getLocale:function()
        {
            return  this.locale;
        },

          /**
         * Overridable method which is used to set the http request from manager layer.
         * @param reqObj - XmlHttpRequestObj
         * @method this.setHttpReqObj
         * @public
         *
         */
        setHttpReqObj:function(reqObj)
        {
            this.httpRequest=reqObj;
        },

        /**
         * Overridable method which is used to get the current Instance Object name.
         * @method this.getObjectName
         * @return {String} Name of the widget instance.
         * @public
         */
        getObjectName:function()
        {
            return this.widgetGlobalName;
        },

        /**
        * Method which is used trim a string means remove the leading and trailing space.
        * @method this.Trim()
        * @return {String}
        * @public
        */
         Trim:function(str){
            //return str.replace(/(^\s*)|(\s*$)/g, "");
        	return $.trim(str);
         },

        /**
        * Method which is used to Left trim a string.
        * @method this.LTrim()
        * @return {String}
        * @public
        */
         LTrim:function(str){
             //return str.replace(/(^\s*)/g, "");
        	 return $.trim(str);
        },

        /**
        * Method which is used to Right trim a string.
        * @method this.RTrim()
        * @return {String}
        * @public
        */
        RTrim:function(str)
        {
            //return str.replace(/(\s*$)/g, "");
        	return $.trim(str);
        },

        /**
         * Overridable method which is used to get the current Instance Object name with index position of WidgetEngine properties.
         * @method this.getWidgetInstanceName
         * @return {String} Name of the widget instance.
         * @public
         */
        getWidgetInstanceName:function()
        {
            //return this.widgetGlobalName+"["+this.widgetIdx+"]";
            return this.widgetGlobalName;
        },

        /**
        * Overridable method which is used to executes when the web service response is success.
        * @method this.getResponseXml
        * @return responseXml {Object}
        * @public
        */
        getResponseXml:function()
        {
               return this.responseXml
        },

        /**
        * Overridable method which is used to convert the response into proper xml format (incase the response
        * contain &gt; instead of >).
        * @method this.convertResponseXml
        * @return responseXml {Object}
        * @public
        */

       convertResponseXml:function()
       {

            //var formated=this.replaceAll(this.responseText,"&","&amp;");
            // var formated=(this.responseText).replace( new RegExp('&',"g"), 'ampersand');

    /*      var formated=this.replaceAll(this.responseText,"&lt;","<");
            formated=this.replaceAll(formated,"&gt;",">");
            formated=formated.replace( new RegExp('&',"g"), '&amp;');
            //prompt('',formated);*/
            var responsetext =this.responseText;
            try //Internet Explorer
            {
              xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
              xmlDoc.async="false";
              xmlDoc.loadXML(responsetext);
            this.responseXml = xmlDoc;
            }
            catch(e)
            {
                try{
                    parser=new DOMParser();
                    this.responseXml = parser.parseFromString(responsetext,"text/xml");
                }catch(e){
                    //alert(e.message);
                }

            }
       },


        /**
        * Overridable method which is used to set the  web service url.
        * @method this.setEndPointURL
        * @param {String} - URL of the LMS Server
        * @public
        */
        setEndPointURL:function(url)
        {
            this.url = url;
            //alert("URL_:"+this.url);
        },

        /**
        * Overridable method which is used to get the  web service url.
        * @method this.getEndPointURL
        * @return  {String} - URL of the LMS Server
        * @public
        */
        getEndPointURL:function()
        {
            return this.url;
        },

        /**
        * Overridable method which is used to set the  service number or name .
        * @method this.setactionKey
        * @param  {String} - Service number or name
        * @public
        */
        setActionKey:function(no){
            this.actionKey=no;
            //alert(this.actionKey);
        },

        /**
        * Overridable method which is used to get the  service number or name .
        * @method this.getActionKey
        * @return  {String} - Service number or name
        * @public
        */
        getActionKey:function(){
            return this.actionKey;
        },

        /**
        * Overridable method which is used to set the timeout value for ajax call.
        * @method this.setTimeout
        * @param {int} - time in milliseconds
        * @public
        */
        setTimeout:function(timeoutvalue)
        {
            callback.timeout=timeoutvalue;
        },

        /**
        * Overridable method which is used to get the timeout value for ajax call.
        * @method this.getTimeout
        * @return {int} - time in milliseconds
        * @public
        */
        getTimeout:function()
        {
            return callback.timeout;
        },


        /**
        * Overridable method which is used to set the parent widget to the current widget object.
        * @method this.setWidgetCallingFrom
        * @param {Object} - Parent widget object
        * @public
        */
        setWidgetCallingFrom:function(widgetCallFrom)
        {
            this.widgetCallingFrom=widgetCallFrom;
        },

        /**
        * Overridable method which is used to get the parent widget of the current widget object.
        * @method this.getWidgetCallingFrom
        * @return {Object} - Parent widget object
        * @public
        */
        getWidgetCallingFrom:function()
        {
            return this.widgetCallingFrom;
        },

        /**
        * Overridable method which is used to set unique widget id which is used to creating the panel dom ids.
        * @method this.setUniqueWidgetId
        * @param {String} - Unique widget id of the widget
        * @public
        */
        setUniqueWidgetId:function(uniqueWidgetId)
        {
            this.uniqueWidgetId=uniqueWidgetId
            this.setAlertSpace(uniqueWidgetId);
        },

        setAlertSpace:function(id){
            var id = document.getElementById("AlertMessage");
            if(id==null || id==undefined || id=='') {
            	(function($) {
            		$('#'+id).parent().append("<div id='AlertMessage'></div>");
            	})(jQuery);
            }
        },

        /**
        * Overridable method which is used to get unique widget id which is used to creating the panel dom ids.
        * @method this.getUniqueWidgetId
        * @return {String} - Unique widget id of the widget
        * @public
        */
        getUniqueWidgetId:function()
        {
            return this.uniqueWidgetId;
        },

        /**
        * Overridable method which is used to set the necessary parameters for the widget and set
        * the base display for the widget.
        * @method this.renderDialog
        * @param {namedarguments} - It contains panel attributes i.e width,height,x,y
        * @public
        */
        renderDialog:function(params,serviceAttributes)
        {
            /* Get User Options */
            //this.setServiceAttributes(serviceAttributes);
            //alert(this.serviceAttributes.Certificate)
            var isResizable=params.resizable;
            var isDraggable=params.draggable;
            var isAutoOpen=params.autoOpen;
            var isModal=params.modal;
            var panelwidth=params.width;
            var height=params.height;

            //var position=params.position;
            //place the dialog at the center
            var wleft = (screen.width - panelwidth) / 2;
            var wtop = 60;
            if(height!='undefined' && height != 'auto') {
                wtop=(screen.height - height) / 2;
            }
            var position = [wleft,wtop];

            var isCloseOnEscape=params.CloseOnEscape;
            var panelTitle=(params.title==undefined)?this.getWidgetTitle():params.title;
            var panelButtons=params.buttons;
            var v = document.createElement("div");
            var destroyable=params.destroyable;
            var isAlert = params.isAlert;
            // If a widget is said as destroyable.
            var body = (params.body==null || params.body=='')?this.bodyHtml:params.body;
            var uniqueID=this.getUniqueWidgetId();
            var dialogid=(params.dialogid==undefined)?'':params.dialogid;
            var stack = params.stack;
            v.id =uniqueID+dialogid;
            var btns=new Array("Validate","Change Password ")
            v.style.position='relative';
            var obj=document.getElementById(uniqueID+params.parentid);
            if(obj!=null){
                //$(obj).add(v);
                obj.appendChild(v);
            }else{
                document.body.appendChild(v);
            }
            $("#"+v.id).html(body);
            jQuery.ui.dialog.defaults.bgiframe = true;
            var wobj = eval(this.getWidgetInstanceName());
            var wname = this.getWidgetInstanceName();
            $(function() {
            /*  $("#"+v.id).dialog({
                    position: position,
                    resizable:isResizable,
                    draggable:isDraggable,
                    autoOpen: isAutoOpen,
                    width:panelwidth,
                    closeOnEscape:isCloseOnEscape,
                    title:panelTitle,
                    height:height,
                    buttons:panelButtons,
                    modal:isModal,
                    bgiframe:true,
                    close:function(){
                        jQuery(this).remove();
                    }
                });*/
                $("#"+v.id).dialog("open");
                    var closeButt={};
                    closeButt[SMARTPORTAL.t('Close')]=function(){ wobj.destroyDialog(this,v.id); };
                    var actions = params.dialogActions;
                    if(actions!=undefined && actions.length>0){
                        for(var i=0;i<actions.length;i++){
                            var fn=actions[i].actionFn;
                            fn=wname+'.'+fn+'()';
                            closeButt[actions[i].actionName]=function(){eval(fn);};
                        }
                    }

                    $("#"+v.id).dialog({
                        width:panelwidth,
                        height:height,
                        title:panelTitle,
                        //top:top,
                        //left:left,
                        position: position,
                        modal: isModal,
                        resizable:false,
                        bgiframe:true,
                        stack:stack,
                        buttons:closeButt,
                        overlay: {
                            opacity: 0.5,
                            background: "black"
                        }
                    });
            });


        /*
                if(destroyPreviousWidget !=''){
                    if(destroyPreviousWidget != v.id && !isAlert){
                        this.destroyDialog(destroyPreviousWidget);
                    }
                }
                if(destroyable){
                    destroyPreviousWidget=v.id;
                }
            */
            // jQuery("#"+v.id).show('blind', {},800,'');
        },

        destroyDialog:function(obj,id){
            $(obj).dialog('destroy');
            $(obj).dialog('close');
            $('#'+id).remove();
        },

         /**
           *  @method Method to display alert messages.
           */
        createLoader:function(resultPanel,scroll){
            //alert("resultPanel :"+resultPanel);
        	scroll = (scroll == undefined) ? true : false;
            var divid= "loaderdiv"+resultPanel;
            if(document.getElementById(divid)==null && document.getElementById(resultPanel)!=null){
                var divobj=document.createElement('div');
                divobj.id=divid;
                var height;
                if(navigator.appName=="Microsoft Internet Explorer") {
                    height = document.getElementById(resultPanel).offsetHeight;
                } else {
                    height = document.getElementById(resultPanel).clientHeight;
                }
                var width = document.getElementById(resultPanel).offsetWidth;
                //38708: Location creating twice when clicking save button twice
               	var org_height = height;
                if(height < 100) {
	                 height = 75;
	            } else if (height >= 1024) {
	                 height = height/3;
	            } else if (height < 1024 ) {
	                 height = height/2;
	            }
                //42360: when we clicks on share link catalog page loader icon is not showing
                if(parseInt(org_height)==0)
                	org_height = height;
                divobj.innerHTML='<div height="'+parseInt(height)+'" width="'+parseInt(width)+'"><table border="0" width="100%"><tr><td align="center" height="'+parseInt(height)+'" width="'+parseInt(width)+'" valign="middle"><div class="loaderimg"></div></td></tr></table></div>';
                if(width == 0) {
                	width = '800';
                }
            	$($("#"+resultPanel)).prepend(divobj);
                $('#'+divid).addClass("loadercontent");
                $('#'+divid).width(width);
                $('#'+divid).height(org_height);
                $('#'+divid).css("z-index",1003);

                if(((divid.indexOf('divtag') == -1) && (divid.indexOf('divcatalog-attachment') > 0)) || ((divid.indexOf('divtag') > 0) && (divid.indexOf('divcatalog-attachment') == -1))){
                } else {
                	$('#'+divid).css("left","0px");
                }

                var marginHeight = (height-80)/2;
            	$('#'+divid+' .loaderimg').css("margin-top",marginHeight+"px");
            }
          },

          /**
           *  @method Method to display alert messages.
           */
        destroyLoader:function(loaderTarget){
              var divid= "loaderdiv"+loaderTarget;
                if(document.getElementById(divid)!=null){
                    //Element.remove(divid);
                        $('#'+divid).remove();

                }
          },


        /**
        * Overridable method which is used to set the base tempate of the widget. It is mandatory to set the div id as given in this method
        * otherwise CSS will break depends on the browser type.
        * @method this.setBodyTemplate
        * @param {obj} - It contains the current widget object.
        * @public
        */
        setBodyTemplate:function(obj,inline)
        {
            var width1=this.panelAttributes.width;
            width1 = width1.split('px');
            var width = width1[0]-80;
            var widthmid = width1[0]-40
            /* Condition added for avoid leftside panel for inline widget : Vincent */
            this.bodyHtml='';
            if(inline==true){
                this.bodyHtml=this.bodyHtml+"<div  style=''></div>";
                this.bodyHtml=this.bodyHtml+"  <div class='bdc-in'>";
            }else{
                this.bodyHtml=this.bodyHtml+"<div id='"+this.uniqueWidgetId+"utilcontainer' ></div><div class='bl'></div>";
                this.bodyHtml=this.bodyHtml+"<div class='bdc'>";

                //Sangeetha: Added Padding style for Greyed part out of border in registration widget
                this.bodyHtml=this.bodyHtml+"<div style='width:"+widthmid+"px;padding:6px;'><div class='top-img'><div class='left-top'></div><div class='middle-bg' style='width:190px;'></div><div class='right-top'></div></div><div class='mid-img' style='width:230px; padding-top:1em;'>";
                //this.bodyHtml=this.bodyHtml+"<div style='width:98%;padding:15px;overflow:hidden;'><div class='top-img'><div class='left-top'></div><div class='middle-bg' style='width:98%;'></div><div class='right-top'></div></div><div class='mid-img' style='width:100%'>";
            }
        },

        /**
        * Overridable method which is used to set the closure phase of base tempate of the widget. It is mandatory to set the div id as given in this method
        * otherwise CSS will break depends on the browser type.
        * @method this.setBodyCloseAndFooterTemplate
        * @param {obj} - It contains the current widget object.
        * @public
        */
        setBodyCloseAndFooterTemplate:function(obj)
        {
            var width1=this.panelAttributes.width;
            width1 = width1.split('px');
            var width = width1[0]-80;
            if(this.inline!=true)
            {
                this.bodyHtml=this.bodyHtml+"</div><div class='top-img'><div class='left-bot'></div><div class='middle-bg' style='width:190px;'></div><div class='right-bot'></div></div>";
                //this.bodyHtml=this.bodyHtml+"</div><div class='top-img'><div class='middle-bg' style='width:98%;'><div class='left-bot'></div><div class='right-bot'></div></div></div>";
                //this.bodyHtml=this.bodyHtml+"</div><div class='top-img'><div class='left-bot'></div><div class='middle-bg' style='width:98%;'></div><div class='right-bot'></div></div>";
                this.bodyHtml=this.bodyHtml+"</div><div class='br'></div>";
            }
            else
            {
                this.bodyHtml=this.bodyHtml+"</div>";
            }
        },

        /**
        * Overridable method which is used to set the header section of the widget(including close,min,refresh button).
        * @method this.setHeaderHtml
        * @param {obj} - It contains the current widget object.
        * @public
        */
        setHeaderHtml:function(obj)
        {
            var locale=obj.getLocale();

            var objName=obj.getObjectName();
            var width1=this.panelAttributes.width;
            width1 = width1.split('px');
            var width = width1[0]-14;
            this.headerHtml="<div class='header' id='headerdiv' style='width:"+width1[0]+"px;'><div class='header-lf'></div><div class='header-md' id='headermddiv' style='width:"+width+"px;'><div class='header-lg'><img src='"+config.data[1].paths[0].componentroot+config.data[1].paths[3].imgpath+"logo.gif'/></div>";
            var objj=eval(objName+"["+this.widgetIdx+"]");
             if(this.panelAttributes.close==true)
             {
                    var clickParams="";
                     if(objName!=null && objName=="EXPERTUS.service.WidgetEngine.dropPolicyWidgetInstances")
                     {
                         clickParams=objName+"["+this.widgetIdx+"].closeWidget()";
                     }
                     else
                     {
                         clickParams="EXPERTUS.util.GlobalMethods.closeWidget("+objName+"["+this.widgetIdx+"])";
                     }
                     this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getCloseButton(objj,clickParams);
                     this.headerHtml=this.headerHtml+"</div></div><div class='header-rt'></div></div>";
             }
             if(this.panelAttributes.min==true)
             {
                       this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getMinimizeButton(objj);
             }
             if(this.panelAttributes.max==true)
             {
                       this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getMaximizeButton(objj);
             }
             if(this.panelAttributes.refresh==true)
             {
                       var clickParams=objName+"["+this.widgetIdx+"].refreshWidget()";
                       this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getRefreshButton(objj,clickParams);
             }
             if(this.panelAttributes.showthemes!=null && (this.panelAttributes.showthemes==true || this.panelAttributes.showthemes=='true'))
             {
                       var clickParams=objName+"["+this.widgetIdx+"].displayChangeThemePopup()";
                       this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getThemesIcon(objj,clickParams);
             }
             if(this.panelAttributes.showlocale!=null && (this.panelAttributes.showlocale==true || this.panelAttributes.showlocale=='true'))
             {
                       var clickParams=objName+"["+this.widgetIdx+"].displayLocalePopup()";
                       this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getLocaleIcon(objj,clickParams);
             }
             if(this.panelAttributes.showReport!=null && (this.panelAttributes.showReport==true || this.panelAttributes.showReport=='true'))
             {
                       this.headerHtml=this.headerHtml+EXPERTUS.util.GlobalMethods.getReportIcon(objj,clickParams);
             }
             if(this.panelAttributes.autoCenter!=null && (this.panelAttributes.autoCenter==true || this.panelAttributes.autoCenter=='true'))
             {
                       //EXPERTUS.util.GlobalMethods.centerWidget(this.uniqueWidgetId);
             }

        },

        /**
        * Overridable method which is used to set the footer section of the widget.
        * @method this.setFooterHtml
        * @param {obj} - It contains the current widget object.
        * @public
        */
        setFooterHtml:function(obj)
        {
              this.footerHtml="";
              this.footerHtml=this.footerHtml+"<div class='dl' width='100%'></div>";
              this.footerHtml=this.footerHtml+"<div class='dr'></div>";

        },

        /**
        * Overridable method which is used to set the mask effect to the web page.
        * @method this.setGreyOut
        * @public
        */
        setGreyOut:function()
        {
                var modaldiv=document.createElement("div");
                modaldiv.className="mask";
                modaldiv.id="LPPMASK";
                document.getElementsByTagName("body")[0].appendChild(modaldiv);
        },


        /**
        * Overridable method which is used to hide the drop down when sub widget launch on top of parent widget.
        * @method this.dropDownOverLayHide
        * @public
        */
        dropDownOverLayHide:function()
        {
            try
            {
                        if(this.widgetCallingFrom!=null)
                        {
                            var dropDownlist=$(this.widgetCallingFrom.uniqueWidgetId).getElementsByTagName("select");
                            var droplength=$(this.widgetCallingFrom.uniqueWidgetId).getElementsByTagName("select").length;
                            for(var i=0;i<droplength;i++)
                            {
                                dropDownlist[i].style.visibility='hidden';
                                if(dropDownlist[i].style.visibility=='visible')
                                {
                                    dropDownlist[i].style.visibility='hidden';
                                }
                            }
                        }
             }
             catch(e)
             {}
        },

        /**
        * Overridable method which is used to show the drop down in the parent widget when sub widget getting closed.
        * @method this.dropDownOverLayHide
        * @public
        */
        dropDownOverLayShow:function()
        {
            try
            {
                        if(this.widgetCallingFrom!=null)
                        {
                            var dropDownlist=$(this.widgetCallingFrom.uniqueWidgetId).getElementsByTagName("select");
                            var droplength=$(this.widgetCallingFrom.uniqueWidgetId).getElementsByTagName("select").length;
                            for(var i=0;i<droplength;i++)
                            {
                                dropDownlist[i].style.visibility='visible';
                            }
                        }
             }
             catch(e)
             {}
        },


        /**
        * Overridable method which is used to initiate the web service request.
        * @method this.initiateRequestBase
        * @param {String} - It contains the div object which is used by the ImageLoader component.
        * @public
        */
        initiateRequestBase:function(loaderDivName)
        {
            this.abortReq();
            $(this.uniqueWidgetId+loaderDivName).innerHTML=EXPERTUS.util.GlobalMethods.loaderImage({align:'center'});
            this.initiateRequest();
        },

        /**
        * Overridable method which is used to initialize the widget instance in widgetengine.
        * Without core team concern dont do the changes in this method.
        * @method this.initializeWidgetInstance
        * @param {Object} - It contains the current widget object.
        * @public
        */
        initializeWidgetInstance:function(obj)
        {
            //this.widgetIdx=EXPERTUS.service.WidgetEngine.getIdxOfWidget(eval(obj.getObjectName()));
            //var assignObj=obj.getObjectName()+"["+this.widgetIdx+"]=obj";
            var assignObj=obj.getObjectName()+"=obj";
            eval(assignObj);
        },

        /**
        * Overridable method which is used to print the datatable contents in new window.
        * @method this.doPrintWidgetHtml
        * @public
        */
        doPrintWidgetHtml:function()
        {
                this.getPrinthtml();
        },

        /**
        * Overridable method which is used to export  the datatable contents in CSV format.
        * @method this.doPrintWidgetHtml
        * @public
        */
        doExportWidgetHtml:function()
        {
                this.getExporthtml();
        },

        /**
        * Overridable method which is used to clone the result set object.
        * @method this.cloneResultSet
        * @param {Object} - Datatable object
        * @public
        */
        cloneResultSet:function(dataTableObj)
        {
                var rs=dataTableObj.getRecordSet();
                var len=rs.getLength();
                for(var i=0;i<len;i++)
                {
                    this.rsCompleteObj[i]=rs.getRecord(i);
                }

                this.rsCompleteObj=this.rsCompleteObj.clone();


        },


            /**
        * Overridable method which is used to set the result set according to the user filteration in widget.
        * (User filteration currently support checkbox.)
        * @method this.setResultSet
        * @param {Object} - Widget Object.
        * @param {String} - Filter control  id which is used to get the current selection of the records.
        * How many checkbox field enabled and disabled.
        * @public
        */
        setResultSetNew:function(obj,id)
        {
                var ll=document.getElementById(id).parentNode.childNodes.length;
                for(var kk=0;kk<ll;kk++)
                {
                    id=document.getElementById(id).parentNode.childNodes[kk].id;
                    var colNameCount=id.lastIndexOf("_");
                    var colName=id.substring((colNameCount+1),id.length);
                    var idval=escape(id+"_"+obj.value);
                    if(document.getElementById(idval)!=null && document.getElementById(idval).checked==true)
                    {
                    }
                    else
                    {
                        this.dontDisplayValues[0]={"colName":colName,"contains":obj.value,"display":false};

                    }
                }
                var existDT=this.getDataTableObj();
                existDT.showPage(1);
        },

        /**
        * Overridable method which is used to set the result set according to the user filteration in widget.
        * (User filteration currently support checkbox.)
        * @method this.setResultSet
        * @param {Object} - Widget Object.
        * @param {String} - Filter control  id which is used to get the current selection of the records.
        * How many checkbox field enabled and disabled.
        * @public
        */
        setResultSet:function(obj,id)
        {

                var widObj=this.getWidgetObject();
                var locale = widObj.getLocale();
                var existDT=this.getDataTableObj();
                var existRs=existDT.getRecordSet();
                existDT.deleteRows(0,existRs.getLength());
                var colSet=existDT.getColumnSet().keys;
                var isShow="";
                var totalCount=0;
                var isDTEmpty=true;
                var len=this.rsCompleteObj.length;

                for(var i=0;i<len;i++)
                {
                    var row=this.rsCompleteObj[i];
                    if(row!=null)
                    {

                        var ll=document.getElementById(id).parentNode.childNodes.length;

                        enabledCheckBoxCount=0;
                        isShow=false;
                        for(var kk=0;kk<ll;kk++)
                        {
                            id=document.getElementById(id).parentNode.childNodes[kk].id;
                            var colNameCount=id.lastIndexOf("_");
                            var colName=id.substring((colNameCount+1),id.length);
                            var rowCol="row.getData('"+colName+"')";
                            var idval=escape(id+"_"+eval(rowCol));

                            if(document.getElementById(idval)!=null && document.getElementById(idval).checked==true)
                            {
                                enabledCheckBoxCount++;
                            }
                        }

                        if(enabledCheckBoxCount==ll)
                        {
                            isShow=true;
                            totalCount++;
                        }
                        if(isShow)
                        {
                            existDT.addRow(row._oData);
                            isDTEmpty=false;
                        }
                    }
                }
                if(isDTEmpty==true)
                {

                    if($(this.uniqueWidgetId+"_menu"))
                        $(this.uniqueWidgetId+"_menu").style.display="none";
                        EXPERTUS.util.GlobalMethods.alerts(this.labelsBundle.i18nSelectDelivery,locale); // "Select Delivery mode and Status to view"
                        this.dataTableObj.showTableMessage("<b>"+ this.labelsBundle.i18nEnrollmentEmptyTableMesg + "</b>","yui-dt-liner; yui-dt-empty");  // No Enrollments/Transcripts found
                }
                else
                {
                    if($(this.uniqueWidgetId+"_menu"))
                        $(this.uniqueWidgetId+"_menu").style.display="block";
                    if(existDT.initViewChart=="true")
                    {
                        this.viewChart(this.uniqueWidgetId+"chartView");
                    }
                }
        },

        /**
        * Overridable method which is used to get the default time out of the ajax request setted by LPP.
        * @method this.getDefaultTimeOut
        * @param {String} - name of the widget.
        * @public
        */
        getDefaultTimeOut:function(widget)
        {
            var retValue="";
            if(this.timeOut!=null)  //  Widget specific timeout value , first preference
            {
                return this.timeOut;
            }
            else if(cfgObj==null || cfgObj=='undefined')
            {
                retValue=config.data[3].timeout;
            }
            else
            {
                var obName=this.getObjectName();
                var objName=obName.substring("EXPERTUS.service.WidgetEngine.".length,obName.length);
                var cfgObj=eval("config.data[4]."+objName);
                retValue=cfgObj;
            }
            return retValue;
        },

        /**
        * It is used to set the widget object.
        * @property this.setWidgetObject
        * @param {Object} obj contains the widget Object.
        */
        setWidgetObject:function(widgetObj)
        {
            this.widgetDetailsObject = widgetObj;
        },

        /**
        * Overridable method which is used to set the  widget Title.
        * @method this.setWidgetTitle
        * @param {String} - Widget title
        * @public
        */
        setWidgetTitle:function(widgetTitle)
        {
            this.widgetTitle=widgetTitle;
        },

        /**
        * Overridable method which is used to get the  widget Title.
        * @method this.getWidgetTitle
        * @return {String} - Widget title
        * @public
        */
        getWidgetTitle:function()
        {
            return this.widgetTitle;
        },

        /**
        * It is used to get the widget object.
        * @property this.getWidgetObject
        * @param {Object} obj contains the widget Object.
        */
        getWidgetObject:function()
        {
            return this.widgetDetailsObject;
        },

        /**
        * Overridable method which is used to check locale values already loaded or not.
        * @method this.checkLocaleAlreadyLoaded
        * @param {fileId} - It contains the id value of the locale script tag.
        * @public
        */
        checkLocaleAlreadyLoaded:function(fileId)
        {
            if($(fileId))
            {
                return true;
            }
            else
            {
                return false;
            }
        },


        /**
        * @author Sanjeth
        * @date 26/Nov/08
        * Overridable method which is used to load the i18n labels js.
        * @method this.loadi18nFiles
        * @param {obj} - It contains the current widget object.
        * @public
        */

        loadi18nFiles:function()
        {
                var wa=this.getWidgetInstanceName();
                var l="EXPERTUS.service.WidgetEngine.".length;
                var label=wa.substring(l,wa.length);
                var removeBrack=label.indexOf("Instance");
                var wName = label.substring(0,removeBrack);

                var url="";
                url=config.data[1].paths[0].componentroot+config.data[1].paths[6].localepath+wName+"_labels_"+this.locale+".js";
                var oXML=getXMLHttpObj();
                oXML.open('GET', url, false);
                oXML.setRequestHeader("Accept-Charset","UTF-8");
                oXML.send('');
                var e = document.createElement("script");
                e.text=oXML.responseText;
                e.setAttribute("charset","UTF-8");
                e.setAttribute("id",wName + "_labels_"+this.locale+".js");
                document.getElementsByTagName("head")[0].appendChild(e);

                this.setLocaleJsonObject();

        },



        /**
        * Overridable method which is used to set the locale label values in  json object.
        * @method this.getLocaleJsonObject
        * @public
        */
        setLocaleJsonObject:function()
        {
            var na=this.getWidgetInstanceName();
            var l="EXPERTUS.service.WidgetEngine.".length;
            var label=na.substring(l,na.length);
            var removeBrack=label.indexOf("[");
            this.labelsBundle=label.substring(0,removeBrack)+"_labels_"+this.getLocale();
            this.labelsBundle=eval(this.labelsBundle);

        },

        /**
        * Overridable method which is used to get the locale json object.
        * @method this.getLocaleJsonObject
        * @return jsonObject
        * @public
        */
        getLocaleJsonObject:function()
        {
            return this.labelsBundle;
        },
        /**
        * Overridable method which is used to set the online request flag.
        * @method this.setOnlineRequest
        * @param Boolean
        * @public
        */
        setOnlineRequest:function(val)
        {
            this.onlineRequest=val;
        },


        /**
        * Overridable method which is used to get the online request flag.
        * @method this.getOnlineRequest
        * @return Boolean|String
        * @public
        */
        getOnlineRequest:function()
        {
            return this.onlineRequest;
        },


        /**
        * Overridable method which is used to set the necessary parameters for the widget and set
        * the base display for the widget.
        * @method this.renderBase
        * @param {namedarguments} - It contains panel attributes i.e width,height,x,y
        * @param {namedarguments} - It contains service  attributes i.e soap certificate id and parameters required for web services.
        * @param {boolean} - If it true widget will display as a inline model.
        * @param {Object} - It contains the current widget object. It equals to  (this).
        * @public
        */
        renderBase:function(serviceattributes,obj)
        {
            this.serviceAttributes = serviceattributes;
            this.initializeWidgetInstance(obj);
            this.setWidgetObject(obj);
            if(this.uniqueWidgetId.toLowerCase().indexOf('lnr')>=0 || this.uniqueWidgetId.toLowerCase().indexOf('team')>=0){
            	this.setEndPointURL(config.data[0].url[0].learner_url);
            }else{
            	this.setEndPointURL(config.data[0].url[0].admin_url);
            }

            this.setActionKey(eval('config.data[1].serviceaction[0].'+this.uniqueWidgetId))
        },


        /**
        * Overridable method which is used to the service attributes.
        * @method this.setServiceAttributes
        * @param sa {named argument}
        * @public
        */
        setServiceAttributes:function(sa)
        {
            this.serviceAttributes=sa;
        },

        /**
        * Overridable method which is used to set http request type sync or async.
        * @method this.setRequestType
        * @param {boolean} - true | false
        * @public
        */
        setRequestTypeASync:function(syncReq)
        {
            this.asyncReq=syncReq;
        },

        /**
        * This method is used to get the datatable object.
        * @method this.getDataTableObj
        * @public
        * @return dataTableObj.
        */
        setTitleForXML:function(title)
        {
            this.xmlTitle=title;
        },

        /**
         * Overridable method which handles the soap errors.
         * If any common operations like session timed out are
         * handled in this method, after executing this method this
         * will calls the default renderError method (if the error is not
         * a common error).
         * @method this.renderError()
         * @return error string
         */
        renderErrorCommon:function(){
        	 var errcode =$(this.responseXml).find("faultcode").text();
             var errstring = $(this.responseXml).find("faultstring").text();
             var errmsg ="";
             if(errcode!=null && errcode!=undefined)
                 errmsg += "["+errcode+"]: ";
             errmsg += errstring;
             if(errstring=='Your session has expired'){
             	var loc = '';
             	//var ermsg=SMARTPORTAL.t('ERR055');
 	           	//alert(ermsg);
             	var user=this.getUserName();
             	/**
             	 * Clear all cookies
             	 */
             	var cok = document.cookie;
             	var lst = cok.split(";");
             	for(var x=0;x<lst.length;x++){
             		var name=lst[x].split("=");
             		document.cookie = name[0]+"=";
             	}
             	if(user != null && user != undefined && user != '' && user != 'guest')
             		loc = resource.base_url+"/?q=user/logout";
             	else
             		loc = resource.base_url;
             	window.location.href=loc;
             }else{
            	 this.renderError();
             }
        },

        /**
         * Overridable method which handles the soap errors.
         * @method this.renderError()
         * @return error string
         */
        renderError:function(){
            var errcode =$(this.responseXml).find("faultcode").text();
            var errstring = $(this.responseXml).find("faultstring").text();
            var errmsg ="";
            if(errcode!=null && errcode!=undefined)
                errmsg += "["+errcode+"]: ";
            errmsg += errstring;
            if(document.getElementById("msgDiv")){
                $('#msgDiv').css('display','block');
                $('#msgDiv').removeClass('sp_msgbox');
                $('#msgDiv').addClass('sp_alertbox');
                $('#msgDiv').html(SMARTPORTAL.t(errmsg));
            }else if(document.getElementById("main-content")){
                var newdiv=document.createElement("div");
                newdiv.id='msgDiv';
                $('#main-content').before(newdiv);
                $('#msgDiv').css('display','block');
                $('#msgDiv').css('width','688px');
                $('#msgDiv').addClass('sp_alertbox');
                $('#msgDiv').html(SMARTPORTAL.t(errmsg));
            }else{
            	//alert(SMARTPORTAL.t(errmsg));
            	var newdiv=document.createElement("div");
                newdiv.id='msgDiv';
                $("div :first").before(newdiv);
                $('#msgDiv').css('display','block');
                $('#msgDiv').css('width','688px');
                $('#msgDiv').css('color','red');
                $('#msgDiv').addClass('sp_alertbox');
                $('#msgDiv').html(SMARTPORTAL.t(errmsg));
            }
            return errmsg;
        },

        mandatoryCheck:function(divId){
            var str="";
            var flag=true;
            var newDiv="";
            var nextDiv="";
            str1 = new RegExp( );
     	    str1.compile( '^[\s ]*$','gi' );
            if(divId != undefined){
                if($('#'+divId).find('.mandatory')){
                    $('#'+divId).find('.mandatory').each(function(){
                        var valEntered=$(this).val();
                        var name=$(this).attr('name');
                            str =$(this).val();
                            var inputType = $(this).attr("type");
                            newDiv = '';
              		      /* For Learner side Survey*/
                            if(inputType=="checkbox" || inputType=="radio"){
                            	  var id=$(this).attr('id');
                            	  var checked = $("input[id="+id+"]:checked").length;
                            	  if (checked == 0)
                                  {
                            		newDiv=document.createElement('div');
                            		$(newDiv).addClass('local_style_for_div_newid'); // class to be used for fine tuning display of error message in widgets
                                    newDiv.id=this.id+"_newid";
                                    $("#"+this.id+"_newid").remove();
                                    $(newDiv).css({'color':'red','display':'none','float':'left','font-size':'0.9em','text-align':'right','width':'50%'});
                                    $(newDiv).html(Drupal.t("ERR106"));
                                    flag=false;
                                  }
                            	  $('#'+id+'_'+inputType).html(newDiv);
                                  $("#"+this.id+"_newid").show();  /* End For Learner side Survey*/
                            } else if( valEntered=="" || valEntered == null || valEntered == undefined || str1.test(valEntered)==true ){
                            	if (inputType=="select-one") {
                            		newDiv=document.createElement('span');
                            		$(newDiv).addClass('local_style_for_span_newid'); // class to be used for fine tuning display of error message in widgets
                            		newDiv.id=this.id+"_newid";
                            		$("#"+this.id+"_newid").remove();
                            		$(newDiv).css({'color':'red','display':'none','font-size':'0.9em','padding-left': '10px'});
                            		//$(newDiv).html(SMARTPORTAL.t("Please select ") + " " + SMARTPORTAL.t(name) + ".");
                            		$(newDiv).html(Drupal.t("MSG687"));
                            		$(this).closest(".expertus-dropdown-bg").after(newDiv);
                            		$("#"+this.id+"_newid").show();
                            		flag=false;
                            	} else if ($(this).hasClass('hasDatepicker')) {
                            		newDiv=document.createElement('span');
                            		$(newDiv).addClass('local_style_for_span_newid'); // class to be used for fine tuning display of error message in widgets
                            		newDiv.id=this.id+"_newid";
                            		$("#"+this.id+"_newid").remove();
                            		$(newDiv).css({'color':'red','display':'none','font-size':'0.9em','padding-left': '10px'});
                            		$(newDiv).html(SMARTPORTAL.t("Please enter ") + " " + SMARTPORTAL.t(name) + ".");
                            		nextDiv = $(this).next();
                            		if($(nextDiv).is('img') && $(nextDiv).hasClass('ui-datepicker-trigger')) {
                            			$(nextDiv).after(newDiv);
                            		} else {
                            			$(this).after(newDiv);
                            		}
                            		$("#"+this.id+"_newid").show();
                            		flag=false;
                            	} else {
                            		newDiv=document.createElement('span');
                            		$(newDiv).addClass('local_style_for_span_newid'); // class to be used for fine tuning display of error message in widgets
                            		newDiv.id=this.id+"_newid";
                            		$("#"+this.id+"_newid").remove();
                            		$(newDiv).css({'color':'red','display':'none','font-size':'0.9em','padding-left': '10px'});
                            		//$(newDiv).html(SMARTPORTAL.t("Please enter ") + " " + SMARTPORTAL.t(name) + ".");
                            		// Multi lang Issue Is fixed for this Ticket #0044270
                            		$(newDiv).html(Drupal.t("LBL868"));
                            		$(this).after(newDiv);
                            		$("#"+this.id+"_newid").show();
                            		flag=false;
                            	}
                            }else{
                            	$("#"+this.id+"_newid").remove();
                            }
                 });
            }
        }
        return flag;
        },

        addAccordionToTable:function(openCloseClass,openpos,closepos,childClass,callback,obj,parentObj,isRemove) {
            if(openCloseClass!=undefined && childClass!=undefined && callback!=undefined) {
                //var mainObj=$(obj).parent().get(0).nodeName.toLowerCase()=="td"?$(obj).parent():$(obj).parent().parent();
            	var mainObj=$(obj).parents('td');
                $('.'+openCloseClass).each(function(){
                    $(this).css("background-position",closepos);
                });

            	//SULTHAN
            	//ORIGINAL LINE - THIS WILL FETCH ANY ELEMENTS THAT IS PARENT OF THE CURRENT ELEMENT STORED IN OBJ
                //var cols=mainObj.parent().children().size();
            	//THE FOLLOWING LINE ONLY FETCHES THE COUNT OF THE ELEMENT IF IT IS 'TD'
            	var cols = $(obj).parent('td').siblings().length;
            	if(String(mainObj.parent().next().attr("class")).indexOf(childClass+" dt-acc-row")<0) {
                    $("tr."+childClass+" > td > div").slideUp({complete:function(){
                            if(isRemove!=undefined && isRemove==true)
                                $(this).parent().parent().remove();
                            else
                                $(this).parent().parent().css('display','none');
                        //  mainObj.parent().parent().css('border-collapse','collapse');
                        }
                    });
                    var newObj=mainObj.parent().after("<tr class='"+childClass+" dt-acc-row'><td colspan='"+cols+"'><div class='"+childClass+"-data' style='display:none;width=100%;'></div></td></tr>").next(0).find("div."+childClass+"-data");
                    if(callback!=undefined) {
                        callback(newObj,$(obj),parentObj);
                    }
                    $(obj).children().css("background-position",openpos);
                }else{
                    if(mainObj.parent().next().css('display')=='table-row' || mainObj.parent().next().css('display')!='none'){
                        $(obj).children().css("background-position",closepos);
                        $("tr."+childClass+" > td > div").slideUp({complete:function(){
                                if(isRemove!=undefined && isRemove==true)
                                    $(this).parent().parent().remove();
                                else
                                    $(this).parent().parent().css('display','none');
                            //  mainObj.parent().parent().css('border-collapse','collapse');
                            }
                        });
                    } else {
                        $("tr."+childClass+" > td > div").slideUp({complete:function(){
                                $(this).parent().parent().css('display','none');

                            }
                        });
                        //mainObj.parent().parent().css('height','auto');
                        mainObj.parent().next().css('display','table-row');
                        mainObj.parent().after().next(0).find("div."+childClass+"-data").css('display','block');
                        $(obj).children().css("background-position",openpos);
                    }
                }
            } else {
                throw("addAccordionTable : Parameters not specified");
            }
        },

        updateLovOptions:function(opid,opname,selected){

            var obj =  document.getElementById(opid);
            obj.option=0;
            var ct=1;
            $(this.lovXml).find("ListItem").each(function(){
                if($(this).attr("code")==opname){
                    $(this).find("Item").each(function(){
                        var op = new Option();
                        var tname = $(this).find("Name").text();
                        var tvalue = $(this).find("Code").text();
                        op.text = tname;
                        op.value = tvalue;
                        op.title = tname;
                        if((tname==selected)||(tvalue==selected)){
                            op.selected=true;
                        }
                        if(tname){
                            obj.options[ct]=op;
                            ct++;
                        }
                    });
                }
            });
        },

        updateAttrValues:function(opname,opid){
        var op='';
        	$(this.lovXml).find("ListItem").each(function(){
        		$(this).find("Item").each(function(){
        			if($(this).find("Code").text()==opname){
        				op = $(this).find("attr"+opid).text();
        				return op;
        			}
        	  	});
        	});

        	return op;
        },

	    getLovValue:function(opname,opval,type){
            var outvar = '';
            $(this.lovXml).find("ListItem").each(function(){
                if($(this).attr("name")==opname || $(this).attr("code")==opname){
                    $(this).find("Item").each(function(){
                        var tname = $(this).find("Name").text();
                        var tvalue = $(this).find("Code").text();
                        if((tname==opval)||(tvalue==opval)){
                            if(type=='Name' || type=='name'){
                                outvar = tname;
                            }else{
                                outvar = tvalue;
                            }
                            return false;
                        }
                    });
                }
            });
            return outvar;
        },

        validateFieldCheck:function(divId){
            var isValid=true;
            var str="";
            var validateTt="";
            var flag=true;
            var newDiv="";
            //$(newDiv).remove();
            if(divId != undefined){
                if($('#'+divId).find('.validateText')){
                    $('#'+divId).find('.validateText').each(function(){
                        var valEntered=$(this).val();
                            str =$(this).val();
                            validateTt = str.match(/[^\d\w\s*!<>.,#:&%(-_+=)]/);
                            if(validateTt){
                                //alert("validatetext:");
                                newDiv=document.createElement('div');
                                newDiv.id=this.id+"_newid";
                                $("#"+this.id+"_newid").remove();
                                $(newDiv).css({'color':'red','display':'none','float':'right'});
                                $(newDiv).html(SMARTPORTAL.t("Please enter a valid text."));
                                $(this).before(newDiv);
                                $("#"+this.id+"_newid").show();
                                flag=false;
                            }else{
                                $("#"+this.id+"_newid").remove();
                            }
                     });
                }
                 if($('#'+divId).find('.validateNum')){
                     $('#'+divId).find('.validateNum').each(function(){
                      var valEntered=$(this).val();
                      str =$(this).val();
                      var tval = valEntered.split('.');
                      if(tval[0]==undefined)
                          tval[0]='';
                      if(tval[1]==undefined)
                          tval[1]='';
                      var format=$(this).metadata();

                      if(format.formater != undefined && format.formater!="" && format.formater != null){
                        var isFormat=format.formater.split('.');
                        if(isFormat[0]==undefined)
                            isFormat[0]='';
                        if(isFormat[1]==undefined)
                            isFormat[1]='';
                        if(!isNaN(valEntered)){
                          if(isFormat[0]!='*' || isFormat[1]!='*'){}
                            if((isFormat[0].indexOf("#")==0 && isFormat[1].indexOf("#")==0) || (isFormat[0].indexOf("#")==0) || (isFormat[1].indexOf("#")==0)){
                              if((isFormat[0].indexOf("#")==0) && (!(tval[0].length<=isFormat[0].length)) && (isFormat[0].indexOf("*")!=0)){
                                  newDiv=document.createElement('div');
                                  newDiv.id=this.id+"_newid";
                                  $("#"+this.id+"_newid").remove();
                                  $(newDiv).css({'color':'red','display':'none','float':'right'});
                                  $(newDiv).html('Invalid Number format ');
                                  $(this).before(newDiv);
                                  $("#"+this.id+"_newid").show();
                                  flag=false;
                                  }
                              if((isFormat[1].indexOf("#")==0) && (!(tval[1].length<=isFormat[1].length)) && (isFormat[1].indexOf("*")!=0) && tval[1]!=''){
                                  newDiv=document.createElement('div');
                                  newDiv.id=this.id+"_newid";
                                  $(newDiv).css({'color':'red','display':'none','float':'right'});
                                  $(newDiv).html('Invalid Number format ');
                                  $(this).before(newDiv);
                                  $("#"+this.id+"_newid").show();
                                  flag=false;
                              }
                            }
                    //  }
                        }else{
                          newDiv=document.createElement('div');
                          newDiv.id=this.id+"_newid";
                          $("#"+this.id+"_newid").remove();
                          $(newDiv).css({'color':'red','display':'none','float':'right'});
                          $(newDiv).html(SMARTPORTAL.t("Please enter a valid number."))
                          $(this).before(newDiv);
                          $("#"+this.id+"_newid").show();
                          flag=false;
                      }
                      }else if($(this).val().match(/[^\d\-()]/)){
                          newDiv=document.createElement('div');
                          newDiv.id=this.id+"_newid";
                          $("#"+this.id+"_newid").remove();
                          $(newDiv).css({'color':'red','display':'none','float':'right'});
                          $(newDiv).html(SMARTPORTAL.t("Please enter a valid number."))
                          $(this).before(newDiv);
                          $("#"+this.id+"_newid").show();
                          flag=false;
                      }else{
                          $("#"+this.id+"_newid").remove();
                      }
                      });
                     }
                 if($('#'+divId).find('.validatePho')){
                        $('#'+divId).find('.validatePho').each(function(){
                            var valEntered=$(this).val();
                                var s =$(this).val();
                                if(s != ''){
                                    //var rePhoneNumber = new RegExp(/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/);
                                    //var rePhoneNumber = new RegExp(/^\d{3}\-\d{3}\-\d{4}$/);
                                    //  var rePhoneNumber = new RegExp(/^\d{10}$/);
                                    var rePhoneNumber = new RegExp(/^-{0,1}\d*\.{0,1}\d+$/);
                                    //var rePhoneNumber = new RegExp(/^\([1-9]\d{2}\)\s$/);
                                    if(!rePhoneNumber.test(s)){
                                     // if(isNaN(parseInt(s)))
                                     // {
                                        newDiv=document.createElement('div');
                                        newDiv.id=this.id+"_newid";
                                        $("#"+this.id+"_newid").remove();
                                        $(newDiv).css({'color':'red','display':'none','float':'right'});
                                        $(newDiv).html(SMARTPORTAL.t('Please enter no. as: XXXXXXXXXX'));
                                        $(this).before(newDiv);
                                        $("#"+this.id+"_newid").show();
                                        flag=false;
                                    }
                                    else{
                                        $("#"+this.id+"_newid").remove();
                                    }
                                } else{
                                    $("#"+this.id+"_newid").remove();
                                }

                        });
                    }
                if($('#'+divId).find('.validatePh')){
                    $('#'+divId).find('.validatePh').each(function(){
                        var valEntered=$(this).val();
                            var s =$(this).val();
                            if(s != ''){
                                //var rePhoneNumber = new RegExp(/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/);
                                var rePhoneNumber = new RegExp(/^\d{3}\-\d{3}\-\d{4}$/);
                                //var rePhoneNumber = new RegExp(/^\d{10}$/);
                                //var rePhoneNumber = new RegExp(/^\([1-9]\d{2}\)$/);
                                if(!rePhoneNumber.test(s)){
                                    newDiv=document.createElement('div');
                                    newDiv.id=this.id+"_newid";
                                    $("#"+this.id+"_newid").remove();
                                    $(newDiv).css({'color':'red','display':'none','float':'right'});
                                    $(newDiv).html(SMARTPORTAL.t('Please enter no. as: XXX-XXX-XXXX'));
                                    $(this).before(newDiv);
                                    $("#"+this.id+"_newid").show();
                                    flag=false;
                                }
                                else{
                                    $("#"+this.id+"_newid").remove();
                                }
                            } else{
                                $("#"+this.id+"_newid").remove();
                            }

                    });
                }
                if($('#'+divId).find('.validateDate')){
                    $('#'+divId).find('.validateDate').each(function(){
                        var dateStr =$(this).val();
                        var datePat = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/;
                        var matchArray = dateStr.match(datePat); // is the format ok?
                        newDiv=document.createElement('div');
                        newDiv.id=this.id+"_newid";
                        $("#"+this.id+"_newid").remove();
                        $(newDiv).css({'color':'red','display':'none','float':'right'});
                        $(this).before(newDiv);
                        if (matchArray == null) {
                            $(newDiv).html('Date can be mm/dd/yyyy or mm-dd-yyyy.')
                            $("#"+this.id+"_newid").show();
                            flag=false;
                        }
                        month = matchArray[1]; // p@rse date into variables
                        day = matchArray[3];
                        year = matchArray[5];
                        if (month < 1 || month > 12) { // check month range
                            $(newDiv).html('Month must be between 1 and 12.');
                            $("#"+this.id+"_newid").show();
                            flag=false;
                        }
                        if (day < 1 || day > 31) {
                            $(newDiv).html('Day must be between 1 and 31.');
                            $("#"+this.id+"_newid").show();
                            flag=false;
                        }
                        if ((month==4 || month==6 || month==9 || month==11) && day==31) {
                            $(newDiv).html("Month "+month+" doesn`t have 31 days:");
                            $("#"+this.id+"_newid").show();
                            flag=false;
                        }
                        if (month == 2) { // check for february 29th
                        var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));
                        if (day > 29 || (day==29 && !isleap)) {
                            $(newDiv).html("February " + year + " doesn`t have " + day + " days!");
                            $("#"+this.id+"_newid").show();
                            flag=false;
                        }
                        }
                    //  flag=true; // date is valid
                    });
                }
                if($('#'+divId).find('.validateURL')){
                    $('#'+divId).find('.validateURL').each(function(){
                        var url=$(this).val();
                      if(url!="" && url!= null && url!= undefined){
                        var RegExp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
                        //var RegExp = /http:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{3}/;
                            if(!RegExp.test(url)){
                                newDiv=document.createElement('div');
                                newDiv.id=this.id+"_newid";
                                $("#"+this.id+"_newid").remove();
                                $(newDiv).css({'color':'red','display':'none','float':'right'});
                                $(newDiv).html(SMARTPORTAL.t("Please enter a valid URL."));
                                $(this).before(newDiv);
                                $("#"+this.id+"_newid").show();
                                flag=false;
                            }else{
                                $("#"+this.id+"_newid").remove();
                            }
                         }

                    });
                }
                if($('#'+divId).find('.validateEmail')){
                    $('#'+divId).find('.validateEmail').each(function(){
                        var email=$(this).val();
                        //var RegExp = /^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.)[\w]{2,4}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/;
                        var RegExp = /^((([a-z]|[A-Z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[A-Z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9]|\-){0,61}([a-z]|[A-Z]|[0-9])\.))*([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9]|\-){0,61}([a-z]|[A-Z]|[0-9])\.)[\w]{2,4}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/;
                        newDiv=document.createElement('div');
                        newDiv.id=this.id+"_newid";
                        $("#"+this.id+"_newid").remove();
                        $(newDiv).css({'color':'red','display':'none','float':'right'});
                        $(newDiv).html(SMARTPORTAL.t("Please enter a valid e-mail address."));
                        $(this).before(newDiv);

                        if(email != ''){
                            if(!RegExp.test(email)){
                                $("#"+this.id+"_newid").show();
                                flag=false;
                            }else{
                                $("#"+this.id+"_newid").remove();
                            }
                        }else{
                            $("#"+this.id+"_newid").remove();
                        }


                    });
                }
            }
            return flag;
        },

        formatRelatedLinks: function(params){
            //var html ='<div id="related_links" style="width:'+params.width+'px;">';
            var html ='<div id="related_links" style="padding-right:8px;">';
            html += '<fieldset class="links-fieldset">';
            html += '<legend align="left">'+SMARTPORTAL.t("Related Links")+'</legend>';

            //html +='<ul>';
            for(var i=0;i<params.items.length;i++){
                html += '<div class="row_link"><div class="bullet_par"><div class="bullet"></div></div><div class="link"><a title="'+params.items[i].desc+'" href="javascript:void(0);" onclick="'+this.getWidgetInstanceName()+'.'+params.items[i].jsFunc+'">'+ params.items[i].title +'</a></div></div>';
            }
            //html+="</ul>";
            html += "</fieldset>";
            html += "</div>";

            return html;
        },
        include:function(filename,callback,widgetObj)
        {
            var LazyLoader = {};
            LazyLoader.timer = {};
            try{
                var body = document.getElementsByTagName('body').item(0);
                var crob = eval(this.getWidgetInstanceName());
                script = document.createElement('script');
                script.src = filename;
                script.type = 'text/javascript';
                body.appendChild(script);
                if(callback){
                    script.onreadystatechange = function () {
                        if(script.readyState=="complete" || script.readyState=='loaded'){ //IE Support
                            callback(script,widgetObj);
                        }
                    }
                    script.onload = function(){
                        callback(script,widgetObj);
                    }
                    if ((Prototype.Browser.WebKit && !navigator.userAgent.match(/Version\/3/)) || Prototype.Browser.Opera) { // safari
                        LazyLoader.timer[url] = setInterval(function() {
                            if (/loaded|complete/.test(document.readyState)) {
                                clearInterval(LazyLoader.timer[url]);
                                callback(script,widgetObj);
                            }
                        }, 10);
                    }
                }
            }catch(e){}
        },
      //0033772: Code Re-Factoring - Home page - Remove unwanted JavaScript
        includecss:function(filename)
        {
            try{
            	$('head').append('<link rel="stylesheet" href= "'+filename+'" type="text/css" />');
            }catch(e){}
        },

        /**
         * @desc convert a string to xmlobject
         * @param string - xml string
         * @return object - xml object
         */
        stringToXml:function(xmlstr){
            try //Internet Explorer
            {
              xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
              xmlDoc.async="false";
              xmlDoc.loadXML(xmlstr);
            }
            catch(e)
            {
                try{
                    parser=new DOMParser();
                    xmlDoc = parser.parseFromString(xmlstr,"text/xml");
                }catch(e){
                    //alert(e.message);
                }

            }
            return xmlDoc;
        },

        renderNoRecs:function(mesg, buttString, func){
            var html='';
            if(buttString!=null && func!=null && buttString!=undefined && func!=undefined ){
                html ='<div style="display: block;"><table style="padding: 5px;width:100%;"><tr><td class="sp_erromsg" width="100%">'+SMARTPORTAL.t(mesg)+'</td><td align="right"><input type="button" class="spButtonSpan" onclick="' + func +';" value="'+ buttString +'" style="margin-left: 25px;"/></td></tr></table></div>';
            }else{
                html ='<div style="display: block;"><table style="width:100%;"><tr><td class="sp_erromsg" width="100%">'+SMARTPORTAL.t(mesg)+'</td><td></td></tr></table></div>';
            }
            return html;
        },


        openWindow:function(obj,callback,widgetObj){
            if(obj.options==undefined)
                obj.options='';
            if(obj.url==undefined)
                obj.url='';
            if(obj.name==undefined)
                obj.name=='_blank';

            var newWindow = window.open(obj.url,obj.name,obj.options);
            this.checkIfLoaded(newWindow,callback,widgetObj);

        },

        checkIfLoaded:function(obname,callback,widgetObj){
            if((window.navigator.appName).indexOf("Microsoft")>=0){
                if(obname.document.readyState=="complete"){
                    callback(obname,widgetObj);
                }else{
                    this.checkIfLoaded(obname,callback);
                }
            }else{
                obname.onload=callback(obname,widgetObj);
            }
        },

        pausescript:function(millis){
            var date = new Date();
            var curDate = null;
            do {
                curDate = new Date();
            }while(curDate - date < millis);
        },

        getLearnerDetail:function(prm){
        	var stdinfo=false;
        	jQuery.ajaxSetup({
	            xhr: function() {
	                    //return new window.XMLHttpRequest();
/*	                    try{
	                        if(window.ActiveXObject)
	                            return new window.ActiveXObject("Microsoft.XMLHTTP");
	                    } catch(e) { }

	                    return new window.XMLHttpRequest();*/
	         //AJAX xmlHTTPRequest to IE browser(all browsers)
	             if(window.ActiveXObject) {
	         	       try {
	         	    	   ajxobj = new ActiveXObject("Msxml2.XMLHTTP");
	         	       } catch (e) {
		         	       try {
		         	    	  ajxobj = new ActiveXObject("Microsoft.XMLHTTP");
		         	       } catch (e) {
		         	    	  ajxobj = false;
		         	       }
	         	      }
	         	  }else{
	         		 ajxobj = new XMLHttpRequest();
	        	  }
        	  return ajxobj;
	          }
	        });
        	
        	/* Added by ganeshbabuv on Sep 30th 2015 to pass the salesforce session variable to avoid to take the value (logged user details) from cookie. Instead of that, reload values from session varible. Ref :0054508 on 30th sep 2015 10:40 AM */
        	var sf_exp_ses_value = $('.salesforce-widget #widget').attr('data-exp-sess-id'); 
        	//alert('sf_exp_ses_value='+sf_exp_ses_value);
        	if (typeof sf_exp_ses_value !== typeof undefined && sf_exp_ses_value !== false) {
                var getvalue_url=resource.base_host+"/?q=getLearnerInfo/getvalue/"+prm+"/"+sf_exp_ses_value;
             }else{
            	var getvalue_url=resource.base_host+"/getLearnerInfo.php?getvalue="+prm;
             } 
        	
        	jQuery.ajax({
			   type: "GET",
			   url: getvalue_url,  //Changed according to cookieless option
			   processData: false,
			   dataType:'text',
			   contentType:'text/xml',
			   async: false,
			   cache: false,
			   success: function(respText){
					stdinfo = respText;
			   }
			 });
			return stdinfo;
        },

        getLearnerId:function(){
        	return this.getLearnerDetail("userid");
        },

        getUserName:function(){
        	return this.getLearnerDetail("username");
        },

        getUserFullName:function(){
        	return this.getLearnerDetail("userfullname");
        },

        getUserEmail:function(){
        	return this.getLearnerDetail("usermail");
        },

        getUserRole:function(){
        	return this.getLearnerDetail("userrole");
        },

        readCookie:function(cookieName){
            var theCookie=""+document.cookie;
            var ind=theCookie.indexOf(cookieName);
            var ind1=theCookie.indexOf(';',ind);
            if (ind1==-1) ind1=theCookie.length;
            var cookinfo = unescape(theCookie.substring(ind+cookieName.length+1,ind1));
            return cookinfo;
        },

        setReportHeader:function(){
            var html='';
            html +='<div class="report-header-left"></div><div class="report-header-middle">';
            html +='<a href="#" title="Home"><img src="'+themepath+'/logo.png" alt="Home" id="logo"></a>';
            html += '<div id="top-sign" style="padding: 0px 8px 0px 0px; position: relative; top: 25px; color: white; text-align: right; font-family: arial; font-size: 10px; font-weight: bold; text-decoration: none;">';
            html += '<br><br><br><br><br></div>';
            html +='</div><div class="report-header-right"></div>';
            return html;
        },

        setReportFooter:function(){
            var html ="";

            /*html += '<div class="copyright-page">';
            html += '<div class="ftrLeft">Copyright 2011 Expertus Inc. All rights reserved.&nbsp;&nbsp;&nbsp;</div>';
            html += '<div class="ftrRight"><a href="" target="_blank"><img src="sites/all/themes/core/AdministrationTheme/images/expertus_power.png"></a>';
            html += '</div></div>';*/

            html += '<div class="region region-footer"><div class="block block-menu contextual-links-region first odd" id="block-menu-menu-footer-menu">';
            html += '<h2 class="title">Footer Menu</h2><div class="content"><ul class="menu"><li class="first leaf"><a title="" href="/?q=node/1">About Us</a></li>';
            html += '<li class="leaf"><a title="" href="/?q=node/2">Feedback</a></li><li class="leaf"><a title="" href="/?q=node/5">Legal Notices</a></li>';
            html += '<li class="leaf"><a title="" href="/?q=node/3">Privacy Policy</a></li><li class="last leaf"><a title="" href="/?q=node/4">Trademark</a></li>';
            html += '</ul></div></div><div class="block block-exp-sp-footer contextual-links-region last even" id="block-exp-sp-footer-footer">';
            html += '<div class="content"><div id="footer"><div class="copyright-page">';
            html += '<div class="ftrLeft"><span class="FooterCpyText">v3.2.7.3GA | Copyright 2011 Expertus, Inc. All rights reserved.</span>';
            html += '</div><div class="poweredby"><a href="#"><img height="25" width="140" src="sites/all/themes/core/AdministrationTheme/images/powered-by.png"></a></div>';
            html += '</div></div></div></div></div>';
            return html;
        },

        setHourMin:function(totalminutes){

            var tHours = Math.floor(totalminutes/60);
            var tMinutes = totalminutes%60;

            if(tHours > 1) {
            var Hours = tHours + " Hours";
            }else{
            var Hours = tHours + " Hour";
            }

            if(tMinutes > 0) {
            var Minutes = ", " + tMinutes + " Mins" ;
            }else{
            var Minutes = '';
            }

            var Time = Hours + Minutes;

            return Time;
        },
        setDrupalCall:function(requestData){
			var widObj = this;
			var requestDataType ='';
			/*if(widObj.renderId === undefined || widObj.renderId === null)
				alert("renderId is undefined");*/
			if(requestData === undefined || requestData === null)
				requestData = {};
			if(requestData.returntype === undefined || requestData.returntype === null)
				requestDataType = "text";
			if(requestData.returntype == 'xml')
				requestDataType = "type/xml";

			this.currentAjaxRequest=$.ajax({
				type: "POST",
				url: resource.drupal_service_url,
				data:requestData,
				processData:true,
				dataType:requestDataType,
				async: true,
				beforeSend: function() {
					//widObj.createLoader(widObj.renderId);
				},
				success: function(outputData){
					//try
					//{
						if(requestData.returntype == "xml")
						{
							widObj.responseText=widObj.Trim(outputData);
							widObj.convertResponseXml(outputData);
							widObj.successHandler(outputData);
							widObj.destroyLoader(widObj.renderId);
						}
						else if(requestDataType == "text")
						{
							var json = eval("(" + outputData + ")");
							widObj.successHandler(json);
							//widObj.destroyLoader(widObj.renderId);
						}
					//}
					/*catch(error)
					{
						alert("Invalid Ajax callback function name."+error.toString());
					}*/
		  		},
		  		failure:function(msg){
		  			widObj.renderError();
		  		},
		  		error:function (XMLHttpRequest, textStatus, errorThrown) {
		  			widObj.renderError();
			   	}
			});
			return this.currentAjaxRequest;
		},
        setRedirectUrl:function(querystring){
        	if(querystring !='' && querystring != undefined)
        		window.location = this.constructUrl(querystring);
        	else
        		window.location = resource.base_url;
        },
        constructUrl:function(querystring){
        	if(querystring !='' && querystring != undefined)
        		return resource.base_url+'/?q='+querystring;
        	else
        		return resource.base_url;
        },
        windowOpen:function(url,title,width,height)
        {
        	title=title!=undefined?title:"ExpertusONE";
        	var windowWidth=width!=undefined?width:850;
        	var windowHeight=height!=undefined?height:800;
        	var windowName=title;
        	var centerWidth = (window.screen.width - windowWidth) / 2;
            var centerHeight = (window.screen.height - windowHeight) / 2;
            var windowOptions="toolbar=yes,menubar=no,scrollbars=yes,status=yes,location=no,resizable=1,width="+windowWidth+",height="+windowHeight+",left="+centerWidth+",top="+centerHeight;
            var newWindow = window.open(url,'',windowOptions);
            // newWindow.document.title=title;
            //newWindow.document.location.href=url;
            if(newWindow)
        	{
        		 newWindow.focus();
        		 return newWindow;
        	}
        	else
        	{
        		alert(SMARTPORTAL.t("Your browser blocked the popup. Disable popup blocker in your browser and try again."));
        	}
        },


        /**
         * Overridable method which is used to split the string.
         * @method this.spiltString
         * @param String,Int
         * @public
         */
		spiltString : function(str, n){
		    var split= str.indexOf(' ', n);
		    if(split== -1) return str;
		    return str.substring(0, split);
		},


        /**
		 * Overridable method which is used to get the updated time.
		*/
		modifiedTime:function(days, hrs, mins){
		   var timeStamp='';
			if(days > 0) {
				timeStamp = days + ' ' + SMARTPORTAL.t('days');
			if(hrs > 0) {
				timeStamp += ','+ hrs + ' ' + SMARTPORTAL.t('hours ago');
			}else{
				timeStamp += ','+ mins + ' ' + SMARTPORTAL.t('mins ago');
			}

			}else if(days == 0 && hrs > 0) {
			timeStamp = hrs + ' ' + SMARTPORTAL.t('hours')+','+ mins + ' ' + SMARTPORTAL.t('mins ago');
			}else{
			timeStamp = mins + ' ' + SMARTPORTAL.t('mins ago');
			}
          return timeStamp;
        },

        /**
		 * Overridable method which is used to get the popup for all alert messages.
		*/
		getAlertPopup:function(msg){
			$('#alertMsg-wizard').remove();
	        var html = '';
	        html+='<div id="alertMsg-wizard" style="display:none; padding: 0px;">';
	        html+='<table width="100%" border="0" valign="center">';
	        html+='<tr><td height="30"></td></tr>';
	        html+='<tr>';
	       	html+= '<td align="center"><span><b>'+msg+'<b></span><br /></td>';
	        html+='</tr>';
	        html+='</table>';
	        html+='</div>';
	        $("body").append(html);
	        var closeButt={};

		    closeButt[SMARTPORTAL.t('OK')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#alertMsg-wizard').remove();};

	        $("#alertMsg-wizard").dialog({
	            position:[(getWindowWidth()-500)/2,100],
	            bgiframe: true,
	            width:500,
	            resizable:false,
	            modal: true,
	            title:'Launch',
	            buttons:closeButt,
	            closeOnEscape: false,
	            draggable:false,
	            overlay:
	             {
	               opacity: 0.9,
	               background: "black"
	             }
	        });

	        $('.ui-dialog').wrap("<div class='portal-ui-element'></div>");
	        $('.ui-widget-overlay').wrap("<div class='portal-ui-element'></div>");
	        //$('.ui-dialog-titlebar-close').remove();

	        $("#alertMsg-wizard").css({height:'auto', width:'100%'});
	        $("#alertMsg-wizard").show();

			$('.ui-dialog-titlebar-close').click(function(){
	            $("#alertMsg-wizard").remove();
	        });

		}



};;
/**
 * The Abstract Manager is the base component of LPP framework. It consists the base LPP framework libary methods.
 * @module BaseWidget
 * @requires JQuery Lib
 * @title AbstractManager
 * @beta
 */


/****************************************************************************/
/****************************************************************************/
/****************************************************************************/

/**
 * AbstractManager  class for the LPP Learning widgets
 * @namespace EXPERTUS.widget
 * @class AbstractManager
 * @uses JQuery Lib
 * @constructor
 */

//registernamespace("EXPERTUS.SMARTPORTAL.AbstractManager");
var EXPERTUS_SMARTPORTAL_AbstractManager ={

		/**
	    * If it is false it makes the sync request to the LMS system.
	    * @property this.asyncReq
	    * @type Boolean -
	    * @default true
	    * @Instance level variable
		*/
		asyncReq:true,


		/**
	    * It is used to persist the requestXml of the web service.
	    * @property this.requestXml
	    * @type String - Value hold as xml format.
	    * @default ""
	    * @Instance level variable
		*/
		requestXml:"",

		/**
	    * It is used to track the http request connection status.
	    * @property this.connectionStatus
	    * @type String - http status value.
	    * @default ""
	    * @Instance level variable
		*/
		connectionStatus:"",

		/**
	    * It is used to hold the http object.
	    * @property this.httpRequest
	    * @type Object - xmlhttprequest object.
	    * @default null
	    * @Instance level variable
		*/
		httpRequest:null,

		/**
	    * Web  service URL.
	    * @property this.url
	    * @type String - url
	    * @default ""
	    * @Instance level variable
		*/
		url:"",

		/**
	    * Web  service name which gets invoked in the Ajax request.
	    * @property this.soapAction
	    * @type String - web service name
	    * @default ""
	    * @Instance level variable
		*/
		soapAction:"",

		/**
	    * Method name of the http request.
	    * @property this.methodName
	    * @type String - GET/POST/PUT
	    * @default ""
	    * @Instance level variable
		*/
		methodName:"",

		/**
	    * Service name.
	    * @property this.serviceName
	    * @type String -
	    * @default null
	    * @Instance level variable
		*/
		actionKey:null,

		/**
	    * Callback handler of the http request. It hold the methods for success and failure scenario.
	    * @property this.callback
	    * @type {Object}
	    * @default ""
	    * @Instance level variable
		*/
		callback:"",

		/**
	    * Timeout value of the http request.
	    * @property this.timeOut
	    * @type {int}
	    * @default null
	    * @Instance level variable
		*/
		timeOut:null,

		/**
	    * Web services related parameters hold into this variable.
	    * @property this.serviceAttributes
	    * @type {named argument}
	    * @default null
	    * @Instance level variable
		*/
		serviceAttributes:null,

		/**
	    * Context path of the LPP framework
	    * @property this.xmlResponseBaseURL
	    * @type {String} - URL
	    * @default _ It inherits from config.js
	    * @Instance level variable
		*/
		xmlResponseBaseURL:null,

		/**
	    * Used to hold the widget object
	    * @property this.widgetObject
	    * @type {Object} - URL
	    * @Instance level variable
		*/
		widgetObject:null,

		/**
	    * Used to hold the callback function of ajax call
	    * @property this.callback
	    * @type {string} - funcion
	    * @Instance level variable
		*/
		callback:null,

		/**
	    * Used to hold the id of the div where the loader will place
	    * @property this.loaderobj
	    * @type {string} - id
	    * @Instance level variable
		*/
		loaderobj:null,

		/**
	    * Overridable method used to initialize abstract manager variables
	    * @property this.initialize
	    * @param {Obj} - Detail widget object
	    * @Instance level variable
		*/
		initialize:function(obj){
			this.setwidgetObject(obj);
			this.setActionKey(obj.getActionKey());
			this.setEndPointURL(obj.getEndPointURL());

		},

		/**
	    * Overridable method used to set the loader id
	    * @property this.setLoaderObj
	    * @param {String} - id
	    * @Instance level variable
		*/
		setLoaderObj:function(){
			this.loaderobj=id;
		},

		/**
	    * Overridable method used to get the loader id
	    * @property this.setLoaderObj
	    * @param {String} - id
	    * @Instance level variable
		*/
		getLoaderObj:function(){
			return this.loaderobj;
		},

		/**
	    * Overridable method used to set the widget object
	    * @property this.initialize
	    * @param {Obj} - Detail widget object
	    * @Instance level variable
		*/
		setwidgetObject:function(obj){
			this.widgetObject=obj;
		},

		/**
		 * Overridable method used to set the callback funtion for
		 * ajax call.
		 * @property this.setCallBack()
		 * @param String - call back function name
		 * @param obj - arguments list (if any)
		 * @Instance level variable
		 */

		setCallBack:function(fnName,obj){
			this.callback = fnName;
			if(obj!=null && obj!=undefined && obj!='' && typeof obj == 'object' ){
				var t=this.convertJsonToString(obj);
				this.callback = this.callback+"("+t+")";
			}else if(obj!=null && obj!=undefined && obj!='' && typeof obj == 'string' ){
				this.callback = this.callback+"(\""+obj+"\")";
			}else{
				this.callback = this.callback+"()";
			}
		},
		
		convertJsonToString:function(obj){
			var t='';
			if(obj!=null && obj!=undefined && obj!='' && typeof obj == 'object' ){
				t = "{";

				for (var key in obj){
					if(t.length>2)
						t+=",";
					var tmp=(typeof obj[key]=='object')?this.convertJsonToString(obj[key]):
						(typeof obj[key]=='string'?(obj[key].indexOf('"')>0?"'"+obj[key]+"'":'"'+obj[key]+'"'):obj[key]);
					tmp=String(tmp).length>0?tmp:'""';
					t += '"'+key+'":'+tmp;
				}
				t += "}";
			}
			return t;
		},

		/**
		 * Overridable method used to get the callback funtion for
		 * ajax call.
		 * @property this.setCallBack()
		 * @Instance level variable
		 */

		getCallBack:function(){
			return this.callback;
		},

		/**
	    * Overridable method used to get the widget object
	    * @property this.initialize
	    * @return {Obj} - Detail widget object
	    * @Instance level variable
		*/
		getwidgetObject:function(){
			return this.widgetObject;
		},

 		/**
		* Overridable method which is used to set the appropriate parameter for web service request and initiate the request from sub widget.
		* @method this.execute
		* @param {namedargument} - Service related paramaters.
		* @public
		*/

		execute:function()
		  {
				var returnFunction = (this.getCallBack()==null || this.getCallBack()==undefined)?'renderResults()':this.getCallBack();
			  	var widgetObj = this.getwidgetObject();
			  	var loader = '';

			  	if(this.getLoaderObj()!=null && this.getLoaderObj() != undefined && this.getLoaderObj() != 'null'){
				  	if(document.getElementById(this.getLoaderObj())!=null)
				  		loader = this.getLoaderObj()
				  	else
				  		loader = widgetObj.getUniqueWidgetId()+((this.getLoaderObj()!=null && this.getLoaderObj()!=undefined)?this.getLoaderObj():'');
			  	}else{
			  		loader = null;
			  	}
			  	if(loader!=null)
			  		widgetObj.createLoader(loader);
			  	$('#msgDiv').css('display','none');
			  	var mgr=this;
			  	// Implemented for Ajax Request failing in IE8
			  	jQuery.ajaxSetup({
		            xhr: function() {
		                    //return new window.XMLHttpRequest();
		                    try{
		                        if(window.ActiveXObject)
		                            return new window.ActiveXObject("Microsoft.XMLHTTP");
		                    } catch(e) { }

		                    return new window.XMLHttpRequest();
		                }
		        });
				jQuery.ajax({
				   type: "POST",
				   url: this.url,
				   processData: false,
				   data:  this.requestXml,
				   dataType:'text',
				   contentType:'text/xml',
				   async: true,
				   //Arthi - added to send the soapaction in the request header - start
				   beforeSend: function(req) {
						req.setRequestHeader("SOAPAction",mgr.getActionKey());
						req.setRequestHeader("Accept-Encoding", "gzip, deflate");
					 },
					 //Arthi - added to send the soapaction in the request header - end
				   success: function(respText){
			  			widgetObj.responseText=widgetObj.Trim(respText);
			  			widgetObj.convertResponseXml();
			  			if(loader!=null)
			  				widgetObj.destroyLoader(loader);
			  			eval('widgetObj.'+returnFunction);
			  			//widgetObj.renderResults();
			  		},
			  		failure:function(msg){
			  			widgetObj.responseText=widgetObj.Trim(msg);
			  			widgetObj.convertResponseXml();
			  			if(loader!=null)
			  				widgetObj.destroyLoader(loader);
			  			widgetObj.renderErrorCommon();
				   },error:function (XMLHttpRequest, textStatus, errorThrown) {
					   widgetObj.responseText=widgetObj.Trim(XMLHttpRequest.responseText);
					   widgetObj.convertResponseXml();
					   if(loader!=null)
						   widgetObj.destroyLoader(loader);
					   widgetObj.renderErrorCommon();
				   	 }
				 });

		  },


		/**
		* Overridable method which is used to get the request xml of the xmlhttprequest.
		* @method this.getRequestXML
		* @return {String} - Request string in xml format
		* @public
		*/
		getRequestXML:function()
		 {
			return this.requestXml;
		 },

		/**
		* Method which is used trim a string means remove the leading and trailing space.
		* @method this.Trim()
		* @return {String}
		* @public
		*/
		 Trim:function(str){
			//return str.replace(/(^\s*)|(\s*$)/g, "");
			 return $.trim(str);
		 },

		/**
		* Method which is used to Left trim a string.
		* @method this.LTrim()
		* @return {String}
		* @public
		*/
		 LTrim:function(str){
			 //return str.replace(/(^\s*)/g, "");
			 return $.trim(str);
		},

		/**
		* Method which is used to Right trim a string.
		* @method this.RTrim()
		* @return {String}
		* @public
		*/
		RTrim:function(str)
		{
			//return str.replace(/(\s*$)/g, "");
			return $.trim(str);
		},

		/**
		* Overridable method which is used to get the response xml of the xmlhttprequest.
		* @method this.getResponseXML
		* @return {Object} - Response object.
		* @public
		*/
		getResponseXML:function()
		 {
			return this.responseXml;
		 },


		/**
		* Overridable method which is used to get the request object of the xmlhttprequest.
		* @method this.getRequestObj
		* @return {Object} - Request object.
		* @public
		*/
		getRequestObj:function()
		 {
			return this.httpRequest;
		 },

		/**
		* Set the request method name.
		* @method this.setMethodName
		* @param {String} - GET/POST/PUT
		* @public
		*/
		setMethodName:function(methodname)
		 {
			this.methodName = methodname;
		 },

		/**
		* Overridable method which is used to set the  service number or name .
		* @method this.setServiceName
		* @param  {String} - Service number or name
		* @public
		*/
		setActionKey:function(no){
			this.actionKey=no;
		},

		/**
		* Overridable method which is used to get the  service number or name .
		* @method this.getServiceName
		* @return  {String} - Service number or name
		* @public
		*/
		getActionKey:function(){
			return this.actionKey;
		},

		/**
		* Set the soap action name.
		* @method this.setSOAPAction
		* @param {String} - Web service name
		* @public
		*/
		setSOAPAction:function(soapaction)
		 {

			this.soapAction = soapaction;
		 },

		/**
		* Set the end point URL.
		* @method this.setEndPointURL
		* @param {String} - URL
		* @public
		*/
        setEndPointURL:function(url)
         {
			 var widgetObj = this.getwidgetObject();
			 if(widgetObj.getUniqueWidgetId().toLowerCase().indexOf('lnr')>=0 || widgetObj.getUniqueWidgetId().toLowerCase().indexOf('team')>=0){
				 this.url = url + widgetObj.getUniqueWidgetId();
			 }else{
				 this.url = url + this.generateQueryString();
			 }

         },
         /**
         * Method used to set the Query String which append to the end point url.
         * @method this.generateQueryString
         * @param {String}
         * @public
         */
         generateQueryString:function(){
            var qstr = "";
            var widgetObj = this.getwidgetObject();
            if(this.getActionKey()!=null && this.getActionKey()!=undefined && this.getActionKey().length>0)
            	//Arthi - changed toremove the service no from QueryString - start
                qstr += qstr.length>0?"&actionkey="+this.getActionKey():"?actionkey="+this.getActionKey();
            	//Arthi - changed toremove the service no from QueryString - end
                if(config.data[2].licensekey[0].admin_licensekey!=null && config.data[2].licensekey[0].admin_licensekey!=undefined && config.data[2].licensekey[0].admin_licensekey!=''){
                    qstr += qstr.length>0?"&licensekey="+config.data[2].licensekey[0].admin_licensekey:"?licensekey="+config.data[2].licensekey[0].admin_licensekey;
                	var srvno=eval('config.data[3].SCServiceno[0].'+widgetObj.getUniqueWidgetId());
                    qstr += srvno==undefined?"&SCServiceno="+config.data[3].SCServiceno[0].all:"&SCServiceno="+srvno;

            }
            return qstr;
         },
		/**
		* Set the call back functions.
		* @method this.setCallbackFunctions
		* @param {Object}
		* @public
		*/
		setCallbackFunctions:function(callback)
		 {
			this.callback = callback;
		 },

		 getLovRequest:function(obj){
				var widgetObj = this.getwidgetObject();
				this.setActionKey(eval('config.data[1].serviceaction[0].PickListService'));
				this.setEndPointURL(widgetObj.getEndPointURL());
				var request=new Object();
				request.query = new SOAPObject("PickList").attr("xsi:type","null");
				if(obj!=undefined && obj.length>0){
					for(var i=0;i<obj.length;i++){
						var request1=new Object();
						var code = (obj[i].code!=null && obj[i].code!=undefined)?obj[i].code:'';
						var language = (obj[i].language!=null && obj[i].language!=undefined)?obj[i].language:'';
						request1.query = new SOAPObject("Lists").attr("xsi:type","null");
						request1.query.appendChild(new SOAPObject("Code").attr("xsi:type","null").val(code));
						request1.query.appendChild(new SOAPObject("Language").attr("xsi:type","null").val(language));
						request.query.appendChild(request1.query);
					}
				}
				//var sr = new SOAPRequest("PickList", request); Arthi - changed to include SOAP headers
				var sr = new SOAPRequest("PickList",request,this.getSOAPHeader());
				sr="<?xml version='1.0' encoding='UTF-8'?>"+sr;
				sr=sr.toString();
				return sr;
			},

		getLinkPathRequest:function(obj){
				var widgetObj = this.getwidgetObject();
				this.setActionKey(eval('config.data[1].serviceaction[0].LinkPathService'));
				this.setEndPointURL(widgetObj.getEndPointURL());
				var request=new Object();
				request.query = new SOAPObject("LinkPath").attr("xsi:type","null");
				request.query.appendChild(new SOAPObject("LinkTitle").attr("xsi:type","null").val(obj.LinkTitle));
				var sr = new SOAPRequest("LinkPath",request,this.getSOAPHeader());
				sr="<?xml version='1.0' encoding='UTF-8'?>"+sr;
				sr=sr.toString();
				return sr;
			},

		//Arthi - Added to generate the generate SOAP request, with SOAP headers  - start//
		getSOAPRequest:function(action,soapObj){
			var sr = new SOAPRequest(action,soapObj,this.getSOAPHeader());
			sr = "<?xml version='1.0' encoding='UTF-8'?>" + sr;
			sr = sr.toString();
			return sr;
		},

		getSOAPHeader:function(){
			var hdr = new Object();
			hdr.query = new SOAPObject("MessageHeaderInfo").attr(
					"xsi:type", "null");
			hdr.query.appendChild(new SOAPObject("PortalLicenseKey").attr("xsi:type","null").val(this.getCookie("SPLearnerLicense")));
			hdr.query.appendChild(new SOAPObject("PortalAuthKey").attr("xsi:type","null").val(this.getCookie("SPCertificate")));
			return hdr;
		},

		getCookie:function(c_name){
			if (document.cookie.length>0)
			  {
			  c_start=document.cookie.indexOf(c_name + "=");
			  if (c_start!=-1)
			    {
			    c_start=c_start + c_name.length+1;
			    c_end=document.cookie.indexOf(";",c_start);
			    if (c_end==-1) c_end=document.cookie.length;
			    return unescape(document.cookie.substring(c_start,c_end));
			    }
			  }
			return "";
		}
		//Arthi - Added to generate the generate SOAP request, with SOAP headers  - end


};
;
/*
 * jquery.qtip. The jQuery tooltip plugin
 *
 * Copyright (c) 2009 Craig Thompson
 * http://craigsworks.com
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Launch  : February 2009
 * Version : 1.0.0-rc3
 * Released: Tuesday 12th May, 2009 - 00:00
 * Debug: jquery.qtip.debug.js
 */
(function(f){f.fn.qtip=function(B,u){var y,t,A,s,x,w,v,z;if(typeof B=="string"){if(typeof f(this).data("qtip")!=="object"){f.fn.qtip.log.error.call(self,1,f.fn.qtip.constants.NO_TOOLTIP_PRESENT,false)}if(B=="api"){return f(this).data("qtip").interfaces[f(this).data("qtip").current]}else{if(B=="interfaces"){return f(this).data("qtip").interfaces}}}else{if(!B){B={}}if(typeof B.content!=="object"||(B.content.jquery&&B.content.length>0)){B.content={text:B.content}}if(typeof B.content.title!=="object"){B.content.title={text:B.content.title}}if(typeof B.position!=="object"){B.position={corner:B.position}}if(typeof B.position.corner!=="object"){B.position.corner={target:B.position.corner,tooltip:B.position.corner}}if(typeof B.show!=="object"){B.show={when:B.show}}if(typeof B.show.when!=="object"){B.show.when={event:B.show.when}}if(typeof B.show.effect!=="object"){B.show.effect={type:B.show.effect}}if(typeof B.hide!=="object"){B.hide={when:B.hide}}if(typeof B.hide.when!=="object"){B.hide.when={event:B.hide.when}}if(typeof B.hide.effect!=="object"){B.hide.effect={type:B.hide.effect}}if(typeof B.style!=="object"){B.style={name:B.style}}B.style=c(B.style);s=f.extend(true,{},f.fn.qtip.defaults,B);s.style=a.call({options:s},s.style);s.user=f.extend(true,{},B)}return f(this).each(function(){if(typeof B=="string"){w=B.toLowerCase();A=f(this).qtip("interfaces");if(typeof A=="object"){if(u===true&&w=="destroy"){while(A.length>0){A[A.length-1].destroy()}}else{if(u!==true){A=[f(this).qtip("api")]}for(y=0;y<A.length;y++){if(w=="destroy"){A[y].destroy()}else{if(A[y].status.rendered===true){if(w=="show"){A[y].show()}else{if(w=="hide"){A[y].hide()}else{if(w=="focus"){A[y].focus()}else{if(w=="disable"){A[y].disable(true)}else{if(w=="enable"){A[y].disable(false)}}}}}}}}}}}else{v=f.extend(true,{},s);v.hide.effect.length=s.hide.effect.length;v.show.effect.length=s.show.effect.length;if(v.position.container===false){v.position.container=f(document.body)}if(v.position.target===false){v.position.target=f(this)}if(v.show.when.target===false){v.show.when.target=f(this)}if(v.hide.when.target===false){v.hide.when.target=f(this)}t=f.fn.qtip.interfaces.length;for(y=0;y<t;y++){if(typeof f.fn.qtip.interfaces[y]=="undefined"){t=y;break}}x=new d(f(this),v,t);f.fn.qtip.interfaces[t]=x;if(typeof f(this).data("qtip")=="object"){if(typeof f(this).attr("qtip")==="undefined"){f(this).data("qtip").current=f(this).data("qtip").interfaces.length}f(this).data("qtip").interfaces.push(x)}else{f(this).data("qtip",{current:0,interfaces:[x]})}if(v.content.prerender===false&&v.show.when.event!==false&&v.show.ready!==true){v.show.when.target.bind(v.show.when.event+".qtip-"+t+"-create",{qtip:t},function(C){z=f.fn.qtip.interfaces[C.data.qtip];z.options.show.when.target.unbind(z.options.show.when.event+".qtip-"+C.data.qtip+"-create");z.cache.mouse={x:C.pageX,y:C.pageY};p.call(z);z.options.show.when.target.trigger(z.options.show.when.event)})}else{x.cache.mouse={x:v.show.when.target.offset().left,y:v.show.when.target.offset().top};p.call(x)}}})};function d(u,t,v){var s=this;s.id=v;s.options=t;s.status={animated:false,rendered:false,disabled:false,focused:false};s.elements={target:u.addClass(s.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};s.cache={mouse:{},position:{},toggle:0};s.timers={};f.extend(s,s.options.api,{show:function(y){var x,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show")}if(s.elements.tooltip.css("display")!=="none"){return s}s.elements.tooltip.stop(true,false);x=s.beforeShow.call(s,y);if(x===false){return s}function w(){if(s.options.position.type!=="static"){s.focus()}s.onShow.call(s,y);if(f.browser.msie){s.elements.tooltip.get(0).style.removeAttribute("filter")}}s.cache.toggle=1;if(s.options.position.type!=="static"){s.updatePosition(y,(s.options.show.effect.length>0))}if(typeof s.options.show.solo=="object"){z=f(s.options.show.solo)}else{if(s.options.show.solo===true){z=f("div.qtip").not(s.elements.tooltip)}}if(z){z.each(function(){if(f(this).qtip("api").status.rendered===true){f(this).qtip("api").hide()}})}if(typeof s.options.show.effect.type=="function"){s.options.show.effect.type.call(s.elements.tooltip,s.options.show.effect.length);s.elements.tooltip.queue(function(){w();f(this).dequeue()})}else{switch(s.options.show.effect.type.toLowerCase()){case"fade":s.elements.tooltip.fadeIn(s.options.show.effect.length,w);break;case"slide":s.elements.tooltip.slideDown(s.options.show.effect.length,function(){w();if(s.options.position.type!=="static"){s.updatePosition(y,true)}});break;case"grow":s.elements.tooltip.show(s.options.show.effect.length,w);break;default:s.elements.tooltip.show(null,w);break}s.elements.tooltip.addClass(s.options.style.classes.active)}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(y){var x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide")}else{if(s.elements.tooltip.css("display")==="none"){return s}}clearTimeout(s.timers.show);s.elements.tooltip.stop(true,false);x=s.beforeHide.call(s,y);if(x===false){return s}function w(){s.onHide.call(s,y)}s.cache.toggle=0;if(typeof s.options.hide.effect.type=="function"){s.options.hide.effect.type.call(s.elements.tooltip,s.options.hide.effect.length);s.elements.tooltip.queue(function(){w();f(this).dequeue()})}else{switch(s.options.hide.effect.type.toLowerCase()){case"fade":s.elements.tooltip.fadeOut(s.options.hide.effect.length,w);break;case"slide":s.elements.tooltip.slideUp(s.options.hide.effect.length,w);break;case"grow":s.elements.tooltip.hide(s.options.hide.effect.length,w);break;default:s.elements.tooltip.hide(null,w);break}s.elements.tooltip.removeClass(s.options.style.classes.active)}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(w,x){var C,G,L,J,H,E,y,I,B,D,K,A,F,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition")}else{if(s.options.position.type=="static"){return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition")}}G={position:{left:0,top:0},dimensions:{height:0,width:0},corner:s.options.position.corner.target};L={position:s.getPosition(),dimensions:s.getDimensions(),corner:s.options.position.corner.tooltip};if(s.options.position.target!=="mouse"){if(s.options.position.target.get(0).nodeName.toLowerCase()=="area"){J=s.options.position.target.attr("coords").split(",");for(C=0;C<J.length;C++){J[C]=parseInt(J[C])}H=s.options.position.target.parent("map").attr("name");E=f('img[usemap="#'+H+'"]:first').offset();G.position={left:Math.floor(E.left+J[0]),top:Math.floor(E.top+J[1])};switch(s.options.position.target.attr("shape").toLowerCase()){case"rect":G.dimensions={width:Math.ceil(Math.abs(J[2]-J[0])),height:Math.ceil(Math.abs(J[3]-J[1]))};break;case"circle":G.dimensions={width:J[2]+1,height:J[2]+1};break;case"poly":G.dimensions={width:J[0],height:J[1]};for(C=0;C<J.length;C++){if(C%2==0){if(J[C]>G.dimensions.width){G.dimensions.width=J[C]}if(J[C]<J[0]){G.position.left=Math.floor(E.left+J[C])}}else{if(J[C]>G.dimensions.height){G.dimensions.height=J[C]}if(J[C]<J[1]){G.position.top=Math.floor(E.top+J[C])}}}G.dimensions.width=G.dimensions.width-(G.position.left-E.left);G.dimensions.height=G.dimensions.height-(G.position.top-E.top);break;default:return f.fn.qtip.log.error.call(s,4,f.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition");break}G.dimensions.width-=2;G.dimensions.height-=2}else{if(s.options.position.target.add(document.body).length===1){G.position={left:f(document).scrollLeft(),top:f(document).scrollTop()};G.dimensions={height:f(window).height(),width:f(window).width()}}else{if(typeof s.options.position.target.attr("qtip")!=="undefined"){G.position=s.options.position.target.qtip("api").cache.position}else{G.position=s.options.position.target.offset()}G.dimensions={height:s.options.position.target.outerHeight(),width:s.options.position.target.outerWidth()}}}y=f.extend({},G.position);if(G.corner.search(/right/i)!==-1){y.left+=G.dimensions.width}if(G.corner.search(/bottom/i)!==-1){y.top+=G.dimensions.height}if(G.corner.search(/((top|bottom)Middle)|center/)!==-1){y.left+=(G.dimensions.width/2)}if(G.corner.search(/((left|right)Middle)|center/)!==-1){y.top+=(G.dimensions.height/2)}}else{G.position=y={left:s.cache.mouse.x,top:s.cache.mouse.y};G.dimensions={height:1,width:1}}if(L.corner.search(/right/i)!==-1){y.left-=L.dimensions.width}if(L.corner.search(/bottom/i)!==-1){y.top-=L.dimensions.height}if(L.corner.search(/((top|bottom)Middle)|center/)!==-1){y.left-=(L.dimensions.width/2)}if(L.corner.search(/((left|right)Middle)|center/)!==-1){y.top-=(L.dimensions.height/2)}I=(f.browser.msie)?1:0;B=(f.browser.msie&&parseInt(f.browser.version.charAt(0))===6)?1:0;if(s.options.style.border.radius>0){if(L.corner.search(/Left/)!==-1){y.left-=s.options.style.border.radius}else{if(L.corner.search(/Right/)!==-1){y.left+=s.options.style.border.radius}}if(L.corner.search(/Top/)!==-1){y.top-=s.options.style.border.radius}else{if(L.corner.search(/Bottom/)!==-1){y.top+=s.options.style.border.radius}}}if(I){if(L.corner.search(/top/)!==-1){y.top-=I}else{if(L.corner.search(/bottom/)!==-1){y.top+=I}}if(L.corner.search(/left/)!==-1){y.left-=I}else{if(L.corner.search(/right/)!==-1){y.left+=I}}if(L.corner.search(/leftMiddle|rightMiddle/)!==-1){y.top-=1}}if(s.options.position.adjust.screen===true){y=o.call(s,y,G,L)}if(s.options.position.target==="mouse"&&s.options.position.adjust.mouse===true){if(s.options.position.adjust.screen===true&&s.elements.tip){K=s.elements.tip.attr("rel")}else{K=s.options.position.corner.tooltip}y.left+=(K.search(/right/i)!==-1)?-6:6;y.top+=(K.search(/bottom/i)!==-1)?-6:6}if(!s.elements.bgiframe&&f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){f("select, object").each(function(){A=f(this).offset();A.bottom=A.top+f(this).height();A.right=A.left+f(this).width();if(y.top+L.dimensions.height>=A.top&&y.left+L.dimensions.width>=A.left){k.call(s)}})}y.left+=s.options.position.adjust.x;y.top+=s.options.position.adjust.y;F=s.getPosition();if(y.left!=F.left||y.top!=F.top){z=s.beforePositionUpdate.call(s,w);if(z===false){return s}s.cache.position=y;if(x===true){s.status.animated=true;s.elements.tooltip.animate(y,200,"swing",function(){s.status.animated=false})}else{s.elements.tooltip.css(y)}s.onPositionUpdate.call(s,w);if(typeof w!=="undefined"&&w.type&&w.type!=="mousemove"){f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}}return s},updateWidth:function(w){var x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")}else{if(w&&typeof w!=="number"){return f.fn.qtip.log.error.call(s,2,"newWidth must be of type number","updateWidth")}}x=s.elements.contentWrapper.siblings().add(s.elements.tip).add(s.elements.button);if(!w){if(typeof s.options.style.width.value=="number"){w=s.options.style.width.value}else{s.elements.tooltip.css({width:"auto"});x.hide();if(f.browser.msie){s.elements.wrapper.add(s.elements.contentWrapper.children()).css({zoom:"normal"})}w=s.getDimensions().width+1;if(!s.options.style.width.value){if(w>s.options.style.width.max){w=s.options.style.width.max}if(w<s.options.style.width.min){w=s.options.style.width.min}}}}if(w%2!==0){w-=1}s.elements.tooltip.width(w);x.show();if(s.options.style.border.radius){s.elements.tooltip.find(".qtip-betweenCorners").each(function(y){f(this).width(w-(s.options.style.border.radius*2))})}if(f.browser.msie){s.elements.wrapper.add(s.elements.contentWrapper.children()).css({zoom:"1"});s.elements.wrapper.width(w);if(s.elements.bgiframe){s.elements.bgiframe.width(w).height(s.getDimensions.height)}}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")},updateStyle:function(w){var z,A,x,y,B;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")}else{if(typeof w!=="string"||!f.fn.qtip.styles[w]){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle")}}s.options.style=a.call(s,f.fn.qtip.styles[w],s.options.user.style);s.elements.content.css(q(s.options.style));if(s.options.content.title.text!==false){s.elements.title.css(q(s.options.style.title,true))}s.elements.contentWrapper.css({borderColor:s.options.style.border.color});if(s.options.style.tip.corner!==false){if(f("<canvas>").get(0).getContext){z=s.elements.tooltip.find(".qtip-tip canvas:first");x=z.get(0).getContext("2d");x.clearRect(0,0,300,300);y=z.parent("div[rel]:first").attr("rel");B=b(y,s.options.style.tip.size.width,s.options.style.tip.size.height);h.call(s,z,B,s.options.style.tip.color||s.options.style.border.color)}else{if(f.browser.msie){z=s.elements.tooltip.find('.qtip-tip [nodeName="shape"]');z.attr("fillcolor",s.options.style.tip.color||s.options.style.border.color)}}}if(s.options.style.border.radius>0){s.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:s.options.style.border.color});if(f("<canvas>").get(0).getContext){A=g(s.options.style.border.radius);s.elements.tooltip.find(".qtip-wrapper canvas").each(function(){x=f(this).get(0).getContext("2d");x.clearRect(0,0,300,300);y=f(this).parent("div[rel]:first").attr("rel");r.call(s,f(this),A[y],s.options.style.border.radius,s.options.style.border.color)})}else{if(f.browser.msie){s.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){f(this).attr("fillcolor",s.options.style.border.color)})}}}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")},updateContent:function(A,y){var z,x,w;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent")}else{if(!A){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent")}}z=s.beforeContentUpdate.call(s,A);if(typeof z=="string"){A=z}else{if(z===false){return}}if(f.browser.msie){s.elements.contentWrapper.children().css({zoom:"normal"})}if(A.jquery&&A.length>0){A.clone(true).appendTo(s.elements.content).show()}else{s.elements.content.html(A)}x=s.elements.content.find("img[complete=false]");if(x.length>0){w=0;x.each(function(C){f('<img src="'+f(this).attr("src")+'" />').load(function(){if(++w==x.length){B()}})})}else{B()}function B(){s.updateWidth();if(y!==false){if(s.options.position.type!=="static"){s.updatePosition(s.elements.tooltip.is(":visible"),true)}if(s.options.style.tip.corner!==false){n.call(s)}}}s.onContentUpdate.call(s);return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(w,z,A){var y;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")}y=s.beforeContentLoad.call(s);if(y===false){return s}if(A=="post"){f.post(w,z,x)}else{f.get(w,z,x)}function x(B){s.onContentLoad.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");s.updateContent(B)}return s},updateTitle:function(w){if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")}else{if(!w){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle")}}returned=s.beforeTitleUpdate.call(s);if(returned===false){return s}if(s.elements.button){s.elements.button=s.elements.button.clone(true)}s.elements.title.html(w);if(s.elements.button){s.elements.title.prepend(s.elements.button)}s.onTitleUpdate.call(s);return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle")},focus:function(A){var y,x,w,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus")}else{if(s.options.position.type=="static"){return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus")}}y=parseInt(s.elements.tooltip.css("z-index"));x=6000+f("div.qtip[qtip]").length-1;if(!s.status.focused&&y!==x){z=s.beforeFocus.call(s,A);if(z===false){return s}f("div.qtip[qtip]").not(s.elements.tooltip).each(function(){if(f(this).qtip("api").status.rendered===true){w=parseInt(f(this).css("z-index"));if(typeof w=="number"&&w>-1){f(this).css({zIndex:parseInt(f(this).css("z-index"))-1})}f(this).qtip("api").status.focused=false}});s.elements.tooltip.css({zIndex:x});s.status.focused=true;s.onFocus.call(s,A);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_FOCUSED,"focus")}return s},disable:function(w){if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")}if(w){if(!s.status.disabled){s.status.disabled=true;f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_DISABLED,"disable")}else{f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable")}}else{if(s.status.disabled){s.status.disabled=false;f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_ENABLED,"disable")}else{f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable")}}return s},destroy:function(){var w,x,y;x=s.beforeDestroy.call(s);if(x===false){return s}if(s.status.rendered){s.options.show.when.target.unbind("mousemove.qtip",s.updatePosition);s.options.show.when.target.unbind("mouseout.qtip",s.hide);s.options.show.when.target.unbind(s.options.show.when.event+".qtip");s.options.hide.when.target.unbind(s.options.hide.when.event+".qtip");s.elements.tooltip.unbind(s.options.hide.when.event+".qtip");s.elements.tooltip.unbind("mouseover.qtip",s.focus);s.elements.tooltip.remove()}else{s.options.show.when.target.unbind(s.options.show.when.event+".qtip-create")}if(typeof s.elements.target.data("qtip")=="object"){y=s.elements.target.data("qtip").interfaces;if(typeof y=="object"&&y.length>0){for(w=0;w<y.length-1;w++){if(y[w].id==s.id){y.splice(w,1)}}}}delete f.fn.qtip.interfaces[s.id];if(typeof y=="object"&&y.length>0){s.elements.target.data("qtip").current=y.length-1}else{s.elements.target.removeData("qtip")}s.onDestroy.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_DESTROYED,"destroy");return s.elements.target},getPosition:function(){var w,x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")}w=(s.elements.tooltip.css("display")!=="none")?false:true;if(w){s.elements.tooltip.css({visiblity:"hidden"}).show()}x=s.elements.tooltip.offset();if(w){s.elements.tooltip.css({visiblity:"visible"}).hide()}return x},getDimensions:function(){var w,x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}w=(!s.elements.tooltip.is(":visible"))?true:false;if(w){s.elements.tooltip.css({visiblity:"hidden"}).show()}x={height:s.elements.tooltip.outerHeight(),width:s.elements.tooltip.outerWidth()};if(w){s.elements.tooltip.css({visiblity:"visible"}).hide()}return x}})}function p(){var s,w,u,t,v,y,x;s=this;s.beforeRender.call(s);s.status.rendered=true;s.elements.tooltip='<div qtip="'+s.id+'" class="qtip '+(s.options.style.classes.tooltip||s.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+s.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+s.options.style.classes.content+'"></div></div></div></div>';s.elements.tooltip=f(s.elements.tooltip);s.elements.tooltip.appendTo(s.options.position.container);s.elements.tooltip.data("qtip",{current:0,interfaces:[s]});s.elements.wrapper=s.elements.tooltip.children("div:first");s.elements.contentWrapper=s.elements.wrapper.children("div:first").css({background:s.options.style.background});s.elements.content=s.elements.contentWrapper.children("div:first").css(q(s.options.style));if(f.browser.msie){s.elements.wrapper.add(s.elements.content).css({zoom:1})}if(s.options.hide.when.event=="unfocus"){s.elements.tooltip.attr("unfocus",true)}if(typeof s.options.style.width.value=="number"){s.updateWidth()}if(f("<canvas>").get(0).getContext||f.browser.msie){if(s.options.style.border.radius>0){m.call(s)}else{s.elements.contentWrapper.css({border:s.options.style.border.width+"px solid "+s.options.style.border.color})}if(s.options.style.tip.corner!==false){e.call(s)}}else{s.elements.contentWrapper.css({border:s.options.style.border.width+"px solid "+s.options.style.border.color});s.options.style.border.radius=0;s.options.style.tip.corner=false;f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")}if((typeof s.options.content.text=="string"&&s.options.content.text.length>0)||(s.options.content.text.jquery&&s.options.content.text.length>0)){u=s.options.content.text}else{if(typeof s.elements.target.attr("title")=="string"&&s.elements.target.attr("title").length>0){u=s.elements.target.attr("title").replace("\\n","<br />");s.elements.target.attr("title","")}else{if(typeof s.elements.target.attr("alt")=="string"&&s.elements.target.attr("alt").length>0){u=s.elements.target.attr("alt").replace("\\n","<br />");s.elements.target.attr("alt","")}else{u=" ";f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.NO_VALID_CONTENT,"render")}}}if(s.options.content.title.text!==false){j.call(s)}s.updateContent(u);l.call(s);if(s.options.show.ready===true){s.show()}if(s.options.content.url!==false){t=s.options.content.url;v=s.options.content.data;y=s.options.content.method||"get";s.loadContent(t,v,y)}s.onRender.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_RENDERED,"render")}function m(){var F,z,t,B,x,E,u,G,D,y,w,C,A,s,v;F=this;F.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();t=F.options.style.border.width;B=F.options.style.border.radius;x=F.options.style.border.color||F.options.style.tip.color;E=g(B);u={};for(z in E){u[z]='<div rel="'+z+'" style="'+((z.search(/Left/)!==-1)?"left":"right")+":0; position:absolute; height:"+B+"px; width:"+B+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if(f("<canvas>").get(0).getContext){u[z]+='<canvas height="'+B+'" width="'+B+'" style="vertical-align: top"></canvas>'}else{if(f.browser.msie){G=B*2+3;u[z]+='<v:arc stroked="false" fillcolor="'+x+'" startangle="'+E[z][0]+'" endangle="'+E[z][1]+'" style="width:'+G+"px; height:"+G+"px; margin-top:"+((z.search(/bottom/)!==-1)?-2:-1)+"px; margin-left:"+((z.search(/Right/)!==-1)?E[z][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'}}u[z]+="</div>"}D=F.getDimensions().width-(Math.max(t,B)*2);y='<div class="qtip-betweenCorners" style="height:'+B+"px; width:"+D+"px; overflow:hidden; background-color:"+x+'; line-height:0.1px; font-size:1px;">';w='<div class="qtip-borderTop" dir="ltr" style="height:'+B+"px; margin-left:"+B+'px; line-height:0.1px; font-size:1px; padding:0;">'+u.topLeft+u.topRight+y;F.elements.wrapper.prepend(w);C='<div class="qtip-borderBottom" dir="ltr" style="height:'+B+"px; margin-left:"+B+'px; line-height:0.1px; font-size:1px; padding:0;">'+u.bottomLeft+u.bottomRight+y;F.elements.wrapper.append(C);if(f("<canvas>").get(0).getContext){F.elements.wrapper.find("canvas").each(function(){A=E[f(this).parent("[rel]:first").attr("rel")];r.call(F,f(this),A,B,x)})}else{if(f.browser.msie){F.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>')}}s=Math.max(B,(B+(t-B)));v=Math.max(t-B,0);F.elements.contentWrapper.css({border:"0px solid "+x,borderWidth:v+"px "+s+"px"})}function r(u,w,s,t){var v=u.get(0).getContext("2d");v.fillStyle=t;v.beginPath();v.arc(w[0],w[1],s,0,Math.PI*2,false);v.fill()}function e(v){var t,s,x,u,w;t=this;if(t.elements.tip!==null){t.elements.tip.remove()}s=t.options.style.tip.color||t.options.style.border.color;if(t.options.style.tip.corner===false){return}else{if(!v){v=t.options.style.tip.corner}}x=b(v,t.options.style.tip.size.width,t.options.style.tip.size.height);t.elements.tip='<div class="'+t.options.style.classes.tip+'" dir="ltr" rel="'+v+'" style="position:absolute; height:'+t.options.style.tip.size.height+"px; width:"+t.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';if(f("<canvas>").get(0).getContext){t.elements.tip+='<canvas height="'+t.options.style.tip.size.height+'" width="'+t.options.style.tip.size.width+'"></canvas>'}else{if(f.browser.msie){u=t.options.style.tip.size.width+","+t.options.style.tip.size.height;w="m"+x[0][0]+","+x[0][1];w+=" l"+x[1][0]+","+x[1][1];w+=" "+x[2][0]+","+x[2][1];w+=" xe";t.elements.tip+='<v:shape fillcolor="'+s+'" stroked="false" filled="true" path="'+w+'" coordsize="'+u+'" style="width:'+t.options.style.tip.size.width+"px; height:"+t.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+((v.search(/top/)!==-1)?"bottom":"top")+'"></v:shape>';t.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';t.elements.contentWrapper.css("position","relative")}}t.elements.tooltip.prepend(t.elements.tip+"</div>");t.elements.tip=t.elements.tooltip.find("."+t.options.style.classes.tip).eq(0);if(f("<canvas>").get(0).getContext){h.call(t,t.elements.tip.find("canvas:first"),x,s)}if(v.search(/top/)!==-1&&f.browser.msie&&parseInt(f.browser.version.charAt(0))===6){t.elements.tip.css({marginTop:-4})}n.call(t,v)}function h(t,v,s){var u=t.get(0).getContext("2d");u.fillStyle=s;u.beginPath();u.moveTo(v[0][0],v[0][1]);u.lineTo(v[1][0],v[1][1]);u.lineTo(v[2][0],v[2][1]);u.fill()}function n(u){var t,w,s,x,v;t=this;if(t.options.style.tip.corner===false||!t.elements.tip){return}if(!u){u=t.elements.tip.attr("rel")}w=positionAdjust=(f.browser.msie)?1:0;t.elements.tip.css(u.match(/left|right|top|bottom/)[0],0);if(u.search(/top|bottom/)!==-1){if(f.browser.msie){if(parseInt(f.browser.version.charAt(0))===6){positionAdjust=(u.search(/top/)!==-1)?-3:1}else{positionAdjust=(u.search(/top/)!==-1)?1:2}}if(u.search(/Middle/)!==-1){t.elements.tip.css({left:"50%",marginLeft:-(t.options.style.tip.size.width/2)})}else{if(u.search(/Left/)!==-1){t.elements.tip.css({left:t.options.style.border.radius-w})}else{if(u.search(/Right/)!==-1){t.elements.tip.css({right:t.options.style.border.radius+w})}}}if(u.search(/top/)!==-1){t.elements.tip.css({top:-positionAdjust})}else{t.elements.tip.css({bottom:positionAdjust})}}else{if(u.search(/left|right/)!==-1){if(f.browser.msie){positionAdjust=(parseInt(f.browser.version.charAt(0))===6)?1:((u.search(/left/)!==-1)?1:2)}if(u.search(/Middle/)!==-1){t.elements.tip.css({top:"50%",marginTop:-(t.options.style.tip.size.height/2)})}else{if(u.search(/Top/)!==-1){t.elements.tip.css({top:t.options.style.border.radius-w})}else{if(u.search(/Bottom/)!==-1){t.elements.tip.css({bottom:t.options.style.border.radius+w})}}}if(u.search(/left/)!==-1){t.elements.tip.css({left:-positionAdjust})}else{t.elements.tip.css({right:positionAdjust})}}}s="padding-"+u.match(/left|right|top|bottom/)[0];x=t.options.style.tip.size[(s.search(/left|right/)!==-1)?"width":"height"];t.elements.tooltip.css("padding",0);t.elements.tooltip.css(s,x);if(f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){v=parseInt(t.elements.tip.css("margin-top"))||0;v+=parseInt(t.elements.content.css("margin-top"))||0;t.elements.tip.css({marginTop:v})}}function j(){var s=this;if(s.elements.title!==null){s.elements.title.remove()}s.elements.title=f('<div class="'+s.options.style.classes.title+'">').css(q(s.options.style.title,true)).css({zoom:(f.browser.msie)?1:0}).prependTo(s.elements.contentWrapper);if(s.options.content.title.text){s.updateTitle.call(s,s.options.content.title.text)}if(s.options.content.title.button!==false&&typeof s.options.content.title.button=="string"){s.elements.button=f('<a class="'+s.options.style.classes.button+'" style="float:right; position: relative"></a>').css(q(s.options.style.button,true)).html(s.options.content.title.button).prependTo(s.elements.title).click(function(t){if(!s.status.disabled){s.hide(t)}})}}function l(){var t,v,u,s;t=this;v=t.options.show.when.target;u=t.options.hide.when.target;if(t.options.hide.fixed){u=u.add(t.elements.tooltip)}if(t.options.hide.when.event=="inactive"){s=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];function y(z){if(t.status.disabled===true){return}clearTimeout(t.timers.inactive);t.timers.inactive=setTimeout(function(){f(s).each(function(){u.unbind(this+".qtip-inactive");t.elements.content.unbind(this+".qtip-inactive")});t.hide(z)},t.options.hide.delay)}}else{if(t.options.hide.fixed===true){t.elements.tooltip.bind("mouseover.qtip",function(){if(t.status.disabled===true){return}clearTimeout(t.timers.hide)})}}function x(z){if(t.status.disabled===true){return}if(t.options.hide.when.event=="inactive"){f(s).each(function(){u.bind(this+".qtip-inactive",y);t.elements.content.bind(this+".qtip-inactive",y)});y()}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.timers.show=setTimeout(function(){t.show(z)},t.options.show.delay)}function w(z){if(t.status.disabled===true){return}if(t.options.hide.fixed===true&&t.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&f(z.relatedTarget).parents("div.qtip[qtip]").length>0){z.stopPropagation();z.preventDefault();clearTimeout(t.timers.hide);return false}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.elements.tooltip.stop(true,true);t.timers.hide=setTimeout(function(){t.hide(z)},t.options.hide.delay)}if((t.options.show.when.target.add(t.options.hide.when.target).length===1&&t.options.show.when.event==t.options.hide.when.event&&t.options.hide.when.event!=="inactive")||t.options.hide.when.event=="unfocus"){t.cache.toggle=0;v.bind(t.options.show.when.event+".qtip",function(z){if(t.cache.toggle==0){x(z)}else{w(z)}})}else{v.bind(t.options.show.when.event+".qtip",x);if(t.options.hide.when.event!=="inactive"){u.bind(t.options.hide.when.event+".qtip",w)}}if(t.options.position.type.search(/(fixed|absolute)/)!==-1){t.elements.tooltip.bind("mouseover.qtip",t.focus)}if(t.options.position.target==="mouse"&&t.options.position.type!=="static"){v.bind("mousemove.qtip",function(z){t.cache.mouse={x:z.pageX,y:z.pageY};if(t.status.disabled===false&&t.options.position.adjust.mouse===true&&t.options.position.type!=="static"&&t.elements.tooltip.css("display")!=="none"){t.updatePosition(z)}})}}function o(u,v,A){var z,s,x,y,t,w;z=this;if(A.corner=="center"){return v.position}s=f.extend({},u);y={x:false,y:false};t={left:(s.left<f.fn.qtip.cache.screen.scroll.left),right:(s.left+A.dimensions.width+2>=f.fn.qtip.cache.screen.width+f.fn.qtip.cache.screen.scroll.left),top:(s.top<f.fn.qtip.cache.screen.scroll.top),bottom:(s.top+A.dimensions.height+2>=f.fn.qtip.cache.screen.height+f.fn.qtip.cache.screen.scroll.top)};x={left:(t.left&&(A.corner.search(/right/i)!=-1||(A.corner.search(/right/i)==-1&&!t.right))),right:(t.right&&(A.corner.search(/left/i)!=-1||(A.corner.search(/left/i)==-1&&!t.left))),top:(t.top&&A.corner.search(/top/i)==-1),bottom:(t.bottom&&A.corner.search(/bottom/i)==-1)};if(x.left){if(z.options.position.target!=="mouse"){s.left=v.position.left+v.dimensions.width}else{s.left=z.cache.mouse.x}y.x="Left"}else{if(x.right){if(z.options.position.target!=="mouse"){s.left=v.position.left-A.dimensions.width}else{s.left=z.cache.mouse.x-A.dimensions.width}y.x="Right"}}if(x.top){if(z.options.position.target!=="mouse"){s.top=v.position.top+v.dimensions.height}else{s.top=z.cache.mouse.y}y.y="top"}else{if(x.bottom){if(z.options.position.target!=="mouse"){s.top=v.position.top-A.dimensions.height}else{s.top=z.cache.mouse.y-A.dimensions.height}y.y="bottom"}}if(s.left<0){s.left=u.left;y.x=false}if(s.top<0){s.top=u.top;y.y=false}if(z.options.style.tip.corner!==false){s.corner=new String(A.corner);if(y.x!==false){s.corner=s.corner.replace(/Left|Right|Middle/,y.x)}if(y.y!==false){s.corner=s.corner.replace(/top|bottom/,y.y)}if(s.corner!==z.elements.tip.attr("rel")){e.call(z,s.corner)}}return s}function q(u,t){var v,s;v=f.extend(true,{},u);for(s in v){if(t===true&&s.search(/(tip|classes)/i)!==-1){delete v[s]}else{if(!t&&s.search(/(width|border|tip|title|classes|user)/i)!==-1){delete v[s]}}}return v}function c(s){if(typeof s.tip!=="object"){s.tip={corner:s.tip}}if(typeof s.tip.size!=="object"){s.tip.size={width:s.tip.size,height:s.tip.size}}if(typeof s.border!=="object"){s.border={width:s.border}}if(typeof s.width!=="object"){s.width={value:s.width}}if(typeof s.width.max=="string"){s.width.max=parseInt(s.width.max.replace(/([0-9]+)/i,"$1"))}if(typeof s.width.min=="string"){s.width.min=parseInt(s.width.min.replace(/([0-9]+)/i,"$1"))}if(typeof s.tip.size.x=="number"){s.tip.size.width=s.tip.size.x;delete s.tip.size.x}if(typeof s.tip.size.y=="number"){s.tip.size.height=s.tip.size.y;delete s.tip.size.y}return s}function a(){var s,t,u,x,v,w;s=this;u=[true,{}];for(t=0;t<arguments.length;t++){u.push(arguments[t])}x=[f.extend.apply(f,u)];while(typeof x[0].name=="string"){x.unshift(c(f.fn.qtip.styles[x[0].name]))}x.unshift(true,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},f.fn.qtip.styles.defaults);v=f.extend.apply(f,x);w=(f.browser.msie)?1:0;v.tip.size.width+=w;v.tip.size.height+=w;if(v.tip.size.width%2>0){v.tip.size.width+=1}if(v.tip.size.height%2>0){v.tip.size.height+=1}if(v.tip.corner===true){v.tip.corner=(s.options.position.corner.tooltip==="center")?false:s.options.position.corner.tooltip}return v}function b(v,u,t){var s={bottomRight:[[0,0],[u,t],[u,0]],bottomLeft:[[0,0],[u,0],[0,t]],topRight:[[0,t],[u,0],[u,t]],topLeft:[[0,0],[0,t],[u,t]],topMiddle:[[0,t],[u/2,0],[u,t]],bottomMiddle:[[0,0],[u,0],[u/2,t]],rightMiddle:[[0,0],[u,t/2],[0,t]],leftMiddle:[[u,0],[u,t],[0,t/2]]};s.leftTop=s.bottomRight;s.rightTop=s.bottomLeft;s.leftBottom=s.topRight;s.rightBottom=s.topLeft;return s[v]}function g(s){var t;if(f("<canvas>").get(0).getContext){t={topLeft:[s,s],topRight:[0,s],bottomLeft:[s,0],bottomRight:[0,0]}}else{if(f.browser.msie){t={topLeft:[-90,90,0],topRight:[-90,90,-s],bottomLeft:[90,270,0],bottomRight:[90,270,-s]}}}return t}function k(){var s,t,u;s=this;u=s.getDimensions();t='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+u.height+"px; width:"+u.width+'px" />';s.elements.bgiframe=s.elements.wrapper.prepend(t).children(".qtip-bgiframe:first")}f(document).ready(function(){f.fn.qtip.cache={screen:{scroll:{left:f(window).scrollLeft(),top:f(window).scrollTop()},width:f(window).width(),height:f(window).height()}};var s;f(window).bind("resize scroll",function(t){clearTimeout(s);s=setTimeout(function(){if(t.type==="scroll"){f.fn.qtip.cache.screen.scroll={left:f(window).scrollLeft(),top:f(window).scrollTop()}}else{f.fn.qtip.cache.screen.width=f(window).width();f.fn.qtip.cache.screen.height=f(window).height()}for(i=0;i<f.fn.qtip.interfaces.length;i++){var u=f.fn.qtip.interfaces[i];if(u.status.rendered===true&&(u.options.position.type!=="static"||u.options.position.adjust.scroll&&t.type==="scroll"||u.options.position.adjust.resize&&t.type==="resize")){u.updatePosition(t,true)}}},100)});f(document).bind("mousedown.qtip",function(t){if(f(t.target).parents("div.qtip").length===0){f(".qtip[unfocus]").each(function(){var u=f(this).qtip("api");if(f(this).is(":visible")&&!u.status.disabled&&f(t.target).add(u.elements.target).length>1){u.hide(t)}})}})});f.fn.qtip.interfaces=[];f.fn.qtip.log={error:function(){return this}};f.fn.qtip.constants={};f.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:"absolute",container:false},show:{when:{target:false,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};f.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}})(jQuery);;
/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)
},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map

$newJquery = $.noConflict(true);;
/**!
 * trunk8 v1.3.3
 * https://github.com/rviscomi/trunk8
 * 
 * Copyright 2012 Rick Viscomi
 * Released under the MIT License.
 * 
 * Date: September 26, 2012
 */

(function ($newJquery) {
	var methods,
		utils,
		SIDES = {
			/* cen...ter */
			center: 'center',
			/* ...left */
			left: 'left',
			/* right... */
			right: 'right'
		},
		WIDTH = {
			auto: 'auto'
		};
	
	function trunk8(element) {
		this.$newJqueryelement = $newJquery(element);
		this.original_text = $newJquery.trim(this.$newJqueryelement.html());
		this.settings = $newJquery.extend({}, $newJquery.fn.trunk8.defaults);
	}
	
	trunk8.prototype.updateSettings = function (options) {
		this.settings = $newJquery.extend(this.settings, options);
	};

	function stripHTML(html) {
		var tmp = document.createElement("DIV");
		tmp.innerHTML = html;
		
		if (typeof tmp.textContent != 'undefined') {
			return tmp.textContent;
		}

		return tmp.innerText;
	}

	function getHtmlArr(str) {
		/* Builds an array of strings and designated */
		/* HTML tags around them. */
		if (stripHTML(str) === str) {
			return str.split(/\s/g);
		}
		var allResults = [],
			reg = /<([a-z]+)([^<]*)(?:>([\S\s]*?(?!<\1>))<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/ig,
			outArr = reg.exec(str),
			lastI,
			ind;
		while (outArr && lastI !== reg.lastIndex) {
			lastI = reg.lastIndex;
			if (outArr[5]) {
				allResults.push(outArr[5]);
			} else if (outArr[1]) {
				allResults.push({
					tag: outArr[1],
					attribs: outArr[2],
					content: outArr[3],
					after: outArr[4]
				});
			}
			outArr = reg.exec(str);
		}
		for (ind = 0; ind < allResults.length; ind++) {
			if (typeof allResults[ind] !== 'string' &&
					allResults[ind].content) {
				allResults[ind].content = getHtmlArr(allResults[ind].content);
			}
		}
		return allResults;
	}

	function rebuildHtmlFromBite(bite, htmlObject, fill) {
		// Take the processed bite after binary-search
		// truncated and re-build the original HTML
		// tags around the processed string.
		bite = bite.replace(fill, '');

		var biteHelper = function(contentArr, tagInfo) {
				var retStr = '',
					content,
					biteContent,
					biteLength,
					nextWord,
					i;
				for (i = 0; i < contentArr.length; i++) {
					content = contentArr[i];
					biteLength = $newJquery.trim(bite).split(' ').length;
					if ($newJquery.trim(bite).length) {
						if (typeof content === 'string') {
							if (!/<br\s*\/?>/i.test(content)) {
								if (biteLength === 1 && $newJquery.trim(bite).length <= content.length) {
									content = bite;
									// We want the fill to go inside of the last HTML
									// element if the element is a container.
									if (tagInfo === 'p' || tagInfo === 'div') {
										content += fill;
									}
									bite = '';
								} else {
									bite = bite.replace(content, '');
								}
							}
							retStr += $newJquery.trim(content) + ((i === contentArr.length-1 || biteLength <= 1) ? '' : ' ');
						} else {
							biteContent = biteHelper(content.content, content.tag);
							if (content.after) bite = bite.replace(content.after, '');
							if (biteContent) {
								if (!content.after) content.after = ' ';
								retStr += '<'+content.tag+content.attribs+'>'+biteContent+'</'+content.tag+'>' + content.after;
							}
						}
					}
				}
				return retStr;
			},
			htmlResults = biteHelper(htmlObject);

		// Add fill if doesn't exist. This will place it outside the HTML elements.
		if (htmlResults.slice(htmlResults.length - fill.length) !== fill) {
			htmlResults += fill;
		}

		return htmlResults;
	}

	function truncate() {
		var data = this.data('trunk8'),
			settings = data.settings,
			width = settings.width,
			side = settings.side,
			fill = settings.fill,
			parseHTML = settings.parseHTML,
			calcLineHeight = (settings.line_height > 0) ? settings.line_height : utils.getLineHeight(this), // customized line height for e1
			line_height = calcLineHeight * settings.lines,
			str = data.original_text,
			length = str.length,
			max_bite = '',
			lower, upper,
			bite_size,
			bite,
			text,
			htmlObject;
		//console.log('line_height: ' + line_height);
		/* Reset the field to the original string. */
		this.html(str);
		text = this.text();

		/* If string has HTML and parse HTML is set, build */
		/* the data struct to house the tags */
		if (parseHTML && stripHTML(str) !== str) {
			htmlObject = getHtmlArr(str);
			str = stripHTML(str);
			length = str.length;
		}

		if (width === WIDTH.auto) {
			/* Assuming there is no "overflow: hidden". */
			if (this.height() <= line_height) {
				/* Text is already at the optimal trunkage. */
				return;
			}

			/* Binary search technique for finding the optimal trunkage. */
			/* Find the maximum bite without overflowing. */
			lower = 0;
			upper = length - 1;

			while (lower <= upper) {
				bite_size = lower + ((upper - lower) >> 1);
				
				bite = utils.eatStr(str, side, length - bite_size, fill);

			/*	if (parseHTML && htmlObject) {
					bite = rebuildHtmlFromBite(bite, htmlObject, fill);
				}
				*/
				this.html(bite);

				/* Check for overflow. */
				if (this.height() > line_height) {
					upper = bite_size - 1;
				}
				else {
					lower = bite_size + 1;

					/* Save the bigger bite. */
					max_bite = (max_bite.length > bite.length) ? max_bite : bite;
				}
			}

			/* Reset the content to eliminate possible existing scroll bars. */
			this.html('');
			
			/* Display the biggest bite. */
			this.html(max_bite);
			
			if (settings.tooltip) {
				this.attr('title', text);
			}
		}
		else if (!isNaN(width)) {
			bite_size = length - width;

			bite = utils.eatStr(str, side, bite_size, fill);

			this.html(bite);
			
			if (settings.tooltip) {
				this.attr('title', str);
			}
		}
		else {
			$newJquery.error('Invalid width "' + width + '".');
			return;
		}
		settings.onTruncate();
	}

	methods = {
		init: function (options) {
			return this.each(function () {
				var $newJquerythis = $newJquery(this),
					data = $newJquerythis.data('trunk8');
				
				if (!data) {
					$newJquerythis.data('trunk8', (data = new trunk8(this)));
				}
				
				data.updateSettings(options);
				
				truncate.call($newJquerythis);
			});
		},

		/** Updates the text value of the elements while maintaining truncation. */
		update: function (new_string) {
			return this.each(function () {
				var $newJquerythis = $newJquery(this);
				
				/* Update text. */
				if (new_string) {
					$newJquerythis.data('trunk8').original_text = new_string;
				}

				/* Truncate accordingly. */
				truncate.call($newJquerythis);
			});
		},
		
		revert: function () {
			return this.each(function () {
				/* Get original text. */
				var text = $newJquery(this).data('trunk8').original_text;
				
				/* Revert element to original text. */
				$newJquery(this).html(text);
			});
		},

		/** Returns this instance's settings object. NOT CHAINABLE. */
		getSettings: function () {
			return $newJquery(this.get(0)).data('trunk8').settings;
		}
	};

	utils = {
		/** Replaces [bite_size] [side]-most chars in [str] with [fill]. */
		eatStr: function (str, side, bite_size, fill) {
			var length = str.length,
				key = utils.eatStr.generateKey.apply(null, arguments),
				half_length,
				half_bite_size;

			/* If the result is already in the cache, return it. */
			if (utils.eatStr.cache[key]) {
				return utils.eatStr.cache[key];
			}
			
			/* Common error handling. */
			if ((typeof str !== 'string') || (length === 0)) {
				$newJquery.error('Invalid source string "' + str + '".');
			}
			if ((bite_size < 0) || (bite_size > length)) {
				$newJquery.error('Invalid bite size "' + bite_size + '".');
			}
			else if (bite_size === 0) {
				/* No bite should show no truncation. */
				return str;
			}
			if (typeof (fill + '') !== 'string') {
				$newJquery.error('Fill unable to be converted to a string.');
			}

			/* Compute the result, store it in the cache, and return it. */
			switch (side) {
				case SIDES.right:
					/* str... */
					return utils.eatStr.cache[key] =
							$newJquery.trim(str.substr(0, length - bite_size)) + fill;
					
				case SIDES.left:
					/* ...str */
					return utils.eatStr.cache[key] =
							fill + $newJquery.trim(str.substr(bite_size));
					
				case SIDES.center:
					/* Bit-shift to the right by one === Math.floor(x / 2) */
					half_length = length >> 1; // halve the length
					half_bite_size = bite_size >> 1; // halve the bite_size

					/* st...r */
					return utils.eatStr.cache[key] =
							$newJquery.trim(utils.eatStr(str.substr(0, length - half_length), SIDES.right, bite_size - half_bite_size, '')) +
							fill +
							$newJquery.trim(utils.eatStr(str.substr(length - half_length), SIDES.left, half_bite_size, ''));
					
				default:
					$newJquery.error('Invalid side "' + side + '".');
			}
		},
		
		getLineHeight: function (elem) {
				var floats = $newJquery(elem).css('float');
				if (floats !== 'none') {
					$newJquery(elem).css('float', 'none');
				}
				var pos = $newJquery(elem).css('position');
				if (pos === 'absolute') {
					$newJquery(elem).css('position', 'static');
				}
	
				var html = $newJquery(elem).html(),
				wrapper_id = 'line-height-test',
				line_height;
	
				/* Set the content to a small single character and wrap. */
				$newJquery(elem).html('i').wrap('<div id="' + wrapper_id + '" />');
	
				/* Calculate the line height by measuring the wrapper.*/
				line_height = $newJquery('#' + wrapper_id).innerHeight();
	
				/* Remove the wrapper and reset the content. */
				$newJquery(elem).html(html).css({ 'float': floats, 'position': pos }).unwrap();
	
				return line_height;
			}
	};

	utils.eatStr.cache = {};
	utils.eatStr.generateKey = function () {
		return Array.prototype.join.call(arguments, '');
	};
	
	$newJquery.fn.trunk8 = function (method) {
		if (methods[method]) {
			return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
		}
		else if (typeof method === 'object' || !method) {
			return methods.init.apply(this, arguments);
		}
		else {
			$newJquery.error('Method ' + method + ' does not exist on jQuery.trunk8');
		}
	};
	
	/* Default trunk8 settings. */
	$newJquery.fn.trunk8.defaults = {
		fill: '&hellip;',
		lines: 1,
		side: SIDES.right,
		tooltip: true,
		width: WIDTH.auto,
		parseHTML: false,
		onTruncate: function () {}
	};
})(jQuery);
;

trunk8base = {
    fill: '<span class="fade-title"></span>',
    lines: 2,
    side: 'right',
    tooltip: true,
    width: 'auto',
    parseHTML: true,
};
var trunk8 = {
  'catalog_title'		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>'}),
  'catalog_desc' 		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'Prerequisite_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>'}),
  'Prerequisite_desc' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'catalogclsmul_title'  : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'catalogclsmul_desc' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'embedwidget_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'embedwidget_desc' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'tpgroup_title'        : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>', lines: 2,line_height: 17}),
  'tpmod_title'  		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>', lines: 2,line_height: 17}),
  'tpmod_desc' 			 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'forum_title'  		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'forum_desc'    		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'forumtopic_title'  	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'forumtopic_desc'    	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  //'detailforumtopic_title' : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 3,line_height: 17}),
  'report_title'  		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'report_desc'  		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'mylearnmulcls_title'  : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'mylearnmulcls_desc' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'myenroll_title'		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'myenroll_desc'		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 4,line_height: 17,tooltip:false}),
  'myprogramLP_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'myprogramLP_desc'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 4,line_height: 17,tooltip:false}),
  'myprogramres_desc'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 4,line_height: 17,tooltip:false}),
  'myprogramClass_title' : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'myprogramClass_desc'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 2,line_height: 17,tooltip:false}),
  'myprogramModule_title' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'myprogramModule_desc'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 2,line_height: 17,tooltip:false}),
  'spot_title'			 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'spot_desc'    		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 4,line_height: 17,tooltip:false}),
  'spotleader_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'ins_title'			 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'ins_desc' 			 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'myteam_title'		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'myteam_desc' 		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'myteamname_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'admin_title'	 		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>', line_height: 17 }),
  'admin_desc' 	 		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'profile_title'	     : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'profile_desc' 	 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'profileact_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'profileskill_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'transcript_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:2,line_height: 17}),
  'cal_title'			 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'ann_title'		     : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'ann_desc' 		     : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'usercatalog_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',line_height: 17}),
  'frmreplyusr_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:1,line_height: 17}),
  'usrcatjobrole_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:1,line_height: 17}),
  'shoppingCart_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:1,line_height: 17}),
  'contstrip_title'	 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:4,line_height: 17}),
  'homebanner_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:1,line_height: 17}),
  'homebanner_desc' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines:5,line_height: 17,tooltip:false}),
  'admin_short_desc' 	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines:4,line_height: 17,tooltip:false}),
  'contPlyCls_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines:1,line_height: 17}),
  'content_title'		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>'}),
  'content_desc'		 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 4,line_height: 17,tooltip:false}),
  'class_detail_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'class_detail_desc'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'lp_detail_course_desc'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 3,line_height: 17,tooltip:false}),
  'class_detail_add_desc' : jQuery.extend({}, trunk8base, {fill :'<span class="fade-desc"><span id="arrow-more"></span></span>', lines: 5,line_height: 17,tooltip:false}),
  'admin_class_detail_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 1,line_height: 17}),
  'whois_username_title'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 2,line_height: 17}),
  'whois_jobtitle'	 : jQuery.extend({}, trunk8base, {fill :'<span class="fade-title"></span>',lines: 1,line_height: 17})
  
};
$(document).ready(function() {
	
	//$('.limit-desc').load
	$(document).delegate('#arrow-more','click',function (event) {
		var _this = $(this);
		// Fix for #0074904
		var parent = $(this).parents('.limit-desc');
		//console.log
		_this.parents('.limit-desc').attr({
			title1: _this.attr('title'),
			titletemp1: _this.attr('titletemp')
		})
		.removeAttr('title')
		.removeAttr('titletemp');
		
	    //$(this).parents('.limit-desc').trunk8('revert').append('<span id="full-desc"></span>');
		parent.trunk8('revert');
		if(parent.children().not('br').size() > 1){
		  parent.children().not('br').last().append('<span id="arrow-less"></span>');
		}else{
			parent.append('<span id="arrow-less"></span>');
		}
		scrollBar_Refresh('myteam');
		scrollBar_Refresh('catalog');
		scrollBar_Refresh('learning');
		if($('.lnr-tainingplan-register').length > 0) {
			scrollBar_Refresh('tp-select-class');
		}
		if($('#lnr-prerequisite-container').length > 0){
			$('#lnr-prerequisite-container #gview_lnr-prerequisite').jScrollPane();
		  }
		return false;
	});
	$(document).delegate('#arrow-less','click', function (event) {
		var _this = $(this);
		_this.parents('.limit-desc').attr({
			title: _this.attr('title1'),
			titletemp: _this.attr('titletemp1')
		})
		.removeAttr('title1')
		.removeAttr('titletemp1');
	  $(this).parents('.limit-desc').trunk8();
	  scrollBar_Refresh('myteam');
	  scrollBar_Refresh('catalog');
	  scrollBar_Refresh('learning');
	  if($('.lnr-tainingplan-register').length > 0) {
		scrollBar_Refresh('tp-select-class');
	  }
	  if($('#lnr-prerequisite-container').length > 0){
		  $('#lnr-prerequisite-container #gview_lnr-prerequisite').jScrollPane();
	  }
	  return false;
	  });
});
;
/* The MIT License (MIT)

Copyright (c) 2014-2015 Benoit Tremblay <trembl.ben@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE. */
/*global define, YT*/
(function (root, factory) {
  if(typeof define === 'function' && define.amd) {
    define(['videojs'], function(videojs){
      return (root.Youtube = factory(videojs));
    });
  } else if(typeof module === 'object' && module.exports) {
    module.exports = factory(require('video.js'));
  } else {
    root.Youtube = factory(root.videojs);
  }
}(this, function(videojs) {
  'use strict';

  var Tech = videojs.getComponent('Tech');

  var Youtube = videojs.extend(Tech, {

    constructor: function(options, ready) {
      Tech.call(this, options, ready);

      this.setPoster(options.poster);
      this.setSrc(this.options_.source, true);

      // Set the vjs-youtube class to the player
      // Parent is not set yet so we have to wait a tick
      setTimeout(function() {
        this.el_.parentNode.className += ' vjs-youtube';

        if (_isOnMobile) {
          this.el_.parentNode.className += ' vjs-youtube-mobile';
        }

        if (Youtube.isApiReady) {
          this.initYTPlayer();
        } else {
          Youtube.apiReadyQueue.push(this);
        }
      }.bind(this));
    },

    dispose: function() {
      this.el_.parentNode.className = this.el_.parentNode.className
        .replace(' vjs-youtube', '')
        .replace(' vjs-youtube-mobile', '');
    },

    createEl: function() {
      var div = document.createElement('div');
      div.setAttribute('id', this.options_.techId);
      div.setAttribute('style', 'width:100%;height:100%;top:0;left:0;position:absolute');

      var divWrapper = document.createElement('div');
      divWrapper.appendChild(div);

      if (!_isOnMobile && !this.options_.ytControls) {
        var divBlocker = document.createElement('div');
        divBlocker.setAttribute('class', 'vjs-iframe-blocker');
        divBlocker.setAttribute('style', 'position:absolute;top:0;left:0;width:100%;height:100%');

        // In case the blocker is still there and we want to pause
        divBlocker.onclick = function() {
          this.pause();
        }.bind(this);

        divWrapper.appendChild(divBlocker);
      }

      return divWrapper;
    },

    initYTPlayer: function() {
      var playerVars = {
        controls: 0,
        modestbranding: 1,
        rel: 0,
        showinfo: 0,
        loop: this.options_.loop ? 1 : 0,
		iv_load_policy: 3,
		wmode: "opaque"
      };

      // Let the user set any YouTube parameter
      // https://developers.google.com/youtube/player_parameters?playerVersion=HTML5#Parameters
      // To use YouTube controls, you must use ytControls instead
      // To use the loop or autoplay, use the video.js settings

      if (typeof this.options_.autohide !== 'undefined') {
        playerVars.autohide = this.options_.autohide;
      }

      if (typeof this.options_['cc_load_policy'] !== 'undefined') {
        playerVars['cc_load_policy'] = this.options_['cc_load_policy'];
      }

      if (typeof this.options_.ytControls !== 'undefined') {
        playerVars.controls = this.options_.ytControls;
      }

      if (typeof this.options_.disablekb !== 'undefined') {
        playerVars.disablekb = this.options_.disablekb;
      }

      if (typeof this.options_.end !== 'undefined') {
        playerVars.end = this.options_.end;
      }

      if (typeof this.options_.color !== 'undefined') {
        playerVars.color = this.options_.color;
      }

      if (!playerVars.controls) {
        // Let video.js handle the fullscreen unless it is the YouTube native controls
        playerVars.fs = 0;
      } else if (typeof this.options_.fs !== 'undefined') {
        playerVars.fs = this.options_.fs;
      }

      if (typeof this.options_.end !== 'undefined') {
        playerVars.end = this.options_.end;
      }

      if (typeof this.options_.hl !== 'undefined') {
        playerVars.hl = this.options_.hl;
      } else if (typeof this.options_.language !== 'undefined') {
        // Set the YouTube player on the same language than video.js
        playerVars.hl = this.options_.language.substr(0, 2);
      }

      if (typeof this.options_['iv_load_policy'] !== 'undefined') {
        playerVars['iv_load_policy'] = this.options_['iv_load_policy'];
      }

      if (typeof this.options_.list !== 'undefined') {
        playerVars.list = this.options_.list;
      } else if (this.url && typeof this.url.listId !== 'undefined') {
        playerVars.list = this.url.listId;
      }

      if (typeof this.options_.listType !== 'undefined') {
        playerVars.listType = this.options_.listType;
      }

      if (typeof this.options_.modestbranding !== 'undefined') {
        playerVars.modestbranding = this.options_.modestbranding;
      }

      if (typeof this.options_.playlist !== 'undefined') {
        playerVars.playlist = this.options_.playlist;
      }

      if (typeof this.options_.playsinline !== 'undefined') {
        playerVars.playsinline = this.options_.playsinline;
      }

      if (typeof this.options_.rel !== 'undefined') {
        playerVars.rel = this.options_.rel;
      }

      if (typeof this.options_.showinfo !== 'undefined') {
        playerVars.showinfo = this.options_.showinfo;
      }

      if (typeof this.options_.start !== 'undefined') {
        playerVars.start = this.options_.start;
      }

      if (typeof this.options_.theme !== 'undefined') {
        playerVars.theme = this.options_.theme;
      }

      this.activeVideoId = this.url ? this.url.videoId : null;
      this.activeList = playerVars.list;

      this.ytPlayer = new YT.Player(this.options_.techId, {
        videoId: this.activeVideoId,
        playerVars: playerVars,
        events: {
          onReady: this.onPlayerReady.bind(this),
          onPlaybackQualityChange: this.onPlayerPlaybackQualityChange.bind(this),
          onStateChange: this.onPlayerStateChange.bind(this),
          onError: this.onPlayerError.bind(this)
        }
      });
    },

    onPlayerReady: function() {
      this.playerReady_ = true;
      this.triggerReady();

      if (this.playOnReady) {
        this.play();
      }
    },

    onPlayerPlaybackQualityChange: function() {

    },

    onPlayerStateChange: function(e) {
      var state = e.data;

      if (state === this.lastState || this.errorNumber) {
        return;
      }

      switch (state) {
        case -1:
          this.trigger('loadedmetadata');
          this.trigger('durationchange');
          break;

        case YT.PlayerState.ENDED:
          this.trigger('ended');
          break;

        case YT.PlayerState.PLAYING:
          this.trigger('timeupdate');
          this.trigger('durationchange');
          this.trigger('playing');
          this.trigger('play');

          if (this.isSeeking) {
            this.onSeeked();
          }
          break;

        case YT.PlayerState.PAUSED:
          this.trigger('canplay');
          if (this.isSeeking) {
            this.onSeeked();
          } else {
            this.trigger('pause');
          }
          break;

        case YT.PlayerState.BUFFERING:
          this.player_.trigger('timeupdate');
          this.player_.trigger('waiting');
          break;
      }

      this.lastState = state;
    },

    onPlayerError: function(e) {
      this.errorNumber = e.data;
      this.trigger('error');

      this.ytPlayer.stopVideo();
      this.ytPlayer.destroy();
      this.ytPlayer = null;
    },

    error: function() {
      switch (this.errorNumber) {
        case 5:
          return { code: 'Error while trying to play the video' };

        case 2:
        case 100:
        case 150:
          return { code: 'Unable to find the video' };

        case 101:
          return { code: 'Playback on other Websites has been disabled by the video owner.' };
      }

      return { code: 'YouTube unknown error (' + this.errorNumber + ')' };
    },

    src: function(src) {
      if (src) {
        this.setSrc({ src: src });

        if (this.options_.autoplay && !_isOnMobile) {
          this.play();
        }
      }

      return this.source;
    },

    poster: function() {
      // You can't start programmaticlly a video with a mobile
      // through the iframe so we hide the poster and the play button (with CSS)
      if (_isOnMobile) {
        return null;
      }

      return this.poster_;
    },

    setPoster: function(poster) {
      this.poster_ = poster;
    },

    setSrc: function(source) {
      if (!source || !source.src) {
        return;
      }

      delete this.errorNumber;
      this.source = source;
      this.url = Youtube.parseUrl(source.src);

      if (!this.options_.poster) {
        if (this.url.videoId) {
          // Set the low resolution first
          this.poster_ = 'https://img.youtube.com/vi/' + this.url.videoId + '/0.jpg';

          // Check if their is a high res
          this.checkHighResPoster();
        }
      }

      if (this.options_.autoplay && !_isOnMobile) {
        if (this.isReady_) {
          this.play();
        } else {
          this.playOnReady = true;
        }
      }
    },

    play: function() {
      if (!this.url || !this.url.videoId) {
        return;
      }

      this.wasPausedBeforeSeek = false;

      if (this.isReady_) {
        if (this.url.listId) {
          if (this.activeList === this.url.listId) {
            this.ytPlayer.playVideo();
          } else {
            this.ytPlayer.loadPlaylist(this.url.listId);
            this.activeList = this.url.listId;
          }
        }

        if (this.activeVideoId === this.url.videoId) {
          this.ytPlayer.playVideo();
        } else {
          this.ytPlayer.loadVideoById(this.url.videoId);
          this.activeVideoId = this.url.videoId;
        }
      } else {
        this.trigger('waiting');
        this.playOnReady = true;
      }
    },

    pause: function() {
      if (this.ytPlayer) {
        this.ytPlayer.pauseVideo();
      }
    },

    paused: function() {
      return (this.ytPlayer) ?
        (this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING)
        : true;
    },

    currentTime: function() {
      return this.ytPlayer ? this.ytPlayer.getCurrentTime() : 0;
    },

    setCurrentTime: function(seconds) {
      if (this.lastState === YT.PlayerState.PAUSED) {
        this.timeBeforeSeek = this.currentTime();
      }

      if (!this.isSeeking) {
        this.wasPausedBeforeSeek = this.paused();
      }

      this.ytPlayer.seekTo(seconds, true);
      this.trigger('timeupdate');
      this.trigger('seeking');
      this.isSeeking = true;

      // A seek event during pause does not return an event to trigger a seeked event,
      // so run an interval timer to look for the currentTime to change
      if (this.lastState === YT.PlayerState.PAUSED && this.timeBeforeSeek !== seconds) {
        clearInterval(this.checkSeekedInPauseInterval);
        this.checkSeekedInPauseInterval = setInterval(function() {
          if (this.lastState !== YT.PlayerState.PAUSED || !this.isSeeking) {
            // If something changed while we were waiting for the currentTime to change,
            //  clear the interval timer
            clearInterval(this.checkSeekedInPauseInterval);
          } else if (this.currentTime() !== this.timeBeforeSeek) {
            this.trigger('timeupdate');
            this.onSeeked();
          }
        }.bind(this), 250);
      }
    },

    onSeeked: function() {
      clearInterval(this.checkSeekedInPauseInterval);
      this.isSeeking = false;

      if (this.wasPausedBeforeSeek) {
        this.pause();
      }

      this.trigger('seeked');
    },

    playbackRate: function() {
      return this.ytPlayer ? this.ytPlayer.getPlaybackRate() : 1;
    },

    setPlaybackRate: function(suggestedRate) {
      if (!this.ytPlayer) {
        return;
      }

      this.ytPlayer.setPlaybackRate(suggestedRate);
      this.trigger('ratechange');
    },

    duration: function() {
      return this.ytPlayer ? this.ytPlayer.getDuration() : 0;
    },

    currentSrc: function() {
      return this.source;
    },

    ended: function() {
      return this.ytPlayer ? (this.lastState === YT.PlayerState.ENDED) : false;
    },

    volume: function() {
      return this.ytPlayer ? this.ytPlayer.getVolume() / 100.0 : 1;
    },

    setVolume: function(percentAsDecimal) {
      if (!this.ytPlayer) {
        return;
      }

      this.ytPlayer.setVolume(percentAsDecimal * 100.0);
      this.setTimeout( function(){
        this.trigger('volumechange');
      }, 50);

    },

    muted: function() {
      return this.ytPlayer ? this.ytPlayer.isMuted() : false;
    },

    setMuted: function(mute) {
      if (!this.ytPlayer) {
        return;
      }
      else{
        this.muted(true);
      }

      if (mute) {
        this.ytPlayer.mute();
      } else {
        this.ytPlayer.unMute();
      }
      this.setTimeout( function(){
        this.trigger('volumechange');
      }, 50);
    },

    buffered: function() {
      if(!this.ytPlayer || !this.ytPlayer.getVideoLoadedFraction) {
        return {
          length: 0,
          start: function() {
            throw new Error('This TimeRanges object is empty');
          },
          end: function() {
            throw new Error('This TimeRanges object is empty');
          }
        };
      }

      var end = this.ytPlayer.getVideoLoadedFraction() * this.ytPlayer.getDuration();

      return {
        length: this.ytPlayer.getDuration(),
        start: function() { return 0; },
        end: function() { return end; }
      };
    },

    // TODO: Can we really do something with this on YouTUbe?
    load: function() {},
    reset: function() {},

    supportsFullScreen: function() {
    	// Added for #0065438
    	var isIE9 = (/MSIE\s9\.0/).test(navigator.userAgent);
       	if(isIE9){
    		return false;
    	}else{
    	    return true;
    	}
    },

    // Tries to get the highest resolution thumbnail available for the video
    checkHighResPoster: function(){
      var uri = 'https://img.youtube.com/vi/' + this.url.videoId + '/maxresdefault.jpg';

      try {
        var image = new Image();
        image.onload = function(){
          // Onload may still be called if YouTube returns the 120x90 error thumbnail
          if('naturalHeight' in image){
            if (image.naturalHeight <= 90 || image.naturalWidth <= 120) {
              return;
            }
          } else if(image.height <= 90 || image.width <= 120) {
            return;
          }

          this.poster_ = uri;
          this.trigger('posterchange');
        }.bind(this);
        image.onerror = function(){};
        image.src = uri;
      }
      catch(e){}
    }
  });

  Youtube.isSupported = function() {
    return true;
  };

  Youtube.canPlaySource = function(e) {
    return Youtube.canPlayType(e.type);
  };

  Youtube.canPlayType = function(e) {
    return (e === 'video/youtube');
  };

  var _isOnMobile = /(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);

  Youtube.parseUrl = function(url) {
    var result = {
      videoId: null
    };

    var regex = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
    var match = url.match(regex);

    if (match && match[2].length === 11) {
      result.videoId = match[2];
    }

    var regPlaylist = /[?&]list=([^#\&\?]+)/;
    match = url.match(regPlaylist);

    if(match && match[1]) {
      result.listId = match[1];
    }

    return result;
  };

  function loadApi() {
    var tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  }

  function injectCss() {
    var css = // iframe blocker to catch mouse events
              '.vjs-youtube .vjs-iframe-blocker { display: none; }' +
              '.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }' +
              '.vjs-youtube .vjs-poster { background-size: cover; }' +
              '.vjs-youtube-mobile .vjs-big-play-button { display: none; }';

    var head = document.head || document.getElementsByTagName('head')[0];

    var style = document.createElement('style');
    style.type = 'text/css';

    if (style.styleSheet){
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }

    head.appendChild(style);
  }

  Youtube.apiReadyQueue = [];

  window.onYouTubeIframeAPIReady = function() {
    Youtube.isApiReady = true;

    for (var i = 0; i < Youtube.apiReadyQueue.length; ++i) {
      Youtube.apiReadyQueue[i].initYTPlayer();
    }
  };

  loadApi();
  injectCss();

  // Older versions of VJS5 doesn't have the registerTech function
  if (typeof videojs.registerTech !== 'undefined') {
    videojs.registerTech('Youtube', Youtube);
  } else {
    videojs.registerComponent('Youtube', Youtube);
  }
}));
;
/* The MIT License (MIT)
Copyright (c) 2014-2015 Benoit Tremblay <trembl.ben@gmail.com>
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE. */
(function (root, factory) {
  if(typeof define === 'function' && define.amd) {
    define(['video.js'], function(videojs){
      return (root.Vimeo = factory(videojs));
    });
  } else if(typeof module === 'object' && module.exports) {
    module.exports = (root.Vimeo = factory(require('video.js')));
  } else {
    root.Vimeo = factory(root.videojs);
  }
}(this, function(videojs) {
  'use strict';
  
  var VimeoState = {
    UNSTARTED: -1,
    ENDED: 0,
    PLAYING: 1,
    PAUSED: 2,
    BUFFERING: 3
  };

  var Tech = videojs.getComponent('Tech');

  var Vimeo = videojs.extend(Tech, {
    constructor: function(options, ready) {
      Tech.call(this, options, ready);
      if(options.poster != "") {this.setPoster(options.poster);}
      this.setSrc(this.options_.source.src, true);

      // Set the vjs-vimeo class to the player
      // Parent is not set yet so we have to wait a tick
      setTimeout(function() {
        this.el_.parentNode.className += ' vjs-vimeo';
        
        if (Vimeo.isApiReady) {
          this.initPlayer();
        } else {
          Vimeo.apiReadyQueue.push(this);
        }
      }.bind(this));
      
    },
    
    dispose: function() {
      this.el_.parentNode.className = this.el_.parentNode.className.replace(' vjs-vimeo', '');
    },
    
    createEl: function() {
      this.vimeo = {};
      this.vimeoInfo = {};
      this.baseUrl = 'https://player.vimeo.com/video/';
      this.baseApiUrl = 'https://www.vimeo.com/api/v2/video/';
      this.videoId = Vimeo.parseUrl(this.options_.source.src).videoId;
      
      this.iframe = document.createElement('iframe');
      this.iframe.setAttribute('id', this.options_.techId);
      this.iframe.setAttribute('title', 'Vimeo Video Player');
      this.iframe.setAttribute('class', 'vimeoplayer');
      this.iframe.setAttribute('src', this.baseUrl + this.videoId + '?api=1&player_id=' + this.options_.techId);
      this.iframe.setAttribute('frameborder', '0');
      this.iframe.setAttribute('scrolling', 'no');
      this.iframe.setAttribute('marginWidth', '0');
      this.iframe.setAttribute('marginHeight', '0');
      this.iframe.setAttribute('webkitAllowFullScreen', '0');
      this.iframe.setAttribute('mozallowfullscreen', '0');
      this.iframe.setAttribute('allowFullScreen', '0');

      var divWrapper = document.createElement('div');
      // divWrapper.setAttribute('style', 'width:638px; height:358px; overflow:hidden; margin:0 auto;');
	  divWrapper.setAttribute('style', 'margin:0 auto;padding-bottom:56.25%;width:100%;height:0;position:relative;overflow:hidden;');
	  divWrapper.setAttribute('class', 'vimeoFrame');
      divWrapper.appendChild(this.iframe);

      if (!_isOnMobile && !this.options_.ytControls) {
        var divBlocker = document.createElement('div');
        divBlocker.setAttribute('class', 'vjs-iframe-blocker');
        divBlocker.setAttribute('style', 'position:absolute;top:0;left:0;width:100%;height:100%');

        // In case the blocker is still there and we want to pause
        divBlocker.onclick = function() {
          this.onPause();
        }.bind(this);

        divWrapper.appendChild(divBlocker);
      }
      
      if(this.options_.poster == "" && this.videoId != null) {
        $.getJSON(this.baseApiUrl + this.videoId + '.json?callback=?', {format: "json"}, (function(_this){
          return function(data) {
            // Set the low resolution first
            _this.setPoster(data[0].thumbnail_large);
          };
        })(this));
      }

      return divWrapper;
    },
    
    initPlayer: function() {
      var self = this;
      
      $(self.iframe).load(function(){
        var vimeoVideoID = Vimeo.parseUrl(self.options_.source.src).videoId;
        //load vimeo
        if (self.vimeo && self.vimeo.api) {
          self.vimeo.api('unload');
          delete self.vimeo;
        }
        
        self.vimeo = $f(self.iframe);
        
        self.vimeoInfo = {
          state: VimeoState.UNSTARTED,
          volume: 1,
          muted: false,
          muteVolume: 1,
          time: 0,
          duration: 0,
          buffered: 0,
          url: self.baseUrl + self.videoId,
          error: null
        };

        self.vimeo.addEvent('ready', function(id){
          self.onReady();

          self.vimeo.addEvent('loadProgress', function(data, id){ self.onLoadProgress(data); });
          self.vimeo.addEvent('playProgress', function(data, id){ self.onPlayProgress(data); });
          self.vimeo.addEvent('play', function(id){ self.onPlay(); });
          self.vimeo.addEvent('pause', function(id){ self.onPause(); });
          self.vimeo.addEvent('finish', function(id){ self.onFinish(); });
          self.vimeo.addEvent('seek', function(data, id){ self.onSeek(data); });

        });
      });
      
    },
    
    onReady: function(){
      this.playerReady_ = true;
      this.triggerReady();
      this.trigger('loadedmetadata');
      if (this.startMuted) {
        this.setMuted(true);
        this.startMuted = false;
      }
    },
    
    onLoadProgress: function(data) {
      var durationUpdate = !this.vimeoInfo.duration;
      this.vimeoInfo.duration = data.duration;
      this.vimeoInfo.buffered = data.percent;
      this.trigger('progress');
      if (durationUpdate) this.trigger('durationchange');
    },
    onPlayProgress: function(data) {
	  if(typeof this.vimeoInfo.duration == "undefined" || this.vimeoInfo.duration == 0) {
	  	this.vimeoInfo.duration = data.duration;
	  	this.duration(data.duration);
	  	this.trigger('durationchange');
	  }
      this.vimeoInfo.time = data.seconds;
      this.trigger('timeupdate');
    },
    onPlay: function() {
      this.vimeoInfo.state = VimeoState.PLAYING;
      this.trigger('play');
    },
    onPause: function() {
      this.vimeoInfo.state = VimeoState.PAUSED;
      this.trigger('pause');
    },
    onFinish: function() {
      this.vimeoInfo.state = VimeoState.ENDED;
      this.trigger('ended');
    },
    onSeek: function(data) {
      this.trigger('seeking');
      this.vimeoInfo.time = data.seconds;
      this.trigger('timeupdate');
      this.trigger('seeked');
    },
    onError: function(error){
      this.error = error;
      this.trigger('error');
    },
    
    error: function() {
      switch (this.errorNumber) {
        case 2:
          return { code: 'Unable to find the video' };

        case 5:
          return { code: 'Error while trying to play the video' };

        case 100:
          return { code: 'Unable to find the video' };

        case 101:
        case 150:
          return { code: 'Playback on other Websites has been disabled by the video owner.' };
      }

      return { code: 'Vimeo unknown error (' + this.errorNumber + ')' };
    },
    
    src: function() {
      return this.source;
    },

    poster: function() {
      return this.poster_;
    },

    setPoster: function(poster) {
      this.poster_ = poster;
    },

    setSrc: function(source) {
      if (!source || !source.src) {
        return;
      }

      this.source = source;
      this.url = Vimeo.parseUrl(source.src);

      if (!this.options_.poster && this.url.videoId != null) {
          $.getJSON(this.baseApiUrl + this.videoId + '.json?callback=?', {format: "json"}, (function(_this){
            return function(data) {
              // Set the low resolution first
              _this.poster_ = data[0].thumbnail_small;
            };
          })(this));

          // Check if their is a high res
          this.checkHighResPoster();
      }

      if (this.options_.autoplay && !_isOnMobile) {
        if (this.isReady_) {
          this.play();
        } else {
          this.playOnReady = true;
        }
      }
    },
    
    supportsFullScreen: function() {
    	// Added for #0065438
    	var isIE9 = (/MSIE\s9\.0/).test(navigator.userAgent);
    	if(isIE9){
    		return false;
    	}else{
    	    return true;
    	}
       },
    
    //TRIGGER
    load : function(){},
    play : function(){ this.vimeo.api('play'); },
    pause : function(){ this.vimeo.api('pause'); },
    paused : function(){
      return this.vimeoInfo.state !== VimeoState.PLAYING &&
             this.vimeoInfo.state !== VimeoState.BUFFERING;
    },

    currentTime : function(){ return this.vimeoInfo.time || 0; },

    setCurrentTime :function(seconds){
      this.vimeo.api('seekTo', seconds);
      this.player_.trigger('timeupdate');
    },

    duration :function(){ return this.vimeoInfo.duration || 0; },
    buffered :function(){ return videojs.createTimeRange(0, (this.vimeoInfo.buffered*this.vimeoInfo.duration) || 0); },

    volume :function() { return (this.vimeoInfo.muted)? this.vimeoInfo.muteVolume : this.vimeoInfo.volume; },
    setVolume :function(percentAsDecimal){
      this.vimeo.api('setvolume', percentAsDecimal);
      this.vimeoInfo.volume = percentAsDecimal;
      this.player_.trigger('volumechange');
    },
    currentSrc :function() {
      return this.el_.src;
    },
    muted :function() { return this.vimeoInfo.muted || false; },
    setMuted :function(muted) {
      if (muted) {
        this.vimeoInfo.muteVolume = this.vimeoInfo.volume;
        this.setVolume(0);
      } else {
        this.setVolume(this.vimeoInfo.muteVolume);
      }

      this.vimeoInfo.muted = muted;
      this.player_.trigger('volumechange');
    },

    // Tries to get the highest resolution thumbnail available for the video
    checkHighResPoster: function(){
      var uri = '';

      try {
        if(this.url.videoId != null){
          $.getJSON(this.baseApiUrl + this.videoId + '.json?callback=?', {format: "json"}, (function(_uri){
            return function(data) {
              // Set the low resolution first
              _uri = data[0].thumbnail_large;
            };
          })(uri));
          
          var image = new Image();
          image.onload = function(){
            // Onload thumbnail
            if('naturalHeight' in this){
              if(this.naturalHeight <= 90 || this.naturalWidth <= 120) {
                this.onerror();
                return;
              }
            } else if(this.height <= 90 || this.width <= 120) {
              this.onerror();
              return;
            }

            this.poster_ = uri;
            this.trigger('posterchange');
          }.bind(this);
          image.onerror = function(){};
          image.src = uri;
        }
      }
      catch(e){}
    }
  });

  Vimeo.isSupported = function() {
    return true;
  };

  Vimeo.canPlaySource = function(e) {
    return (e.type === 'video/vimeo');
  };

  var _isOnMobile = /(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);

  Vimeo.parseUrl = function(url) {
    var result = {
      videoId: null
    };

    var regex = /^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;
    var match = url.match(regex);

    if (match) {
      result.videoId = match[5];
    }

    return result;
  };

  function injectCss() {
    var css = // iframe blocker to catch mouse events
              '.vjs-vimeo { overflow: hidden }' +
              '.vjs-vimeo .vjs-iframe-blocker { display: none; }' +
              '.vjs-vimeo.vjs-user-inactive .vjs-iframe-blocker { display: block; }' +
              '.vjs-vimeo .vjs-poster { background-size: cover; }' +
			  // '.vjs-vimeo { height:100%; }' +
			  '.vimeoplayer { width:100%; height:180%; position:absolute; left:0; top:-40%; }';
              // '.vimeoplayer {display:block; width:638px; height:558px; margin:0 auto;margin-top:-150px;}';

    var head = document.head || document.getElementsByTagName('head')[0];

    var style = document.createElement('style');
    style.type = 'text/css';

    if (style.styleSheet){
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }

    head.appendChild(style);
  }

  Vimeo.apiReadyQueue = [];

  var vimeoIframeAPIReady = function() {
    Vimeo.isApiReady = true;
    injectCss();

    for (var i = 0; i < Vimeo.apiReadyQueue.length; ++i) {
      Vimeo.apiReadyQueue[i].initPlayer();
    }
  };

  vimeoIframeAPIReady();

  videojs.registerTech('Vimeo', Vimeo);
  
  
  
  // Froogaloop API -------------------------------------------------------------

  // From https://github.com/vimeo/player-api/blob/master/javascript/froogaloop.js
  // Init style shamelessly stolen from jQuery http://jquery.com
  var Froogaloop = (function(){
      // Define a local copy of Froogaloop
      function Froogaloop(iframe) {
          // The Froogaloop object is actually just the init constructor
          return new Froogaloop.fn.init(iframe);
      }

      var eventCallbacks = {},
          hasWindowEvent = false,
          isReady = false,
          slice = Array.prototype.slice,
          playerOrigin = '*';

      Froogaloop.fn = Froogaloop.prototype = {
          element: null,

          init: function(iframe) {
              if (typeof iframe === "string") {
                  iframe = document.getElementById(iframe);
              }

              this.element = iframe;

              return this;
          },

          /*
           * Calls a function to act upon the player.
           *
           * @param {string} method The name of the Javascript API method to call. Eg: 'play'.
           * @param {Array|Function} valueOrCallback params Array of parameters to pass when calling an API method
           *                                or callback function when the method returns a value.
           */
          api: function(method, valueOrCallback) {
              if (!this.element || !method) {
                  return false;
              }

              var self = this,
                  element = self.element,
                  target_id = element.id !== '' ? element.id : null,
                  params = !isFunction(valueOrCallback) ? valueOrCallback : null,
                  callback = isFunction(valueOrCallback) ? valueOrCallback : null;

              // Store the callback for get functions
              if (callback) {
                  storeCallback(method, callback, target_id);
              }

              postMessage(method, params, element);
              return self;
          },

          /*
           * Registers an event listener and a callback function that gets called when the event fires.
           *
           * @param eventName (String): Name of the event to listen for.
           * @param callback (Function): Function that should be called when the event fires.
           */
          addEvent: function(eventName, callback) {
              if (!this.element) {
                  return false;
              }

              var self = this,
                  element = self.element,
                  target_id = element.id !== '' ? element.id : null;


              storeCallback(eventName, callback, target_id);

              // The ready event is not registered via postMessage. It fires regardless.
              if (eventName != 'ready') {
                  postMessage('addEventListener', eventName, element);
              }
              else if (eventName == 'ready' && isReady) {
                  callback.call(null, target_id);
              }

              return self;
          },

          /*
           * Unregisters an event listener that gets called when the event fires.
           *
           * @param eventName (String): Name of the event to stop listening for.
           */
          removeEvent: function(eventName) {
              if (!this.element) {
                  return false;
              }

              var self = this,
                  element = self.element,
                  target_id = element.id !== '' ? element.id : null,
                  removed = removeCallback(eventName, target_id);

              // The ready event is not registered
              if (eventName != 'ready' && removed) {
                  postMessage('removeEventListener', eventName, element);
              }
          }
      };

      /**
       * Handles posting a message to the parent window.
       *
       * @param method (String): name of the method to call inside the player. For api calls
       * this is the name of the api method (api_play or api_pause) while for events this method
       * is api_addEventListener.
       * @param params (Object or Array): List of parameters to submit to the method. Can be either
       * a single param or an array list of parameters.
       * @param target (HTMLElement): Target iframe to post the message to.
       */
      function postMessage(method, params, target) {
          if (target.contentWindow == null || !target.contentWindow.postMessage) {
              return false;
          }

          var data = JSON.stringify({
              method: method,
              value: params
          });

          target.contentWindow.postMessage(data, playerOrigin);
      }

      /**
       * Event that fires whenever the window receives a message from its parent
       * via window.postMessage.
       */
      function onMessageReceived(event) {
          var data, method;

          try {
              data = JSON.parse(event.data);
              method = data.event || data.method;
          }
          catch(e)  {
              //fail silently... like a ninja!
          }

          if (method == 'ready' && !isReady) {
              isReady = true;
          }

          // Handles messages from the vimeo player only
          if (!(/^https?:\/\/player.vimeo.com/).test(event.origin)) {
              return false;
          }

          if (playerOrigin === '*') {
              playerOrigin = event.origin;
          }

          var value = data.value,
              eventData = data.data,
              target_id = target_id === '' ? null : data.player_id,

              callback = getCallback(method, target_id),
              params = [];

          if (!callback) {
              return false;
          }

          if (value !== undefined) {
              params.push(value);
          }

          if (eventData) {
              params.push(eventData);
          }

          if (target_id) {
              params.push(target_id);
          }

          return params.length > 0 ? callback.apply(null, params) : callback.call();
      }


      /**
       * Stores submitted callbacks for each iframe being tracked and each
       * event for that iframe.
       *
       * @param eventName (String): Name of the event. Eg. api_onPlay
       * @param callback (Function): Function that should get executed when the
       * event is fired.
       * @param target_id (String) [Optional]: If handling more than one iframe then
       * it stores the different callbacks for different iframes based on the iframe's
       * id.
       */
      function storeCallback(eventName, callback, target_id) {
          if (target_id) {
              if (!eventCallbacks[target_id]) {
                  eventCallbacks[target_id] = {};
              }
              eventCallbacks[target_id][eventName] = callback;
          }
          else {
              eventCallbacks[eventName] = callback;
          }
      }

      /**
       * Retrieves stored callbacks.
       */
      function getCallback(eventName, target_id) {
          if (target_id && eventCallbacks[target_id]) {
              return eventCallbacks[target_id][eventName];
          }
          else if (eventCallbacks[eventName]) {
              return eventCallbacks[eventName];
          }
      }

      function removeCallback(eventName, target_id) {
          if (target_id && eventCallbacks[target_id]) {
              if (!eventCallbacks[target_id][eventName]) {
                  return false;
              }
              eventCallbacks[target_id][eventName] = null;
          }
          else {
              if (!eventCallbacks[eventName]) {
                  return false;
              }
              eventCallbacks[eventName] = null;
          }

          return true;
      }

      function isFunction(obj) {
          return !!(obj && obj.constructor && obj.call && obj.apply);
      }

      function isArray(obj) {
          return toString.call(obj) === '[object Array]';
      }

      // Give the init function the Froogaloop prototype for later instantiation
      Froogaloop.fn.init.prototype = Froogaloop.fn;

      // Listens for the message event.
      // W3C
      if (window.addEventListener) {
          window.addEventListener('message', onMessageReceived, false);
      }
      // IE
      else {
          window.attachEvent('onmessage', onMessageReceived);
      }

      // Expose froogaloop to the global object
      return (window.Froogaloop = window.$f = Froogaloop);

  })();
}));;

/*
 * jQuery UI Slider 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var b=this,a=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");a.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");
this.range=d([]);if(a.range){if(a.range===true){this.range=d("<div></div>");if(!a.values)a.values=[this._valueMin(),this._valueMin()];if(a.values.length&&a.values.length!==2)a.values=[a.values[0],a.values[0]]}else this.range=d("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(a.range==="min"||a.range==="max")this.range.addClass("ui-slider-range-"+a.range);this.range.addClass("ui-widget-header")}d(".ui-slider-handle",this.element).length===0&&d("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
if(a.values&&a.values.length)for(;d(".ui-slider-handle",this.element).length<a.values.length;)d("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=d(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(c){c.preventDefault()}).hover(function(){a.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){if(a.disabled)d(this).blur();
else{d(".ui-slider .ui-state-focus").removeClass("ui-state-focus");d(this).addClass("ui-state-focus")}}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(c){d(this).data("index.ui-slider-handle",c)});this.handles.keydown(function(c){var e=true,f=d(this).data("index.ui-slider-handle"),h,g,i;if(!b.options.disabled){switch(c.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:e=
false;if(!b._keySliding){b._keySliding=true;d(this).addClass("ui-state-active");h=b._start(c,f);if(h===false)return}break}i=b.options.step;h=b.options.values&&b.options.values.length?(g=b.values(f)):(g=b.value());switch(c.keyCode){case d.ui.keyCode.HOME:g=b._valueMin();break;case d.ui.keyCode.END:g=b._valueMax();break;case d.ui.keyCode.PAGE_UP:g=b._trimAlignValue(h+(b._valueMax()-b._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:g=b._trimAlignValue(h-(b._valueMax()-b._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(h===
b._valueMax())return;g=b._trimAlignValue(h+i);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(h===b._valueMin())return;g=b._trimAlignValue(h-i);break}b._slide(c,f,g);return e}}).keyup(function(c){var e=d(this).data("index.ui-slider-handle");if(b._keySliding){b._keySliding=false;b._stop(c,e);b._change(c,e);d(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
this._mouseDestroy();return this},_mouseCapture:function(b){var a=this.options,c,e,f,h,g;if(a.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:b.pageX,y:b.pageY});e=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(i){var j=Math.abs(c-h.values(i));if(e>j){e=j;f=d(this);g=i}});if(a.range===true&&this.values(1)===a.min){g+=1;f=d(this.handles[g])}if(this._start(b,
g)===false)return false;this._mouseSliding=true;h._handleIndex=g;f.addClass("ui-state-active").focus();a=f.offset();this._clickOffset=!d(b.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:b.pageX-a.left-f.width()/2,top:b.pageY-a.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(b,g,c);return this._animateOff=true},_mouseStart:function(){return true},
_mouseDrag:function(b){var a=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,a);return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(b){var a;
if(this.orientation==="horizontal"){a=this.elementSize.width;b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{a=this.elementSize.height;b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}a=b/a;if(a>1)a=1;if(a<0)a=0;if(this.orientation==="vertical")a=1-a;b=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+a*b)},_start:function(b,a){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=
this.values(a);c.values=this.values()}return this._trigger("start",b,c)},_slide:function(b,a,c){var e;if(this.options.values&&this.options.values.length){e=this.values(a?0:1);if(this.options.values.length===2&&this.options.range===true&&(a===0&&c>e||a===1&&c<e))c=e;if(c!==this.values(a)){e=this.values();e[a]=c;b=this._trigger("slide",b,{handle:this.handles[a],value:c,values:e});this.values(a?0:1);b!==false&&this.values(a,c,true)}}else if(c!==this.value()){b=this._trigger("slide",b,{handle:this.handles[a],
value:c});b!==false&&this.value(c)}},_stop:function(b,a){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}this._trigger("stop",b,c)},_change:function(b,a){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}this._trigger("change",b,c)}},value:function(b){if(arguments.length){this.options.value=
this._trimAlignValue(b);this._refreshValue();this._change(null,0)}return this._value()},values:function(b,a){var c,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(a);this._refreshValue();this._change(null,b)}if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;e=arguments[0];for(f=0;f<c.length;f+=1){c[f]=this._trimAlignValue(e[f]);this._change(null,f)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();
else return this._values()},_setOption:function(b,a){var c,e=0;if(d.isArray(this.options.values))e=this.options.values.length;d.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":if(a){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(c=0;c<e;c+=1)this._change(null,c);this._animateOff=false;break}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var a,c;if(arguments.length){a=this.options.values[b];
return a=this._trimAlignValue(a)}else{a=this.options.values.slice();for(c=0;c<a.length;c+=1)a[c]=this._trimAlignValue(a[c]);return a}},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var a=this.options.step>0?this.options.step:1,c=(b-this._valueMin())%a;alignValue=b-c;if(Math.abs(c)*2>=a)alignValue+=c>0?a:-a;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
_refreshValue:function(){var b=this.options.range,a=this.options,c=this,e=!this._animateOff?a.animate:false,f,h={},g,i,j,l;if(this.options.values&&this.options.values.length)this.handles.each(function(k){f=(c.values(k)-c._valueMin())/(c._valueMax()-c._valueMin())*100;h[c.orientation==="horizontal"?"left":"bottom"]=f+"%";d(this).stop(1,1)[e?"animate":"css"](h,a.animate);if(c.options.range===true)if(c.orientation==="horizontal"){if(k===0)c.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},a.animate);
if(k===1)c.range[e?"animate":"css"]({width:f-g+"%"},{queue:false,duration:a.animate})}else{if(k===0)c.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},a.animate);if(k===1)c.range[e?"animate":"css"]({height:f-g+"%"},{queue:false,duration:a.animate})}g=f});else{i=this.value();j=this._valueMin();l=this._valueMax();f=l!==j?(i-j)/(l-j)*100:0;h[c.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[e?"animate":"css"](h,a.animate);if(b==="min"&&this.orientation==="horizontal")this.range.stop(1,
1)[e?"animate":"css"]({width:f+"%"},a.animate);if(b==="max"&&this.orientation==="horizontal")this.range[e?"animate":"css"]({width:100-f+"%"},{queue:false,duration:a.animate});if(b==="min"&&this.orientation==="vertical")this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},a.animate);if(b==="max"&&this.orientation==="vertical")this.range[e?"animate":"css"]({height:100-f+"%"},{queue:false,duration:a.animate})}}});d.extend(d.ui.slider,{version:"1.8.7"})})(jQuery);
;

/*
 * jQuery UI Datepicker 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(d,G){function K(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function E(a,b){d.extend(a,b);for(var c in b)if(b[c]==
null||b[c]==G)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.7"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();
f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},
_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&
b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both")a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==
""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)if(f[g].length>h){h=f[g].length;i=g}return i};b.setMonth(e(this._get(a,
c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),
true);this._updateDatepicker(b);this._updateAlternate(b);b.dpDiv.show()}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});
b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",
this._doKeyUp)}else if(e=="div"||e=="span")b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e=="div"||e=="span")b.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,
function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e=="div"||e=="span")b.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:
f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return false;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return true;return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},
e.settings):this._get(e,b):null;var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);
this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]?
d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)d.datepicker._clearDate(a.target);c=a.ctrlKey||
a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?+1:-1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,
e?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)d.datepicker._showDatepicker(this);else c=false;if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,
"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}return true},
_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=d("input",a.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog)a.value="";if(!d.datepicker._pos){d.datepicker._pos=
d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return!e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,
c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&
d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f)h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a));var e=a.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",
function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=
-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,
"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus();if(a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},
_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-
g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i+10):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[(a.left - 10),a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker")))if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?
b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose"))a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):
0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=
false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=
d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c)c.apply(a.input?a.input[0]:null,[b,a]);else a.input&&a.input.trigger("change");if(a.inline)this._updateDatepicker(a);
else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=
a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,
j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){var v=o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&v?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p)throw"Missing number at position "+s;s+=p[0].length;return parseInt(p[0],10)},n=function(p,v,H){p=o(p)?H:v;for(v=0;v<p.length;v++)if(b.substr(s,p[v].length).toLowerCase()==p[v].toLowerCase()){s+=p[v].length;return v+1}throw"Unknown name at position "+s;},r=function(){if(b.charAt(s)!=
a.charAt(z))throw"Unexpected literal at position "+s;s++},s=0,z=0;z<a.length;z++)if(k)if(a.charAt(z)=="'"&&!o("'"))k=false;else r();else switch(a.charAt(z)){case "d":l=m("d");break;case "D":n("D",f,h);break;case "o":u=m("o");break;case "m":j=m("m");break;case "M":j=n("M",i,g);break;case "y":c=m("y");break;case "@":var w=new Date(m("@"));c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;case "!":w=new Date((m("!")-this._ticksTo1970)/1E4);c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;
case "'":if(o("'"))r();else k=true;break;default:r()}if(c==-1)c=(new Date).getFullYear();else if(c<100)c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100);if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e)break;j++;l-=e}while(1)}w=this._daylightSavingAdjust(new Date(c,j-1,l));if(w.getFullYear()!=c||w.getMonth()+1!=j||w.getDate()!=l)throw"Invalid date";return w},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",
RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;
return o},g=function(o,m,n){m=""+m;if(i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b)for(var k=0;k<a.length;k++)if(u)if(a.charAt(k)=="'"&&!i("'"))u=false;else l+=a.charAt(k);else switch(a.charAt(k)){case "d":l+=g("d",b.getDate(),2);break;case "D":l+=j("D",b.getDay(),e,f);break;case "o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":l+=g("m",b.getMonth()+1,2);break;case "M":l+=j("M",b.getMonth(),h,c);break;
case "y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":l+=b.getTime();break;case "!":l+=b.getTime()*1E4+this._ticksTo1970;break;case "'":if(i("'"))l+="'";else u=true;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++)if(c)if(a.charAt(f)=="'"&&!e("'"))c=false;else b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+=
"0123456789";break;case "D":case "M":return null;case "'":if(e("'"))b+="'";else c=true;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=
f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=
(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case "d":case "D":g+=parseInt(k[1],10);break;case "w":case "W":g+=parseInt(k[1],10)*7;break;case "m":case "M":l+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case "y":case "Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,
l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=
a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input)a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),
b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=
this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";j=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;j=!h?j:this.formatDate(j,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,
"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=
this._get(a,"monthNames"),w=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var L=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var M="",D=0;D<i[1];D++){var N=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1)switch(D){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-
1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,C>0||D>0,z,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=
(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,A);t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;O<A;O++){x+="<tr>";var P=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var F=
p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,J=B&&!H||!F[0]||k&&q<k||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==N.getTime()&&g==a.selectedMonth&&a._keyEvent||L.getTime()==q.getTime()&&L.getTime()==N.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":
""))+'"'+((!B||v)&&F[2]?' title="'+F[2]+'"':"")+(J?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!v?"&#xa0;":J?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=
P+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=x}I+=M}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',
o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++)if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth()))o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";o+="</select>"}u||(k+=o+(h||!(j&&
l)?"&#xa0;":""));a.yearshtml="";if(h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+
a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";if(d.browser.mozilla)k+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>";else{k+=a.yearshtml;a.yearshtml=null}}k+=this._get(a,"yearSuffix");if(u)k+=(h||!(j&&l)?"&#xa0;":"")+o;k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=
a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,
"onChangeMonthYear");if(b)b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);
c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,
"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=
function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));
return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new K;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.7";window["DP_jQuery_"+y]=d})(jQuery);
;

/*
 * jQuery UI Droppable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(c){return c.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){if(a=="accept")this.accept=d.isFunction(b)?b:function(c){return c.is(b)};d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(b))}},_out:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(b))}},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return false;var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var g=
d.data(this,"droppable");if(g.options.greedy&&!g.options.disabled&&g.options.scope==c.options.scope&&g.accept.call(g.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(g,{offset:g.element.offset()}),g.options.tolerance)){e=true;return false}});if(e)return false;if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(c));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.7"});d.ui.intersect=function(a,b,c){if(!b.offset)return false;var e=(a.positionAbs||a.position.absolute).left,g=e+a.helperProportions.width,f=(a.positionAbs||a.position.absolute).top,h=f+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;
switch(c){case "fit":return i<=e&&g<=k&&j<=f&&h<=l;case "intersect":return i<e+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<f+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(f>=j&&f<=l||h>=j&&h<=l||f<j&&h>l)&&(e>=
i&&e<=k||g>=i&&g<=k||e<i&&g>k);default:return false}};d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],e=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),f=0;a:for(;f<c.length;f++)if(!(c[f].options.disabled||a&&!c[f].accept.call(c[f].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[f].element[0]){c[f].proportions.height=0;continue a}c[f].visible=c[f].element.css("display")!=
"none";if(c[f].visible){c[f].offset=c[f].element.offset();c[f].proportions={width:c[f].element[0].offsetWidth,height:c[f].element[0].offsetHeight};e=="mousedown"&&c[f]._activate.call(c[f],b)}}},drop:function(a,b){var c=false;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance))c=c||this._drop.call(this,b);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||
a.element)){this.isout=1;this.isover=0;this._deactivate.call(this,b)}}});return c},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&this.isover==1?"isout":c&&this.isover==0?"isover":null){var e;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");if(g.length){e=
d.data(g[0],"droppable");e.greedyChild=c=="isover"?1:0}}if(e&&c=="isover"){e.isover=0;e.isout=1;e._out.call(e,b)}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,b);if(e&&c=="isout"){e.isout=0;e.isover=1;e._over.call(e,b)}}}})}}})(jQuery);
;

/*
 * jQuery UI Sortable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,b){if(a==="disabled"){this.options[a]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else d.Widget.prototype._setOption.apply(this,
arguments)},_mouseCapture:function(a,b){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var c=null,e=this;d(a.target).parents().each(function(){if(d.data(this,"sortable-item")==e){c=d(this);return false}});if(d.data(a.target,"sortable-item")==e)c=d(a.target);if(!c)return false;if(this.options.handle&&!b){var f=false;d(this.options.handle,c).find("*").andSelf().each(function(){if(this==a.target)f=true});if(!f)return false}this.currentItem=
c;this._removeCurrentsFromItems();return true},_mouseStart:function(a,b,c){b=this.options;var e=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.extend(this.offset,
{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();
if(b.cursor){if(d("body").css("cursor"))this._storedCursor=d("body").css("cursor");d("body").css("cursor",b.cursor)}if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",
a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",a,e._uiHash(this));if(d.ui.ddmanager)d.ui.ddmanager.current=this;d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+
this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(a.pageY-d(document).scrollTop()<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()+
b.scrollSpeed);if(a.pageX-d(document).scrollLeft()<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}c!==false&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+
"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--){c=this.items[b];var e=c.item[0],f=this._intersectsWithPointer(c);if(f)if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],e):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(a,
c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=c.placeholder.offset();c.reverting=true;d(this.helper).animate({left:b.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return false}},cancel:function(){var a=this;if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",
null,a._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,a._uiHash(this));this.containers[b].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();d.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):
d(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};d(b).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(e)c.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||
"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,k=i+a.height,j=this.offset.click.top,l=this.offset.click.left;j=e+j>i&&e+j<k&&b+l>g&&b+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:g<b+
this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();if(!b)return false;return this.floating?c&&c=="right"||a=="down"?2:1:a&&(a=="down"?
2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:c&&(c=="down"&&b||c=="up"&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=d(e[a]),g=f.length-1;g>=0;g--){var h=d.data(f[g],"sortable");if(h&&h!=
this&&!h.options.disabled)c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;a>=0;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=
this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=d(e[f]),h=g.length-1;h>=0;h--){var i=d.data(g[h],"sortable");
if(i&&i!=this&&!i.options.disabled){c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]);this.containers.push(i)}}for(f=c.length-1;f>=0;f--){a=c[f][1];e=c[f][0];h=0;for(g=e.length;h<g;h++){i=d(e[h]);i.data("sortable-item",a);b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=
0;b--){var c=this.items[b],e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;if(!a){c.width=e.outerWidth();c.height=e.outerHeight()}e=e.offset();c.left=e.left;c.top=e.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;b>=0;b--){e=this.containers[b].element.offset();this.containers[b].containerCache.left=e.left;this.containers[b].containerCache.top=e.top;this.containers[b].containerCache.width=
this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var f=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)f.style.visibility="hidden";return f},
update:function(f,g){if(!(e&&!c.forcePlaceholderSize)){g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=
null,c=null,e=this.containers.length-1;e>=0;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!(b&&d.ui.contains(this.containers[e].element[0],b.element[0]))){b=this.containers[e];c=e}}else if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",a,this._uiHash(this));this.containers[e].containerCache.over=0}if(b)if(this.containers.length===1){this.containers[c]._trigger("over",a,this._uiHash(this));
this.containers[c].containerCache.over=1}else if(this.currentContainer!=this.containers[c]){b=1E4;e=null;for(var f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];if(Math.abs(h-f)<b){b=Math.abs(h-f);e=this.items[g]}}if(e||this.options.dropOnEmpty){this.currentContainer=this.containers[c];e?this._rearrange(a,e,null,true):this._rearrange(a,
null,this.containers[c].element,true);this._trigger("change",a,this._uiHash());this.containers[c]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}}},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):b.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||
d(b.appendTo!="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==""||b.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||b.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a==
"string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition==
"absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==
"relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=d(a.containment)[0];a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),
10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?
this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=
this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+
this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?
g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==
f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=false;var c=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(f){this._trigger("receive",
f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b)c.push(function(f){this._trigger("update",f,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){b||c.push(function(f){this._trigger("remove",f,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)if(d.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b){c.push(function(f){return function(g){f._trigger("receive",
g,this._uiHash(this))}}.call(this,this.containers[e]));c.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[e]))}}for(e=this.containers.length-1;e>=0;e--){b||c.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,this.containers[e]));if(this.containers[e].containerCache.over){c.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[e]));this.containers[e].containerCache.over=
0}}this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return false}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});
d.extend(d.ui.sortable,{version:"1.8.7"})})(jQuery);
;
(function ($) {

/**
 * Provides Ajax page updating via jQuery $.ajax (Asynchronous JavaScript and XML).
 *
 * Ajax is a method of making a request via JavaScript while viewing an HTML
 * page. The request returns an array of commands encoded in JSON, which is
 * then executed to make any changes that are necessary to the page.
 *
 * Drupal uses this file to enhance form elements with #ajax['path'] and
 * #ajax['wrapper'] properties. If set, this file will automatically be included
 * to provide Ajax capabilities.
 */

Drupal.ajax = Drupal.ajax || {};

/**
 * Attaches the Ajax behavior to each Ajax form element.
 */
Drupal.behaviors.AJAX = {
  attach: function (context, settings) {
    // Load all Ajax behaviors specified in the settings.
    for (var base in settings.ajax) {
      if (!$('#' + base + '.ajax-processed').length) {
        var element_settings = settings.ajax[base];

        if (typeof element_settings.selector == 'undefined') {
          element_settings.selector = '#' + base;
        }
        $(element_settings.selector).each(function () {
          element_settings.element = this;
          Drupal.ajax[base] = new Drupal.ajax(base, this, element_settings);
        });

        $('#' + base).addClass('ajax-processed');
      }
    }

    // Bind Ajax behaviors to all items showing the class.
    $('.use-ajax:not(.ajax-processed)').addClass('ajax-processed').each(function () {
      var element_settings = {};
      // Clicked links look better with the throbber than the progress bar.
      element_settings.progress = { 'type': 'throbber' };

      // For anchor tags, these will go to the target of the anchor rather
      // than the usual location.
      if ($(this).attr('href')) {
        element_settings.url = $(this).attr('href');
        element_settings.event = 'click';
      }
      var base = $(this).attr('id');
      Drupal.ajax[base] = new Drupal.ajax(base, this, element_settings);
    });

    // This class means to submit the form to the action using Ajax.
    $('.use-ajax-submit:not(.ajax-processed)').addClass('ajax-processed').each(function () {
      var element_settings = {};

      // Ajax submits specified in this manner automatically submit to the
      // normal form action.
      element_settings.url = $(this.form).attr('action');
      // Form submit button clicks need to tell the form what was clicked so
      // it gets passed in the POST request.
      element_settings.setClick = true;
      // Form buttons use the 'click' event rather than mousedown.
      element_settings.event = 'click';
      // Clicked form buttons look better with the throbber than the progress bar.
      element_settings.progress = { 'type': 'throbber' };

      var base = $(this).attr('id');
      Drupal.ajax[base] = new Drupal.ajax(base, this, element_settings);
    });
  }
};

/**
 * Ajax object.
 *
 * All Ajax objects on a page are accessible through the global Drupal.ajax
 * object and are keyed by the submit button's ID. You can access them from
 * your module's JavaScript file to override properties or functions.
 *
 * For example, if your Ajax enabled button has the ID 'edit-submit', you can
 * redefine the function that is called to insert the new content like this
 * (inside a Drupal.behaviors attach block):
 * @code
 *    Drupal.behaviors.myCustomAJAXStuff = {
 *      attach: function (context, settings) {
 *        Drupal.ajax['edit-submit'].commands.insert = function (ajax, response, status) {
 *          new_content = $(response.data);
 *          $('#my-wrapper').append(new_content);
 *          alert('New content was appended to #my-wrapper');
 *        }
 *      }
 *    };
 * @endcode
 */
Drupal.ajax = function (base, element, element_settings) {
  var defaults = {
    url: 'system/ajax',
    event: 'mousedown',
    keypress: true,
    selector: '#' + base,
    effect: 'none',
    speed: 'none',
    method: 'replaceWith',
    progress: {
      type: 'throbber',
      message: Drupal.t('Please wait...')
    },
    submit: {
      'js': true
    }
  };

  $.extend(this, defaults, element_settings);

  this.element = element;
  this.element_settings = element_settings;

  // Replacing 'nojs' with 'ajax' in the URL allows for an easy method to let
  // the server detect when it needs to degrade gracefully.
  // There are five scenarios to check for:
  // 1. /nojs/
  // 2. /nojs$ - The end of a URL string.
  // 3. /nojs? - Followed by a query (with clean URLs enabled).
  //      E.g.: path/nojs?destination=foobar
  // 4. /nojs& - Followed by a query (without clean URLs enabled).
  //      E.g.: ?q=path/nojs&destination=foobar
  // 5. /nojs# - Followed by a fragment.
  //      E.g.: path/nojs#myfragment
  this.url = element_settings.url.replace(/\/nojs(\/|$|\?|&|#)/g, '/ajax$1');
  this.wrapper = '#' + element_settings.wrapper;

  // If there isn't a form, jQuery.ajax() will be used instead, allowing us to
  // bind Ajax to links as well.
  if (this.element.form) {
    this.form = $(this.element.form);
  }

  // Set the options for the ajaxSubmit function.
  // The 'this' variable will not persist inside of the options object.
  var ajax = this;
  ajax.options = {
    url: ajax.url,
    data: ajax.submit,
    beforeSerialize: function (element_settings, options) {
      return ajax.beforeSerialize(element_settings, options);
    },
    beforeSubmit: function (form_values, element_settings, options) {
      ajax.ajaxing = true;
      return ajax.beforeSubmit(form_values, element_settings, options);
    },
    beforeSend: function (xmlhttprequest, options) {
      ajax.ajaxing = true;
      return ajax.beforeSend(xmlhttprequest, options);
    },
    success: function (response, status) {
      // Sanity check for browser support (object expected).
      // When using iFrame uploads, responses must be returned as a string.
      if (typeof response == 'string') {
        response = $.parseJSON(response);
      }
      return ajax.success(response, status);
    },
    complete: function (response, status) {
      ajax.ajaxing = false;
      if (status == 'error' || status == 'parsererror') {
        return ajax.error(response, ajax.url);
      }
    },
    dataType: 'json',
    type: 'POST'
  };

  // Bind the ajaxSubmit function to the element event.
  $(ajax.element).bind(element_settings.event, function (event) {
    return ajax.eventResponse(this, event);
  });

  // If necessary, enable keyboard submission so that Ajax behaviors
  // can be triggered through keyboard input as well as e.g. a mousedown
  // action.
  if (element_settings.keypress) {
    $(element_settings.element).keypress(function (event) {
      return ajax.keypressResponse(this, event);
    });
  }
};

/**
 * Handle a key press.
 *
 * The Ajax object will, if instructed, bind to a key press response. This
 * will test to see if the key press is valid to trigger this event and
 * if it is, trigger it for us and prevent other keypresses from triggering.
 * In this case we're handling RETURN and SPACEBAR keypresses (event codes 13
 * and 32. RETURN is often used to submit a form when in a textfield, and
 * SPACE is often used to activate an element without submitting.
 */
Drupal.ajax.prototype.keypressResponse = function (element, event) {
  // Create a synonym for this to reduce code confusion.
  var ajax = this;

  // Detect enter key and space bar and allow the standard response for them,
  // except for form elements of type 'text' and 'textarea', where the
  // spacebar activation causes inappropriate activation if #ajax['keypress'] is
  // TRUE. On a text-type widget a space should always be a space.
  if (event.which == 13 || (event.which == 32 && element.type != 'text' && element.type != 'textarea')) {
    $(ajax.element_settings.element).trigger(ajax.element_settings.event);
    return false;
  }
};

/**
 * Handle an event that triggers an Ajax response.
 *
 * When an event that triggers an Ajax response happens, this method will
 * perform the actual Ajax call. It is bound to the event using
 * bind() in the constructor, and it uses the options specified on the
 * ajax object.
 */
Drupal.ajax.prototype.eventResponse = function (element, event) {
  // Create a synonym for this to reduce code confusion.
  var ajax = this;

  // Do not perform another ajax command if one is already in progress.
  if (ajax.ajaxing) {
    return false;
  }

  try {
    if (ajax.form) {
      // If setClick is set, we must set this to ensure that the button's
      // value is passed.
      if (ajax.setClick) {
        // Mark the clicked button. 'form.clk' is a special variable for
        // ajaxSubmit that tells the system which element got clicked to
        // trigger the submit. Without it there would be no 'op' or
        // equivalent.
        element.form.clk = element;
      }

      ajax.form.ajaxSubmit(ajax.options);
    }
    else {
      ajax.beforeSerialize(ajax.element, ajax.options);
      $.ajax(ajax.options);
    }
  }
  catch (e) {
    // Unset the ajax.ajaxing flag here because it won't be unset during
    // the complete response.
    ajax.ajaxing = false;
    alert("An error occurred while attempting to process " + ajax.options.url + ": " + e.message);
  }

  // For radio/checkbox, allow the default event. On IE, this means letting
  // it actually check the box.
  if (typeof element.type != 'undefined' && (element.type == 'checkbox' || element.type == 'radio')) {
    return true;
  }
  else {
    return false;
  }

};

/**
 * Handler for the form serialization.
 *
 * Runs before the beforeSend() handler (see below), and unlike that one, runs
 * before field data is collected.
 */
Drupal.ajax.prototype.beforeSerialize = function (element, options) {
  // Allow detaching behaviors to update field values before collecting them.
  // This is only needed when field values are added to the POST data, so only
  // when there is a form such that this.form.ajaxSubmit() is used instead of
  // $.ajax(). When there is no form and $.ajax() is used, beforeSerialize()
  // isn't called, but don't rely on that: explicitly check this.form.
  if (this.form) {
    var settings = this.settings || Drupal.settings;
    Drupal.detachBehaviors(this.form, settings, 'serialize');
  }

  // Prevent duplicate HTML ids in the returned markup.
  // @see drupal_html_id()
  options.data['ajax_html_ids[]'] = [];
  $('[id]').each(function () {
    options.data['ajax_html_ids[]'].push(this.id);
  });

  // Allow Drupal to return new JavaScript and CSS files to load without
  // returning the ones already loaded.
  // @see ajax_base_page_theme()
  // @see drupal_get_css()
  // @see drupal_get_js()
  options.data['ajax_page_state[theme]'] = Drupal.settings.ajaxPageState.theme;
  options.data['ajax_page_state[theme_token]'] = Drupal.settings.ajaxPageState.theme_token;
  for (var key in Drupal.settings.ajaxPageState.css) {
    options.data['ajax_page_state[css][' + key + ']'] = 1;
  }
  for (var key in Drupal.settings.ajaxPageState.js) {
    options.data['ajax_page_state[js][' + key + ']'] = 1;
  }
};

/**
 * Modify form values prior to form submission.
 */
Drupal.ajax.prototype.beforeSubmit = function (form_values, element, options) {
  	// remove message before submit a form.
	$('#message-container').remove();
  // This function is left empty to make it simple to override for modules
  // that wish to add functionality here.
}

/**
 * Prepare the Ajax request before it is sent.
 */
Drupal.ajax.prototype.beforeSend = function (xmlhttprequest, options) {
  // For forms without file inputs, the jQuery Form plugin serializes the form
  // values, and then calls jQuery's $.ajax() function, which invokes this
  // handler. In this circumstance, options.extraData is never used. For forms
  // with file inputs, the jQuery Form plugin uses the browser's normal form
  // submission mechanism, but captures the response in a hidden IFRAME. In this
  // circumstance, it calls this handler first, and then appends hidden fields
  // to the form to submit the values in options.extraData. There is no simple
  // way to know which submission mechanism will be used, so we add to extraData
  // regardless, and allow it to be ignored in the former case.
  if (this.form) {
    options.extraData = options.extraData || {};

    // Let the server know when the IFRAME submission mechanism is used. The
    // server can use this information to wrap the JSON response in a TEXTAREA,
    // as per http://jquery.malsup.com/form/#file-upload.
    options.extraData.ajax_iframe_upload = '1';

    // The triggering element is about to be disabled (see below), but if it
    // contains a value (e.g., a checkbox, textfield, select, etc.), ensure that
    // value is included in the submission. As per above, submissions that use
    // $.ajax() are already serialized prior to the element being disabled, so
    // this is only needed for IFRAME submissions.
    var v = $.fieldValue(this.element);
    if (v !== null) {
      options.extraData[this.element.name] = v;
    }
  }

  // Disable the element that received the change to prevent user interface
  // interaction while the Ajax request is in progress. ajax.ajaxing prevents
  // the element from triggering a new request, but does not prevent the user
  // from changing its value.
  $(this.element).addClass('progress-disabled').attr('disabled', true);

  // Insert progressbar or throbber.
  if (this.progress.type == 'bar') {
    var progressBar = new Drupal.progressBar('ajax-progress-' + this.element.id, eval(this.progress.update_callback), this.progress.method, eval(this.progress.error_callback));
    if (this.progress.message) {
      progressBar.setProgress(-1, this.progress.message);
    }
    if (this.progress.url) {
      progressBar.startMonitoring(this.progress.url, this.progress.interval || 1500);
    }
    this.progress.element = $(progressBar.element).addClass('ajax-progress ajax-progress-bar');
    this.progress.object = progressBar;
    $(this.element).after(this.progress.element);
  }
  else if (this.progress.type == 'throbber') {
    this.progress.element = $('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>');
    if (this.progress.message) {
      $('.throbber', this.progress.element).after('<div class="message">' + this.progress.message + '</div>');
    }
    $(this.element).after(this.progress.element);
  }
};

/**
 * Handler for the form redirection completion.
 */
Drupal.ajax.prototype.success = function (response, status) {
  // Remove the progress element.
  if (this.progress.element) {
    $(this.progress.element).remove();
  }
  if (this.progress.object) {
    this.progress.object.stopMonitoring();
  }
  $(this.element).removeClass('progress-disabled').removeAttr('disabled');

  Drupal.freezeHeight();

  for (var i in response) {
    if (response[i]['command'] && this.commands[response[i]['command']]) {
      this.commands[response[i]['command']](this, response[i], status);
    }
  }

  // Reattach behaviors, if they were detached in beforeSerialize(). The
  // attachBehaviors() called on the new content from processing the response
  // commands is not sufficient, because behaviors from the entire form need
  // to be reattached.
  if (this.form) {
    var settings = this.settings || Drupal.settings;
    Drupal.attachBehaviors(this.form, settings);
  }

  Drupal.unfreezeHeight();

  // Remove any response-specific settings so they don't get used on the next
  // call by mistake.
  this.settings = null;
};

/**
 * Build an effect object which tells us how to apply the effect when adding new HTML.
 */
Drupal.ajax.prototype.getEffect = function (response) {
  var type = response.effect || this.effect;
  var speed = response.speed || this.speed;

  var effect = {};
  if (type == 'none') {
    effect.showEffect = 'show';
    effect.hideEffect = 'hide';
    effect.showSpeed = '';
  }
  else if (type == 'fade') {
    effect.showEffect = 'fadeIn';
    effect.hideEffect = 'fadeOut';
    effect.showSpeed = speed;
  }
  else {
    effect.showEffect = type + 'Toggle';
    effect.hideEffect = type + 'Toggle';
    effect.showSpeed = speed;
  }

  return effect;
};

/**
 * Handler for the form redirection error. 
 */
Drupal.ajax.prototype.error = function (response, uri) {
	if(typeof expertus_error_message === "function") {
		var error_arr = [];
		error_arr[0] = Drupal.ajaxError(response, uri);
		var message_call = expertus_error_message(error_arr, 'error')
//		var message_call = expertus_error_message(error,'error');
		$("body").append('<div id="show_expertus_message"></div>');

		$('#show_expertus_message').css({"position": "absolute",
			"top": "100px",
            "align": "centre",
            "z-index": "100000"});

		$('body,html').animate({scrollTop: 50}, 500);

		$('#show_expertus_message').show();
		$('#show_expertus_message').html(message_call);
	}
	else {
		alert(Drupal.ajaxError(response, uri));
	}

  // Remove the progress element.
  if (this.progress.element) {
    $(this.progress.element).remove();
  }
  if (this.progress.object) {
    this.progress.object.stopMonitoring();
  }
  // Undo hide.
  $(this.wrapper).show();
  // Re-enable the element.
  $(this.element).removeClass('progress-disabled').removeAttr('disabled');
  // Reattach behaviors, if they were detached in beforeSerialize().
  if (this.form) {
    var settings = response.settings || this.settings || Drupal.settings;
    Drupal.attachBehaviors(this.form, settings);
  }
};

/**
 * Provide a series of commands that the server can request the client perform.
 */
Drupal.ajax.prototype.commands = {
  /**
   * Command to insert new content into the DOM.
   */
  insert: function (ajax, response, status) {
    // Get information from the response. If it is not there, default to
    // our presets.
    var wrapper = response.selector ? $(response.selector) : $(ajax.wrapper);
    var method = response.method || ajax.method;
    var effect = ajax.getEffect(response);

    // We don't know what response.data contains: it might be a string of text
    // without HTML, so don't rely on jQuery correctly iterpreting
    // $(response.data) as new HTML rather than a CSS selector. Also, if
    // response.data contains top-level text nodes, they get lost with either
    // $(response.data) or $('<div></div>').replaceWith(response.data).
    var new_content_wrapped = $('<div></div>').html(response.data);
    var new_content = new_content_wrapped.contents();

    // For legacy reasons, the effects processing code assumes that new_content
    // consists of a single top-level element. Also, it has not been
    // sufficiently tested whether attachBehaviors() can be successfully called
    // with a context object that includes top-level text nodes. However, to
    // give developers full control of the HTML appearing in the page, and to
    // enable Ajax content to be inserted in places where DIV elements are not
    // allowed (e.g., within TABLE, TR, and SPAN parents), we check if the new
    // content satisfies the requirement of a single top-level element, and
    // only use the container DIV created above when it doesn't. For more
    // information, please see http://drupal.org/node/736066.
    if (new_content.length != 1 || new_content.get(0).nodeType != 1) {
      new_content = new_content_wrapped;
    }

    // If removing content from the wrapper, detach behaviors first.
    switch (method) {
      case 'html':
      case 'replaceWith':
      case 'replaceAll':
      case 'empty':
      case 'remove':
        var settings = response.settings || ajax.settings || Drupal.settings;
        Drupal.detachBehaviors(wrapper, settings);
    }

    // Add the new content to the page.
    wrapper[method](new_content);

    // Immediately hide the new content if we're using any effects.
    if (effect.showEffect != 'show') {
      new_content.hide();
    }

    // Determine which effect to use and what content will receive the
    // effect, then show the new content.
    if ($('.ajax-new-content', new_content).length > 0) {
      $('.ajax-new-content', new_content).hide();
      new_content.show();
      $('.ajax-new-content', new_content)[effect.showEffect](effect.showSpeed);
    }
    else if (effect.showEffect != 'show') {
      new_content[effect.showEffect](effect.showSpeed);
    }

    // Attach all JavaScript behaviors to the new content, if it was successfully
    // added to the page, this if statement allows #ajax['wrapper'] to be
    // optional.
    if (new_content.parents('html').length > 0) {
      // Apply any settings from the returned JSON if available.
      var settings = response.settings || ajax.settings || Drupal.settings;
      Drupal.attachBehaviors(new_content, settings);
    }
  },

  /**
   * Command to remove a chunk from the page.
   */
  remove: function (ajax, response, status) {
    var settings = response.settings || ajax.settings || Drupal.settings;
    Drupal.detachBehaviors($(response.selector), settings);
    $(response.selector).remove();
  },

  /**
   * Command to mark a chunk changed.
   */
  changed: function (ajax, response, status) {
    if (!$(response.selector).hasClass('ajax-changed')) {
      $(response.selector).addClass('ajax-changed');
      if (response.asterisk) {
        $(response.selector).find(response.asterisk).append(' <span class="ajax-changed">*</span> ');
      }
    }
  },

  /**
   * Command to provide an alert.
   */
  alert: function (ajax, response, status) {
    alert(response.text, response.title);
  },

  /**
   * Command to provide the jQuery css() function.
   */
  css: function (ajax, response, status) {
    $(response.selector).css(response.argument);
  },

  /**
   * Command to set the settings that will be used for other commands in this response.
   */
  settings: function (ajax, response, status) {
    if (response.merge) {
      $.extend(true, Drupal.settings, response.settings);
    }
    else {
      ajax.settings = response.settings;
    }
  },

  /**
   * Command to attach data using jQuery's data API.
   */
  data: function (ajax, response, status) {
    $(response.selector).data(response.name, response.value);
  },

  /**
   * Command to apply a jQuery method.
   */
  invoke: function (ajax, response, status) {
    var $element = $(response.selector);
    $element[response.method].apply($element, response.arguments);
  },

  /**
   * Command to restripe a table.
   */
  restripe: function (ajax, response, status) {
    // :even and :odd are reversed because jQuery counts from 0 and
    // we count from 1, so we're out of sync.
    // Match immediate children of the parent element to allow nesting.
    $('> tbody > tr:visible, > tr:visible', $(response.selector))
      .removeClass('odd even')
      .filter(':even').addClass('odd').end()
      .filter(':odd').addClass('even');
  }
};

/* Start : #0054508 Added by ganesh for implement cookieless option in Salesforce on 30th Sep 2015 10:40 AM 
 * - Passing session variables to each ajax callback */ 
var sf_exp_ses_value = $('.salesforce-widget #widget').attr('data-exp-sess-id'); 
//alert('sf_exp_ses_value11='+sf_exp_ses_value);
if (typeof sf_exp_ses_value !== typeof undefined && sf_exp_ses_value !== false) {
	$.ajaxSetup({
	    data: {
	    	exp_sess_id: sf_exp_ses_value
	    }
	});
 }  
/* End : #0054508 Added by ganesh for implement cookieless option in Salesforce */


})(jQuery);
;
(function ($) {
	  
})(jQuery);

;
( function($) {
  try{
  function initAddEditPasswordField(currField) {
    try{
  // Set the on blur, on focus and on change behaviours
  $(currField).blur(function(event) {
	try{
    var pwdIdClass = $(this).data('password-idclass');
    var cPwdIdClass = $(this).data('cpassword-idclass');
    var thisIsPwdField = $(this).hasClass(pwdIdClass) ? true : false;
    var pwdVal = $('.' + pwdIdClass).val();
    var cPwdVal = $('.' + cPwdIdClass).val();
    //alert('blur called for ' + (thisIsPwdField? 'pwd' : 'cpwd') + ' field with pwd = ' + pwdVal + ', cpwd = ' + cPwdVal);
    
    if(pwdVal!="" && cPwdVal!=""){
    	if(pwdVal!=cPwdVal){
	    	  $('#password-mismatch').show();
	    	  $(".addedit-password-field").addClass("error");
	    	  $(".addedit-cpassword-field").addClass("error");
    	}
    	else{
    		  $('#password-mismatch').hide();
    	      $(".addedit-password-field").removeClass("error");
    	      $(".addedit-cpassword-field").removeClass("error");
    	}
    	Drupal.ajax.prototype.commands.CtoolsModalAdjust(null, null, null);
    }
	}catch(e){
		// To Do
	}
  });

  
/*  $(currField).focus(function(event) {
    var pwdIdClass = $(this).data('password-idclass');
    var cPwdIdClass = $(this).data('cpassword-idclass');
    var thisIsPwdField = $(this).hasClass(pwdIdClass) ? true : false;
    var pwdVal = $('.' + pwdIdClass).val();
    var cPwdVal = $('.' + cPwdIdClass).val();
    //alert('focus called for ' + (thisIsPwdField? 'pwd' : 'cpwd') + ' field with pwd = ' + pwdVal + ', cpwd = ' + cPwdVal);
  });

  $(currField).change(function(event) {
    var pwdIdClass = $(this).data('password-idclass');
    var cPwdIdClass = $(this).data('cpassword-idclass');
    var thisIsPwdField = $(this).hasClass(pwdIdClass) ? true : false;
    var pwdVal = $('.' + pwdIdClass).val();
    var cPwdVal = $('.' + cPwdIdClass).val();
    //alert('change called for ' + (thisIsPwdField? 'pwd' : 'cpwd') + ' field with pwd = ' + pwdVal + ', cpwd = ' + cPwdVal);
  }); */
    }catch(e){
		// To Do
	}
}
  
  Drupal.behaviors.passwordFields =  {
    attach: function (context, settings) {
    try{
      $('.addedit-password-field:not(.addedit-password-field-initialized)').addClass('addedit-password-field-initialized').each(function () {
        //alert('In Drupal.behaviors.passwordFields pwd attach()');
        initAddEditPasswordField(this);
      });
      
      $('.addedit-cpassword-field:not(.addedit-cpassword-field-initialized)').addClass('addedit-cpassword-field-initialized').each(function () {
        //alert('In Drupal.behaviors.passwordFields cpwd attach()');
        initAddEditPasswordField(this);
      });
    }catch(e){
		// To Do
	}
    }
  };
  }catch(e){
		// To Do
	}
})(jQuery);

function checkusernameadmin(obj){
	try{
	objname=obj.value;
	objid=obj.id;
    if(objname != null && objname != undefined && objname != ""){//administration/people/user/usernamecheck/addedit-edit-user_name addedit-edit-textfield form-text
    var url1=resource.base_host+"/?q=administration/people/user/usernamecheck/"+objname;
	$.ajax({
			type: "GET",
		    url : url1,
		    complete : function(xmlHttpRequest, textStatus) {
			    if((parseInt(xmlHttpRequest.status) != 0) && (parseInt(xmlHttpRequest.status / 100) != 2)) {
			        return;
			    }

			    var responseText = xmlHttpRequest.responseText;
			    if(responseText==1){
			    	$("#username-mismatch").show();
			    	$(".addedit-edit-user_name").addClass("error");
			    	
			    }else{
			    	$("#username-mismatch").hide();
			    	//$("#erruser").removeClass("error");
			    	$(".addedit-edit-user_name").removeClass("error");
			   		
			    }
			    Drupal.ajax.prototype.commands.CtoolsModalAdjust(null, null, null);
		    }
		    
	   });
}
	}catch(e){
		// To Do
	}
}
//48472: Once I removed manager role, still "Team" module showing.
var already_is_manager_validation_checked;
function checkManagerUncheck(){
	 var selected = $("#edit-roles option:selected");
     var is_manager = false;
     already_is_manager_validation_checked = false;
     selected.each(function () {
         if($(this).val()=='is_manager'){         
        	 is_manager = true;
        	 already_is_manager_validation_checked = false;
         }
     });
     //console.log(already_is_manager_validation_checked);
     if(is_manager === false && already_is_manager_validation_checked === false){
    	 var title = Drupal.t('LBL082')+' '+Drupal.t('Manager')+' '+Drupal.t('LBL579');
    	 var message = Drupal.t('MSG729');
    	 try{
 		    $('#commonMsg-wizard').remove();
 		    $("#edit-roles").multiselect("refresh");
 		    var html = '';	    
 		    html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';
 		    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
 		    if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
 		   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+message+'</td></tr>';
 		    } else {
 		     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+message+'</td></tr>';
 		    }
 		    html+='</table>';
 		    html+='</div>';
 		    $("body").append(html);
 		    var closeButt={};
 		    closeButt[Drupal.t('LBL109')]=function(){
 		    	$("#edit-roles").multiselect("widget").find(":checkbox[value='is_manager']").attr("checked","checked");
 		    	$("#edit-roles option[value='is_manager']").attr("selected", 1);
 		    	$("#edit-roles").multiselect("refresh");
 		    	already_is_manager_validation_checked = false;
 		    	$(this).dialog('destroy');
 		    	$(this).dialog('close');
 		    	$('#commonMsg-wizard').remove();
 		    };
         	closeButt[Drupal.t('Yes')]=function(){already_is_manager_validation_checked = true;$(this).dialog('destroy');$(this).dialog('close');$("#commonMsg-wizard").remove();}; 
 		    $("#commonMsg-wizard").dialog({
 		        position:[(getWindowWidth()-400)/2,200],
 		        bgiframe: true,
 		        width:300,
 		        resizable:false,
 		        modal: true,
 		        title:title,
 		        buttons:closeButt,
 		        closeOnEscape: false,
 		        draggable:false,
 		        overlay:
 		         {
 		           opacity: 0.9,
 		           background: "black"
 		         }
 		    });
 		    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+message+" remove-reports'></div>");
 		    $('#delete-object-dialog.remove-reports').find('.ui-dialog').css("z-index","10100");
 		    $('#delete-object-dialog.remove-reports').next('.ui-widget-overlay').css("z-index","1030");
 		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
 		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
 		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
 		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
 		    $("#commonMsg-wizard").show();
 		    if($('#delete-object-dialog.remove-reports').is(':visible')) {
                $(".ui-multiselect-menu.edit-roles").hide();
            }
 			$('.ui-dialog-titlebar-close').click(function(){
 				$("#edit-roles").multiselect("widget").find(":checkbox[value='is_manager']").attr("checked","checked");
 		    	$("#edit-roles option[value='is_manager']").attr("selected", 1);
 		    	$("#edit-roles").multiselect("refresh");
 		    	already_is_manager_validation_checked = false;
 		        $("#commonMsg-wizard").remove();
 		    });
 			if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
 		    	changeDialogPopUI();
 		    }
 	 }catch(e){
 			// to do
 		}
     }
}
// change by ayyappans for 33432: Issue in Users
(function($) {
	$.widget("ui.peopleuser", {
		callMultiSelect: function(userId, ele){
			//alert(userId)
			var oc = $('#attr_open').val();
			var obj = this;
			this.currTheme = Drupal.settings.ajaxPageState.theme;
			$('.multiselect-custom-dropdown-results').css('display','none');
			$('.ui-multiselect-menu').css('display','none');
			$('#avil_'+ele).css('display','block');
			$('#attr_open').val(ele);
			$('#avil_'+oc).prev().find('span:last')
			.removeClass('down-tip-arrow')
			.addClass('right-tip-arrow');

			$('#avil_'+ele).prev().find('span:last')
			.removeClass('right-tip-arrow')
			.addClass('down-tip-arrow');
			var orgList = $('#load_multiselect_oorgs').val();
			//Construct data load and autocomplete urls
			userId = userId == '' ? undefined : userId;
			if(ele == 'jobrole'){
				var jobroleList = $('#load_multiselect_jobrole').val();
				var url = this.constructUrl("administration/people/user/jobrole/"+userId+"/"+jobroleList);
				var autourl = this.constructUrl("administration/people/user/jobrole-autocomplete/"+ele);
				var list_height = 200;
				var titlelength = 28;
				var list_width = 250;
			}else if(ele == 'omanagers') {
				var otherMangerList = $('#load_multiselect_omanagers').val();
				var url = this.constructUrl("administration/people/user/othermanagers/"+userId+"/"+otherMangerList);
				var autourl = this.constructUrl("administration/people/user/othermanagers-autocomplete/"+ele);
				var list_height = 140;
				var titlelength = 15;
				var list_width = 188;
			}else if(ele == 'session_instructor') {
				if(($( ".set-wbubble-left" ).hasClass("bottom-qtip-tip-up")) && ($("td").hasClass('admin-addedit-class-instructor_expmeeting'))) {
					$('.bottom-qtip-tip-up').css('z-index','99');
				}
				var insList = $('#load_multiselect_session_instructor').val();
				var url = this.constructUrl("administration/session/allinstructor/"+userId+"/"+insList);
				var autourl = this.constructUrl("administration/session/allinstructor-autocomplete/"+ele);
				var list_height = 120;
				var titlelength = 8;
				var list_width = 160;
			}else{
				var url = this.constructUrl("administration/people/user/org/"+userId+"/"+orgList);
				var autourl = this.constructUrl("administration/people/user/org-autocomplete/"+ele);
				var list_height = 120;
				var titlelength = 15;
				var list_width = 188;
			}
			var option;
			option = {
					url: url,
					dataType:"json",
					titlelength: titlelength,
					searchfilter:{url:autourl,enable:true},
					rownum:20,
					width:list_width,
					height: list_height,
					onselect:this.onselectfn,
					onunselect:this.onunselectfn,
					helpText: {autocomplete:Drupal.t('Search for refine'),checkAll:'Select All',uncheckAll:'Unselect All'},
					widget:this,
					afterload: function() {
						$('#avil_'+ele).find('.label-text').addClass('vtip');
						vtip();
						$('#avil_'+ele).find('.label-text').each(function() {
							$('#avil_'+ele).data('expmultiselectDropdown')._labelBind($(this));
						});
						$('#autoimg').bind('click',function(){
							if(ele=='jobrole')
								$('#avil_'+ele).data('expmultiselectDropdown').options.url = obj.constructUrl("administration/people/user/jobrole/"+userId+"/"+$('#load_multiselect_jobrole').val());
							else if(ele=='omanagers'){
								$('#avil_'+ele).data('expmultiselectDropdown').options.url = obj.constructUrl("administration/people/user/othermanagers/"+userId+"/"+$('#load_multiselect_omanagers').val());
							}
							else if(ele=='session_instructor'){
								$('#avil_'+ele).data('expmultiselectDropdown').options.url = obj.constructUrl("administration/session/allinstructor/"+userId+"/"+$('#load_multiselect_session_instructor').val());
							}
							else {
								$('#avil_'+ele).data('expmultiselectDropdown').options.url = obj.constructUrl("administration/people/user/org/"+userId+"/"+$('#load_multiselect_oorgs').val());
							}
						});
					}
			};
			$('#avil_'+ele).expmultiselectDropdown(option);
			$('#avil_'+ele).css('display','block');
			//change by ayyappans for 41736: Issue in user creation page
			$('#avil_'+ele).find('.footeraccess').hide();
			$('#avil_'+ele).data('expmultiselectDropdown')._callScroll();
		},
		onselectfn: function(ele,data,obj) {
			var eid = $(ele).attr('id').replace('avil_','');
			var dt=new Array();
			var v = $('#load_multiselect_'+eid).val();
			if(v!=''){
				dt=v.split(',');
			}
			dt.push(data.value);
			$('#load_multiselect_'+eid).val(dt.join(','));
			$("#root-admin").data('peopleuser').updateSelectedText(eid, dt.length);
			$(ele).find('#chk .label-text').addClass('vtip');
			vtip();
			$(ele).find('.label-text').each(function() {
				$(ele).data('expmultiselectDropdown')._labelBind($(this));
			});
			if(document.getElementById("edit-session-presenter")){
				//$('input[id="change_instructor"]').attr('value',2);
				var x = document.getElementById("edit-session-presenter");
				var option = document.createElement("option");
				option.text = data.title;
				option.value = data.value;
				option.title = data.title;
				x.add(option);
			}
			$('#avil_'+eid+' #container').jScrollPane({});
		},
		onunselectfn: function(ele,data,obj) {
			var eid = $(ele).attr('id').replace('avil_','');
			var dt=new Array();
			var v = $('#load_multiselect_'+eid).val();
			if(v!=''){
				dt=v.split(',');
			}
			var index = $.inArray(data.value, dt);
			if(index>=0)
				dt.splice(index, 1);
			$('#load_multiselect_'+eid).val(dt.join(','));
			$("#root-admin").data('peopleuser').updateSelectedText(eid, dt.length);
			if(document.getElementById("edit-session-presenter")){
				//$('input[id="change_instructor"]').attr('value',2);
				var ind = $("#edit-session-presenter option[value='"+data.value+"']").index();
				var x = document.getElementById("edit-session-presenter");
				x.remove(ind);
			}
			$('#avil_'+eid+' #container').jScrollPane({});
		},
		updateSelectedText: function(eid, count) {
			var selectedText;
			//	for 41196: Can't able to save the page,system gets hang for a while
			if(count === undefined) {
				var dt=new Array();
				var v = $('#load_multiselect_'+eid).val();
				if(v!=''){
					dt=v.split(',');
				}
				count = dt.length;
			}
			if(count > 0) {
				selectedText = count + ' '+Drupal.t('LBL646');
			}
			else {
				selectedText = Drupal.t('LBL674');
			}
			$('#menu_'+eid).find('.selected-list-text').text(selectedText);
		}
	});
	$.extend($.ui.peopleuser.prototype, EXPERTUS_SMARTPORTAL_AbstractManager, EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);
})(jQuery);

$(function() {
	try{
		$("#root-admin").peopleuser();
	}catch(e){
			// To Do
	}
});
$(function() {
	try {
		$('body').live('click', function(event) {
			if($(event.target).is('.multiselect-custom-dropdown') || ($(event.target).parents('div.multiselect-custom-dropdown-results').length && $('.multiselect-custom-dropdown-results').is(':visible'))) {
				//change for 42102: Unable to move to any other modules while clicking any modules link from the user profile page
				return false;
			}
			else if (!$(event.target).parents('.multiselect-custom-dropdown-results, .multiselect-custom-dropdown').length) {
				$('.multiselect-custom-dropdown-results').hide();
				$('.bottom-qtip-tip-up').css('z-index','100');
				/*if($('#change_instructor').val() != undefined && $('#change_instructor').val() != null && $('#change_instructor').val() == 2){
					$('#change_instructor').val(1);
					selectDropdownOnclick();
				} */
			}
		});
	}
	catch (e) {
		// TODO: handle exception
	}
});
function restrictMultiselectTitle(multiselectName, length) {
	/*$('div.ui-multiselect-menu.'+multiselectName).find('.ui-multiselect-checkboxes label.ui-corner-all span').each(function() {
		var labelText = titleRestricted($(this).text(), length);
		$(this).text(labelText);
	});*/
	$('div.ui-multiselect-menu.'+multiselectName).find('.ui-multiselect-checkboxes label.ui-corner-all span').each(function() {
		var labelText = titleRestrictionFadeoutImage($(this).text(), length);
		$(this).html(labelText);
	});
	$('.fade-out-title-container-unprocessed').each(function() {
		// console.log('unprocessed'+$(this).width());
		// console.log('span'+$(this).find('.title-lengthy-text').width());
		if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
			$(this).find('.fade-out-image').remove();
		}
		$(this).removeClass('fade-out-title-container-unprocessed');
	});
	vtip();
}

//alert("drupal behaiour")


function checkInstructor(a){
	if(a == 'Y'){
		$('#two-col-row-webexname_webexpass').css('display','block');
	}else if(a == 'N'){
		$('#two-col-row-webexname_webexpass').css('display','none');
	}
	if($("#ui-multiselect-edit-roles-option-0").has("aria-selected")){
	if($("#ui-multiselect-edit-roles-option-0").attr("aria-selected") == "true"){
		$('#two-col-row-webexname_webexpass').css('display','block');
    }else if(($("#ui-multiselect-edit-roles-option-0").attr("aria-selected") == "true") && !(x)) {
    	$('#two-col-row-webexname_webexpass').css('display','block');
    }else if(($("#ui-multiselect-edit-roles-option-0").attr("aria-selected") == "false") && (($("#ui-multiselect-edit-roles-option-1").attr("aria-selected") != "true"))){
    	$('#two-col-row-webexname_webexpass').css('display','none');
  	} else if(($("#ui-multiselect-edit-roles-option-0").attr("aria-selected") == "false") && (($("#ui-multiselect-edit-roles-option-1").attr("aria-selected") != "false"))){
  		$('#two-col-row-webexname_webexpass').css('display','none');
  	}}else{
  		$('#two-col-row-webexname_webexpass').css('display','none');
  	}
}
;

/* Note:  As of jQuery 1.7, the .live() method is deprecated.
 * Use .on() to attach event handlers in jquery 1.7+ versions.  
 */ 
$(document).ready(function(){
try{
	$('#access-control .movable').live('click', function(event){	
		try{
		if($(this).hasClass('selected-list')){
			$(this).removeClass('selected-list');
		} else {
			$(this).addClass('selected-list');
/*			$('#access-control .movable').mouseover(function(){
	    		$(this).addClass('selected-list');
	    	}); */
		}
		}catch(e){
			// to do
		}
	});
			
	$('body').click(function (event) {
		try{
		if(event.target.className == 'move-right' || event.target.className == 'move-left') {
		}
		else {
			$('#access-control .movable').each(function(){
					//$(this).removeClass('selected-list');
			});
		}		
		$('#access-select-list-class-dropdown-list').css("display","");
		if(event.target.className != 'access-select-list-class-dropdown-link'){
			 $('#access-select-list-class-dropdown-list').hide();
			
		}
		$('#ssel-unsel-usrlist-wrapper #select-list-dropdown-list').show();
		if(event.target.className != 'access-select-list-user-dropdown-link'){
			$('#sel-unsel-usrlist-wrapper #select-list-dropdown-list').hide();
		}
		}catch(e){
			// to do
		}
	}); 
	// Organization
	$('#access-control #organization .move-right').live('click', function(){
		try{
		$('#access-control #organization-available .selected-list').each(function(){
			storeOrgRolesValues('org', 'add', $(this).attr('id'));
			var orgName = $(this).children('span').attr('data');
			var orgNameRestricted = $(this).children('span').html();
			$('#organization-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+orgName+'" title="'+orgName+'">'+orgNameRestricted+'</span></li>');
			$(this).remove();
			vtip();
		});
		}catch(e){
			// to do
		}
	});
	$('#access-control #organization .move-left').live('click', function(){
		try{
		$('#access-control #organization-selected .selected-list').each(function(){
			storeOrgRolesValues('org', 'remove', $(this).attr('id'));
			var orgName = $(this).children('span').attr('data');
			var orgNameRestricted = $(this).children('span').html();
			$('#organization-available .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+orgName+'" title="'+orgName+'">'+orgNameRestricted+'</span></li>');
			$(this).remove();
			vtip();
		});
		}catch(e){
			// to do
		}
	});
	$('#access-control #organization-available .item-list li.movable').live('dblclick', function(){
		try{
		$('#vtip').remove();
		storeOrgRolesValues('org', 'add', $(this).attr('id'));
		var orgName = $(this).children('span').attr('data');
		var orgNameRestricted = $(this).children('span').html();
		$('#organization-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+orgName+'" title="'+orgName+'">'+orgNameRestricted+'</span></li>');
		$(this).remove();
		vtip();
		}catch(e){
			// to do
		}
	});
	$('#access-control #organization-selected .item-list li.movable').live('dblclick',function(){	
		try{
		$('#vtip').remove();
		storeOrgRolesValues('org', 'remove', $(this).attr('id'));
		var orgName = $(this).children('span').attr('data');
		var orgNameRestricted = $(this).children('span').html();
		$('#organization-available .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+orgName+'" title="'+orgName+'">'+orgNameRestricted+'</span></li>');
		$(this).remove();
		vtip();
		}catch(e){
			// to do
		}
	});

	// Job roles
	$('#access-control #jobroles .move-right').live('click', function(){
		try{
		$('#access-control #jobroles-available .selected-list').each(function(){
			var roleName,roleNameRestricted,mroRestricted;
			var entityType=$('#entity_type').val();
			var is_compliance = $('#is_compliance').val();
			if((entityType=='cre_sys_obt_cls' && is_compliance=='0') || entityType=='cre_sys_obt_trn' || entityType=='cre_sys_obt_crt' || entityType=='cre_sys_obt_cur'){
				var mro = $('#mro-controls').val();
				var default_mro = $('#default-mro-control').val();
				storeOrgRolesValues('jobroles', 'add', $(this).attr('id')+'-'+default_mro);
				roleName = $(this).children().html();
				roleNameRestricted = titleRestricted(roleName, '13');
				mroRestricted = titleRestricted(mro, '5');
				$('#jobroles-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="admin-access-org-name vtip" data="'+roleName+'" title="'+roleName+'">'+roleNameRestricted+'</span>'+mro+'</li>');
			}else{
				storeOrgRolesValues('jobroles', 'add', $(this).attr('id'));
				roleName = $(this).children().html();
				roleNameRestricted = titleRestricted(roleName, '40');
				$('#jobroles-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+roleName+'" title="'+roleName+'">'+roleNameRestricted+'</span></li>');
			}
			$(this).remove();
			vtip();
		});
		}catch(e){
			// to do
		}
	});
	$('#access-control #jobroles .move-left').live('click', function(){
		try{
		$('#access-control #jobroles-selected .selected-list').each(function(){
			storeOrgRolesValues('jobroles', 'remove', $(this).attr('id'));
			$(this).find('.mro-controls').remove();
			var roleName = $(this).children('span').attr('data');
			$('#jobroles-available .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+roleName+'" title="'+roleName+'">'+roleName+'</span></li>');
			$(this).remove();
			vtip();
		});
		}catch(e){
			// to do
		}
	});
	$('#access-control #jobroles-available .item-list li.movable').live('dblclick', function(){
		try{
		$('#vtip').remove();
		var roleName,roleNameRestricted,mroRestricted;
		var entityType=$('#entity_type').val();
		var is_compliance = $('#is_compliance').val();
		if((entityType=='cre_sys_obt_cls' && is_compliance=='0') || entityType=='cre_sys_obt_trn' || entityType=='cre_sys_obt_crt' || entityType=='cre_sys_obt_cur'){
			var mro = $('#mro-controls').val();
			var default_mro = $('#default-mro-control').val();
			storeOrgRolesValues('jobroles', 'add', $(this).attr('id')+'-'+default_mro);
			roleName = $(this).children().html();
			roleNameRestricted = titleRestricted(roleName, '13');
			mroRestricted = titleRestricted(mro, '5');
			$('#jobroles-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="admin-access-org-name vtip" data="'+roleName+'" title="'+roleName+'">'+roleNameRestricted+'</span>'+mro+'</li>');
		}else{
			storeOrgRolesValues('jobroles', 'add', $(this).attr('id'));
			roleName = $(this).children().html();
			roleNameRestricted = titleRestricted(roleName, '40');
			$('#jobroles-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+roleName+'" title="'+roleName+'">'+roleNameRestricted+'</span></li>');
		}
		$(this).remove();
		vtip();
		}catch(e){
			// to do
		}
	});
	$('#access-control #jobroles-selected .item-list li.movable').live('dblclick', function(){	
		try{
		$('#vtip').remove();
		storeOrgRolesValues('jobroles', 'remove', $(this).attr('id'));
		$(this).find('.mro-controls').remove();
		var roleName = $(this).children('span').attr('data');
		$('#jobroles-available .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+roleName+'" title="'+roleName+'">'+roleName+'</span></li>');
		$(this).remove();
		vtip();
		}catch(e){
			// to do
		}
	});
	$('#jobroles-selected .sub-menu li').live('click', function(){
		try{
		var selectedMRO = $(this).html();
		var id = $(this).closest('.movable').attr('id');
		var mro = $(this).attr('data');
		$(this).parent().prev('span').prev('span').html(selectedMRO);
		$(this).parent().css('display', 'none');
		storeOrgRolesValues('jobroles', 'modify', id, mro);
		return false;
		}catch(e){
			// to do
		}
	});
	$('#access-control .mro-selection').live('click', function(){
		try{
		var posX = $(this).position().left;
		var posY = $(this).position().top;
		if($(this).next().css('display') == 'block'){
			$(this).next().css('display', 'none');
		} else {
			$(this).next().css('display', 'block');
			if (navigator.userAgent.indexOf("Chrome")>0 || $.browser.msie && $.browser.version >= 8)
			{
			$(this).next().css('top', posX);
			$(this).next().css('top', posY+17);
			}
			
		}
		}catch(e){
			// to do
		}
	});
	
	// UserType
	$('#access-control #usertype .move-right').live('click', function(){
		try{
		$('#access-control #usertype-available .selected-list').each(function(){
			storeOrgRolesValues('usertype', 'add', $(this).attr('id'));
			var utName = $(this).children('span').attr('data');
			var utNameRestricted = $(this).children('span').html();
			$('#usertype-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+utName+'" title="'+utName+'">'+utNameRestricted+'</span></li>');
			$(this).remove();
			vtip();
		});
		}catch(e){
			// to do
		}
	});
	$('#access-control #usertype .move-left').live('click', function(){
		try{
		$('#access-control #usertype-selected .selected-list').each(function(){
			storeOrgRolesValues('usertype', 'remove', $(this).attr('id'));
			var utName = $(this).children('span').attr('data');
			var utNameRestricted = $(this).children('span').html();
			$('#usertype-available .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+utName+'" title="'+utName+'">'+utNameRestricted+'</span></li>');
			$(this).remove();
			vtip();
		});
		}catch(e){
			// to do
		}
	});
	$('#access-control #usertype-available .item-list li.movable').live('dblclick', function(){
		try{
		$('#vtip').remove();
		storeOrgRolesValues('usertype', 'add', $(this).attr('id'));
		var utName = $(this).children('span').attr('data');
		var utNameRestricted = $(this).children('span').html();
		$('#usertype-selected .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+utName+'" title="'+utName+'">'+utNameRestricted+'</span></li>');
		$(this).remove();
		vtip();
		}catch(e){
			// to do
		}
	});
	$('#access-control #usertype-selected .item-list li.movable').live('dblclick',function(){	
		try{
		$('#vtip').remove();
		storeOrgRolesValues('usertype', 'remove', $(this).attr('id'));
		var utName = $(this).children('span').attr('data');
		var utNameRestricted = $(this).children('span').html();
		$('#usertype-available .item-list').append('<li class="movable" id="'+$(this).attr('id')+'"><span class="vtip" data="'+utName+'" title="'+utName+'">'+utNameRestricted+'</span></li>');
		$(this).remove();
		vtip();
		}catch(e){
			// to do
		}
	});
}catch(e){
	// to do
}
});

function storeOrgRolesValues(fieldType, type, id, mro){
	try{
	var fieldName = '#'+fieldType+'_selected_id';
	var selectedList = $(fieldName).val();
	var selectedListArray = new Array();
	var selectedListLength = 0;
	if(type == 'add'){
		if(selectedList != ''){
			selectedListArray = selectedList.split(",");
			selectedListArray.push(id);
			selectedList = selectedListArray.join(",");
			$(fieldName).val(selectedList);
		} else {
			$(fieldName).val(id);
		}
	} else if(type == 'remove'){
		selectedListArray = selectedList.split(",");
		selectedListArray.splice( $.inArray(id, selectedListArray), 1 );
		selectedList = selectedListArray.join(",")
		$(fieldName).val(selectedList);
	} else {
		selectedListArray = selectedList.split(",");
		selectedListLength = selectedListArray.length;
		var mroArray = new Array();
		for(var c=0; c<selectedListLength; c++){
			mroArray = selectedListArray[c].split("-");
			if(mroArray[0] == id){
				selectedListArray[c] = id+"-"+mro;
			}
		}
		$(fieldName).val(selectedListArray.join(","));
	}
	}catch(e){
		// to do
	}
}

function getOrganizationList(org_name,isMore,fromPage){
	try{
	if(org_name.length>2 || org_name.length==0){
		var selectedIds = $('#org_selected_id').val();
		org_name = org_name.length==0?'-':org_name;
		selectedIds = selectedIds.length==0?'-':selectedIds;
		var pagenate = $('#org_pagenation').val().split('#');
		var total;
		var passPage;
		if(isMore=='more'){
			passPage = pagenate[1];
		}else{
			passPage = 0;
		}
		if(fromPage == 'discounts'){
 		  url = "/?q=administration/commerce/discounts/getorglist" + '/' + org_name + '/' + selectedIds + "/" + passPage;
		}
		else{
		  url = "/?q=administration/learning/access/getorglist" + '/' + org_name + '/' + selectedIds + "/" + passPage;
		}
		$('.admin-access-jobrole-field1 .admin-access-jobrole-field').addClass('ac_loading');
		$.ajax({
			type: "POST",
			url: url,
			data:  '',
			success: function(result){
				if(result!=undefined && result!=null && result!=''){
					if(isMore=='more'){
						$('#org_more').remove();
						$('#organization-available > ul').append(result);
						$('#org_pagenation').val(pagenate[0]+"#"+(Number(pagenate[1])+1));
						pagenate = $('#org_pagenation').val().split('#');
						total = 15*(Number(pagenate[1]));
					}else{
						$('#organization-available > ul').html(result);
						$('#org_pagenation').val(pagenate[0]+"#1");
						pagenate = $('#org_pagenation').val().split('#');
						total = 15*1;
					}
				}
					
				$('.admin-access-jobrole-field1 .admin-access-jobrole-field').removeClass('ac_loading');
				if(Number(pagenate[0])<=total){
					$('#org_more').remove();
				}
			}
		});
	}
	}catch(e){
		// to do
	}
}

function getJobRoles(role_name,isMore,fromPage){
	try{
	if(role_name.length>2 || role_name.length==0){
		var selectedIds = $('#jobroles_selected_id').val();
		role_name = role_name.length==0?'-':role_name;
		selectedIds = selectedIds.length==0?'-':selectedIds;
		var pagenate = $('#jobrole_pagenation').val().split('#');
		var total;
		var passPage;
		if(isMore=='more'){
			passPage = pagenate[1];
		}else{
			passPage = 0;
		}
		if(fromPage == 'discounts'){
			url = "/?q=administration/commerce/discounts/getjobroles" + '/' + role_name + '/' + selectedIds + "/" + passPage;
		}
		else{
			url = "/?q=administration/learning/access/getjobroles" + '/' + role_name + '/' + selectedIds + "/" + passPage;
		}
		$('.admin-access-jobrole-field2 .admin-access-jobrole-field').addClass('ac_loading'); 
		$.ajax({
			type: "POST",
			url: url,
			data:  '',
			success: function(result){
				if(result!=undefined && result!=null && result!=''){
					if(isMore=='more'){
						$('#jobrole_more').remove();
						$('#jobroles-available > ul').append(result);
						$('#jobrole_pagenation').val(pagenate[0]+"#"+(Number(pagenate[1])+1));
						pagenate = $('#jobrole_pagenation').val().split('#');
						total = 15*(Number(pagenate[1]));
					}else{
						$('#jobroles-available > ul').html(result);
						$('#jobrole_pagenation').val(pagenate[0]+"#1");
						pagenate = $('#jobrole_pagenation').val().split('#');
						total = 15*1;
					}
				}

				$('.admin-access-jobrole-field2 .admin-access-jobrole-field').removeClass('ac_loading');
				if(Number(pagenate[0])<=total){
					$('#jobrole_more').remove();
				}
			}
		});
	}
	}catch(e){
		// to do
	}
}

function getUserTypes(user_type_name,isMore,fromPage){
	try{
	if(user_type_name.length>2 || user_type_name.length==0){
		var selectedIds = $('#usertype_selected_id').val();
		user_type_name = user_type_name.length==0?'':user_type_name;
		selectedIds = selectedIds.length==0?'':selectedIds;
		var pagenate = $('#usertype_pagenation').val().split('#');
		var total;
		var passPage;
		if(isMore=='more'){
			passPage = pagenate[1];
		}else{
			passPage = 0;
		}
		if(fromPage == 'discounts'){
			url = "/?q=administration/commerce/discounts/getusertype" + '/' + user_type_name+ '/' + selectedIds + "/" + passPage;
		}
		else{
			url = "/?q=administration/learning/access/getusertype" + '/' + user_type_name+ '/' + selectedIds + "/" + passPage;
		}
		$('.admin-access-jobrole-field3 .admin-access-jobrole-field').addClass('ac_loading');
		$.ajax({
			type: "POST",
			url: url,
			data:  '',
			success: function(result){
				if(result!=undefined && result!=null && result!=''){
					if(isMore=='more'){
						$('#usertype_more').remove();
						$('#usertype-available > ul').append(result);
						$('#usertype_pagenation').val(pagenate[0]+"#"+(Number(pagenate[1])+1));
						pagenate = $('#usertype_pagenation').val().split('#');
						total = 15*(Number(pagenate[1]));
					}else{
						$('#usertype-available > ul').html(result);
						$('#usertype_pagenation').val(pagenate[0]+"#1");
						pagenate = $('#usertype_pagenation').val().split('#');
						total = 15*1;
					}
				}

				$('.admin-access-jobrole-field3 .admin-access-jobrole-field').removeClass('ac_loading');
				if(Number(pagenate[0])<=total){
					$('#usertype_more').remove();
				}
			}
		});
	}
	}catch(e){
		// to do
	}
}

function updateAccessOnKeyDown(evt,obj){
	try{
	evt = evt || window.event;
    var charCode = evt.keyCode || evt.which;
    if (charCode == 13) {           	    	
        evt.preventDefault();
        evt.stopPropagation();
        return false;           	    	
    }
	}catch(e){
		// to do
	}
}

function selectKeyDownAccess(id, evt, type){
	/* 	
		Down arrow - 40
		Up arrow - 38
	*/
	try{
	evt = evt || window.event;
    var charCode = evt.keyCode || evt.which;
    if (charCode == 40) { 
    	$('#'+type+' #'+id).next().focus();           	    	
    	$('#'+type+' #'+id).next().addClass('selected-list');
    }	
    if (charCode == 38) { 
    	$('#'+type+' #'+id).removeClass('selected-list');           	    	
    	$('#'+type+' #'+id).prev().focus();
    }	
    evt.preventDefault();
    evt.stopPropagation();
    return false;  
	}catch(e){
		// to do
	}
}
(function($) {
	$.widget("ui.accessgroup", {
	callMultiSelect: function(id,uniq,mro,entType,emptyId){
		var autoUrl = this.constructUrl("administration/catalogaccess/group/autocomplete&type="+entType+"&uniqueId="+uniq);
		var grpUrl;
		var obj = this;
		var autoHelpTxt = Drupal.t('LBL1270');
		if(typeof(entType) == 'undefined') entType = '';
		if(entType =='Discount'){
			grpurl = this.constructUrl("administration/catalogaccess/discount/group/"+uniq);
		}else{
			grpurl = this.constructUrl("administration/catalogaccess/group/"+uniq+"/"+emptyId+"&type="+entType);
		}
		var xWidth = 270;
		if(document.getElementById('sel-unsel-usrlist') != null)
			xWidth = 305;
		if(id == 'sel-unsel-usrlist'){
			grpurl = this.constructUrl("administration/catalogaccess/user/"+uniq+"/"+emptyId+"&type="+entType);
			autoUrl = this.constructUrl("administration/catalogaccess/user/autocomplete&type="+entType+"&uniqueId="+uniq);
			autoHelpTxt = Drupal.t('LBL036') + ' ' + Drupal.t('LBL054');
			$('#sel-unsel-grplist').hide();
			$('#sel-unsel-usrlist').show();
			
			if($('#user-list-control').length > 0){
				$('#group-list-control').find('span:last')
	    		.removeClass('down-tip-arrow')
	    		.addClass('right-tip-arrow');
	    	
		    	$('#user-list-control').find('span:last')
				.removeClass('right-tip-arrow')
				.addClass('down-tip-arrow');
			}
		}else{
			
			$('#sel-unsel-grplist').show();
			$('#sel-unsel-usrlist').hide();
			
			if($('#user-list-control').length > 0){
				$('#user-list-control').find('span:last')
	    		.removeClass('down-tip-arrow')
	    		.addClass('right-tip-arrow');
	    	
		    	$('#group-list-control').find('span:last')
				.removeClass('right-tip-arrow')
				.addClass('down-tip-arrow');
			}
		}
		if($('#'+id + ' #ui-multiselect-con').size()>0){
			return true;
		}
		var res = '';
		if($('#hidden_oplist').val() != null) {
			res = JSON.parse($('#hidden_oplist').val());
		}
		this.currTheme = Drupal.settings.ajaxPageState.theme;
		//console.log($(this));
		if(this.currTheme == 'expertusoneV2'){
			$('#'+id).expMultiSelectDropdownExtend({
				//data :x,
				width: xWidth,
				height: 235,
				listmodel :{id:'opt',title:'val',dispTitle:'dispval',selected:'sel'},
				sublistmodel :{enable:'dropdown',defaultval:'mro'},
				optlistmodel :{id :'opt',title:'val'},
				optional: {optionlist:res,enable:mro},
				url: grpurl,
				searchfilter:{url:autoUrl,enable:true},
				helpText: {autocomplete:autoHelpTxt,checkAll:'Check All',uncheckAll:'Uncheck All'},
				dataType:"json",
				rownum:15,
				checkAll :false,
				uncheckall :false,
				titlelength : 30,
				widget: this,
				onselect:this.onselectfn,
				onunselect:this.onunselectfn,
				ondropdown:this.ondropdownselfn
				
			});
		}else{
			$('#'+id).expmultiselectDropdown({
				//data :x,
				width: xWidth,
				height: 235,
				listmodel :{id:'opt',title:'val',dispTitle:'dispval',selected:'sel'},
				sublistmodel :{enable:'dropdown',defaultval:'mro'},
				optlistmodel :{id :'opt',title:'val'},
				optional: {optionlist:res,enable:mro},
				url: grpurl,
				searchfilter:{url:autoUrl,enable:true},
				helpText: {autocomplete:autoHelpTxt,checkAll:'Check All',uncheckAll:'Uncheck All'},
				dataType:"json",
				rownum:15,
				checkAll :false,
				uncheckall :false,
				titlelength : 27,
				widget: this,
				onselect:this.onselectfn,
				onunselect:this.onunselectfn,
				ondropdown:this.ondropdownselfn
				
			});
			$('#chk ul li').each(function(){
				if($(this).hasClass('learner-group-container')) {
					$(this).css("display","table-row");
				}
			});
		}
		//if(id == 'sel-unsel-usrlist'){
			//$('#sel-unsel-usrlist #multiautocomplete').css('width','180px');
			setTimeout(function(){
				$('#'+id+ ' #chk ul li .access-fullname .fade-out-image-access').remove();
				//var lid = (id == 'sel-unsel-usrlist') ? 'sel-user-list' : 'sel-group-list';
				$('#sel-user-list .cls-access-list-select').each(function(){
					var id = $(this).find('span:first').attr('id');
					id = id.replace('group-names-','');
					obj.resetRighPane('sel-user-list',id);
				});
			},100)
		//}
		this.callScroll();
		vtip();
	},
	
	callScroll: function(){
		var aHight = $('#group-control').height()-60;
		var gHight = $('#sel-group-list').height();
		var uHight = $('#sel-user-list').height();
		var sHight = (gHight !=0 && uHight !=0) ? (gHight + uHight + 101) : (gHight + uHight+23);
		if(sHight>=aHight){
			if($('#group-scroll-wrapper').find('.jspContainer').length>0){
				$('#group-scroll-wrapper').jScrollPane('reinitialise');
			}else{
				$('#group-scroll-wrapper').jScrollPane({});
			}
		}else{
			if($('#group-scroll-wrapper').find('.jspContainer').length>0){
				$('#group-scroll-wrapper').jScrollPane('destroy');
				//$('#group-scroll-wrapper').html($('#group-scroll-wrapper .jspPane').html());
			}
		}
	},
	
	onselectfn: function(uniq,data,ob){
		var id = $(uniq).attr('id');
		var lid = (id == 'sel-unsel-usrlist') ? 'sel-user-list' : 'sel-group-list';
		var inid = (id == 'sel-unsel-usrlist') ? 'hidden_selection_usr' : 'hidden_selection'; 
		var inids = (id == 'sel-unsel-usrlist') ? 'hidden_idlist_usr' : 'hidden_idlist';
        var str=$('input[id="'+inid+'"]').attr('value');
    	var selected_list='';
        if(str.length==0)
        {
            if($('#'+data.value).attr('opt')==='enable')
            selected_list=data.value+'-cre_sys_inv_opt';
            else
            selected_list=data.value+'-';
        }else{
	        if($('#'+data.value).attr('opt')==='enable')
	            selected_list=','+data.value+'-cre_sys_inv_opt';
	        else
	            selected_list=','+data.value+'-';
        }
		var selListItem = $('#'+id).expmultiselectDropdown('getValue','selected');
		var selList = $('#'+lid).html();
		selList = titleRestrictionFadeoutImage("-"+" "+data.title, "addedit-cataog-access-group-name-fadeout-container");
		var mroList = 'mro-names-'+data.value;
		var grpname = 'group-names-'+data.value;
		if(document.getElementById(grpname)==null){
			$('#'+lid).append('<div class="cls-access-list-select"><span id="'+grpname+'" class="vtip" title ="'+data.title+'"></span><span id="'+mroList+'"></span></div>');
		}
		$('#group-names-'+data.value).html(selList);
		if($(".contentauthorclone").size() == 0)
			ob.sortList(lid);
		if(selListItem.length != '') {
			if(id == 'sel-unsel-usrlist')
				$('#help-msg-usr').css('display','block') +'<br>';
			if(id == 'sel-unsel-grplist')
				$('#help-msg-grp').css('display','block') +'<br>';
			$('#sel-group-text').css('display','none');
			$('#sel-message').css('display','none');
			$('#sel-msg').css('display','none');
		}
		if(id == 'sel-unsel-usrlist') {
			$('#'+id+ ' #chk ul li .access-username').remove();
			$('#'+id+ ' #chk ul li .access-fullname').css('min-width','130px');
		}
	  //Add selected list code in hidden variable
		var i ='';
		$.each(selListItem,function(){
			i += i==''?(this.value+"-"+this.selectedOption.optId) : ","+(this.value+"-"+this.selectedOption.optId);
			});
		$('input[id="'+inids+'"]').attr('value',i);
        str=str+selected_list;
        $('input[id="'+inid+'"]').attr('value',str);
		//$('#group-scroll-wrapper').jScrollPane({});
        
        ob.dispSeparator();
		ob.callScroll();
		vtip();
	},
	
	sortList: function(lid){
		var mylist = $('#'+lid); 
		var l = mylist.children('div').get();
		l.sort(function(a,b){
			return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase());
		});
		$.each(l, function(idx, itm) { $('#'+lid).append(itm); });
	},
	
	onunselectfn : function(uniq,data, ob){
		var id = $(uniq).attr('id');
		var lid = (id == 'sel-unsel-usrlist') ? 'sel-user-list' : 'sel-group-list';
		var inid = (id == 'sel-unsel-usrlist') ? 'hidden_selection_usr' : 'hidden_selection';
		var inids = (id == 'sel-unsel-usrlist') ? 'hidden_idlist_usr' : 'hidden_idlist';
		var str=$('input[id="'+inid+'"]').attr('value');
	    var unsel=data.value+'-';
	    var pattern1='(^|,)'+unsel+'(cre_sys_inv_rec|cre_sys_inv_man|cre_sys_inv_opt|)';
	    var regex1=new RegExp(pattern1);
	    str=str.replace(regex1,'');
	    if(str.charAt(0)==',')
	       str=str.substring(1,str.length);
		var selList =$('#'+lid).html();
		selList = selList.split("-");
		selList.splice(selList.indexOf(data.title),1);
		var regExp = new RegExp(",","g");
		selList = selList.toString().replace(regExp, '-');
		$('#group-names-'+data.value).html('');
		$('#mro-names-'+data.value).html('');
		$('#group-names-'+data.value).parent().remove();
		$('input[id="'+inid+'"]').attr('value','');
		var selListItem = $('#'+id).expmultiselectDropdown('getValue','selected');
		var i ='';
		$.each(selListItem,function(){
		      i += i==''?(this.value+"-"+this.selectedOption.optId) : ","+(this.value+"-"+this.selectedOption.optId);
			});
		 $('input[id="'+inids+'"]').attr('value',i);
		 str = (str == undefined || str == 'undefined') ? '' : str;
         $('input[id="'+inid+'"]').attr('value',str);
         ob.dispSeparator(id);
		 ob.callScroll();
	},
	
	dispSeparator: function(id){
		/*var groupSelect = $('#sel-unsel-grplist').data('expmultiselectDropdown') != undefined ? $('#sel-unsel-grplist').expmultiselectDropdown('getValue','selected') : [];
		var userSelect = $('#sel-unsel-usrlist').data('expmultiselectDropdown') != undefined ?$('#sel-unsel-usrlist').expmultiselectDropdown('getValue','selected') : [];*/
		var groupSelect = $('#sel-group-list').children();
		var userSelect = $('#sel-user-list').children();
		if(groupSelect.length > 0 && userSelect.length > 0){
			$('#right-separator').css('display','block');
		}else{
			$('#right-separator').css('display','none');
		}
		if(groupSelect.length == 0 && userSelect.length == 0){
			$('#sel-group-text').css('display','inline');
			$('#sel-message').css('display','inline');
			$('#sel-msg').css('display','inline');
		}else{
			$('#sel-group-text').css('display','none');
			$('#sel-message').css('display','none');
			$('#sel-msg').css('display','none');
		}
		if(groupSelect.length == 0)
			$('#help-msg-grp').css('display','none');
		if(userSelect.length == 0)
			$('#help-msg-usr').css('display','none');
	},
	
	ondropdownselfn : function(uniq,data,ob){
		var id = $(uniq).attr('id');
		var lid = (id == 'sel-unsel-usrlist') ? 'sel-user-list' : 'sel-group-list';
		var inid = (id == 'sel-unsel-usrlist') ? 'hidden_selection_usr' : 'hidden_selection';
		var inids = (id == 'sel-unsel-usrlist') ? 'hidden_idlist_usr' : 'hidden_idlist';
        var str=$('input[id="'+inid+'"]').attr('value');
        var optChanged=','+data.value+'-'+data.selectedOption.optId;
        var unsel=data.value+'-';
        var pattern1='(^|,)'+unsel+'(cre_sys_inv_rec|cre_sys_inv_man|cre_sys_inv_opt|)';
        var regex1=new RegExp(pattern1);
        str=str.replace(regex1,optChanged);
        if(str.charAt(0)==',')
           str=str.substring(1,str.length);
		var selList = $('#'+lid).html();
		selList = " "+"<span>("+data.selectedOption.optval +")</span>";		
		var selectedValue = data.selectedOption.optId;

		//$('#group-names-'+data.value).append("<span id='"+mroList+"'></span><br>");
		$('#mro-names-'+data.value).html('');
		$('#mro-names-'+data.value).html(selList);
		if(selectedValue == 'cre_sys_inv_opt'){
			$('#mro-names-'+data.value).html("");
		}
		else{
			$('#mro-names-'+data.value).html(selList);
		}
		
		ob.resetRighPane(lid,data.value);
		
		var hid = $('input[id="'+inids+'"]').val();
        hid = hid+'-'+data.selectedOption.optId;
        
        var selListItem = $('#'+id).expmultiselectDropdown('getValue');
   
        var i = '';
		$.each(selListItem,function(){
			i += i==''?(this.value+"-"+this.selectedOption.optId) : ","+(this.value+"-"+this.selectedOption.optId);
		});
		$('input[id="'+inids+'"]').attr('value',i);
        $('input[id="'+inid+'"]').attr('value',str);

	},
	
	resetRighPane:function(lid,value){
		var Width = $('#'+lid).width();
		var mWidth = $('#mro-names-'+value+' span').width()+2;
		var tWidth = $('#group-names-'+value+' .fade-out-title-container .title-lengthy-text').width();
		var aWidth = Width - mWidth;
		var fWidth = (tWidth > aWidth) ? (aWidth - 5) : tWidth;

		$('#group-names-'+value).css('float','left');
		$('#group-names-'+value+' .fade-out-title-container.addedit-cataog-access-group-name-fadeout-container').css('max-width',fWidth+'px');
		$('#group-names-'+value+' .fade-out-title-container.addedit-cataog-access-group-name-fadeout-container span .fade-out-image').remove();
		if(tWidth > aWidth){
			$('#group-names-'+value+' .fade-out-title-container.addedit-cataog-access-group-name-fadeout-container span').append('<span class="fade-out-image"></span>');
			$('#mro-names-'+value).css('width',mWidth+'px').css('padding-left','0px');
		}else{
			$('#mro-names-'+value).css('width',mWidth+'px').css('padding-left','10px');
		}
		$('#mro-names-'+value).css('float','left');
	},
	moreAccessSearchTypeText : function(dCode,dText) {
	    $('#access-select-list-class-dropdown-list').hide();
	    $('#access-select-list-class-dropdown').text(dCode);
	    $('#access-search_all_classs_type-hidden').val(dText);
	    var displayText;
	    if(dText=='clstit'){
	 	   displayText = Drupal.t('LBL766');     
	    }else if (dText=='clsstatus') {
	 	   displayText =Drupal.t('LBL036') + ' ' + Drupal.t('Class')+ ' ' + dCode;
	    }else{
	 	   displayText =Drupal.t('LBL036') + ' ' + dCode;
	    }
	    
		 var searchType = $('#access-select-list-class-dropdown').html();
		 var x = $('#sel-unsel-grplist').data('expmultiselectDropdown');
		 if(x.options.searchfilter.url.indexOf("Admin")>=0){
		      x.options.searchfilter.url = x.options.searchfilter.url.replace('Admin',searchType);
		      x.options.url = x.options.url.replace('Admin',searchType);
		 }
		 else if(x.options.searchfilter.url.indexOf("Learner")>=0){
		      x.options.searchfilter.url = x.options.searchfilter.url.replace('Learner',searchType);
		      x.options.url =  x.options.url.replace('Learner',searchType);
		 }
		 else if(x.options.searchfilter.url.indexOf("Any")>=0){
			 x.options.searchfilter.url = x.options.searchfilter.url.replace('Any',searchType);
			 x.options.url = x.options.url.replace('Any',searchType);
		 }
		 $('#sel-unsel-grplist').expmultiselectDropdown('autocompleteInit');
	},
	moreUserAccessSearchTypeText : function(dCode,dText) {
	    $('#select-list-dropdown-list').hide();
	    var privVal = $('#search_all_enroll_type-hidden').val();
	    $('#select-list-dropdown').text(dCode);
	    $('#search_all_enroll_type-hidden').val(dText);
	    var displayText = Drupal.t('LBL036') + ' ' + dCode;
	    $('#sel-unsel-usrlist #multiautocomplete').val(displayText);
		 //var searchType = $('#select-list-dropdown').html();
		 var x = $('#sel-unsel-usrlist').data('expmultiselectDropdown');
		 if(x.options.searchfilter.url.indexOf(privVal)>=0){
		      x.options.searchfilter.url = x.options.searchfilter.url.replace(privVal,dText);
		      x.options.url = x.options.url.replace(privVal,dText);
		      x.options.helpText.autocomplete = displayText;
		 }
		 
		 $('#sel-unsel-usrlist').expmultiselectDropdown('autocompleteInit');
	},
	 moreAccessSearchHideShow : function (id) {			
			 $('#access-select-list-class-dropdown-list').slideToggle();
			 $('#access-select-list-class-dropdown-list li:last').css('border-bottom','0px none');		
     },
     moreUserAccessSearchHideShow : function (id) {			
		 $('#select-list-dropdown-list').slideToggle();
		 $('#select-list-dropdown-list li:last').css('border-bottom','0px none');		
     },
	accessClose: function(){
		$('#group-control').remove();
	}
});
	$.extend($.ui.accessgroup.prototype, EXPERTUS_SMARTPORTAL_AbstractManager, EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);
})(jQuery);

$(function() {
	try{
		$("#root-admin").accessgroup();	
	}catch(e){
			// To Do
	}
});
(function($) {
	$.widget("custom.multiselectclone",  {
		 // default options
		options: {
		checkAll: false,
		uncheckAll: false,
		helpText: {autocomplete: 'Search', checkAll:'Check All',uncheckAll:'Uncheck All'},
		targetClass: '',
		onunselectAll: '',
		onselectAll: '',
		theme: ''
		},
		_create: function(){
			  var options = this.options,
			  	obj = this,
				html ='',
				chkAll = '',
				chk= '<ul></ul>',
				unchk = '<ul></ul>',
				unchkAll = '',
				cHight=options.height - 30;
		 	 this.elem = this.element;
		 	 this.elemid = $(this.elem).attr('id');
		 	 
		 	 if($(".contentauthorclone").size() > 0)
		 	 {
		 	 		html +='<div id ="ui-multiselect-con"><div id = "container"><div id ="chk"></div></div></div>';
		 	 		
		 	 		$(obj.element).append(html);
		    		$(obj.element).find('#ui-multiselect-con').addClass(options.classes).css({'width':options.width,'height':options.height});
		    		$(obj.element).find('#container').css({'height':cHight});
		    		$(obj.element).find('.label-text').each(function(){
		 				obj._labelBind(this);
		 			});
	    			obj._dataLoad();
	    			//obj._binding();
		 	 }
		 	 else
		 	 {
		 	 
		 	 if(options.checkAll == true) {
		 		 if(options.theme == "expertusoneV2") {
		 			chkAll +='<div><ul><li style="display:none;" class="select-all-wrapper"><label class="clone-label-list" for="checkall" title="'+options.helpText.checkAll+'">'+options.helpText.checkAll+'</label><div class="form-item form-type-checkbox form-item-checkbox-attributes-access"><div class="checkbox-unselected"><input class="form-checkbox" type="checkbox" name="checkall" id="selectcheckall"><span class="field-suffix"></span></div></div></li></ul></div>';
		 		 }
		 		 else {
		 			 chkAll +='<div><ul><li style="display:none;" class="select-all-wrapper"><input class="form-checkbox" type="checkbox" name="checkall" id="selectcheckall"><label class="clone-label-list" for="checkall">'+options.helpText.checkAll+'</label></li></ul></div>';
		 		 }
		 	 }
		 	 
			 if(options.uncheckAll == true) {
				 if(options.theme == "expertusoneV2") {
					 unchkAll +='<div><ul><li style="display:none;" class="select-all-wrapper"><label class="clone-label-list" for="uncheckall" title="'+options.helpText.uncheckAll+'">'+options.helpText.uncheckAll+'</label><div class="form-item form-type-checkbox form-item-checkbox-attributes-access"><div class="checkbox-unselected"><input class="form-checkbox" type="checkbox" name="uncheckall" id="selectuncheckall"><span class="field-suffix"></span></div></div></li></ul></div>';
			 	}
				 else {
					 unchkAll +='<div><ul><li style="display:none;" class="select-all-wrapper"><input class="form-checkbox" type="checkbox" name="uncheckall" id="selectuncheckall"><label class="clone-label-list" for="uncheckall">'+options.helpText.uncheckAll+'</label></li></ul></div>';
				 }

			 }
		 	html +='<div id ="ui-multiselect-con"><div id = "container">'+unchkAll+'<div id ="chk">'+chk+'</div><div class="line-separator" style="display:none;"/>'+chkAll+'<div id ="unchk">'+unchk+'</div></div></div>';
		    $(obj.element).append(html);
		    $(obj.element).find('#ui-multiselect-con')
		    	.addClass(options.classes)
				.css({'width':options.width,'height':options.height});
		    $(obj.element).find('#container')
				.css({'height':cHight});
		    $(obj.element).find('.label-text').each(function(){
		 		obj._labelBind(this);
		 	});
	    	obj._dataLoad();
	    	obj._binding();
	    	}
	    	if($(".contentauthorclone").size() == 0)
	    		obj._sortlist();
	    	$(obj.element).jScrollPane();
		},
		_dataLoad : function(){
			var obj = this;
			
			if($(".contentauthorclone").size() > 0)
			{
				$.each($(obj.element).find('.'+obj.options.targetClass), function() {
					var checkbox = $(this).find('input').eq(0);
					$(obj.element).find('#chk ul').append($(this));
				});
			}
			else
			{
			
			//load checked and unchecked checkboxes to the respective divs
			$.each($(obj.element).find('.'+obj.options.targetClass), function() {
				var checkbox = $(this).find('input').eq(0);
				if(checkbox.attr('checked')) {
					$(obj.element).find('#chk ul').append($(this));
				}
				else {
					$(obj.element).find('#unchk ul').append($(this));
				}
				obj._clickfuntion($(obj.element).find('input[id="'+$(this).find('input').attr('id')+'"]'));
			});
		     // Show/Hide "Select All" Option
		    $(obj.element).find('#selectcheckall').parents('.select-all-wrapper')
		     	[ (this.options.checkAll == true && $('#'+this.elemid+' #unchk ul li').filter(function() {
			 	    return $(this).css('display') !== 'none';
			 	}).length > 1) ? 'show' : 'hide' ]();
		     
		    // Show/Hide "Unselect All" Option with checked attribute
		 	if(this.options.uncheckAll == true && $('#'+this.elemid+' #chk ul li').filter(function() {
		 	    return $(this).css('display') !== 'none';
		 	}).length > 1) {
		 		$(obj.element).find('#selectuncheckall').attr('checked','checked');
		 		
		 		$(obj.element).find('#selectuncheckall').parents('.select-all-wrapper').show();
		 	}else{
		 		$(obj.element).find('#selectuncheckall').removeAttr('checked');
		 		$(obj.element).find('#selectuncheckall').parents('.select-all-wrapper').hide();
		 	}
		 	if(obj.options.theme == "expertusoneV2") {
				checkboxSelectedUnselectedCommon($(obj.element).find('#selectuncheckall'));
			}
			
			if($(obj.element).find('#unchk ul li').filter(function() {
		 	    return $(this).css('display') !== 'none';
		 	}).length <= 0 || $(obj.element).find('#chk ul li').filter(function() {
		 	    return $(this).css('display') !== 'none';
		 	}).length <= 0)
				 $(obj.element).find('.line-separator').hide();
		    else
		    	 $(obj.element).find('.line-separator').show();
		    }
		},
		_moveItems : function(ele){
			var id = ele.attr('id'),
				obj = this;
			var checked = $(obj.elem).find('#chk ul');
			var unchecked = $(obj.elem).find('#unchk ul');
			
			$.each(ele, function() {
				if($(this).attr('checked')) {
					$(this).closest("."+obj.options.targetClass).appendTo(checked);
				}
				else {
					$(this).closest("."+obj.options.targetClass).appendTo(unchecked);
				}
			});
		
			checked.find('input[id="'+id+'"]').attr('checked','checked');
			
			// Show "Unselect All" option if there are 2 or more list items are available
			var lst = checked.find('li').length;
			if(this.options.uncheckAll == true){
				if(lst > 1){
					$(obj.elem).find('input[id="selectuncheckall"]')
						.attr('checked','checked')
						.parents('.select-all-wrapper')
						.css('display', 'block');
				}else {
					$(obj.elem).find('input[id="selectuncheckall"]')
						.attr('checked','checked')
						.parents('.select-all-wrapper')
						.css('display', 'none');
				}
				if(obj.options.theme == "expertusoneV2") {
					checkboxSelectedUnselectedCommon($(obj.element).find('#selectuncheckall'));
				}
			}
			
			// Hide "Select All" option if there are less than 2 list items are available
			if($(unchecked).find('li').length <= 1) {
				$(this.elem).find('input[id="selectcheckall"]')
				.removeAttr('checked')
				.parents('.select-all-wrapper')
				.css('display', 'none');
			} else {
				$(this.elem).find('input[id="selectcheckall"]')
				.removeAttr('checked')
				.parents('.select-all-wrapper')
				.css('display', 'block');
			}
			
			// Show or hide the separator line 
			if($('#'+this.elemid+' #unchk ul li').filter(function() {
				    return $(this).css('display') !== 'none';
				}).length <= 0 || $('#'+this.elemid+' #chk ul li').filter(function() {
				    return $(this).css('display') !== 'none';
				}).length <= 0)
				 $(this.elem).find('.line-separator').hide();
			 else
				 $(this.elem).find('.line-separator').show();
			if($(".contentauthorclone").size() == 0)
				obj._sortlist();
			$(obj.element).data('jsp').reinitialise();
		},
		_clickfuntion : function(ele){
			var obj = this;
			$(ele).bind('click',function(){
				obj._moveItems($(ele));
			});	
		},
		_binding : function() {
			var obj = this;
			if(obj.options.checkAll == true){
				$(obj.element).find('#selectcheckall').unbind('click')
					.click(function () {
						obj._selectAll($(this));
						if(obj.options.theme =="expertusoneV2") {
							checkboxSelectedUnselectedCommon(this);
						}
					});
			}
			if(obj.options.uncheckAll == true){
				$(obj.element).find('#selectuncheckall').unbind('click')
					.click(function () {
						obj._selectAll($(this));
						if(obj.options.theme =="expertusoneV2") {
							checkboxSelectedUnselectedCommon(this);
						}
					});
			}
		},
		_selectAll: function(ele) {
			var obj = this;
			/*	clicked target = select All*/
			var target;
			if(ele.attr('id') == 'selectcheckall') {
				target = $(obj.element).find('#unchk ul input');
				target.each(function(){
					if(!$(this).attr('disabled')) {
						$(this).attr('checked', 'checked');
						if(obj.options.theme == "expertusoneV2") {
							checkboxSelectedUnselectedCommon(this);
						}
					}
				});
				this._moveItems(target);
			}
			else {
				target = $(obj.element).find('#chk ul input');
				target.each(function(){
					$(this).removeAttr('checked');
					if(obj.options.theme == "expertusoneV2") {
						checkboxSelectedUnselectedCommon(this);
					}
				});
				this._moveItems(target);
			}
			
		},
		_sortlist :function(){
			var mylist = $(this.elem).find('#chk ul'); 
			var srt = this.options.sort;
			var listitems = mylist.children('li').get();
			listitems.sort(function(a, b) {
				if(srt == 'desc')
					return $(b).text().toUpperCase().localeCompare($(a).text().toUpperCase());
				else
					return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase());
			});
			$.each(listitems, function(idx, itm) { mylist.append(itm); });

		}
	});
})(jQuery);

(function($) {
	/**	this function will be called on Drupal ajax completion*/
	$.fn.enableMultiCheckClone = function(classId) {
	
	if($(".contentauthorclone").size() > 0)
	{
		$('#clonescrolldiv'+classId).multiselectclone({
			checkAll: false, 
			uncheckAll: false,   
			targetClass: 'clone-list-class',
			helpText: {autocomplete: 'Search', checkAll: Drupal.t('Check')+' '+Drupal.t('LBL1039'), uncheckAll: Drupal.t('LBL1272')+' '+Drupal.t('LBL1039')},
			theme: Drupal.settings.ajaxPageState.theme
		});
	}
	else
	{
		$('#clonescrolldiv'+classId).multiselectclone({
			checkAll: true, 
			uncheckAll: true,   
			targetClass: 'clone-list-class',
			helpText: {autocomplete: 'Search', checkAll: Drupal.t('Check')+' '+Drupal.t('LBL1039'), uncheckAll: Drupal.t('LBL1272')+' '+Drupal.t('LBL1039')},
			theme: Drupal.settings.ajaxPageState.theme
		});
	} 
	};
})(jQuery);
;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */

(function (factory) {
	if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.9',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
        },

        getLineHeight: function(elem) {
            return parseInt($(elem)['offsetParent' in $.fn ? 'offsetParent' : 'parent']().css('fontSize'), 10);
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));
;
/*
 * jQuery Autocomplete plugin 1.1
 *
 * Copyright (c) 2009 J�rn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.autocomplete.js,v 1.1 2011-01-03 13:10:27 srprabhu Exp $
 */

;(function($) {
	
$.fn.extend({
	autocomplete: function(urlOrData, options) {
		var isUrl = typeof urlOrData == "string" || typeof urlOrData== "function";;
		options = $.extend({}, $.Autocompleter.defaults, {
			url: isUrl ? urlOrData : null,
			data: isUrl ? null : urlOrData,
			delay: isUrl ? $.Autocompleter.defaults.delay : 10,
			max: options && !options.scroll ? 10 : 150
		}, options);
				
		// if highlight is set to false, replace it with a do-nothing function
		options.highlight = options.highlight || function(value) { return value; };
		
		// if the formatMatch option is not specified, then use formatItem for backwards compatibility
		options.formatMatch = options.formatMatch || options.formatItem;
		
		return this.each(function() {
			new $.Autocompleter(this, options);
		});
	},
	result: function(handler) {
		return this.bind("result", handler);
	},
	search: function(handler) {
		return this.trigger("search", [handler]);
	},
	flushCache: function() {
		return this.trigger("flushCache");
	},
	setOptions: function(options){
		return this.trigger("setOptions", [options]);
	},
	unautocomplete: function() {
		return this.trigger("unautocomplete");
	}
});

$.Autocompleter = function(input, options) {

	var KEY = {
		UP: 38,
		DOWN: 40,
		DEL: 46,
		TAB: 9,
		RETURN: 13,
		ESC: 27,
		COMMA: 188,
		PAGEUP: 33,
		PAGEDOWN: 34,
		BACKSPACE: 8
	};

	// Create $ object for input element
	var $input = $(input).attr("autocomplete", "off").addClass(options.inputClass);

	var timeout;
	var previousValue = "";
	var cache = $.Autocompleter.Cache(options);
	var hasFocus = 0;
	var lastKeyPressCode;
	var config = {
		mouseDownOnSelect: false
	};
	var select = $.Autocompleter.Select(options, input, selectCurrent, config);
	
	var blockSubmit;
	
	// prevent form submit in opera when selecting with return key
	$.browser.opera && $(input.form).bind("submit.autocomplete", function() {
		if (blockSubmit) {
			blockSubmit = false;
			return false;
		}
	});
	
	// only opera doesn't trigger keydown multiple times while pressed, others don't work with keypress at all
	$input.bind(($.browser.opera ? "keypress" : "keydown") + ".autocomplete", function(event) {
		// a keypress means the input has focus
		// avoids issue where input had focus before the autocomplete was applied
		hasFocus = 1;
		// track last key pressed
		lastKeyPressCode = event.keyCode;
		switch(event.keyCode) {
		
			case KEY.UP:
				event.preventDefault();
				if ( select.visible() ) {
					select.prev();
				} else {
					onChange(0, true);
				}
				break;
				
			case KEY.DOWN:
				event.preventDefault();
				if ( select.visible() ) {
					select.next();
				} else {
					onChange(0, true);
				}
				break;
				
			case KEY.PAGEUP:
				event.preventDefault();
				if ( select.visible() ) {
					select.pageUp();
				} else {
					onChange(0, true);
				}
				break;
				
			case KEY.PAGEDOWN:
				event.preventDefault();
				if ( select.visible() ) {
					select.pageDown();
				} else {
					onChange(0, true);
				}
				break;
			
			// matches also semicolon
			case options.multiple && $.trim(options.multipleSeparator) == "," && KEY.COMMA:
			case KEY.TAB:
			case KEY.RETURN:
				if( selectCurrent() ) {
					// stop default to prevent a form submit, Opera needs special handling
					event.preventDefault();
					blockSubmit = true;
					return false;
				}
				break;
				
			case KEY.ESC:
				select.hide();
				break;
				
			default:
				clearTimeout(timeout);
				timeout = setTimeout(onChange, options.delay);
				break;
		}
	}).focus(function(){
		// track whether the field has focus, we shouldn't process any
		// results if the field no longer has focus
		hasFocus++;
	}).blur(function() {
		hasFocus = 0;
		if (!config.mouseDownOnSelect) {
			hideResults();
		}
	}).click(function() {
		// show select when clicking in a focused field
		if ( hasFocus++ > 1 && !select.visible() ) {
			onChange(0, true);
		}
	}).bind("search", function() {
		// TODO why not just specifying both arguments?
		var fn = (arguments.length > 1) ? arguments[1] : null;

		function findValueCallback(z, data) {
			var result;
			if( data && data.length ) {
				for (var i=0; i < data.length; i++) {
					if( data[i].result.toLowerCase() == z.toLowerCase() ) {
						result = data[i];
						break;
					}
				}
			}
			if( typeof fn == "function" ) fn(result);
			else $input.trigger("result", result && [result.data, result.value]);
		}
		$.each(trimWords($input.val()), function(i, value) {
			request(value, findValueCallback, findValueCallback);
		});
	}).bind("flushCache", function() {
		cache.flush();
	}).bind("setOptions", function() {
		$.extend(options, arguments[1]);
		// if we've updated the data, repopulate
		if ( "data" in arguments[1] )
			cache.populate();
	}).bind("unautocomplete", function() {
		select.unbind();
		$input.unbind();
		$(input.form).unbind(".autocomplete");
	});
	
	
	function selectCurrent() {
		var selected = select.selected();
		if( !selected )
			return false;
		
		var v = selected.result;
		
		/* Coustomized by Vincent for support id & name : starts */
		var sd_encode = selected.data;
		var sd = rawurldecode(sd_encode);
		var sd1 = String(sd).split(" - <b>");
		sd = sd1[0];
		if(options.extraParams.id){
			var nd = String(sd).split(",");
      if (!options.hasOwnProperty('formatResult')) { // If formatResult() is defined, use v (selected.result) already set at the top, which is
                                                     // output of formatResult(). This check is added on 13 Sep 2012 by Sunil
  			if (nd.length > 1) {
  				v='';
  				for(var ki=1;ki<nd.length;ki++){
  					v+=v==''?nd[ki]:','+nd[ki];
  					//console.log('v+:'+v);
  				}
  			}else{
  				v=nd[0];
  			}
      }
  	  //console.log('Updating ' + options.extraParams.id + ' from value = ' + $('#'+options.extraParams.id).val() + ' to value = ' + nd[0]);
      
  		// While we select location get the id paint location capacity value  
  		if(options.capacityParams && options.extraParams.capacityId) {
  			var cp = String(nd[0]).split("#");
  			$('#'+options.extraParams.id).val(cp[0]);
  			$(options.extraParams.capacityId).val(cp[1]);
  		}else{
  			if(options.multiple == true){
  				var nval = $('#'+options.extraParams.id).val();
  				nval = (nval=='')?nd[0]:nval+"|"+nd[0];
  				$('#'+options.extraParams.id).val(nval);
  			}else{
  				$('#'+options.extraParams.id).val(nd[0]);
  			}
  		   
  		}
  	} else if (!options.hasOwnProperty('formatResult')) { // If formatResult() is defined, use v  (selected.result) already set at the top, which is
                                                         // output of formatResult(), otherwise this code. This check is added on 13 Sep 2012 by Sunil
  		v=String(sd);
  	}
    //console.log('selectCurrent() : v = ' + v);
		
		/*if(options.extraParams.callback){
			eval(options.extraParams.callback+'("'+String(sd)+'","'+options.extraParams.id+'")');
		}*/
		
		/* Coustomized by Vincent for support id & name : ends */
		
		previousValue = v;
		
		if ( options.multiple ) {
			var words = trimWords($input.val());
			if ( words.length > 1 ) {
				var seperator = options.multipleSeparator.length;
				var cursorAt = $(input).selection().start;
				var wordAt, progress = 0;
				$.each(words, function(i, word) {
					progress += word.length;
					if (cursorAt <= progress) {
						wordAt = i;
						return false;
					}
					progress += seperator;
				});
				words[wordAt] = v;
				// TODO this should set the cursor to the right position, but it gets overriden somewhere
				//$.Autocompleter.Selection(input, progress + seperator, progress + seperator);
				v = words.join( options.multipleSeparator );
			}
			v += options.multipleSeparator;
		}
		//console.log('v value'+v);
		
		var maxChars = $input.attr('maxlength');
		if(maxChars != -1 && maxChars != '' && maxChars !== undefined) {
			$input.val(v.substring(0, maxChars));
		}
		else {
			$input.val(v);
		}
		
		if(options.extraParams.callback){
			eval(options.extraParams.callback+'("'+String(sd)+'","'+options.extraParams.id+'")');
			
		}
		hideResultsNow();
		$input.trigger("result", [selected.data, selected.value]);
		
		return true;
	}
	
	function split(sep){
		alert(sep);
	}
	
	function onChange(crap, skipPrevCheck) {
		if( lastKeyPressCode == KEY.DEL ) {
			select.hide();
			return;
		}
		
		var currentValue = $input.val();
		
		if ( !skipPrevCheck && currentValue == previousValue )
			return;
		
		previousValue = currentValue;
		
		currentValue = lastWord(currentValue);
		if ( currentValue.length >= options.minChars) {
			$input.addClass(options.loadingClass);
			if (!options.matchCase)
				currentValue = currentValue.toLowerCase();
			request(currentValue, receiveData, hideResultsNow);
		} else {
			stopLoading();
			select.hide();
		}
	};
	
	function trimWords(value) {
		if (!value)
			return [""];
		if (!options.multiple)
			return [$.trim(value)];
		return $.map(value.split(options.multipleSeparator), function(word) {
			return $.trim(value).length ? $.trim(word) : null;
		});
	}
	
	function lastWord(value) {
		if ( !options.multiple )
			return value;
		var words = trimWords(value);
		if (words.length == 1) 
			return words[0];
		var cursorAt = $(input).selection().start;
		if (cursorAt == value.length) {
			words = trimWords(value)
		} else {
			words = trimWords(value.replace(value.substring(cursorAt), ""));
		}
		return words[words.length - 1];
	}
	
	// fills in the input box w/the first match (assumed to be the best match)
	// z: the term entered
	// sValue: the first matching result
	function autoFill(z, sValue){
		/* autoFill has been suppressed by Vincent on 22-Jun-2010 */
		
		// autofill in the complete box w/the first match as long as the user hasn't entered in more data
		// if the last user key pressed was backspace, don't autofill
		//if( options.autoFill && (lastWord($input.val()).toLowerCase() == z.toLowerCase()) && lastKeyPressCode != KEY.BACKSPACE ) {
			// fill in the value (keep the case the user has typed)
			//$input.val($input.val() + sValue.substring(lastWord(previousValue).length));
			// select the portion of the value not typed by the user (so the next character will erase)
			//$(input).selection(previousValue.length, previousValue.length + sValue.length);
		//}
	};

	function hideResults() {
		clearTimeout(timeout);
		timeout = setTimeout(hideResultsNow, 200);
	};

	function hideResultsNow() {
		var wasVisible = select.visible();
		select.hide();
		clearTimeout(timeout);
		stopLoading();
		if (options.mustMatch) {
			// call search and run callback
			$input.search(
				function (result){
					// if no value found, clear the input box
					if( !result ) {
						if (options.multiple) {
							var words = trimWords($input.val()).slice(0, -1);
							
							$input.val( words.join(options.multipleSeparator) + (words.length ? options.multipleSeparator : "") );
						}
						else {
							$input.val( "" );
							$input.trigger("result", null);
						}
					}
				}
			);
		}
	};

	function receiveData(z, data) {
		if ( data && data.length && hasFocus ) {
			stopLoading();
			select.display(data, z);
			autoFill(z, data[0].value);
			select.show();
			hide_findTraining(); /* IE 6 issue */
						
		} else {
			hideResultsNow();
		}
	};

	function request(term, success, failure) {
		if (!options.matchCase)
			term = term.toLowerCase();
		var data = cache.load(term);
		// recieve the cached data
		if (data && data.length) {
			success(term, data);
		// if an AJAX url has been supplied, try loading the data now
		} else if( (typeof options.url == "string") && (options.url.length > 0) ){
			
			var extraParams = {
				timestamp: +new Date()
			};
			$.each(options.extraParams, function(key, param) {
				extraParams[key] = typeof param == "function" ? param() : param;
			});
			autoCompleteTimeOut = parseInt(options.autoCompleteTimeOut);
			if(autoCompleteTimeOut>0){
				$.ajax({
					// try to leverage ajaxQueue plugin to abort previous requests
					mode: "abort",
					// limit abortion to this input
					port: "autocomplete" + input.name,
					dataType: options.dataType,
					url: options.url,
					timeout:autoCompleteTimeOut,
					data: $.extend({
						z: lastWord(term),
						limit: options.max
					}, extraParams),
					success: function(data) {
						var parsed = options.parse && options.parse(data) || parse(data);
						cache.add(term, parsed);
						success(term, parsed);
					},error: function(xhr, status, message) {
				        if(status == "timeout") {
				        	stopLoading();
				        	var error = new Array();
							error[0] = options.errMsg;
				        	$('#show_expertus_message').html(expertus_error_message(error,'error'));
							$('#show_expertus_message').show();
				       }
				   }
				});
			}else{
				$.ajax({
					// try to leverage ajaxQueue plugin to abort previous requests
					mode: "abort",
					// limit abortion to this input
					port: "autocomplete" + input.name,
					dataType: options.dataType,
					url: options.url,
					data: $.extend({
						z: lastWord(term),
						limit: options.max
					}, extraParams),
					success: function(data) {
						var parsed = options.parse && options.parse(data) || parse(data);
						cache.add(term, parsed);
						success(term, parsed);
					}
				});
			}
		} 
		else if(typeof options.url == "function")
		{
			options.url(lastWord(term),functionAdder,success);
			//temp=parseFunction(temp);
			//cache.add(term, temp);
			//success(term, temp);
		}
		else {
			// if we have a failure, we need to empty the list -- this prevents the the [TAB] key from selecting the last successful match
			select.emptyList();
			failure(term);
		}
	};
	
	function functionAdder(success,term,temp)
	{
		temp=parseFunction(temp);
		cache.add(term, temp);
		success(term, temp);
	}
	
	function parseFunction(data) {
	var parsed = [];
	var rows = data.split("}");
	for (var i=0; i < rows.length; i++) {
		var row = $.trim(rows[i]);
		if (row) {
			row = row.split("|");
			parsed[parsed.length] = {
				data: row,
				value: row[0],
				result: options.formatResult && options.formatResult(row, row[0]) || row[0]
			};
		}
	}
	return parsed;
	};
	
	function parse(data) {
		var parsed = [];
		var rows = data.split("\n");
		for (var i=0; i < rows.length; i++) {
			var row = $.trim(rows[i]);
			if (row) {
				row = row.split(Drupal.settings.custom.EXP_AC_SEPARATOR);
				parsed[parsed.length] = {
					data: row,
					value: row[0],
					result: options.formatResult && options.formatResult(row, row[0]) || row[0]
				};
			}
		}
		return parsed;
	};

	function stopLoading() {
		$input.removeClass(options.loadingClass);
	};

};

$.Autocompleter.defaults = {
	inputClass: "ac_input",
	resultsClass: "ac_results",
	loadingClass: "ac_loading",
	minChars: 1,
	delay: 400,
	matchCase: false,
	matchSubset: true,
	matchContains: false,
	cacheLength: 10,
	max: 100,
	mustMatch: false,
	extraParams: {},
	selectFirst: false,
	formatItem: function(row) { return row[0]; },
	formatMatch: null,
	autoFill: false,
	width: 0,
	multiple: false,
	multipleSeparator: ", ",
	highlight: function(value, term) {
		return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
	},
    scroll: true,
    scrollHeight: 200,
    autoCompleteTimeOut:0,
    errMsg:''
    /*scrollHeight: 180*/
};

$.Autocompleter.Cache = function(options) {

	var data = {};
	var length = 0;
	
	function matchSubset(s, sub) {
		if (!options.matchCase) 
			s = s.toLowerCase();
		var i = s.indexOf(sub);
		if (options.matchContains == "word"){
			i = s.toLowerCase().search("\\b" + sub.toLowerCase());
		}
		if (i == -1) return false;
		return i >= 0 || options.matchContains;
	};
	
	function add(z, value) {
		if (length > options.cacheLength){
			flush();
		}
		if (!data[z]){ 
			length++;
		}
		data[z] = value;
	}
	
	function populate(){
		if( !options.data ) return false;
		// track the matches
		var stMatchSets = {},
			nullData = 0;

		// no url was specified, we need to adjust the cache length to make sure it fits the local data store
		if( !options.url ) options.cacheLength = 1;
		
		// track all options for minChars = 0
		stMatchSets[""] = [];
		
		// loop through the array and create a lookup structure
		for ( var i = 0, ol = options.data.length; i < ol; i++ ) {
			var rawValue = options.data[i];
			// if rawValue is a string, make an array otherwise just reference the array
			rawValue = (typeof rawValue == "string") ? [rawValue] : rawValue;

			var value = options.formatMatch(rawValue, i+1, options.data.length);
			if ( value === false )
				continue;
				
			var firstChar = value.charAt(0).toLowerCase();
			// if no lookup array for this character exists, look it up now
			if( !stMatchSets[firstChar] ) 
				stMatchSets[firstChar] = [];

			// if the match is a string
			var row = {
				value: value,
				data: rawValue,
				result: options.formatResult && options.formatResult(rawValue) || value
			};
			// push the current match into the set list
			stMatchSets[firstChar].push(row);

			// keep track of minChars zero items
			if ( nullData++ < options.max ) {
				stMatchSets[""].push(row);
			}
		};

		// add the data items to the cache
		$.each(stMatchSets, function(i, value) {
			// increase the cache size
			options.cacheLength++;
			// add to the cache
			add(i, value);
		});
	}
	
	// populate any existing data
	setTimeout(populate, 25);
	
	function flush(){
		data = {};
		length = 0;
	}
	
	return {
		flush: flush,
		add: add,
		populate: populate,
		load: function(z) {
			if (!options.cacheLength || !length)
				return null;
			/* 
			 * if dealing w/local data and matchContains than we must make sure
			 * to loop through all the data collections looking for matches
			 */
			if( !options.url && options.matchContains ){
				// track all matches
				var csub = [];
				// loop through all the data grids for matches
				for( var k in data ){
					// don't search through the stMatchSets[""] (minChars: 0) cache
					// this prevents duplicates
					if( k.length > 0 ){
						var c = data[k];
						$.each(c, function(i, x) {
							// if we've got a match, add it to the array
							if (matchSubset(x.value, z)) {
								csub.push(x);
							}
						});
					}
				}
				
				return csub;
			} else 
			// if the exact item exists, use it
			if (data[z]){
				return data[z];
			} else
			if (options.matchSubset) {
				for (var i = z.length - 1; i >= options.minChars; i--) {
					var c = data[z.substr(0, i)];
					if (c) {
						var csub = [];
						$.each(c, function(i, x) {
							if (matchSubset(x.value, z)) {
								csub[csub.length] = x;								
							}
						});
						return csub;
					}
				}
			}
			return null;
		}
	};
};

$.Autocompleter.Select = function (options, input, select, config) {
	var CLASSES = {
		ACTIVE: "ac_over"
	};
	
	var listItems,
		active = -1,
		data,
		term = "",
		needsInit = true,
		element,
		list;
	
	// Create results
	function init() {
		if (!needsInit)
			return; 
		
		//Added by ganeshbabuv for Location UI filter #0073054 Search auto-suggestion UI needs to be improvised for Location filter
		var no_of_ac_results_cls = $('.ac_results').length;   

		element = $("<div/>")
		.hide()
		.addClass(options.resultsClass)
		.attr("id", 'ac_id_'+no_of_ac_results_cls) 
		.css("position", "absolute")						 
		.appendTo(document.body);  
		
		list = $("<ul/>").appendTo(element).mouseover( function(event)	{
			if(target(event).nodeName && target(event).nodeName.toUpperCase() == 'LI') {
	            active = $("li", list).removeClass(CLASSES.ACTIVE).index(target(event));
			    $(target(event)).addClass(CLASSES.ACTIVE);            
	        }
		}).click(function(event) {
			$(target(event)).addClass(CLASSES.ACTIVE);
			select();
			// TODO provide option to avoid setting focus again after selection? useful for cleanup-on-focus
			input.focus();
			return false;
		}).mousedown(function() {
			config.mouseDownOnSelect = true;
		}).mouseup(function() {
			config.mouseDownOnSelect = false;
		});
		
		if( options.width > 0 )
			element.css("width", options.width);
			
		needsInit = false;
	} 
	
	function target(event) {
		var element = event.target;
		while(element && element.tagName != "LI")
			element = element.parentNode;
		// more fun with IE, sometimes event.target is empty, just ignore it then
		if(!element)
			return [];
		return element;
	}

	function moveSelect(step) {
		listItems.slice(active, active + 1).removeClass(CLASSES.ACTIVE);
		movePosition(step);
        var activeItem = listItems.slice(active, active + 1).addClass(CLASSES.ACTIVE);
        if(options.scroll) {
            var offset = 0;
            listItems.slice(0, active).each(function() {
				offset += this.offsetHeight;
			});
            if((offset + activeItem[0].offsetHeight - list.scrollTop()) > list[0].clientHeight) {
                list.scrollTop(offset + activeItem[0].offsetHeight - list.innerHeight());
            } else if(offset < list.scrollTop()) {
                list.scrollTop(offset);
            }
        }
	};
	
	function movePosition(step) {
		active += step;
		if (active < 0) {
			active = listItems.size() - 1;
		} else if (active >= listItems.size()) {
			active = 0;
		}
	}
	
	function limitNumberOfItems(available) {
		return options.max && options.max < available
			? options.max
			: available;
	}
	
	function fillList() {
		list.empty();
		var max = limitNumberOfItems(data.length);
		for (var i=0; i < max; i++) {
			if (!data[i])				
				continue;			
			var formatted = rawurldecode(options.formatItem(data[i].data, i+1, max, data[i].value, term));
			//var formatted = options.formatItem(data[i].data, i+1, max, data[i].value, term);
			if ( formatted === false )
				continue;
			var li = $("<li/>").html( options.highlight(formatted, term) ).addClass(i%2 == 0 ? "ac_even" : "ac_odd").appendTo(list)[0];			
			$.data(li, "ac_data", data[i]);
		}
		listItems = list.find("li");
		if ( options.selectFirst ) {
			listItems.slice(0, 1).addClass(CLASSES.ACTIVE);
			active = 0;
		}
		// apply bgiframe if available
		if ( $.fn.bgiframe )
			list.bgiframe();
	}
	
	return {
		display: function(d, z) {
			init();
			data = d;			
			term = z;
			
			fillList();
		},
		next: function() {
			moveSelect(1);
		},
		prev: function() {
			moveSelect(-1);
		},
		pageUp: function() {
			if (active != 0 && active - 8 < 0) {
				moveSelect( -active );
			} else {
				moveSelect(-8);
			}
		},
		pageDown: function() {
			if (active != listItems.size() - 1 && active + 8 > listItems.size()) {
				moveSelect( listItems.size() - 1 - active );
			} else {
				moveSelect(8);
			}
		},
		hide: function() {
			element && element.hide();
			listItems && listItems.removeClass(CLASSES.ACTIVE);
			active = -1;
			show_findTraining();
		},
		visible : function() {
			return element && element.is(":visible");
		},
		current: function() {
			return this.visible() && (listItems.filter("." + CLASSES.ACTIVE)[0] || options.selectFirst && listItems[0]);
		},
		show: function() {
			var offset = $(input).offset(); 
			
			//Added by ganeshbabuv March 15th 2017 for Location UI filter #0073054 Search auto-suggestion UI needs to be improvised for Location filter
			var loc_filter_ac='0'; 
			var top_search_cls='ac_jscroll_results_left_panel_li_div';
			
			
			//Search Filter for Admin Calender - Added/Changed by ganesh on May 9th 2017 for #73716
			var elem_admin_cal_txt_id=$(input).attr('id');  
			if(elem_admin_cal_txt_id=='narrow-search-calendar-filter'){
		      options.width='150px';
			  offset.left=offset.left-14;
			  loc_filter_ac='1';
			}
			
			
			//Location Filter UI for Learner Catalog		   
		   if($(input).hasClass('loc_catalogpage_ac')){ 
			    options.width='140px'; 
			    offset.left=offset.left-12;
			    loc_filter_ac='1'; 
		    }
			
			//Location Filter UI for autocomplete of admin class catalog
			var elem_admin_class_loc_filter_id=$(input).attr('id'); 
			
			if(elem_admin_class_loc_filter_id=='classLocation-addltext-filter'){
		      options.width='178px';
			  offset.left=offset.left-12;
			  loc_filter_ac='1';
			}
			 
			//Location Filter UI for autocomplete of admin manage location
			var elem_admin_manage_loc_filter_id=$(input).attr('id'); 
			var elem_admin_manage_loc_filter_name=$(input).attr('name');  
			
			if(elem_admin_manage_loc_filter_id=='rescitystate-addltext-filter' && elem_admin_manage_loc_filter_name=='LocationFilter'){
			    options.width='179px';
			    offset.left=offset.left-12;
			    loc_filter_ac='1';			
			} 
			
			//Location Filter UI for Manage Location Top Search
			if($(input).hasClass('manage_location_top_txt_filter')){  
			     options.width='232px';
			     offset.left=offset.left-15;
			     loc_filter_ac='1';
			     //ac_top_ac_search='1';
			     top_search_cls='ac_jscroll_results_top_panel_li_div'; 
			} 
			
			//Location Filter UI for Admin Catalog Class Edit and Add the class location
			if($(input).hasClass('addedit-edit-new_location')){
			    options.width='163px'; 
			    offset.left=offset.left;
			    loc_filter_ac='1';	 
			}   
			
			//Location Filter UI for the my learning/my programs
			var elem_user_mylearing_loc_id=$(input).attr('id');  
			if(elem_user_mylearing_loc_id=='myenrollment-location' || elem_user_mylearing_loc_id=='myprograms-location'){
			  options.width='155px';   
			  offset.left=offset.left+1;
			  loc_filter_ac='1';
			  top_search_cls='ac_jscroll_results_mylearning_panel_li_div';
			} 
			
			//Location Filter UI for the my classes
			if(elem_user_mylearing_loc_id=='myclasses-location'){
			  options.width='168px';  
			  offset.left=offset.left+1;
			  loc_filter_ac='1';
			  top_search_cls='ac_jscroll_results_mylearning_panel_li_div';
			}  
			
			element.css({
				width: typeof options.width == "string" || options.width > 0 ? options.width : $(input).width(),
				top: offset.top + input.offsetHeight,
				left: offset.left
			}).show();
			
			 
			hide_findTraining(); 
			
			if(loc_filter_ac=='1'){ // Initiate JScrollpane for Location Filter 
				
				 options.scroll=false;  
				  
				 var elem_id='#'+$(element).attr('id'); 
				 
				 $(elem_id).addClass('ac_jscroll_results');
				 
				 $(elem_id + ' ul li').each(function( index ) {
				    var li_txt=$(this).html();
				    var li_txt_format='<div class=\''+top_search_cls+'\'>'+li_txt+'</div>';
				    $(this).html(li_txt_format);
				});   
			   
				var ac_res_height=$(elem_id + " ul").height();  
				 
				if(ac_res_height > options.scrollHeight){
					Js_scrollbarsHeight=options.scrollHeight;
				}else{
					Js_scrollbarsHeight=ac_res_height; 
				}   
				
				$(elem_id).css('height',Js_scrollbarsHeight);
				$(elem_id).css('width', options.width);  
				
				$(elem_id).jScrollPane({
					autoReinitialise: true,
					verticalGutter:0,
					horizontalGutter:0				 	 					 
				});  
				 	 
		    }
			
			
            if(options.scroll) {
                list.scrollTop(0);
                list.css({
					maxHeight: options.scrollHeight
					/*overflow: 'hidden'*/
				});
				
                if($.browser.msie && typeof document.body.style.maxHeight === "undefined") {
					var listHeight = 0;
					listItems.each(function() {
						listHeight += this.offsetHeight;
					});
					var scrollbarsVisible = listHeight > options.scrollHeight;
                    list.css('height', scrollbarsVisible ? options.scrollHeight : listHeight );
					if (!scrollbarsVisible) {
						// IE doesn't recalculate width when scrollbar disappears
						listItems.width( list.width() - parseInt(listItems.css("padding-left")) - parseInt(listItems.css("padding-right")) );
					}
                }
                
            }
		},
		selected: function() {
			var selected = listItems && listItems.filter("." + CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);
			return selected && selected.length && $.data(selected[0], "ac_data");
		},
		emptyList: function (){
			list && list.empty();
		},
		unbind: function() {
			element && element.remove();
			show_findTraining();
		}
	};
};

$.fn.selection = function(start, end) {
	if (start !== undefined) {
		return this.each(function() {
			if( this.createTextRange ){
				var selRange = this.createTextRange();
				if (end === undefined || start == end) {
					selRange.move("character", start);
					selRange.select();
				} else {
					selRange.collapse(true);
					selRange.moveStart("character", start);
					selRange.moveEnd("character", end);
					selRange.select();
				}
			} else if( this.setSelectionRange ){
				this.setSelectionRange(start, end);
			} else if( this.selectionStart ){
				this.selectionStart = start;
				this.selectionEnd = end;
			}
		});
	}
	var field = this[0];
	if ( field.createTextRange ) {
		var range = document.selection.createRange(),
			orig = field.value,
			teststring = "<->",
			textLength = range.text.length;
		range.text = teststring;
		var caretAt = field.value.indexOf(teststring);
		field.value = orig;
		this.selection(caretAt, caretAt + textLength);
		return {
			start: caretAt,
			end: caretAt + textLength
		}
	} else if( field.selectionStart !== undefined ){
		return {
			start: field.selectionStart,
			end: field.selectionEnd
		}
	}
};

/*
 * A JavaScript function equivalent of PHP’s rawurldecode
 */
function rawurldecode(str) {
	  return decodeURIComponent((str + '')
	    .replace(/%(?![\da-f]{2})/gi, function() {
	      // PHP tolerates poorly formed escape sequences
	      return '%25';
	    }));
	}
})(jQuery);;
/*!
 * jScrollPane - v2.0.0beta12
 * 
 *
 * Copyright (c) 2012 Expertus
 */


(function($,window,undefined){

	$.fn.jScrollPane = function(settings)
	{
		// JScrollPane "class" - public methods are available through $('selector').data('jsp')
		function JScrollPane(elem, s)
		{
			var settings, jsp = this, pane, paneWidth, paneHeight, container, contentWidth, contentHeight,
				percentInViewH, percentInViewV, isScrollableV, isScrollableH, verticalDrag, dragMaxY,
				verticalDragPosition, horizontalDrag, dragMaxX, horizontalDragPosition,
				verticalBar, verticalTrack, scrollbarWidth, verticalTrackHeight, verticalDragHeight, arrowUp, arrowDown,
				horizontalBar, horizontalTrack, horizontalTrackWidth, horizontalDragWidth, arrowLeft, arrowRight,
				reinitialiseInterval, originalPadding, originalPaddingTotalWidth, previousContentWidth,
				wasAtTop = true, wasAtLeft = true, wasAtBottom = false, wasAtRight = false,
				originalElement = elem.clone(false, false).empty(),
				mwEvent = $.fn.mwheelIntent ? 'mwheelIntent.jsp' : 'mousewheel.jsp';

			originalPadding = elem.css('paddingTop') + ' ' +
								elem.css('paddingRight') + ' ' +
								elem.css('paddingBottom') + ' ' +
								elem.css('paddingLeft');
			originalPaddingTotalWidth = (parseInt(elem.css('paddingLeft'), 10) || 0) +
										(parseInt(elem.css('paddingRight'), 10) || 0);

			function initialise(s)
			{

				var /*firstChild, lastChild, */isMaintainingPositon, lastContentX, lastContentY,
						hasContainingSpaceChanged, originalScrollTop, originalScrollLeft,
						maintainAtBottom = false, maintainAtRight = false;

				settings = s;

				if (pane === undefined) {
					originalScrollTop = elem.scrollTop();
					originalScrollLeft = elem.scrollLeft();

					elem.css(
						{
							overflow: 'hidden',
							padding: 0
						}
					);
					// TODO: Deal with where width/ height is 0 as it probably means the element is hidden and we should
					// come back to it later and check once it is unhidden...
					paneWidth = elem.innerWidth() + originalPaddingTotalWidth;
					paneHeight = elem.innerHeight();

					elem.width(paneWidth);
					
					pane = $('<div class="jspPane" />').css('padding', originalPadding).append(elem.children());
					container = $('<div class="jspContainer" />')
						.css({
							'width': paneWidth + 'px',
							'height': paneHeight + 'px'
						}
					).append(pane).appendTo(elem);

					/*
					// Move any margins from the first and last children up to the container so they can still
					// collapse with neighbouring elements as they would before jScrollPane 
					firstChild = pane.find(':first-child');
					lastChild = pane.find(':last-child');
					elem.css(
						{
							'margin-top': firstChild.css('margin-top'),
							'margin-bottom': lastChild.css('margin-bottom')
						}
					);
					firstChild.css('margin-top', 0);
					lastChild.css('margin-bottom', 0);
					*/
				} else {
					elem.css('width', '');

					maintainAtBottom = settings.stickToBottom && isCloseToBottom();
					maintainAtRight  = settings.stickToRight  && isCloseToRight();

					hasContainingSpaceChanged = elem.innerWidth() + originalPaddingTotalWidth != paneWidth || elem.outerHeight() != paneHeight;

					if (hasContainingSpaceChanged) {
						paneWidth = elem.innerWidth() + originalPaddingTotalWidth;
						paneHeight = elem.innerHeight();
						container.css({
							width: paneWidth + 'px',
							height: paneHeight + 'px'
						});
					}

					// If nothing changed since last check...
					if (!hasContainingSpaceChanged && previousContentWidth == contentWidth && pane.outerHeight() == contentHeight) {
						elem.width(paneWidth);
						return;
					}
					previousContentWidth = contentWidth;
					
					pane.css('width', '');
					elem.width(paneWidth);

					container.find('>.jspVerticalBar,>.jspHorizontalBar').remove().end();
				}

				pane.css('overflow', 'auto');
				if (s.contentWidth) {
					contentWidth = s.contentWidth;
				} else {
					contentWidth = pane[0].scrollWidth;
				}
				contentHeight = pane[0].scrollHeight;
				pane.css('overflow', '');

				percentInViewH = contentWidth / paneWidth;
				percentInViewV = contentHeight / paneHeight;
				isScrollableV = percentInViewV > 1;

				isScrollableH = percentInViewH > 1;

				//console.log(paneWidth, paneHeight, contentWidth, contentHeight, percentInViewH, percentInViewV, isScrollableH, isScrollableV);

				if (!(isScrollableH || isScrollableV)) {
					elem.removeClass('jspScrollable');
					pane.css({
						top: 0,
						width: container.width() - originalPaddingTotalWidth
					});
					removeMousewheel();
					removeFocusHandler();
					removeKeyboardNav();
					removeClickOnTrack();
				} else {
					elem.addClass('jspScrollable');

					isMaintainingPositon = settings.maintainPosition && (verticalDragPosition || horizontalDragPosition);
					if (isMaintainingPositon) {
						lastContentX = contentPositionX();
						lastContentY = contentPositionY();
					}

					initialiseVerticalScroll();
					initialiseHorizontalScroll();
					resizeScrollbars();

					if (isMaintainingPositon) {
						scrollToX(maintainAtRight  ? (contentWidth  - paneWidth ) : lastContentX, false);
						scrollToY(maintainAtBottom ? (contentHeight - paneHeight) : lastContentY, false);
					}

					initFocusHandler();
					initMousewheel();
					initTouch();
					
					if (settings.enableKeyboardNavigation) {
						initKeyboardNav();
					}
					if (settings.clickOnTrack) {
						initClickOnTrack();
					}
					
					observeHash();
					if (settings.hijackInternalLinks) {
						hijackInternalLinks();
					}
				}

				if (settings.autoReinitialise && !reinitialiseInterval) {
					reinitialiseInterval = setInterval(
						function()
						{
							initialise(settings);
						},
						settings.autoReinitialiseDelay
					);
				} else if (!settings.autoReinitialise && reinitialiseInterval) {
					clearInterval(reinitialiseInterval);
				}

				originalScrollTop && elem.scrollTop(0) && scrollToY(originalScrollTop, false);
				originalScrollLeft && elem.scrollLeft(0) && scrollToX(originalScrollLeft, false);

				elem.trigger('jsp-initialised', [isScrollableH || isScrollableV]);
			}

			function initialiseVerticalScroll()
			{
				if (isScrollableV) {

					container.append(
						$('<div class="jspVerticalBar" />').append(
							$('<div class="jspCap jspCapTop" />'),
							$('<div class="jspTrack" />').append(
								$('<div class="jspDrag" />').append(
									$('<div class="jspDragTop" />'),
									$('<div class="jspDragBottom" />')
								)
							),
							$('<div class="jspCap jspCapBottom" />')
						)
					);

					verticalBar = container.find('>.jspVerticalBar');
					verticalTrack = verticalBar.find('>.jspTrack');
					verticalDrag = verticalTrack.find('>.jspDrag');

					if (settings.showArrows) {
						arrowUp = $('<a class="jspArrow jspArrowUp" />').bind(
							'mousedown.jsp', getArrowScroll(0, -1)
						).bind('click.jsp', nil);
						arrowDown = $('<a class="jspArrow jspArrowDown" />').bind(
							'mousedown.jsp', getArrowScroll(0, 1)
						).bind('click.jsp', nil);
						if (settings.arrowScrollOnHover) {
							arrowUp.bind('mouseover.jsp', getArrowScroll(0, -1, arrowUp));
							arrowDown.bind('mouseover.jsp', getArrowScroll(0, 1, arrowDown));
						}

						appendArrows(verticalTrack, settings.verticalArrowPositions, arrowUp, arrowDown);
					}

					verticalTrackHeight = paneHeight;
					container.find('>.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow').each(
						function()
						{
							verticalTrackHeight -= $(this).outerHeight();
						}
					);


					verticalDrag.hover(
						function()
						{
							verticalDrag.addClass('jspHover');
						},
						function()
						{
							verticalDrag.removeClass('jspHover');
						}
					).bind(
						'mousedown.jsp',
						function(e)
						{
							// Stop IE from allowing text selection
							$('html').bind('dragstart.jsp selectstart.jsp', nil);

							verticalDrag.addClass('jspActive');

							var startY = e.pageY - verticalDrag.position().top;

							$('html').bind(
								'mousemove.jsp',
								function(e)
								{
									positionDragY(e.pageY - startY, false);
								}
							).bind('mouseup.jsp mouseleave.jsp', cancelDrag);
							return false;
						}
					);
					sizeVerticalScrollbar();
				}
			}

			function sizeVerticalScrollbar()
			{
				verticalTrack.height(verticalTrackHeight + 'px');
				verticalDragPosition = 0;
				scrollbarWidth = settings.verticalGutter + verticalTrack.outerWidth();

				// Make the pane thinner to allow for the vertical scrollbar
				pane.width(paneWidth - scrollbarWidth - originalPaddingTotalWidth);

				// Add margin to the left of the pane if scrollbars are on that side (to position
				// the scrollbar on the left or right set it's left or right property in CSS)
				try {
					if (verticalBar.position().left === 0) {
						pane.css('margin-left', scrollbarWidth + 'px');
					}
				} catch (err) {
				}
			}

			function initialiseHorizontalScroll()
			{
				if (isScrollableH) {

					container.append(
						$('<div class="jspHorizontalBar" />').append(
							$('<div class="jspCap jspCapLeft" />'),
							$('<div class="jspTrack" />').append(
								$('<div class="jspDrag" />').append(
									$('<div class="jspDragLeft" />'),
									$('<div class="jspDragRight" />')
								)
							),
							$('<div class="jspCap jspCapRight" />')
						)
					);

					horizontalBar = container.find('>.jspHorizontalBar');
					horizontalTrack = horizontalBar.find('>.jspTrack');
					horizontalDrag = horizontalTrack.find('>.jspDrag');

					if (settings.showArrows) {
						arrowLeft = $('<a class="jspArrow jspArrowLeft" />').bind(
							'mousedown.jsp', getArrowScroll(-1, 0)
						).bind('click.jsp', nil);
						arrowRight = $('<a class="jspArrow jspArrowRight" />').bind(
							'mousedown.jsp', getArrowScroll(1, 0)
						).bind('click.jsp', nil);
						if (settings.arrowScrollOnHover) {
							arrowLeft.bind('mouseover.jsp', getArrowScroll(-1, 0, arrowLeft));
							arrowRight.bind('mouseover.jsp', getArrowScroll(1, 0, arrowRight));
						}
						appendArrows(horizontalTrack, settings.horizontalArrowPositions, arrowLeft, arrowRight);
					}

					horizontalDrag.hover(
						function()
						{
							horizontalDrag.addClass('jspHover');
						},
						function()
						{
							horizontalDrag.removeClass('jspHover');
						}
					).bind(
						'mousedown.jsp',
						function(e)
						{
							// Stop IE from allowing text selection
							$('html').bind('dragstart.jsp selectstart.jsp', nil);

							horizontalDrag.addClass('jspActive');

							var startX = e.pageX - horizontalDrag.position().left;

							$('html').bind(
								'mousemove.jsp',
								function(e)
								{
									positionDragX(e.pageX - startX, false);
								}
							).bind('mouseup.jsp mouseleave.jsp', cancelDrag);
							return false;
						}
					);
					horizontalTrackWidth = container.innerWidth();
					sizeHorizontalScrollbar();
				}
			}

			function sizeHorizontalScrollbar()
			{
				container.find('>.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow').each(
					function()
					{
						horizontalTrackWidth -= $(this).outerWidth();
					}
				);

				horizontalTrack.width(horizontalTrackWidth + 'px');
				horizontalDragPosition = 0;
			}

			function resizeScrollbars()
			{
				if (isScrollableH && isScrollableV) {
					var horizontalTrackHeight = horizontalTrack.outerHeight(),
						verticalTrackWidth = verticalTrack.outerWidth();
					verticalTrackHeight -= horizontalTrackHeight;
					$(horizontalBar).find('>.jspCap:visible,>.jspArrow').each(
						function()
						{
							horizontalTrackWidth += $(this).outerWidth();
						}
					);
					horizontalTrackWidth -= verticalTrackWidth;
					paneHeight -= verticalTrackWidth;
					paneWidth -= horizontalTrackHeight;
					horizontalTrack.parent().append(
						$('<div class="jspCorner" />').css('width', horizontalTrackHeight + 'px')
					);
					sizeVerticalScrollbar();
					sizeHorizontalScrollbar();
				}
				// reflow content
				if (isScrollableH) {
					pane.width((container.outerWidth() - originalPaddingTotalWidth) + 'px');
				}
				contentHeight = pane.outerHeight();
				percentInViewV = contentHeight / paneHeight;

				if (isScrollableH) {
					horizontalDragWidth = Math.ceil(1 / percentInViewH * horizontalTrackWidth);
					if (horizontalDragWidth > settings.horizontalDragMaxWidth) {
						horizontalDragWidth = settings.horizontalDragMaxWidth;
					} else if (horizontalDragWidth < settings.horizontalDragMinWidth) {
						horizontalDragWidth = settings.horizontalDragMinWidth;
					}
					horizontalDrag.width(horizontalDragWidth + 'px');
					dragMaxX = horizontalTrackWidth - horizontalDragWidth;
					_positionDragX(horizontalDragPosition); // To update the state for the arrow buttons
				}
				if (isScrollableV) {
					verticalDragHeight = Math.ceil(1 / percentInViewV * verticalTrackHeight);
					if (verticalDragHeight > settings.verticalDragMaxHeight) {
						verticalDragHeight = settings.verticalDragMaxHeight;
					} else if (verticalDragHeight < settings.verticalDragMinHeight) {
						verticalDragHeight = settings.verticalDragMinHeight;
					}
					verticalDrag.height(verticalDragHeight + 'px');
					dragMaxY = verticalTrackHeight - verticalDragHeight;
					_positionDragY(verticalDragPosition); // To update the state for the arrow buttons
				}
			}

			function appendArrows(ele, p, a1, a2)
			{
				var p1 = "before", p2 = "after", aTemp;
				
				// Sniff for mac... Is there a better way to determine whether the arrows would naturally appear
				// at the top or the bottom of the bar?
				if (p == "os") {
					p = /Mac/.test(navigator.platform) ? "after" : "split";
				}
				if (p == p1) {
					p2 = p;
				} else if (p == p2) {
					p1 = p;
					aTemp = a1;
					a1 = a2;
					a2 = aTemp;
				}

				ele[p1](a1)[p2](a2);
			}

			function getArrowScroll(dirX, dirY, ele)
			{
				return function()
				{
					arrowScroll(dirX, dirY, this, ele);
					this.blur();
					return false;
				};
			}

			function arrowScroll(dirX, dirY, arrow, ele)
			{
				arrow = $(arrow).addClass('jspActive');

				var eve,
					scrollTimeout,
					isFirst = true,
					doScroll = function()
					{
						if (dirX !== 0) {
							jsp.scrollByX(dirX * settings.arrowButtonSpeed);
						}
						if (dirY !== 0) {
							jsp.scrollByY(dirY * settings.arrowButtonSpeed);
						}
						scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.arrowRepeatFreq);
						isFirst = false;
					};

				doScroll();

				eve = ele ? 'mouseout.jsp' : 'mouseup.jsp';
				ele = ele || $('html');
				ele.bind(
					eve,
					function()
					{
						arrow.removeClass('jspActive');
						scrollTimeout && clearTimeout(scrollTimeout);
						scrollTimeout = null;
						ele.unbind(eve);
					}
				);
			}

			function initClickOnTrack()
			{
				removeClickOnTrack();
				if (isScrollableV) {
					verticalTrack.bind(
						'mousedown.jsp',
						function(e)
						{
							if (e.originalTarget === undefined || e.originalTarget == e.currentTarget) {
								var clickedTrack = $(this),
									offset = clickedTrack.offset(),
									direction = e.pageY - offset.top - verticalDragPosition,
									scrollTimeout,
									isFirst = true,
									doScroll = function()
									{
										var offset = clickedTrack.offset(),
											pos = e.pageY - offset.top - verticalDragHeight / 2,
											contentDragY = paneHeight * settings.scrollPagePercent,
											dragY = dragMaxY * contentDragY / (contentHeight - paneHeight);
										if (direction < 0) {
											if (verticalDragPosition - dragY > pos) {
												jsp.scrollByY(-contentDragY);
											} else {
												positionDragY(pos);
											}
										} else if (direction > 0) {
											if (verticalDragPosition + dragY < pos) {
												jsp.scrollByY(contentDragY);
											} else {
												positionDragY(pos);
											}
										} else {
											cancelClick();
											return;
										}
										scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.trackClickRepeatFreq);
										isFirst = false;
									},
									cancelClick = function()
									{
										scrollTimeout && clearTimeout(scrollTimeout);
										scrollTimeout = null;
										$(document).unbind('mouseup.jsp', cancelClick);
									};
								doScroll();
								$(document).bind('mouseup.jsp', cancelClick);
								return false;
							}
						}
					);
				}
				
				if (isScrollableH) {
					horizontalTrack.bind(
						'mousedown.jsp',
						function(e)
						{
							if (e.originalTarget === undefined || e.originalTarget == e.currentTarget) {
								var clickedTrack = $(this),
									offset = clickedTrack.offset(),
									direction = e.pageX - offset.left - horizontalDragPosition,
									scrollTimeout,
									isFirst = true,
									doScroll = function()
									{
										var offset = clickedTrack.offset(),
											pos = e.pageX - offset.left - horizontalDragWidth / 2,
											contentDragX = paneWidth * settings.scrollPagePercent,
											dragX = dragMaxX * contentDragX / (contentWidth - paneWidth);
										if (direction < 0) {
											if (horizontalDragPosition - dragX > pos) {
												jsp.scrollByX(-contentDragX);
											} else {
												positionDragX(pos);
											}
										} else if (direction > 0) {
											if (horizontalDragPosition + dragX < pos) {
												jsp.scrollByX(contentDragX);
											} else {
												positionDragX(pos);
											}
										} else {
											cancelClick();
											return;
										}
										scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.trackClickRepeatFreq);
										isFirst = false;
									},
									cancelClick = function()
									{
										scrollTimeout && clearTimeout(scrollTimeout);
										scrollTimeout = null;
										$(document).unbind('mouseup.jsp', cancelClick);
									};
								doScroll();
								$(document).bind('mouseup.jsp', cancelClick);
								return false;
							}
						}
					);
				}
			}

			function removeClickOnTrack()
			{
				if (horizontalTrack) {
					horizontalTrack.unbind('mousedown.jsp');
				}
				if (verticalTrack) {
					verticalTrack.unbind('mousedown.jsp');
				}
			}

			function cancelDrag()
			{
				$('html').unbind('dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp');

				if (verticalDrag) {
					verticalDrag.removeClass('jspActive');
				}
				if (horizontalDrag) {
					horizontalDrag.removeClass('jspActive');
				}
			}

			function positionDragY(destY, animate)
			{
				if (!isScrollableV) {
					return;
				}
				if (destY < 0) {
					destY = 0;
				} else if (destY > dragMaxY) {
					destY = dragMaxY;
				}

				// can't just check if(animate) because false is a valid value that could be passed in...
				if (animate === undefined) {
					animate = settings.animateScroll;
				}
				if (animate) {
					jsp.animate(verticalDrag, 'top', destY,	_positionDragY);
				} else {
					verticalDrag.css('top', destY);
					_positionDragY(destY);
				}

			}

			function _positionDragY(destY)
			{
				if (destY === undefined) {
					destY = verticalDrag.position().top;
				}

				container.scrollTop(0);
				verticalDragPosition = destY;

				var isAtTop = verticalDragPosition === 0,
					isAtBottom = verticalDragPosition == dragMaxY,
					percentScrolled = destY/ dragMaxY,
					destTop = -percentScrolled * (contentHeight - paneHeight);

				if (wasAtTop != isAtTop || wasAtBottom != isAtBottom) {
					wasAtTop = isAtTop;
					wasAtBottom = isAtBottom;
					elem.trigger('jsp-arrow-change', [wasAtTop, wasAtBottom, wasAtLeft, wasAtRight]);
				}
				
				updateVerticalArrows(isAtTop, isAtBottom);
				pane.css('top', destTop);
				elem.trigger('jsp-scroll-y', [-destTop, isAtTop, isAtBottom]).trigger('scroll');
			}

			function positionDragX(destX, animate)
			{
				if (!isScrollableH) {
					return;
				}
				if (destX < 0) {
					destX = 0;
				} else if (destX > dragMaxX) {
					destX = dragMaxX;
				}

				if (animate === undefined) {
					animate = settings.animateScroll;
				}
				if (animate) {
					jsp.animate(horizontalDrag, 'left', destX,	_positionDragX);
				} else {
					horizontalDrag.css('left', destX);
					_positionDragX(destX);
				}
			}

			function _positionDragX(destX)
			{
				if (destX === undefined) {
					destX = horizontalDrag.position().left;
				}

				container.scrollTop(0);
				horizontalDragPosition = destX;

				var isAtLeft = horizontalDragPosition === 0,
					isAtRight = horizontalDragPosition == dragMaxX,
					percentScrolled = destX / dragMaxX,
					destLeft = -percentScrolled * (contentWidth - paneWidth);

				if (wasAtLeft != isAtLeft || wasAtRight != isAtRight) {
					wasAtLeft = isAtLeft;
					wasAtRight = isAtRight;
					elem.trigger('jsp-arrow-change', [wasAtTop, wasAtBottom, wasAtLeft, wasAtRight]);
				}
				
				updateHorizontalArrows(isAtLeft, isAtRight);
				pane.css('left', destLeft);
				elem.trigger('jsp-scroll-x', [-destLeft, isAtLeft, isAtRight]).trigger('scroll');
			}

			function updateVerticalArrows(isAtTop, isAtBottom)
			{
				if (settings.showArrows) {
					arrowUp[isAtTop ? 'addClass' : 'removeClass']('jspDisabled');
					arrowDown[isAtBottom ? 'addClass' : 'removeClass']('jspDisabled');
				}
			}

			function updateHorizontalArrows(isAtLeft, isAtRight)
			{
				if (settings.showArrows) {
					arrowLeft[isAtLeft ? 'addClass' : 'removeClass']('jspDisabled');
					arrowRight[isAtRight ? 'addClass' : 'removeClass']('jspDisabled');
				}
			}

			function scrollToY(destY, animate)
			{
				var percentScrolled = destY / (contentHeight - paneHeight);
				positionDragY(percentScrolled * dragMaxY, animate);
			}

			function scrollToX(destX, animate)
			{
				var percentScrolled = destX / (contentWidth - paneWidth);
				positionDragX(percentScrolled * dragMaxX, animate);
			}

			function scrollToElement(ele, stickToTop, animate)
			{
				var e, eleHeight, eleWidth, eleTop = 0, eleLeft = 0, viewportTop, viewportLeft, maxVisibleEleTop, maxVisibleEleLeft, destY, destX;

				// Legal hash values aren't necessarily legal jQuery selectors so we need to catch any
				// errors from the lookup...
				try {
					e = $(ele);
				} catch (err) {
					return;
				}
				eleHeight = e.outerHeight();
				eleWidth= e.outerWidth();

				container.scrollTop(0);
				container.scrollLeft(0);
				
				// loop through parents adding the offset top of any elements that are relatively positioned between
				// the focused element and the jspPane so we can get the true distance from the top
				// of the focused element to the top of the scrollpane...
				while (!e.is('.jspPane')) {
					eleTop += e.position().top;
					eleLeft += e.position().left;
					e = e.offsetParent();
					if (/^body|html$/i.test(e[0].nodeName)) {
						// we ended up too high in the document structure. Quit!
						return;
					}
				}

				viewportTop = contentPositionY();
				maxVisibleEleTop = viewportTop + paneHeight;
				if (eleTop < viewportTop || stickToTop) { // element is above viewport
					destY = eleTop - settings.verticalGutter;
				} else if (eleTop + eleHeight > maxVisibleEleTop) { // element is below viewport
					destY = eleTop - paneHeight + eleHeight + settings.verticalGutter;
				}
				if (destY) {
					scrollToY(destY, animate);
				}
				
				viewportLeft = contentPositionX();
	            maxVisibleEleLeft = viewportLeft + paneWidth;
	            if (eleLeft < viewportLeft || stickToTop) { // element is to the left of viewport
	                destX = eleLeft - settings.horizontalGutter;
	            } else if (eleLeft + eleWidth > maxVisibleEleLeft) { // element is to the right viewport
	                destX = eleLeft - paneWidth + eleWidth + settings.horizontalGutter;
	            }
	            if (destX) {
	                scrollToX(destX, animate);
	            }

			}

			function contentPositionX()
			{
				return -pane.position().left;
			}

			function contentPositionY()
			{
				return -pane.position().top;
			}

			function isCloseToBottom()
			{
				var scrollableHeight = contentHeight - paneHeight;
				return (scrollableHeight > 20) && (scrollableHeight - contentPositionY() < 10);
			}

			function isCloseToRight()
			{
				var scrollableWidth = contentWidth - paneWidth;
				return (scrollableWidth > 20) && (scrollableWidth - contentPositionX() < 10);
			}

			function initMousewheel()
			{
				container.unbind(mwEvent).bind(
					mwEvent,
					function (event, delta, deltaX, deltaY) {
						var dX = horizontalDragPosition, dY = verticalDragPosition;
						jsp.scrollBy(deltaX * settings.mouseWheelSpeed, -deltaY * settings.mouseWheelSpeed, false);
						// return true if there was no movement so rest of screen can scroll
						return dX == horizontalDragPosition && dY == verticalDragPosition;
					}
				);
			}

			function removeMousewheel()
			{
				container.unbind(mwEvent);
			}

			function nil()
			{
				return false;
			}

			function initFocusHandler()
			{
				pane.find(':input,a').unbind('focus.jsp').bind(
					'focus.jsp',
					function(e)
					{
						scrollToElement(e.target, false);
					}
				);
			}

			function removeFocusHandler()
			{
				pane.find(':input,a').unbind('focus.jsp');
			}
			
			function initKeyboardNav()
			{
				var keyDown, elementHasScrolled, validParents = [];
				isScrollableH && validParents.push(horizontalBar[0]);
				isScrollableV && validParents.push(verticalBar[0]);
				
				// IE also focuses elements that don't have tabindex set.
				pane.focus(
					function()
					{
						elem.focus();
					}
				);
				
				elem.attr('tabindex', 0)
					.unbind('keydown.jsp keypress.jsp')
					.bind(
						'keydown.jsp',
						function(e)
						{
							if (e.target !== this && !(validParents.length && $(e.target).closest(validParents).length)){
								return;
							}
							var dX = horizontalDragPosition, dY = verticalDragPosition;
							switch(e.keyCode) {
								case 40: // down
								case 38: // up
								case 34: // page down
								case 32: // space
								case 33: // page up
								case 39: // right
								case 37: // left
									keyDown = e.keyCode;
									keyDownHandler();
									break;
								case 35: // end
									scrollToY(contentHeight - paneHeight);
									keyDown = null;
									break;
								case 36: // home
									scrollToY(0);
									keyDown = null;
									break;
							}

							elementHasScrolled = e.keyCode == keyDown && dX != horizontalDragPosition || dY != verticalDragPosition;
							return !elementHasScrolled;
						}
					).bind(
						'keypress.jsp', // For FF/ OSX so that we can cancel the repeat key presses if the JSP scrolls...
						function(e)
						{
							if (e.keyCode == keyDown) {
								keyDownHandler();
							}
							return !elementHasScrolled;
						}
					);
				
				if (settings.hideFocus) {
					elem.css('outline', 'none');
					if ('hideFocus' in container[0]){
						elem.attr('hideFocus', true);
					}
				} else {
					elem.css('outline', '');
					if ('hideFocus' in container[0]){
						elem.attr('hideFocus', false);
					}
				}
				
				function keyDownHandler()
				{
					var dX = horizontalDragPosition, dY = verticalDragPosition;
					switch(keyDown) {
						case 40: // down
							jsp.scrollByY(settings.keyboardSpeed, false);
							break;
						case 38: // up
							jsp.scrollByY(-settings.keyboardSpeed, false);
							break;
						case 34: // page down
						case 32: // space
							jsp.scrollByY(paneHeight * settings.scrollPagePercent, false);
							break;
						case 33: // page up
							jsp.scrollByY(-paneHeight * settings.scrollPagePercent, false);
							break;
						case 39: // right
							jsp.scrollByX(settings.keyboardSpeed, false);
							break;
						case 37: // left
							jsp.scrollByX(-settings.keyboardSpeed, false);
							break;
					}

					elementHasScrolled = dX != horizontalDragPosition || dY != verticalDragPosition;
					return elementHasScrolled;
				}
			}
			
			function removeKeyboardNav()
			{
				elem.attr('tabindex', '-1')
					.removeAttr('tabindex')
					.unbind('keydown.jsp keypress.jsp');
			}

			function observeHash()
			{
				if (location.hash && location.hash.length > 1) {
					var e,
						retryInt,
						hash = escape(location.hash.substr(1)) // hash must be escaped to prevent XSS
						;
					try {
						e = $('#' + hash + ', a[name="' + hash + '"]');
					} catch (err) {
						return;
					}

					if (e.length && pane.find(hash)) {
						// nasty workaround but it appears to take a little while before the hash has done its thing
						// to the rendered page so we just wait until the container's scrollTop has been messed up.
						if (container.scrollTop() === 0) {
							retryInt = setInterval(
								function()
								{
									if (container.scrollTop() > 0) {
										scrollToElement(e, true);
										$(document).scrollTop(container.position().top);
										clearInterval(retryInt);
									}
								},
								50
							);
						} else {
							scrollToElement(e, true);
							$(document).scrollTop(container.position().top);
						}
					}
				}
			}

			function hijackInternalLinks()
			{
				// only register the link handler once
				if ($(document.body).data('jspHijack')) {
					return;
				}

				// remember that the handler was bound
				$(document.body).data('jspHijack', true);

				// use live handler to also capture newly created links
				$(document.body).delegate('a[href*=#]', 'click', function(event) {
					// does the link point to the same page?
					// this also takes care of cases with a <base>-Tag or Links not starting with the hash #
					// e.g. <a href="index.html#test"> when the current url already is index.html
					var href = this.href.substr(0, this.href.indexOf('#')),
						locationHref = location.href,
						hash,
						element,
						container,
						jsp,
						scrollTop,
						elementTop;
					if (location.href.indexOf('#') !== -1) {
						locationHref = location.href.substr(0, location.href.indexOf('#'));
					}
					if (href !== locationHref) {
						// the link points to another page
						return;
					}

					// check if jScrollPane should handle this click event
					hash = escape(this.href.substr(this.href.indexOf('#') + 1));

					// find the element on the page
					element;
					try {
						element = $('#' + hash + ', a[name="' + hash + '"]');
					} catch (e) {
						// hash is not a valid jQuery identifier
						return;
					}

					if (!element.length) {
						// this link does not point to an element on this page
						return;
					}

					container = element.closest('.jspScrollable');
					jsp = container.data('jsp');

					// jsp might be another jsp instance than the one, that bound this event
					// remember: this event is only bound once for all instances.
					jsp.scrollToElement(element, true);

					if (container[0].scrollIntoView) {
						// also scroll to the top of the container (if it is not visible)
						scrollTop = $(window).scrollTop();
						elementTop = element.offset().top;
						if (elementTop < scrollTop || elementTop > scrollTop + $(window).height()) {
							container[0].scrollIntoView();
						}
					}

					// jsp handled this event, prevent the browser default (scrolling :P)
					event.preventDefault();
				});
			}
			
			// Init touch on iPad, iPhone, iPod, Android
			function initTouch()
			{
				var startX,
					startY,
					touchStartX,
					touchStartY,
					moved,
					moving = false;
  
				container.unbind('touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick').bind(
					'touchstart.jsp',
					function(e)
					{
						var touch = e.originalEvent.touches[0];
						startX = contentPositionX();
						startY = contentPositionY();
						touchStartX = touch.pageX;
						touchStartY = touch.pageY;
						moved = false;
						moving = true;
					}
				).bind(
					'touchmove.jsp',
					function(ev)
					{
						if(!moving) {
							return;
						}
						
						var touchPos = ev.originalEvent.touches[0],
							dX = horizontalDragPosition, dY = verticalDragPosition;
						
						jsp.scrollTo(startX + touchStartX - touchPos.pageX, startY + touchStartY - touchPos.pageY);
						
						moved = moved || Math.abs(touchStartX - touchPos.pageX) > 5 || Math.abs(touchStartY - touchPos.pageY) > 5;
						
						// return true if there was no movement so rest of screen can scroll
						return dX == horizontalDragPosition && dY == verticalDragPosition;
					}
				).bind(
					'touchend.jsp',
					function(e)
					{
						moving = false;
						/*if(moved) {
							return false;
						}*/
					}
				).bind(
					'click.jsp-touchclick',
					function(e)
					{
						if(moved) {
							moved = false;
							return false;
						}
					}
				);
			}
			
			function destroy(){
				var currentY = contentPositionY(),
					currentX = contentPositionX();
				elem.removeClass('jspScrollable').unbind('.jsp');
				elem.replaceWith(originalElement.append(pane.children()));
				originalElement.scrollTop(currentY);
				originalElement.scrollLeft(currentX);

				// clear reinitialize timer if active
				if (reinitialiseInterval) {
					clearInterval(reinitialiseInterval);
				}
			}

			// Public API
			$.extend(
				jsp,
				{
					// Reinitialises the scroll pane (if it's internal dimensions have changed since the last time it
					// was initialised). The settings object which is passed in will override any settings from the
					// previous time it was initialised - if you don't pass any settings then the ones from the previous
					// initialisation will be used.
					reinitialise: function(s)
					{
						s = $.extend({}, settings, s);
						initialise(s);
					},
					// Scrolls the specified element (a jQuery object, DOM node or jQuery selector string) into view so
					// that it can be seen within the viewport. If stickToTop is true then the element will appear at
					// the top of the viewport, if it is false then the viewport will scroll as little as possible to
					// show the element. You can also specify if you want animation to occur. If you don't provide this
					// argument then the animateScroll value from the settings object is used instead.
					scrollToElement: function(ele, stickToTop, animate)
					{
						scrollToElement(ele, stickToTop, animate);
					},
					// Scrolls the pane so that the specified co-ordinates within the content are at the top left
					// of the viewport. animate is optional and if not passed then the value of animateScroll from
					// the settings object this jScrollPane was initialised with is used.
					scrollTo: function(destX, destY, animate)
					{
						scrollToX(destX, animate);
						scrollToY(destY, animate);
					},
					// Scrolls the pane so that the specified co-ordinate within the content is at the left of the
					// viewport. animate is optional and if not passed then the value of animateScroll from the settings
					// object this jScrollPane was initialised with is used.
					scrollToX: function(destX, animate)
					{
						scrollToX(destX, animate);
					},
					// Scrolls the pane so that the specified co-ordinate within the content is at the top of the
					// viewport. animate is optional and if not passed then the value of animateScroll from the settings
					// object this jScrollPane was initialised with is used.
					scrollToY: function(destY, animate)
					{
						scrollToY(destY, animate);
					},
					// Scrolls the pane to the specified percentage of its maximum horizontal scroll position. animate
					// is optional and if not passed then the value of animateScroll from the settings object this
					// jScrollPane was initialised with is used.
					scrollToPercentX: function(destPercentX, animate)
					{
						scrollToX(destPercentX * (contentWidth - paneWidth), animate);
					},
					// Scrolls the pane to the specified percentage of its maximum vertical scroll position. animate
					// is optional and if not passed then the value of animateScroll from the settings object this
					// jScrollPane was initialised with is used.
					scrollToPercentY: function(destPercentY, animate)
					{
						scrollToY(destPercentY * (contentHeight - paneHeight), animate);
					},
					// Scrolls the pane by the specified amount of pixels. animate is optional and if not passed then
					// the value of animateScroll from the settings object this jScrollPane was initialised with is used.
					scrollBy: function(deltaX, deltaY, animate)
					{
						jsp.scrollByX(deltaX, animate);
						jsp.scrollByY(deltaY, animate);
					},
					// Scrolls the pane by the specified amount of pixels. animate is optional and if not passed then
					// the value of animateScroll from the settings object this jScrollPane was initialised with is used.
					scrollByX: function(deltaX, animate)
					{
						var destX = contentPositionX() + Math[deltaX<0 ? 'floor' : 'ceil'](deltaX),
							percentScrolled = destX / (contentWidth - paneWidth);
						positionDragX(percentScrolled * dragMaxX, animate);
					},
					// Scrolls the pane by the specified amount of pixels. animate is optional and if not passed then
					// the value of animateScroll from the settings object this jScrollPane was initialised with is used.
					scrollByY: function(deltaY, animate)
					{
						var destY = contentPositionY() + Math[deltaY<0 ? 'floor' : 'ceil'](deltaY),
							percentScrolled = destY / (contentHeight - paneHeight);
						positionDragY(percentScrolled * dragMaxY, animate);
					},
					// Positions the horizontal drag at the specified x position (and updates the viewport to reflect
					// this). animate is optional and if not passed then the value of animateScroll from the settings
					// object this jScrollPane was initialised with is used.
					positionDragX: function(x, animate)
					{
						positionDragX(x, animate);
					},
					// Positions the vertical drag at the specified y position (and updates the viewport to reflect
					// this). animate is optional and if not passed then the value of animateScroll from the settings
					// object this jScrollPane was initialised with is used.
					positionDragY: function(y, animate)
					{
						positionDragY(y, animate);
					},
					// This method is called when jScrollPane is trying to animate to a new position. You can override
					// it if you want to provide advanced animation functionality. It is passed the following arguments:
					//  * ele          - the element whose position is being animated
					//  * prop         - the property that is being animated
					//  * value        - the value it's being animated to
					//  * stepCallback - a function that you must execute each time you update the value of the property
					// You can use the default implementation (below) as a starting point for your own implementation.
					animate: function(ele, prop, value, stepCallback)
					{
						var params = {};
						params[prop] = value;
						ele.animate(
							params,
							{
								'duration'	: settings.animateDuration,
								'easing'	: settings.animateEase,
								'queue'		: false,
								'step'		: stepCallback
							}
						);
					},
					// Returns the current x position of the viewport with regards to the content pane.
					getContentPositionX: function()
					{
						return contentPositionX();
					},
					// Returns the current y position of the viewport with regards to the content pane.
					getContentPositionY: function()
					{
						return contentPositionY();
					},
					// Returns the width of the content within the scroll pane.
					getContentWidth: function()
					{
						return contentWidth;
					},
					// Returns the height of the content within the scroll pane.
					getContentHeight: function()
					{
						return contentHeight;
					},
					// Returns the horizontal position of the viewport within the pane content.
					getPercentScrolledX: function()
					{
						return contentPositionX() / (contentWidth - paneWidth);
					},
					// Returns the vertical position of the viewport within the pane content.
					getPercentScrolledY: function()
					{
						return contentPositionY() / (contentHeight - paneHeight);
					},
					// Returns whether or not this scrollpane has a horizontal scrollbar.
					getIsScrollableH: function()
					{
						return isScrollableH;
					},
					// Returns whether or not this scrollpane has a vertical scrollbar.
					getIsScrollableV: function()
					{
						return isScrollableV;
					},
					// Gets a reference to the content pane. It is important that you use this method if you want to
					// edit the content of your jScrollPane as if you access the element directly then you may have some
					// problems (as your original element has had additional elements for the scrollbars etc added into
					// it).
					getContentPane: function()
					{
						return pane;
					},
					// Scrolls this jScrollPane down as far as it can currently scroll. If animate isn't passed then the
					// animateScroll value from settings is used instead.
					scrollToBottom: function(animate)
					{
						positionDragY(dragMaxY, animate);
					},
					// Hijacks the links on the page which link to content inside the scrollpane. If you have changed
					// the content of your page (e.g. via AJAX) and want to make sure any new anchor links to the
					// contents of your scroll pane will work then call this function.
					hijackInternalLinks: $.noop,
					// Removes the jScrollPane and returns the page to the state it was in before jScrollPane was
					// initialised.
					destroy: function()
					{
							destroy();
					}
				}
			);
			
			initialise(s);
		}

		// Pluginifying code...
		settings = $.extend({}, $.fn.jScrollPane.defaults, settings);
		
		// Apply default speed
		$.each(['mouseWheelSpeed', 'arrowButtonSpeed', 'trackClickSpeed', 'keyboardSpeed'], function() {
			settings[this] = settings[this] || settings.speed;
		});

		return this.each(
			function()
			{
				var elem = $(this), jspApi = elem.data('jsp');
				if (jspApi) {
					jspApi.reinitialise(settings);
				} else {
					$("script",elem).filter('[type="text/javascript"],not([type])').remove();
					jspApi = new JScrollPane(elem, settings);
					elem.data('jsp', jspApi);
				}
			}
		);
	};

	$.fn.jScrollPane.defaults = {
		showArrows					: false,
		maintainPosition			: true,
		stickToBottom				: false,
		stickToRight				: false,
		clickOnTrack				: true,
		autoReinitialise			: false,
		autoReinitialiseDelay		: 500,
		verticalDragMinHeight		: 0,
		verticalDragMaxHeight		: 99999,
		horizontalDragMinWidth		: 0,
		horizontalDragMaxWidth		: 99999,
		contentWidth				: undefined,
		animateScroll				: false,
		animateDuration				: 300,
		animateEase					: 'linear',
		hijackInternalLinks			: false,
		verticalGutter				: 4,
		horizontalGutter			: 4,
		mouseWheelSpeed				: 0,
		arrowButtonSpeed			: 0,
		arrowRepeatFreq				: 50,
		arrowScrollOnHover			: false,
		trackClickSpeed				: 0,
		trackClickRepeatFreq		: 70,
		verticalArrowPositions		: 'split',
		horizontalArrowPositions	: 'split',
		enableKeyboardNavigation	: true,
		hideFocus					: false,
		keyboardSpeed				: 0,
		initialDelay                : 300,        // Delay before starting repeating
		speed						: 30,		// Default speed when others falsey
		scrollPagePercent			: .8		// Percent of visible area scrolled when pageUp/Down or track area pressed
	};

})(jQuery,this);

;
(function($) {

$.widget("ui.learningcore", {
	qtipLoadSet : new Array(),
	qtipLenth : 0,
	_init: function() {
		try{
			var self = this;
			/*
		if($('#block-system-main-menu a[href="/?q=learning/catalog-search"]').hasClass('active-trail') == true){
			$('#block-system-main-menu').parents('div').siblings('.theme-navigation-menu-bg-left').addClass('active-header-curve');
		}else{
			$('#block-system-main-menu').parents('div').siblings('.theme-navigation-menu-bg-left').removeClass('active-header-curve');
		}
			 */
			//change by ayyappans for 39837: Theme is not getting applied for 'Catalog' header menu in Catalog -> Class details page
			var pageUrl = window.location.search;
			var catalogMenu = $('#block-system-main-menu a[href="/?q=learning/catalog-search"]');
			var forumMenu = $('#block-system-main-menu a[href="/?q=learning/forum-list"]');
			var firstMenuSel=$('.theme-navigation-menu #block-system-main-menu').find('.menu li:first-child');
			var lastMenuSel=$('.theme-navigation-menu #block-system-main-menu').find('.menu li:last-child');
			if(firstMenuSel.is('.active-trail')){
			$('.theme-navigation-menu-bg-left').addClass('active-header-curve');
			}else {
			$('.theme-navigation-menu-bg-left').removeClass('active-header-curve');
			}
			if(lastMenuSel.is('.active-trail')){
				$('.theme-navigation-menu-bg-right').addClass('active-header-curve');
				lastMenuSel.css("border-right","0");
			}else {
				$('.theme-navigation-menu-bg-right').removeClass('active-header-curve');
			}
			if((pageUrl.indexOf("learning/course-details") > -1 || pageUrl.indexOf("learning/class-details") > -1 || pageUrl.indexOf("learning/learning-plan-details") > -1) && !catalogMenu.hasClass('active-trail')) {
				catalogMenu.addClass('active active-trail').parent().addClass('active active-trail');
				if(catalogMenu.parent().is(':first-child')) {
					$('.theme-navigation-menu-bg-left').addClass('active-header-curve');
				}
				else {
					$('.theme-navigation-menu-bg-left').removeClass('active-header-curve');
				}
			}
			else if(pageUrl.indexOf("learning/forum-topic-list") > -1 && !forumMenu.hasClass('active-trail')) {
				forumMenu.addClass('active active-trail').parent().addClass('active active-trail');
			}
		}catch(e){
			// to do
		}
	},


	 callAvailableSeats : function(userId, courseId, classId, waitlist) {
		 try{
		 var obj = this;
			url = obj.constructUrl("ajax/learningcore/availableseats/" + classId+'/'+waitlist+'/'+userId);
			$.ajax({
				type: "POST",
				url: url,
				//data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
				success: function(result){
				   $("#seats_available_"+classId).html(result);
				}
		    });
		 }catch(e){
				// to do
			}
	},

	callObjectAvailableSeats : function(objectId) {
		try{
		var obj = this;
		url = obj.constructUrl("ajax/learningcore/objectavailableseats/" + objectId);
		$.ajax({
			type: "POST",
			url: url,
			//data:  '',//Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
			success: function(result){
			   $("#object-seats_available_"+objectId).html(result);
			}
	    });
		}catch(e){
			// to do
		}
	},

	callSigninWidget : function(clickedid){
		try{
			//after login auto register or add to cart related work start
			//console.log(clickedid);
			var current_url_arr = window.getUrlVars();
			var url_query_string = current_url_arr['q'];
			var pagenumber = 	$('.ui-pg-input').val();
			var rownumber = 	$("#paintContentResults").jqGrid('getGridParam', 'rowNum');
			//console.log(rownumber);
			//document.cookie="user_selected_class_id="+clickedid+"; expires="+expireTime;
			$.cookie("user_selected_class_id", clickedid,{ expires: 300 });
			$.cookie("user_selected_url",url_query_string ,{ expires: 300 });
			//console.log(pagenumber);
			if(pagenumber!=null && pagenumber != undefined)
				$.cookie("user_selected_page_number", pagenumber,{ expires: 300 });
			if(rownumber!=null && rownumber != undefined)
				$.cookie("user_selected_row_number", rownumber,{ expires: 300 });
			//after login auto register or add to cart related work start
		 //$(".ctools-modal-ctools-login-style").click();
			$("#signin").click();
		}catch(e){
			// console.log(e);
		}
	},

	callRegisterClass : function(widgetId,userId, courseId, classId, waitList, idValue) {
		try{
		var currtheme = Drupal.settings.ajaxPageState.theme;
		if(typeof(idValue)==='undefined') idValue = '';
		 var obj = this;
		 var loaderObj = widgetId;
		 var userId = this.getLearnerId();

			if(!userId) {
				this.callMessageWindow('registertitle',"Please sign in to proceed.");
			}else{
					this.createLoader(loaderObj);
					var isAdminSide = 'Nlnrsearch';
					url = obj.constructUrl("ajax/learningcore/register/" + userId + '/' + courseId + '/' + classId+'/'+waitList+'/'+isAdminSide);
					$.ajax({
						type: "POST",
						url: url,
						// data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
						success: function(result){
							result_arr = result.split('~~');
							result = $.trim(result_arr[0]);
							if(result_arr[1]!='' && result_arr[1]!=undefined && (result_arr[3] == 'vod' || result_arr[3]=='wbt') && (document.getElementById('lnr-prerequisite-container')==undefined || document.getElementById('lnr-prerequisite-container')=='')){
								if(Drupal.settings.convertion.mylearn_version==1)
									var launchInfo_arr = result_arr[1];
								else
								 var launchInfo_arr = $.parseJSON(result_arr[1]);
								 var del_type = result_arr[3];
								 var enrolled_id = result_arr[2];
								 var action_status = result;
								 var pre_ass_status = result_arr[4];
								 //console.log(pre_ass_status);
								 var query_str = window.location.href.slice(window.location.href.indexOf('?') + 1);
								 var recurring = $('#reccuring_'+classId).attr('value');
								 if ((query_str.indexOf("learning/course-details") >= 0 || query_str.indexOf("learning/class-details") >= 0) && (result == 'Registered' || result == Drupal.t('Registered')) && recurring !=1){
									   location.reload();
									   return;
								 }
								  else if((result == 'Registered' || result == Drupal.t('Registered')) && Drupal.settings.convertion.mylearn_version == 1){
									   var enrolled_id = result_arr[2];
									   $('.progress_'+classId).attr('id','progress_'+enrolled_id);
									   //76575: Class Details - UI issue when registering to recurring Classes
									   $('.progress_'+classId).html('');
									   progressBarRound(enrolled_id,0, 'enr_progress','progress_',$("#lnr-catalog-search").data("contentPlayer"));
									   //$("#lnr-catalog-search").data("contentPlayer").progressbardetail(enrolled_id,0, 'enr_progress','progress_');
									   $('#progress_'+enrolled_id).show();
								 }
								 registeredToLaunch(launchInfo_arr,userId,classId,courseId,del_type,enrolled_id,action_status,pre_ass_status);
							}else{

						   if(userId!=0)

						   //alert('result : '+result);
						   if((result == 'Registered') || (result == Drupal.t('Registered')) || (result == 'Waitlisted') || (result == Drupal.t('LBL190'))) {
							 //  if(idValue != 'fromClasslvl') {
								   obj.callAvailableSeats(userId, courseId, classId, waitList);
							  // }

 							   var showAction = (result) ? result  : '';
							   if(result == Drupal.t('Registered')) {
								 $("#registerCls_"+classId).removeClass("action-btn");
								 $("#registerCls_"+classId).html(Drupal.t('Registered'));
							   } else if(result == Drupal.t('LBL190')) {
								   $("#registerCls_"+classId).removeClass("action-btn-waitlist");
							   }

							   $("#registerCls_"+classId).removeAttr('onclick');
							   //$("#registerCls_"+classId).removeClass("action-btn");
							   $("#registerCls_"+classId).addClass("action-btn-disable");
							   if(idValue == 'fromClasslvl') {
								   if(currtheme == 'expertusoneV2'){
									   $("#select-class-dialog #registerCls_"+classId).html('<div>'+showAction+'</div>');
									   $("#myteam-catalog-seats-available-"+classId).html('');
									   $('#select-class-dialog').next('.ui-widget-overlay').css('display','block');
								   	}
									if (widgetId=='lnr-catalog-search') {
										var currentPage = $('.ui-pg-input').val();
										if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch") == 'undefined' || $("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow() == false) {
											$("#paintContentResults").trigger("reloadGrid",[{page:currentPage}]);
										}
									   }
							   }else{
								   $("#registerCls_"+classId).html(showAction);
							   }
							   //$("#registerCls_"+classId).html(showAction);

							   if(document.getElementById("preReqClsStatus"+courseId)) {
								   $("#preReqClsStatus"+courseId).html(Drupal.t('Enrolled'));
								   $("#registerClsPreReq_"+classId).removeAttr('onclick');
								   $("#registerClsPreReq_"+classId).removeClass("action-btn");
								   $("#registerClsPreReq_"+classId).addClass("action-btn-disable");
								   $("#registerClsPreReq_"+classId).html(showAction);
							   }
							   var query_str = window.location.href.slice(window.location.href.indexOf('?') + 1);
							   var recurring = $('#reccuring_'+classId).attr('value');
							   if ((query_str.indexOf("learning/course-details") >= 0 || query_str.indexOf("learning/class-details") >= 0) && (result == 'Registered' || result == Drupal.t('Registered')) && recurring !=1){
								   location.reload();
								   return;
							   }
							   else if((result == 'Registered' || result == Drupal.t('Registered')) && Drupal.settings.convertion.mylearn_version == 1){
								   var enrolled_id = result_arr[2];
								   $('.progress_'+classId).attr('id','progress_'+enrolled_id);
								   //76575: Class Details - UI issue when registering to recurring Classes
								   $('.progress_'+classId).html('');
								   	progressBarRound(enrolled_id,0, 'enr_progress','progress_',$("#lnr-catalog-search").data("contentPlayer"));
									//$("#lnr-catalog-search").data("contentPlayer").progressbardetail(enrolled_id,0, 'enr_progress','progress_');
								   $('#content-available-seats_'+classId).hide();
								   $('#progress_'+enrolled_id).show();
							   }
						   } else {
							    var commClassId;
							       //obj.callMessageWindow('registertitle',result);
							   if(resource['catalog_reg'] == 'Class' || (resource['catalog_reg'] == 'Course' && idValue != 'fromClasslvl') ){
								   obj.callMessageWindow('registertitle',result);
							   }else{
								   var errResult = new Array();
								   errResult[0] = result;
								   var err_msg = expertus_error_message(errResult,'error');
									$('#show_expertus_message').html(err_msg);
									$('#show_expertus_message').show();
							   	}
							   		if(result.indexOf(Drupal.t('MSG311')) >= 0){
							   			if(idValue == 'fromCourselvl') {
							   				commClassId = courseId;
							   			}else{
							   				commClassId = classId;
							   			//$("#registerCls_"+classId).html(Drupal.t('LBL032'));
								   			var tmp = $("#registerCls_"+commClassId).html();
								   			var tmp1 = $.trim(tmp).split('<div>');
								   			var str1='';
								   			if(tmp1.length>1){
								   				/*-- Issue fix for #38288 --*/
								   				if($.browser.msie && parseInt($.browser.version, 10)=='9') {
								   					var divLen = tmp1.length-2;
								   				} else {
								   					var divLen = tmp1.length-1;
								   				}
								   				for(var i=0;i<divLen;i++){
								   					if(tmp1[i].trim()!='')
								   						str1 += "<div>"+tmp1[i];
								   				}
								   				str1 += "<div>"+Drupal.t('Registered')+"</div>";
								   			}else{
								   				str1 = Drupal.t('Registered');
								   			}
							   			}
							   			$("#registerCls_"+commClassId).html(str1);
									    var regStatus = 'lrn_crs_reg_cnf';
									    var stringAttr = $("#registerCls_"+commClassId).attr("onClick");
									    var contains = stringAttr.indexOf('lrn_crs_reg_cnf');
									    if(contains == -1){
									    	if(idValue == 'fromCourselvl') {
									    		var setNewAttr = '$("body").data("learningcore").callEquivalencePopup(\''+widgetId+'\',\''+userId+'\',\''+courseId+'\',\''+classId+'\',\''+waitList+'\',\''+regStatus+'\',\''+idValue+'\')';
									    	}else {
									    		var setNewAttr = '$("body").data("learningcore").callEquivalencePopup(\''+widgetId+'\',\''+userId+'\',\''+courseId+'\',\''+classId+'\',\''+waitList+'\',\''+regStatus+'\')';
									    	}
										    $("#registerCls_"+commClassId).attr("onClick", setNewAttr);
									    }
									    if((idValue == 'fromCourselvl' || idValue == 'fromClasslvl') && widgetId=='lnr-catalog-search'){
									    	var currentPage = $('.ui-pg-input').val();
											if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch") == 'undefined' || $("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow() == false) {
												$("#paintContentResults").trigger("reloadGrid",[{page:currentPage}]);
											}
									    }
							   	}
						   }
						}
						   obj.destroyLoader(loaderObj);

						}
				    });
			}
		}catch(e){
			// to do
			//console.log(e)
		}
	},

	registerConfirmation : function(title, message ,widgetId, userId, courseId, classId, waitList,selectValues,compClassPopup,courseLevelCnt){
		try{
		if(typeof(selectValues)==='undefined') selectValues = '';
		if(typeof(compClassPopup)==='undefined') compClassPopup = '';
		if(title == 'registertitle'){
			title = Drupal.t('LBL721');
		}

	    $('#commonMsg-wizard').remove();
	    var html = '';
	    html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    html+='<tr><td height="30"></td></tr>';
	    html+='<tr>';
    	html+= '<td align="center"><span class="select-greyed-out-text">'+SMARTPORTAL.t(message)+'</span></td>';
	    html+='</tr>';
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);
	    var closeButt={};
    	closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#commonMsg-wizard').remove();};
    	if(selectValues=='fromCourselvl' && (compClassPopup == 'Y' || courseLevelCnt == 'Y')) {
    		closeButt[Drupal.t('Yes')]=function(){
    		$(this).dialog('destroy');
    		$(this).dialog('close');
    		$('#equvMsg-wizard').remove();
    		$('#select-class-equalence-dialog').remove();
    		$("#lnr-catalog-search").data("lnrcatalogsearch").showSelectClass(userId, courseId); };
    	} else {
    	closeButt[Drupal.t('Yes')]=function(){ $("body").data("learningcore").callRegisterClass(widgetId,userId, courseId, classId, waitList,selectValues); $(this).dialog('destroy');$(this).dialog('close');$('#equvMsg-wizard').remove(); };
    	}
    	$("#commonMsg-wizard").dialog({
	        position:[(getWindowWidth()-500)/2,100],
	        bgiframe: true,
	        width:500,
	        resizable:false,
	        modal: true,
	        title: SMARTPORTAL.t(title),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:true,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });

	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
		$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

		this.currTheme = Drupal.settings.ajaxPageState.theme;
		if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
	 }
	 	if(this.currTheme == "expertusoneV2"){
	 		//changeDialogPopUI();
	 		 $('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
		 	   $('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
		       $('#select-class-equalence-dialog').find('.ui-dialog-content').addClass('commonMsg-select-class');
			   changeChildDialogPopUI('select-class-equalence-dialog');
			 //$('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
			   if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
			   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
			   }
			}
		 	else {
		 		$('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
			 	$('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
				changeChildDialogPopUI('select-class-equalence-dialog');
				$('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
				$('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
				$('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
			   }
	    $("#commonMsg-wizard").show();
		$('.ui-dialog-titlebar-close, .removebutton').click(function(){
			$('#select-class-dialog').next('.ui-widget-overlay').css('display','block');
	        $("#commonMsg-wizard").remove();
	    });
		}catch(e){
			// to do
		}
	},

/*
 * 0024925: Enforce equivalence in training plans
 * for this ticket we created equivalence option for training plan
 * don't delete it. Its may need for feature enhancement
 *

 */
 /*

	registerConfirmationTP : function(title, message ,widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId,lengthTP){
		try{
		if(typeof(addToCart)==='undefined') addToCart = '';
		if(typeof(isAdminSide)==='undefined') isAdminSide = 'N';
		if(typeof(userListIfAdminSide)==='undefined') userListIfAdminSide = '';
		if(typeof(recertifyId)==='undefined') recertifyId = '';
		//alert('title:'+title+'|'+'message:'+message+'|'+widgetId+'|'+prgId+'|'+addToCart+'|'+isAdminSide+'|'+userListIfAdminSide+'|'+recertifyId);
		if(title == 'registertitle'){
			title = Drupal.t('LBL721');
		}

	    $('#commonMsg-wizard').remove();
	    var html = '';
	    html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    html+='<tr><td height="30"></td></tr>';
	    html+='<tr>';
    	html+= '<td align="center"><span class="select-greyed-out-text">'+SMARTPORTAL.t(message)+'</span></td>';
	    html+='</tr>';
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);
	    var closeButt={};
    	closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#commonMsg-wizard').remove();};
    	if(lengthTP > 0 ) {
    		closeButt[Drupal.t('Yes')]=function(){ $("body").data("learningcore").callPopupOrNotTP(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId); $(this).dialog('destroy');$(this).dialog('close');$('#equvMsg-wizard').remove(); };
    	} else {
    		closeButt[Drupal.t('Yes')]=function(){ $("body").data("learningcore").callPopupOrNotTP(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId); $(this).dialog('destroy');$(this).dialog('close');$('#equvMsg-wizard').remove(); };
    	}
    	$("#commonMsg-wizard").dialog({
	        position:[(getWindowWidth()-500)/2,100],
	        bgiframe: true,
	        width:500,
	        resizable:false,
	        modal: true,
	        title: SMARTPORTAL.t(title),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:true,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });

	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
		$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

		this.currTheme = Drupal.settings.ajaxPageState.theme;
		if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
	 }
	 	if(this.currTheme == "expertusoneV2"){
	 		//changeDialogPopUI();
	 		 $('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
		 	   $('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
		       $('#select-class-equalence-dialog').find('.ui-dialog-content').addClass('commonMsg-select-class');
			   changeChildDialogPopUI('select-class-equalence-dialog');
			   $('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
			   if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
			   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
			   }
			}
		 	else {
		 		$('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
			 	$('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
				changeChildDialogPopUI('select-class-equalence-dialog');
				$('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
				$('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
				$('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
			   }
	    $("#commonMsg-wizard").show();
		$('.ui-dialog-titlebar-close, .removebutton').click(function(){
			$('#select-class-dialog').next('.ui-widget-overlay').css('display','block');
	        $("#commonMsg-wizard").remove();
	    });
		}catch(e){
			// to do
		}
	},

*/
    enrollChangeClassErrorMessage : function(title, message, restoreOverlay){
	 try{
		if(title == 'registertitle'){
			title = Drupal.t('LBL721');
		}

	    $('#commonMsg-wizard').remove();
	    var html = '';
	    html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    html+='<tr><td height="30"></td></tr>';
	    html+='<tr>';
    	html+= '<td align="center"><span class="select-greyed-out-text">'+SMARTPORTAL.t(message)+'</span></td>';
	    html+='</tr>';
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);
	    var closeButt={};
    	closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#commonMsg-wizard').remove();};
    	//closeButt[Drupal.t('LBL342')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#equvMsg-wizard').remove(); };
	    $("#commonMsg-wizard").dialog({
	        position:[(getWindowWidth()-500)/2,100],
	        bgiframe: true,
	        width:500,
	        resizable:false,
	        modal: true,
	        title: SMARTPORTAL.t(title),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:true,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });

	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    //$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		//$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
		//$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

		this.currTheme = Drupal.settings.ajaxPageState.theme;
		if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
				 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
				 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
				 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');
				 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
		 }
		if(this.currTheme == "expertusoneV2"){
		 	   $('#select-class-enrollChange-dialog').prevAll().removeAttr('select-class-enrollChange-dialog');
		 	   $('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-enrollChange-dialog'></div>");
		       $('#select-class-enrollChange-dialog').find('.ui-dialog-content').addClass('commonMsg-select-class');
			   changeChildDialogPopUI('select-class-enrollChange-dialog');
			   if(typeof restoreOverlay == "undefined" || restoreOverlay == 0) {
			   $('#select-class-enrollChange-dialog').prev('.ui-widget-overlay').css('display','none');
			   }
			   if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			   $('#select-class-enrollChange-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
			   $('#select-class-enrollChange-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
			   }
			}
		 	else {
		 		$('#select-class-enrollChange-dialog').prevAll().removeAttr('select-class-enrollChange-dialog');
			 	$('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-enrollChange-dialog'></div>");
				changeChildDialogPopUI('select-class-enrollChange-dialog');
				$('#select-class-enrollChange-dialog').prev('.ui-widget-overlay').css('display','none');
			   }
	    $("#commonMsg-wizard").show();
		$('.ui-dialog-titlebar-close,.removebutton').click(function(){
			$('#my-team-dialog').next('.ui-widget-overlay').css('display','block');
	        $("#commonMsg-wizard").remove();
	    });
	 }catch(e){
			// to do
		}
	},


	callAddToCart : function(widgetId,act,ObjectId,addFrom,class_ids,waitlist, catalogType) {
		try{
		var loaderObj = widgetId ;
		if(typeof(catalogType)==='undefined') catalogType = '';
		var currtheme = Drupal.settings.ajaxPageState.theme;

		 if(addFrom == 'Cart'){
			var classData 	= eval($('#object-addToCartList_'+ObjectId).attr("data"));
		 }else{
			 var classData 	= eval($('#addToCartList_'+ObjectId).attr("data"));
		 }
			var LMSNodeId 	= classData.NodeId;
			var classId	 	= addFrom == 'Cart' ? classData.TpId : classData.ClassId;
			var courseId	= classData.CourseId;

			var obj = this;
			this.createLoader(loaderObj);
			if(addFrom == 'Cart'){
				//var class_ids = '';
				if(class_ids ==''){
					class_ids = 0;
				}
				url =  this.constructUrl("ajax/cart/tpproduct/add/" + LMSNodeId + "/" + classId + "/" + 'null' + "/" + class_ids);
			}
			else{
				url =  this.constructUrl("ajax/cart/product/add/" + LMSNodeId + "/" + classId + "/" + courseId+'/'+waitlist);
			}

			$.ajax({
				type: "POST",
				url: url,
				// data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
				success: function(result){
					obj.destroyLoader(loaderObj);
					var cart_msg = result.cart_msg;
					if((result.cart_msg == Drupal.t('MSG247')) || (result.cart_msg == 'waitlisted')) {
						if(addFrom == 'Cart'){
							$("#tainingplan-register"+ObjectId).remove();
						}
						var showBtnTxt = cart_msg == 'CartAdded' ? 'Added to Cart' : 'Waitlisted';
						var showBtnTxt = Drupal.t('LBL049');
						var objDivId = (addFrom == 'Cart')? 'object-addToCartList_' : 'addToCartList_';

						if(cart_msg == Drupal.t('MSG247')) {
						  $("#"+objDivId+classId).removeClass("action-btn-disable");
						} else if(cart_msg == 'waitlisted') {
						  $("#"+objDivId+classId).removeClass("action-btn-waitlist");
						}
						$("#"+objDivId+classId).removeAttr('onclick');
						$("#"+objDivId+classId).removeClass("action-btn");
						$("#"+objDivId+classId).addClass("action-btn-disable");
						$("#addToCartList_"+classId).html(Drupal.t('LBL049'));
						//$("#"+objDivId+classId).html("Added to Cart");

						if(catalogType == 'fromClasslvl') {
							   if(currtheme == 'expertusoneV2'){
								   $("#select-class-dialog #"+objDivId+classId).html(showBtnTxt);
								   $("#myteam-catalog-seats-available-"+classId).html('');
							   if (widgetId=='lnr-catalog-search') {
									   var currentPage = $('.ui-pg-input').val();
									   if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch") == 'undefined' || $("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow() == false) {
											$("#paintContentResults").trigger("reloadGrid",[{page:currentPage}]);
										}
								   }
							   }
						   }else{
							   $("#"+objDivId+classId).html(showBtnTxt);
						   }

					}
					else{
						if(addFrom == 'Cart'){
							var errorMessages = new array();
							errorMessages[0]=result.cart_msg;
							var message_call = expertus_error_message(errorMessages,'error');
							$('#show_expertus_message').html(message_call);
							$('#show_expertus_message').show();
						}
						else{
							obj.callMessageWindow('registertitle',result.cart_msg);
						}
					}
					if (parseInt(result.total_product) > 0) {
						$("#ShoppingCartItemsId").addClass("filled");
						$("#ShoppingCartItemsId").html(result.total_product);
					} else {
						$("#ShoppingCartItemsId").removeClass("filled");
						$("#ShoppingCartItemsId").html('');
					}
				}
		    });
		}catch(e){
			// to do
			// console.log(e);
		}
	},

/*	callObjectAddToCart : function(widgetId,act,objectId) {
		alert("Under Construction");
	},*/

	//Common function for calling dialog window. Param : title, message
	callMessageWindow : function(title,message, restrictTitle){
	 try{
		if(title == 'registertitle'){
			title = Drupal.t('LBL721');
		}

	    $('#commonMsg-wizard').remove();
	    var html = '';
	    html+='<div id="commonMsg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    html+='<tr><td height="30"></td></tr>';
	    html+='<tr>';
    	html+= '<td align="center"><span class="select-greyed-out-text">'+unescape(SMARTPORTAL.t(message))+'</span></td>';
	    html+='</tr>';
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);
	    var closeButt={};
    	closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#commonMsg-wizard').remove();};
	    $("#commonMsg-wizard").dialog({
	        position:[(getWindowWidth()-500)/2,100],
	        bgiframe: true,
	        width:520,
	        resizable:false,
	        modal: true,
	        title: SMARTPORTAL.t(title),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:true,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });
	    if(restrictTitle !== undefined) {
	    	$('#ui-dialog-title-commonMsg-wizard').attr('title', title).text(titleRestricted(title, restrictTitle));
	    }
	   	$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    this.currTheme = Drupal.settings.ajaxPageState.theme;
		  if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass(' white-btn-bg-middle');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
			}
	    /*new dialog popUI Script*/
		 // $('#select-class-dialog').hide();
	 	if(this.currTheme == "expertusoneV2"){
	     //changeDialogPopUI();
	 	   $('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
	 	   $('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
	       $('#select-class-equalence-dialog').find('.ui-dialog-content').addClass('commonMsg-select-class');
		   changeChildDialogPopUI('select-class-equalence-dialog');
		   $('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
		   if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
		   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
		   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
		   }
		}
	 	else {
	 		$('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
		 	$('#commonMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
			changeChildDialogPopUI('select-class-equalence-dialog');
			$('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
		   }
	    $("#commonMsg-wizard").show();
		$('.ui-dialog-titlebar-close,.removebutton').click(function(){
			if(opener!=null && opener!=undefined && opener.location.href.indexOf("admincalendar") >= 0){
				window.close();
			}
			$("#commonMsg-wizard").remove();
	        //$('#select-class-dialog').show();
	        $('#select-class-dialog').next('.ui-widget-overlay').css('display','block');
	    });
	 }catch(e){
			// to do
		}
	},


	registerTPClassDetails : function(widgetId,prgId,addToCart,fromPage,recertifyId){
	 try{
		if(typeof(recertifyId) == 'undefined') recertifyId = '';
		var courseList = $('#courseListIds').val();
		var courseListIds = courseList.split(",");

		var isAdminSide = $('#isadminsidefield').val();
		var userListIds = $('#userListIds').val();

		var courseId;
		var selectedClass = '';
		var inc = 0;
		var classIds = '';
		var selectedClass1;
		var registeredNsingleCourseClassIds;

		var params = 'selectedItem={';

			for(c=0; c < courseListIds.length ; c++){

				inc=inc+1;
				courseId 	= courseListIds[c];

				registeredNsingleCourseClassIds = $("#classListIds-"+courseId).val();

				selectedClass = $('input[name="'+courseId+'-clsregister"]:radio:checked').val();

					if(registeredNsingleCourseClassIds == '' && (selectedClass == undefined || selectedClass == 'undefined') ) {
							selectedClass1='NULL';
							break;
					}

				//if(registeredNsingleCourseClassIds != '' && recertifyId !='R') { // Fixed For this Issue #0040101 First time Recertifying registeredNsingleCourseClassIds has Value.
					// selectedClass = registeredNsingleCourseClassIds;
				//} Commented by rajeshwar for #71732


				params += '"'+c+'":'+'{';
				params += '"tpid":"'+prgId+'",';
				params += '"courseid":"'+courseId+'",';
				params += '"classid":"'+selectedClass+'",';
				params += '"recertifyid":"'+recertifyId+'"';
				params += '}';

				classIds +=  selectedClass;
				if(inc < courseListIds.length) {
					params += ',';
					classIds += ',';
				 }

			}

			params += '}';
			
		 /* Start : #0069220 Added by ganesh for implement cookieless option in Salesforce on Oct 6th 2016 10:40 AM -  Passing session variables to ajax callback */
		 			var sf_exp_ses_value = $('.salesforce-widget #widget').attr('data-exp-sess-id');  
					if (typeof sf_exp_ses_value !== typeof undefined && sf_exp_ses_value !== false) {
						 if(params!=''){
						    params = params+'&exp_sess_id='+sf_exp_ses_value; 
						 }else{
						      params = 'exp_sess_id='+sf_exp_ses_value;
						 }
					 }					 
		   /* End : #0069220 Added by ganesh for implement cookieless option in Salesforce */   
		   

			if(selectedClass1 == "NULL") {
				var errMsg = new Array();
				errMsg[0] = Drupal.t("ERR066");
				var message_call = expertus_error_message(errMsg,'error');
				$('#show_expertus_message').html(message_call);
				$('#show_expertus_message').show();

				/* $("#errMsgDisplay").html(Drupal.t("ERR149"));
				 $(".error").css('display','block');*/
			}else{
				if(addToCart != 'Cart'){

					var MasterMandatory=$('#assignPrg_checkbox_'+prgId+':checked').val();
					if(MasterMandatory==undefined){
						MasterMandatory='N';
					}
					this.createLoader('tainingplan-register'+prgId);
					//alert(MasterMandatory)
					var url = this.constructUrl("ajax/trainingplan/class-list-register/"+isAdminSide+ "/" + userListIds+ "/" + fromPage+ "/" + MasterMandatory);
					var obj = this;
					$.ajax({
						type: "POST",
						url: url,
						data:  params,
						datatype: 'text',
						success: function(result){

							if(isAdminSide =="Y") {
								result = eval(result);
							}else{
								result = $.trim(result);
							}

							if(isAdminSide =="Y") {
								 $("#tainingplan-register"+prgId).remove();
								 obj.displayRegistrationStatus(result);
							}else if(result == 'Registered' || result == 'Waitlisted') {

							   obj.callObjectAvailableSeats(prgId);
							   if(fromPage != 'MyTeam'){
								   $("#tainingplan-register"+prgId).remove();
								   $("#object-registerCls_"+prgId).removeAttr('onclick');
								   if(result == 'Waitlisted') {
									   $("#object-registerCls_"+prgId).removeClass("action-btn-waitlist");
									   $("#object-registerCls_"+prgId).html(Drupal.t('LBL190'));
								   }else{
									   $("#object-registerCls_"+prgId).removeClass("action-btn");
									   $("#object-registerCls_"+prgId).html(Drupal.t('Registered'));
								   }
								   $("#object-registerCls_"+prgId).addClass("action-btn-disable");

								   if (widgetId=='lnr-catalog-search') {
									   var currentPage = $('.ui-pg-input').val();
									   if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch") == 'undefined' || $("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow() == false) {
											$("#paintContentResults").trigger("reloadGrid",[{page:currentPage}]);
										}
								   }
								   if(document.getElementById("learningplan-tab-inner")){
									   if(widgetId == 'enroll-lp-result-container'){ // Expired Tab Reload issue #0046138
										   $("#learningplan-tab-inner").data("learningplan").callLearningPlan("lrn_tpm_ovr_exp","EnrollExpired");
									   }
								   }
								   if(document.getElementById("learning-plan-details-display-content"))
									   location.reload();
							   }else{
								   $("#paintClassesSelectList"+prgId).remove();
								   $("#assignClass_"+prgId).removeAttr('onclick');
								   $("#assignClass_"+prgId).removeClass("action-btn");
								   $("#assignClass_"+prgId).addClass("action-btn-disable");
								   if(result == 'Waitlisted') {
									   $("#assignClass_"+prgId).html(Drupal.t('LBL190'));
								   }else{
									   $("#assignClass_"+prgId).html(Drupal.t('Registered'));
								   }
								   var currentPage = $('.ui-pg-input').val();
								   $("#tbl-paintCatalogContentResults").trigger("reloadGrid",[{page:currentPage}]);
							   }
						   }else{
							   var errResult = new Array();
							   errResult[0] = result;
							   var err_msg = expertus_error_message(errResult,'error');
								$('#show_expertus_message').html(err_msg);
								$('#show_expertus_message').show();
						   }
						   obj.destroyLoader('tainingplan-register'+prgId);
						}
				    });
				}
				else{
					var waitlist = 0; // waitlist function
					this.callAddToCart(widgetId,'', prgId,addToCart,classIds,waitlist);
				}
			}
	 }catch(e){
			// to do
		}
	},


	displayRegistrationStatus : function(result) {
	 try{
		var rhtml='';
		rhtml += "<table border='1' cellpadding='5' style='width: 100%;'>";
		rhtml += "<tr style='background-color:#EFEFEF'>";
		rhtml += "<td style='width: 150px;font-weight:bold;font-size:15px;'>User Name</td>";
		rhtml += "<td style='width: 150px;font-weight:bold;font-size:15px;'>Status</td>";
		rhtml += "</tr>";
		for(c=0; c < result.length ; c++){

			rhtml += "<tr>";
			rhtml += "<td>"+result[c]['username']+"</td>";
			rhtml += "<td>"+result[c]['status']+"</td>";
			rhtml += "</tr>";

		}
		rhtml += "</table>";

		$("#displayRegisteredUserStatus").html(rhtml);
	 }catch(e){
			// to do
		}
	},


	myteamAccordin : function(widgetId,prgId,addToCart) {
		try{
		//alert(1)
		}catch(e){
			// to do
		}
	},

	renderPopup : function(widgetId,prgId,addToCart,fromPage,recertifyId) {
		try{
		var html = "<div id='tainingplan-register"+prgId+"' style='height:250px;width:600px;overflow:visible;padding:0px;'></div>";
		$("#tainingplan-register"+prgId).remove();
		$('body').append(html);

		var nHtml = "<div id='show_expertus_message'></div><table id='lnr-tainingplan-register' class='lnr-tainingplan-register learningplan-content-wrapper'></table>";
		$('#tainingplan-register'+prgId).html(nHtml);

		var closeButt = {};
		closeButt[Drupal.t('LBL569')]=function(){
			eval('$("body").data("learningcore").registerTPClassDetails(\''+widgetId+'\',\''+prgId+'\',\''+addToCart+'\',\''+fromPage+'\',\''+recertifyId+'\')');


		};
		var prewidth = 780;
		//Embed widget related work (Create flexible grid)
		if(Drupal.settings.widget.widgetCallback==true){
		    var iwidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
		    prewidth = iwidth - 40;
		}
		$("#tainingplan-register"+prgId).dialog({
			bgiframe: true,
			width:prewidth,
			resizable:false,
			draggable:false,
			closeOnEscape: false,
			modal: true,
			title:Drupal.t('LBL716'),
			buttons: closeButt,
			close: function(){
				$("#tainingplan-register"+prgId).remove();
			},
			overlay: {
			   opacity: 0.5,
			   background: '#000000'
			 }
		});
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="admin-save-button-left-bg"></div>');
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("admin-save-button-middle-bg");
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="admin-save-button-right-bg"></div>');

		 this.currTheme = Drupal.settings.ajaxPageState.theme;
		 	if(this.currTheme == "expertusoneV2"){
		    changeDialogPopUI();
		 	}
		
		//$('.ui-dialog-buttonpane .ui-dialog-buttonset button').addClass("removebutton");
		//$('#tainingplan-register'+prgId).parent().css('border','4px solid gray');
		}catch(e){
			// to do
		}
	},


	callPopupOrNot : function(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId) {
		try{
		/**
 		* 0024925: Enforce equivalence in training plans
 		* for this ticket we created equivalence option for training plan
 		* don't delete it. Its may need for feature enhancement
 		*
 		*/
		/*
			var obj = this;
			var userId = this.getLearnerId();
			if(!userId) {
				this.callMessageWindow('registertitle',"Please sign in to proceed.");
			}
			obj.callEquivalencePopupTP(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId);
		}catch(e){
			// to do
		}
	},

	callPopupOrNotTP : function(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId) {
		try{
			var obj = this;
			var userId = this.getLearnerId();

			//obj.callEquivalencePopupTP(widgetId,userId, prgId);
		*/
		if(typeof(recertifyId) == 'undefined') recertifyId='';
		var userId = this.getLearnerId();
		var LMSNodeId = 0;
		var returnMsg;
		var userIdList = this.getLearnerId();
		var loaderId;
		
		if(!userId) {
			this.callMessageWindow('registertitle',"Please sign in to proceed.");
		}else{
			if(userListIfAdminSide != null && userListIfAdminSide != '') {
				userIdList = userListIfAdminSide;
			}

				var isCart =(addToCart =='Cart') ? 1 : 0;
				if(addToCart == 'Cart'){
					var tpData 	= eval($('#object-addToCartList_'+prgId).attr("data"));
					LMSNodeId = tpData.NodeId;
				 }
				var MasterMandatory = 'N';
				var fromPage = 'catalogpopup';
				if(document.getElementById(widgetId)!=null){ // Loader display on widgetId which passed
					loaderId = widgetId;
					this.createLoader(widgetId);
				}else{
					if(document.getElementById('tbl-paintCatalogContentResults')!= null){ // Check for team page or not
						loaderId = 'tbl-paintCatalogContentResults';
						this.createLoader('tbl-paintCatalogContentResults');
					}else{ // default loader
						loaderId = 'paintContent';
						this.createLoader('paintContent');
					}
				}
				/*if(fromPage != 'MyTeam'){
					this.createLoader('paintContent');
				}else{
					this.createLoader('tbl-paintCatalogContentResults');
				}*/
				var pageandmandatory = fromPage + "-" +MasterMandatory;
				var params = {"recertifyid":recertifyId};
				var url = this.constructUrl("ajax/trainingplan/class-cnt-for-course/"+prgId + "/" + LMSNodeId +"/" + isCart+"/" + isAdminSide+"/" + userIdList+"/" + pageandmandatory);
				var obj = this;
				$.ajax({
					type: "POST",
					url: url,
					data:  params,
					success: function(result){

						returnMsg =(addToCart !='Cart' || ($.type(result) === "string")) ? result : result.cart_msg;
					    returnMsg = $.trim(returnMsg);

							if(returnMsg == 'MultiRegister') {
						        obj.getModuleListForTP(widgetId, prgId,addToCart,isAdminSide,userIdList,'catalogpopup',recertifyId);

							} else if(returnMsg == 'Registered' || returnMsg == 'Waitlisted') {
									obj.callObjectAvailableSeats(prgId);
								  /* $("#object-registerCls_"+prgId).removeAttr('onclick');
								   $("#object-registerCls_"+prgId).removeClass("action-btn");
								   $("#object-registerCls_"+prgId).addClass("action-btn-disable");
								   $("#object-registerCls_"+prgId).html("Registered");

								   if (widgetId=='lnr-catalog-search') {
									   var currentPage = $('.ui-pg-input').val();
									   $("#paintContentResults").trigger("reloadGrid",[{page:currentPage}]);
								   }
								   */

									if(fromPage != 'MyTeam'){
										   $("#object-registerCls_"+prgId).removeAttr('onclick');
										   if(returnMsg == Drupal.t('LBL190')) {
											   $("#object-registerCls_"+prgId).removeClass("action-btn-waitlist");
											   $("#object-registerCls_"+prgId).html(Drupal.t('LBL190'));
										   }else{
											   $("#object-registerCls_"+prgId).removeClass("action-btn");
											   $("#object-registerCls_"+prgId).html(Drupal.t('Registered'));
										   }
										   $("#object-registerCls_"+prgId).addClass("action-btn-disable");

										   if (widgetId=='lnr-catalog-search') {
											   var currentPage = $('.ui-pg-input').val();
											   if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch") == 'undefined' || $("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow() == false) {
													$("#paintContentResults").trigger("reloadGrid",[{page:currentPage}]);
												}
										   }else if(widgetId == 'enroll-lp-result-container' && recertifyId.indexOf('R')>=0) {
											   var currentPage = $('.ui-pg-input').val();
											   $("#paintEnrollmentLPResults").trigger("reloadGrid",[{page:currentPage}]);
										   }
										   if(document.getElementById("learning-plan-details-display-content"))
											   location.reload();
									   }else{
										   $("#assignClass_"+prgId).removeAttr('onclick');
										   $("#assignClass_"+prgId).removeClass("action-btn");
										   $("#assignClass_"+prgId).addClass("action-btn-disable");
										   if(returnMsg == Drupal.t('LBL190')) {
											   $("#assignClass_"+prgId).html(Drupal.t('LBL190'));
										   }else{
											   $("#assignClass_"+prgId).html(Drupal.t('Registered'));
										   }
										   var currentPage = $('.ui-pg-input').val();
										   $("#tbl-paintCatalogContentResults").trigger("reloadGrid",[{page:currentPage}]);
									   }

							} else if(returnMsg == 'CartAdded') {
								$("#object-addToCartList_"+prgId).removeAttr('onclick');
								$("#object-addToCartList_"+prgId).removeClass("action-btn");
								$("#object-addToCartList_"+prgId).addClass("action-btn-disable");
								$("#object-addToCartList_"+prgId).html(Drupal.t('LBL049'));
								if (parseInt(result.total_product) > 0) {
									$("#ShoppingCartItemsId").addClass("filled");
									$("#ShoppingCartItemsId").html(result.total_product);
								} else {
									$("#ShoppingCartItemsId").removeClass("filled");
									$("#ShoppingCartItemsId").html('');
								}
							} else {

								if(isAdminSide != 'Y'){
										if(returnMsg == 'nocourses'){
											//returnMsg = SMARTPORTAL.t('No courses has been associated');
											returnMsg = Drupal.t('MSG268');
										} else if(returnMsg == 'noclasses'){
											//returnMsg = SMARTPORTAL.t('No classes under one of the associated course(s)');
											returnMsg = Drupal.t('MSG379');
										} else if(returnMsg == 'seatsfull'){
											//returnMsg = SMARTPORTAL.t('No seats available for this Program');
											returnMsg = Drupal.t('MSG380');
										}

										obj.callMessageWindow('registertitle',returnMsg);

								}else{

									if(returnMsg == 'nocourses' || returnMsg == 'noclasses' || returnMsg == 'seatsfull'){
										if(returnMsg == 'nocourses'){
											//returnMsg = SMARTPORTAL.t('No courses has been associated');
											returnMsg = Drupal.t('MSG268');
										}else if(returnMsg == 'noclasses') {
											returnMsg = SMARTPORTAL.t('No classes under one of the associated course(s)');

										}else if(returnMsg == 'seatsfull'){
											//returnMsg = SMARTPORTAL.t('No seats available for this Program');
											returnMsg = Drupal.t('MSG380');
										}
										obj.callMessageWindow('registertitle',returnMsg);
									}else{
										returnMsg = eval(result);
										obj.displayRegistrationStatus(returnMsg);
									}

								}
							}
							obj.destroyLoader(loaderId);
					}
			    });
		}
		}catch(e){
			// to do
			//console.log(e);
		}
	},


	getModuleListForTP : function(widgetId, prgId, addToCart,isAdminSide,userListIfAdminSide,fromPage,recertifyId) {
		try{
		if(fromPage == 'MyTeam') {
			this.myteamAccordin(widgetId,prgId,addToCart);
			this.createLoader('paintClassesSelectList'+prgId);
		}else{
			this.renderPopup(widgetId,prgId,addToCart,fromPage,recertifyId);
			this.createLoader('tainingplan-register'+prgId);
		}

			if(isAdminSide == 'Y') {
				$(".error").css('display','none');
			}

            var url = this.constructUrl("ajax/trainingplan/module-list/"+prgId+ "/" + userListIfAdminSide+ "/" +isAdminSide+ "/"+fromPage);			
			var obj = this;
			var params = {"recertifyid":recertifyId};
			$.ajax({
				type: "POST",
				url: url,
				data:  params,
				success: function(result){
						//obj.paintTPCourseDetails(result,prgId,isAdminSide,userIdList);

						obj.paintTPModuleDetails(widgetId,addToCart,result,prgId,isAdminSide,userListIfAdminSide,fromPage);
						//$(".lnr-tainingplan-register").jScrollPane();
						$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
						if(isAdminSide == 'Y') {
							$(".error").css('display','none');
						}
						/*for(c=0; c < result.length ; c++){
								obj.accordionForModuleView(result[c]['module_details']['module_id']);
						}*/
						if(fromPage == 'MyTeam') {
							obj.destroyLoader('paintClassesSelectList'+prgId);
						}else{
							obj.destroyLoader('tainingplan-register'+prgId);
						}
						/*-- #34270 - scroll pane for the dynamic contents in team assign learn popup --*/
						if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
							$("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
						}
						if(fromPage == 'MyTeam') {
							resetFadeOutByClass('.tp-register-select-class-crs-title', 'item-title-code', 'line-item-container', 'myteam');
							resetFadeOutByClass('.course-sub-class-detail', 'item-title-code', 'line-item-container', 'myteam');
						}
						if(fromPage == 'catalogpopup'){
							resetFadeOutByClass('.page-learning-catalog-search .ui-widget-content .content-detail-container ', 'content-detail-code', 'line-item-container', 'catalogpopup');
						}
				}
		    });
			
		}catch(e){
			// to do
		}
	},

	paintTPModuleDetails : function(widgetId,addToCart,result,prgId,isAdminSide,userIdList,fromPage){
	 try{
		
		var rhtml = "";
		var c;
		var moduleTitle;
		var moduleId;
		var moduleCode;
		var moduleDesc;

		var courseList = '';
		var courseId;
		this.currTheme = Drupal.settings.ajaxPageState.theme;

		var obj = $("body").data("learningcore");
		var objStr = '$("body").data("learningcore")';
		if(result.length > 0 ) {
			//rhtml += "<tr><td><div id='show_expertus_message'></div></td></tr>";
			rhtml += "<tr><td><div class='main-module-level'>";
			rhtml += "<tr><td><div class='module-level'>";
			rhtml += "<table border='0' cellpadding='0' class='enroll-show-morecourse' cellspacing='0'>";
			for(c=0; c < result.length ; c++){

				moduleId = result[c]['module_details']['group_code'];
				moduleTitle = result[c]['module_details']['group_title'];
				moduleCode = result[c]['module_details']['module_code'];
				moduleDesc = result[c]['module_details']['module_desc'];
				//modTitle = result[c]['module_details']['module_title'];
				//modId = result[c]['module_details']['module_id'];
				if(result[c]['course_details'].length > 0) {
					var z = 0;
					var inc5 = 0;
					var passParams = "[";

					var crsDetailsLenth = result[c]['course_details'].length;

					 if(courseList != '') {
						 courseList += ',';
					 }

					$(result[c]['course_details']).each(function(){

						 courseId = result[c]['course_details'][inc5]['crs_id'];
						 courseList += courseId;
						 var cls_det='[';
						 var clscnt = 0;
						 var clsLength = result[c]['course_details'][inc5]['class_details'].length;
						 //alert(result[c]['course_details'][inc5]['class_details'].toSource())
						 $(result[c]['course_details'][inc5]['class_details']).each(function(){
							 var x = this;
							 cls_det += '{';
							 cls_det += "'cls_id':'"+x["class_details"]["cls_id"]+"',";
							 cls_det += "'crs_id':'"+x["class_details"]["crs_id"]+"',";
							 cls_det +=	"'cls_code':'"+escape(x['class_details']['cls_code'])+"',";
							 cls_det += "'cls_title':'"+escape(x['class_details']['cls_title'])+"',";
							 cls_det += "'cls_short_description':'"+escape(x['class_details']['cls_short_description'])+"',";
							 cls_det += "'delivery_type_code':'"+x['class_details']['delivery_type_code']+"',";
							 cls_det += "'delivery_type_name':'"+x['class_details']['delivery_type_name']+"',";
							 cls_det += "'language':'"+x['class_details']['language']+"',";
							 cls_det += "'session_id':'"+x['class_details']['session_id']+"',";
							 cls_det += "'country_name':'"+x['class_details']['country_name']+"',";
							 cls_det += "'location':'"+escape(x['class_details']['location'])+"',";
							 cls_det += "'loationaddr1':'"+escape(x['class_details']['loationaddr1'])+"',";
							 cls_det += "'locationaddr2':'"+escape(x['class_details']['locationaddr2'])+"',";
							 cls_det += "'locationcity':'"+escape(x['class_details']['locationcity'])+"',";
							 cls_det += "'locationstate':'"+x['class_details']['locationstate']+"',";
							 cls_det += "'locationzip':'"+x['class_details']['locationzip']+"',";
							 cls_det += "'sess_start_date':'"+x['class_details']['sess_start_date']+"',";
					
							 var enrolled_det = '[';
							 if(x['class_details']['enrolled_id']) {
							 	enrolled_det += '{';
							 	enrolled_det += "'comp_status':'"+x['class_details']['enrolled_id'].comp_status+"',";
							 	enrolled_det += "'enrolled_id':'"+x['class_details']['enrolled_id'].enrolled_id+"',";
							 	enrolled_det += "'enrolled_status':'"+x['class_details']['enrolled_id'].enrolled_status+"',";
							 	enrolled_det += "'waitlist_flag':'"+x['class_details']['enrolled_id'].waitlist_flag+"',";
							 	enrolled_det += "'waitlist_priority':'"+x['class_details']['enrolled_id'].waitlist_priority+"'";						 								 	
							 	enrolled_det += '}';
							 }
							 enrolled_det += ']';
							 cls_det += "'enrolled_id':"+enrolled_det+",";
							 var enrolled_last_comp_class = '[';
							 if(x['class_details']['class_last_comp']) {
							 	enrolled_last_comp_class += '{';
							 	enrolled_last_comp_class += "'comp_status':'"+x['class_details']['class_last_comp'].comp_status+"',";
							 	enrolled_last_comp_class += "'enrolled_id':'"+x['class_details']['class_last_comp'].enrolled_id+"',";
							 	enrolled_last_comp_class += "'comp_on':'"+x['class_details']['class_last_comp'].comp_on+"'";						 								 	
							 	enrolled_last_comp_class += '}';
							 }
							 enrolled_last_comp_class += ']';
							 
							 cls_det += "'enrolled_last_comp_class':"+enrolled_last_comp_class+",";
							 cls_det += "'waitlist_status':'"+x['class_details']['waitlist_status']+"',";
							 var sesslis = '[';
							 if(x['session_details'].length > 0) {
								 var inc = 0;
								 var sessLen = x['session_details'].length;
								 $(x['session_details']).each(function(){
									inc=inc+1;
									sesslis += '{';
									sesslis += "'session_title':'"+(escape($(this).attr("session_title")) ? escape($(this).attr("session_title")) : '')+"',";
								       sesslis += "'session_day':'"+$(this).attr("session_day")+"',";
								       sesslis += "'start_date':'"+$(this).attr("start_date")+"',";
								       sesslis += "'start_time':'"+$(this).attr("start_time")+"',";
								       sesslis += "'end_time':'"+$(this).attr("end_time")+"',";
								       sesslis += "'start_form':'"+$(this).attr("start_form")+"',";
								       sesslis += "'sessionInstructorName':'"+escape($(this).attr("session_instructor_name"))+"',";
                                if(x['class_details']['delivery_type_code']=='lrn_cls_dty_ilt'){
                                    sesslis += "'ilt_session_day':'"+$(this).attr("ilt_session_day")+"',";
									sesslis += "'ilt_start_date':'"+$(this).attr("ilt_start_date")+"',";
									sesslis += "'ilt_start_time':'"+$(this).attr("ilt_start_time")+"',";
									sesslis += "'ilt_end_time':'"+$(this).attr("ilt_end_time")+"',";
									sesslis += "'ilt_start_form':'"+$(this).attr("ilt_start_form")+"',";
									sesslis += "'ilt_end_form':'"+$(this).attr("ilt_end_form")+"',";
									sesslis += "'loc_tzcode':'"+$(this).attr("loc_tzcode")+"',";
									sesslis += "'loc_tz':'"+$(this).attr("loc_tz")+"',";
									sesslis += "'user_tz':'"+$(this).attr("user_tz")+"',";
									sesslis += "'session_id':'"+$(this).attr("session_id")+"',";
									sesslis += "'user_tzcode':'"+$(this).attr("user_tzcode")+"',";
                                                                 }
								    	sesslis += "'end_form':'"+$(this).attr("end_form")+"'";
									sesslis += '}';
									 if(inc < sessLen) {
										 sesslis += ",";
									 }

								 });
							 }
							 sesslis += ']';
							 cls_det += "'session_details':"+sesslis+",";
							 cls_det += "'availableSeats':'"+x['class_details']['availableSeats']+"'";
							 cls_det += '}';
							 clscnt++;
							 if(clscnt < clsLength)
								 cls_det += ',';

						 });
						 cls_det += ']';
						 //alert(cls_det)
						 z = z + 1;
						 if(z < crsDetailsLenth) {
								courseList += ',';
						 }


						 passParams += "{";
						 passParams += "'crs_id':'"+result[c]['course_details'][inc5]['crs_id']+"',";
						 passParams += "'crs_code':'"+escape(result[c]['course_details'][inc5]['crs_code'])+"',";
						 passParams += "'crs_title':'"+escape(result[c]['course_details'][inc5]['crs_title'])+"',";
						 passParams += "'crs_desc':'"+escape(result[c]['course_details'][inc5]['crs_desc'])+"',";
						 passParams += "'is_required':'"+result[c]['course_details'][inc5]['is_required']+"',";
						 passParams += "'registered_cnt':'"+result[c]['course_details'][inc5]['registered_cnt']+"',";
						 passParams += "'single_class':'"+result[c]['course_details'][inc5]['single_class']+"',";
						 passParams += "'sequence_no':'"+result[c]['course_details'][inc5]['sequence_no']+"',";
						 passParams += "'start_date':'"+result[c]['course_details'][inc5]['start_date']+"',";
						 passParams += "'end_date':'"+result[c]['course_details'][inc5]['end_date']+"',";
						 passParams += "'clscount':'"+result[c]['course_details'][inc5]['clscount']+"',";
						 passParams += "'class_details':"+cls_det;
						 passParams += "}";


						 if(result[c]['course_details'][inc5]['registered_cnt'] == 1 && isAdminSide != 'Y') {

							var regValue =  result[c]['course_details'][inc5]['cls_id'];

						 }else if (result[c]['course_details'][inc5]['clscount'] == 1 ){
							var regValue =  result[c]['course_details'][inc5]['single_class'];

						 }else{
							var regValue = '';
						 }

						rhtml += '<input type="hidden" id="classListIds-'+courseId+'" name="classListIds" value="'+regValue+'">';


						 inc5=inc5+1;
						 if(inc5 < crsDetailsLenth) {
							 passParams += ",";
						 }

					});
					passParams += "]";


				}else{
					var passParams="''";
				}

			    var param = "data={'prgId':'"+prgId+"'," +
			    "'moduleId':'"+moduleId+"'," +
			    "'isAdminSide':'"+isAdminSide+"'," +
			    		"'userIdList':'"+userIdList+"'," +
   						"'courseDetails':"+passParams+"}";

				//var param = "data={'courseDetails':"+passParams+"}";


	 			rhtml += '<tr class="set-height ui-widget-content" id ="lp-crs-module-'+moduleId+'">';
				rhtml += '<td>';
				// Added condition for 0072664
				if(moduleId == null || moduleId == undefined || moduleId == ''){
					rhtml += '<div class="set-height-column-left" id="lp-crs-accodion-module-'+moduleId+'" data="'+param+'"></div>';
				}else{
					if(fromPage == "MyTeam") {
						rhtml += '<a class="set-height-column-left title_close" id="lp-crs-accodion-module-'+moduleId+'" href="javascript:void(0);" data="'+param+'" onclick=\''+objStr+'.accordionForModuleView("'+moduleId+'","'+fromPage+'");\'>&nbsp;</a>';
						rhtml += '<div class="tp-register-select-module-title"><div class="set-height-column-right"><span class="item-title limit-title-row"><span class="limit-title limit-title-mulcls-module-title lp-reg-class-title vtip " title="'+unescape(moduleTitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
					} else {
						rhtml += '<a style="display: none;" class="set-height-column-left title_close" id="lp-crs-accodion-module-'+moduleId+'" href="javascript:void(0);" data="'+param+'" onclick=\''+objStr+'.accordionForModuleView("'+moduleId+'","'+fromPage+'");\'>&nbsp;</a>';
						// rhtml += '<div class="tp-register-select-module-title"><div class="set-height-column-right">';
						rhtml += '<div class="lp_group_title"><fieldset><legend align="left">';
						rhtml += '<span class="item-title limit-title-row"><span class="limit-title limit-title-mulcls-module-title lp-reg-class-title vtip " title="'+unescape(moduleTitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
					}
				/*if(fromPage == "MyTeam") {
					if(this.currTheme == "expertusoneV2"){
						rhtml += titleRestrictionFadeoutImage(moduleTitle,'tp-view-module-title');
						//rhtml += titleRestricted(moduleTitle,80);
					}else{
						rhtml += titleRestricted(moduleTitle,70);
					}
				}else{
					rhtml += titleRestrictionFadeoutImage(moduleTitle,'tp-view-module-title');
				}*/
					rhtml += titleRestrictionFadeoutImage(moduleTitle,'tp-view-module-title', 20);
				rhtml += '</span></span>';
				//rhtml += '<div class="course-info item-title-code">';
				//rhtml += '<span title="'+unescape(moduleCode)+'">'+titleRestricted(moduleCode,10)+'</span>';
				//rhtml += '<span class="pipeline">|</span>';
				//rhtml += '</div>';

				//rhtml += '<div class="course-desc-info">';
				//rhtml += '<span>'+moduleDesc+'</span>';
				//rhtml += '</div>';
					if(fromPage == "MyTeam") {
						rhtml += '</div></div>';
					} else {
						rhtml += '</legend></fieldset></div>';
					}
				}
				rhtml += '</td>';
				rhtml += '</tr>';

		  }


			 rhtml += '<tr><td><input type="hidden" id="courseListIds" name="courseListIds" value="'+courseList+'"></td></tr>';

	    	 rhtml += '<tr><td><input type="hidden" id="isadminsidefield" name="isadminsidefield" value="'+isAdminSide+'"></td></tr>';

			 rhtml += '<tr><td><input type="hidden" id="userListIds" name="userListIds" value="'+userIdList+'"></td></tr>';

			 if(fromPage == "MyTeam") {
				 var fnClick = objStr+'.registerTPClassDetails("'+widgetId+'","'+prgId+'","'+addToCart+'","'+fromPage+'")';
				// var fnClick = '$("#lnr-myteam-search").data("lnrmyteamsearch").registerTPObjectDetails("'+prgId+'","'+userIdList+'")';
				 rhtml += "<tr><td><div class='admin-save-button-container'><div class='admin-save-button-left-bg'></div><input type='button' class ='assign-btn admin-save-button-middle-bg' id='assign_btn_"+prgId+"' value = '"+Drupal.t('LBL569')+"' onclick='"+fnClick+"'><div class='admin-save-button-right-bg'></div></div></td></tr>";
			 }


		  rhtml += '</table>';
		  rhtml += '</div></td></tr>';
		}
		else{
			rhtml += "<tr><td class='no-item-found'>"+SMARTPORTAL.t('No modules associated with this.')+"</td></tr>";
		}
		 if(fromPage == "MyTeam") {
			 $("#paintClassesSelectList"+prgId).html(rhtml);
		 }else{
			 $("#lnr-tainingplan-register").html(rhtml);
		 }
		 //$(".lnr-tainingplan-register").jScrollPane();
		 $("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		 $('.enroll-show-morecourse .set-height td .title_close').trigger("click");

		// Added condition for 0072664
		 var grpId = result[0]['module_details']['group_code'];
		 if(grpId == null || grpId == undefined || grpId == ''){
			 this.accordionForModuleView(grpId,fromPage);
			 $('#lp-crs-accodion-module-'+grpId).removeClass('title_open');
		 }
		 
		 for(c=0; c < result.length ; c++){

			moduleId = result[c]['module_details']['group_code'];
			var data = eval($("#lp-crs-accodion-module-"+moduleId).attr("data"));
			var classDetSec = this.paintTPCourseDetails(data,fromPage);
			/*-- #34270 scroll pane for the dynamic contents in team assign learn popup --*/
			if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
				$("#my-team-dialog .class-details-info tr:last-child .course-delivery-info").css('border-bottom','0px none');
				$("#my-team-dialog .course-level .set-height-column-right").css('border-bottom','0px none');
				$("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
			}else{
				$("#lnr-tainingplan-register .class-details-info tr:last-child .course-delivery-info").css('border-bottom','0px none');
				$("#lnr-tainingplan-register .course-level .set-height-column-right").css('border-bottom','0px none');
			}
			$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
			//$(".lnr-tainingplan-register").jScrollPane();
		 }
		 vtip();
		 resetFadeOutByClass('#lnr-tainingplan-register','content-detail-code','line-item-container','select');		 
	 	 $('.limit-title-mulcls-title').trunk8(trunk8.tpmod_title);
		 $('.limit-desc-mulcls').trunk8(trunk8.tpmod_desc);
		 $('.limit-title-mulcls-module-title').trunk8(trunk8.tpgroup_title);
		 //Overlay container display full bg height
		 $('#tainingplan-register'+prgId).parent(".ui-dialog").next('.ui-widget-overlay').css({"height":"100%", "position":"fixed"})
		 scrollBar_Refresh('tp-select-class');
	 }catch(e){
			// to do
			// console.log(e, e.stack);
		}
	},

	accordionForModuleView : function(moduleId,fromPage) {
	 try{
		var currTr = moduleId;

		if(!document.getElementById(currTr+"ModuleSubGrid")) {
			$("#lp-crs-module-"+currTr).after("<tr id='"+currTr+"ModuleSubGrid'><td colspan='4'><div id='module-details-"+currTr+"' ></div></td></tr>");
			$("#"+currTr+"ModuleSubGrid").show();//css("display","block");
			//$("#"+currTr+"ModuleSubGrid").css("visibility", 'visible');
			$("#lp-crs-accodion-module-"+currTr).removeClass("title_close");
			$("#lp-crs-accodion-module-"+currTr).addClass("title_open");
			$("#lp-crs-module-"+currTr).removeClass("ui-widget-content");
			$("#"+currTr+"ModuleSubGrid").slideDown(1000);
			$("#lp-crs-module-"+currTr).find(".set-height-column-right").css("border-bottom","0px");
		} else {
			var clickStyle = $("#"+currTr+"ModuleSubGrid").css("display");
    		if((clickStyle == "none") || (clickStyle == 'undefined')) {
    			$("#"+currTr+"ModuleSubGrid").show();//css("display","block");
    			//$("#"+currTr+"ModuleSubGrid").css("visibility", 'visible');
    			$("#"+currTr+"ModuleSubGrid").slideDown(1000);
    			$("#lp-crs-accodion-module-"+currTr).removeClass("title_close");
				$("#lp-crs-accodion-module-"+currTr).addClass("title_open");
				$("#lp-crs-module-"+currTr).removeClass("ui-widget-content");
				$("#lp-crs-module-"+currTr).find(".set-height-column-right").css("border-bottom","0px");
    		} else {
    			$("#"+currTr+"ModuleSubGrid").hide();//css("display","none");
    			//$("#"+currTr+"ModuleSubGrid").css("visibility", 'hidden');
    			$("#"+currTr+"ModuleSubGrid").slideUp(1000);
    			$("#lp-crs-accodion-module-"+currTr).removeClass("title_open");
				$("#lp-crs-accodion-module-"+currTr).addClass("title_close");
				$("#lp-crs-module-"+currTr).removeClass("ui-widget-content");
				$("#lp-crs-module-"+currTr).addClass("ui-widget-content");
				//$("#lp-crs-module-"+currTr).find(".set-height-column-right").css("border-bottom","1px solid #cccccc"); commented for border line within select class in recertify popup

    		}
		}


		//var data = eval($("#lp-crs-accodion-module-"+currTr).attr("data"));


		//var classDetSec = this.paintTPCourseDetails(data,fromPage);
		$('.class-details-info > tbody > tr:last > td').find('.course-delivery-info').css('border-bottom','0px none');
		/*-- #34270 scroll pane for the dynamic contents in team assign learn popup --*/
		if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
			$("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
		}
		$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		//$(".lnr-tainingplan-register").jScrollPane();
	 }catch(e){
			// to do
		}
	},


	paintTPCourseDetails : function(data, fromPage){
	 try{
		var crslength = data.courseDetails.length;
		var rhtml = "";
		var c;
		var courseId;
		var courseCode;
		var compStatus;
		var courseTitle;
		var isRequired;
		var registeredCnt;
		var courseList = '';
		this.currTheme = Drupal.settings.ajaxPageState.theme;
		var inc = 0;

		var obj = $("body").data("learningcore");
		var objStr = '$("body").data("learningcore")';
		rhtml += "<table cellpadding='0' cellspacing='0' style='width:100%'>";
		if(crslength > 0 ) {

			rhtml += "<tr><td><div class='course-level'>";
			rhtml += "<table border='0' cellpadding='0' class='enroll-show-morecourse' cellspacing='0'>";
			for(c=0; c < crslength ; c++){
				var rhtmlcls = obj.paintTPClassDetails(data.courseDetails[c]['class_details'], '', fromPage);
				courseId 	= data.courseDetails[c]['crs_id'];
				courseCode 	= data.courseDetails[c]['crs_code'];
				courseTitle = data.courseDetails[c]['crs_title'];
				courseDesc = data.courseDetails[c]['crs_desc'];
				isRequired = data.courseDetails[c]['is_required'];
				registeredCnt = data.courseDetails[c]['registered_cnt'];

				courseList += courseId;

				inc = inc + 1;
				if(inc < crslength) {
					courseList += ',';
				 }

				var param="data={'PrgId':'"+data.prgId+"','CourseId':'"+courseId+"','UserId':'"+data.userIdList+"'}";
	 			rhtml += '<tr class="set-height" id ="lp-crs-course-'+courseId+'">';
				rhtml += '<td>';
				if(fromPage == "MyTeam") {
					rhtml += '<a class="set-height-column-left title_open" id="lp-crs-accodion-course-'+courseId+'" href="javascript:void(0);" data="'+param+'" onclick=\''+objStr+'.accordionForCourseView('+courseId+', "MyTeam");\'>&nbsp;</a>';
					rhtml += '<div class="tp-register-select-class-crs-title"><div class="set-height-column-right"><span class="item-title limit-title-row"><span class="limit-title limit-title-mulcls-title lp-reg-class-title vtip" title="'+unescape(courseTitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
				} else {
					// rhtml += '<a class="set-height-column-left title_open" id="lp-crs-accodion-course-'+courseId+'" href="javascript:void(0);" data="'+param+'" onclick=\''+objStr+'.accordionForCourseView('+courseId+');\'>&nbsp;</a>';
					rhtml += '<div class="content-row-container cre_sys_obt_crs cls-course-title-code" id="content-row-container-'+courseId+'">';
					rhtml += '<div class="content-icon-container"><div title="' + Drupal.t("Course") + '" class="content-icon crs-icon vtip"></div></div>';
					// rhtml += '';
					// rhtml += '';
					// rhtml += '';
					rhtml += '<div class="content-detail-container"><div class="tp-register-select-class-crs-title"><div class="set-height-column-right"><span class="item-title limit-title-row content-title"><span class="limit-title limit-title-mulcls-title lp-reg-class-title vtip" title="'+unescape(courseTitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
				}
				if(fromPage == "MyTeam") {
					if(this.currTheme == "expertusoneV2"){
						rhtml += unescape(courseTitle);
						//rhtml += titleRestricted(unescape(courseTitle),80);
					}else{
						rhtml += unescape(courseTitle);
					}
				}else {
					rhtml += unescape(courseTitle);
				}
				rhtml += '</span></span>';
				if(fromPage != "MyTeam") {
					rhtml += '</div></div>';
				}
				rhtml += '<div class="course-info item-title-code">';
				rhtml += '<div class="line-item-container float-left" ><span title="'+unescape(courseCode).replace(/"/g, '&quot;')+'" class="vtip">'+titleRestrictionFadeoutImage(unescape(courseCode),'tp-view-course-code')+'</span></div>';
				rhtml += '<div class="line-item-container float-left" ><span class="pipeline">|</span>';
				rhtml += '<span>'+((isRequired =='Y')?''+Drupal.t("Mandatory")+'':''+Drupal.t("Optional")+'')+'</span></div>';
				if(data.isAdminSide != 'Y') {
					rhtml += '<div class="line-item-container float-left" ><span class="pipeline">|</span>';
					rhtml += '<span>'+((registeredCnt < 1)?''+Drupal.t("Not Registered")+'':''+Drupal.t("Registered")+'')+'</span></div>';
				}
				rhtml += '</div>';

				rhtml += '<div class="course-desc-info limit-desc-row">';
				rhtml += '<span class="limit-desc limit-desc-mulcls crs_desc vtip">'+unescape(courseDesc)+'</span>';
				if(fromPage == "MyTeam") {
					rhtml += '</div></div>';
					rhtml += '</td>';
					rhtml += '</tr><tr id='+courseId+'CourseSubGrid ><td colspan="4"><div id="course-details-'+courseId+'">'+rhtmlcls+'</div></td></tr>';
				} else {
					rhtml += '</div></div></div>';	//close tag for <div content-row-container
					rhtml += '<div class="course_list_content" id="' + courseId + 'CourseSubGrid"><div class="course-content-content-wrapper"><div id="course-details-'+courseId+'">'+rhtmlcls+'</div></div></div>';
				rhtml += '<div id="course_content_more_"'+courseId+' class="select-class-course-content-more course-content-more padbt5"><div class="show_more_less" id="lp-crs-accodion-course-'+courseId+'" href="javascript:void(0);" data="'+param+'" onclick=\''+objStr+'.accordionForCourseView('+courseId+');\'>'+Drupal.t('LBL3042')+'</div></div>';
					if(c!=(crslength-1))
						rhtml += '<div class="clsAfterMoreDiv">&nbsp;</div>';
					rhtml += '</td>';
					// console.log(rhtml);
					rhtml += '</tr>';
					// rhtml += '</tr><tr id='+courseId+'CourseSubGrid ><td colspan="4"><div id="course-details-'+courseId+'">'+rhtmlcls+'</div></td></tr>';
				}
				// rhtml += '</td>';
				// console.log(rhtml);
				rhtml += '</tr>';
				// rhtml += '</tr><tr id='+courseId+'CourseSubGrid ><td colspan="4"><div id="course-details-'+courseId+'">'+rhtmlcls+'</div></td></tr>';

		  }

		  rhtml += '</table>';
		  rhtml += '</div></td></tr>';
		}
		else{
			rhtml += "<tr><td class='no-item-found'>"+Drupal.t('There are no course(s) under this program.')+"</td></tr>";
		}
		rhtml += "</table>";

		$("#module-details-"+data.moduleId).html(rhtml);
		$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		//$(".lnr-tainingplan-register").jScrollPane();
		//reinitialise jscrollane on description show/hide event
		$(".lnr-tainingplan-register .course-desc-info .more-icon-sec").click(function() {
			//$('.lnr-tainingplan-register').jScrollPane().data().jsp.reinitialise();
			$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		});
		$('.limit-title-mulcls-title').trunk8(trunk8.tpmod_title);
		$('.limit-desc-mulcls').trunk8(trunk8.tpmod_desc);
		$('.lmt-lrp-crs-cls-title').trunk8(trunk8.class_detail_title);
		$('.lmt-lrp-crs-cls-desc').trunk8(trunk8.lp_detail_course_desc);
		resetFadeOutByClass('#lnr-tainingplan-register .cls-course-title-code','course-info','line-item-container','select');
		//resetFadeOutByClass('#lnr-tainingplan-register .class_list_container','cls-class-title-code','line-item-container','select');
		vtip();
		scrollBar_Refresh('tp-select-class');
	 }catch(e){
			// to do
			// console.log(e, e.stack);
		}
	},

	accordionForCourseView : function(courseId, fromPage) {
	 try{
		var currTr = courseId;

		if(!document.getElementById(currTr+"CourseSubGrid")) {
			if(fromPage == "MyTeam") {
				$("#lp-crs-course-"+currTr).after("<tr id='"+currTr+"CourseSubGrid'><td colspan='4'><div id='course-details-"+currTr+"' ></div></td></tr>");
				$("#lp-crs-accodion-course-"+currTr).removeClass("title_close");
				$("#lp-crs-accodion-course-"+currTr).addClass("title_open");
			} else {
				$("#lp-crs-course-"+currTr).find('#content-row-container-'+courseId).after('<div class="course_list_content" id="' + courseId + 'CourseSubGrid"><div class="course-content-content-wrapper"><div id="course-details-'+courseId+'"></div></div></div>');
				$("#lp-crs-accodion-course-"+currTr).text(Drupal.t("LBL3042"));
			}
			
			$("#"+currTr+"CourseSubGrid").show();//css("display","block");
			$("#lp-crs-course-"+currTr).removeClass("ui-widget-content");
			$("#"+currTr+"CourseSubGrid").slideDown(1000);
			$("#lp-crs-course-"+currTr).find(".set-height-column-right").css("border-bottom","0px");
		} else {
			var clickStyle = $("#"+currTr+"CourseSubGrid").css("display");
    		if((clickStyle == "none") || (clickStyle == 'undefined')) {
    			$("#"+currTr+"CourseSubGrid").show();//css("display","block");
    			$("#"+currTr+"CourseSubGrid").slideDown(1000);
				if(fromPage == "MyTeam") {
					$("#lp-crs-accodion-course-"+currTr).removeClass("title_close");
					$("#lp-crs-accodion-course-"+currTr).addClass("title_open");
				} else {
					$("#lp-crs-accodion-course-"+currTr).text(Drupal.t("LBL3042"));
				}
				$("#lp-crs-course-"+currTr).removeClass("ui-widget-content");
				$("#lp-crs-course-"+currTr).find(".set-height-column-right").css("border-bottom","0px");
    		} else {
    			$("#"+currTr+"CourseSubGrid").hide();//css("display","none");
    			$("#"+currTr+"CourseSubGrid").slideUp(1000);
				if(fromPage == "MyTeam") {
					$("#lp-crs-accodion-course-"+currTr).removeClass("title_open");
					$("#lp-crs-accodion-course-"+currTr).addClass("title_close");
				} else {
					$("#lp-crs-accodion-course-"+currTr).text(Drupal.t("LBL713"));
				}
				$("#lp-crs-course-"+currTr).removeClass("ui-widget-content");
				$("#lp-crs-course-"+currTr).addClass("ui-widget-content");
				$("#lp-crs-course-"+currTr).find(".set-height-column-right").css("border-bottom","0px solid #cccccc");
    			$('.set-height-column-right > tbody > tr:last > td').find('.set-height-column-right').css('border-bottom','0px none');
    		}
		}


		var data = eval($("#lp-crs-accodion-course-"+currTr).attr("data"));


		var classDetSec = this.getClassListForCourse(data, fromPage);
		//$(".lnr-tainingplan-register").jScrollPane();
		$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		$('.class-details-info > tbody > tr:last > td').find('.course-delivery-info').css('border-bottom','0px none');
	 	$('.limit-title-mulcls-title').trunk8(trunk8.tpmod_title);
		$('.limit-desc-mulcls').trunk8(trunk8.tpmod_desc);
		if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
			$("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
		}
		if($('.lnr-tainingplan-register').length > 0) {
			scrollBar_Refresh('tp-select-class');
		}
	 }catch(e){
			// to do
			// console.log(e, e.stack);
		}
	},

	getClassListForCourse : function(data, fromPage){
	 try{
		var prgId = data.PrgId;
		var courseId = data.CourseId;
		var userId = data.UserId;
		//alert(data.toSource())

		if($("#course-details-"+courseId).html() == ''){
			this.createLoader("course-details-"+courseId);
			var url = this.constructUrl("ajax/trainingplan/class-list/" + courseId + "/" + userId);
			var obj = this;
			$.ajax({
				type: "POST",
				url: url,
				//data:  '',//Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM 
				success: function(result){

					obj.paintTPClassDetails(result,data,fromPage);
					$('.class-details-info > tbody > tr:last > td').find('.course-delivery-info').css('border-bottom','0px none');
					obj.destroyLoader("course-details-"+courseId);
					/* /*  Commented For Multiple class selection #0038560
					 * for(c=0; c < result.length ; c++){
							var enrolledId = result[c]['class_details']['enrolled_id'];
							if(enrolledId.enrolled_id ) {
								if($('input[name="'+courseId+'-clsregister"]:radio').is(":checked") == true)
								{
									$('input[name="'+courseId+'-clsregister"]:radio').attr('disabled',true);
								}
							}
						} */

						/*-- #34270 scroll pane for the dynamic contents in team assign learn popup --*/
						if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
							$("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
						}

				}
		    });
		}
	 }catch(e){
			// to do
		}
	},

	paintTPClassDetails : function(result,data,fromPage){
	 try{
		var isadminsidefield = $('#isadminsidefield').val();
		// console.log('paintTPClassDetails result', result);
		var obj = $("body").data("learningcore");
		var objStr = '$("body").data("learningcore")';
		var rhtml ='';

		rhtml += "<div class='class-level'>";
		rhtml += "<table border='0' cellpadding='0' class='class-details-info' cellspacing='0'>";
		if(result.length > 0) {

			for(c=0; c < result.length ; c++){
				var courseId 	= result[c]['crs_id'];
				var classId 	= result[c]['cls_id'];
				var classCode 	= unescape(result[c]['cls_code']);
				var classTitle 	= unescape(result[c]['cls_title']);
				var classDesc 	= unescape(result[c]['cls_short_description']);
				var deliveryTypeCode 	= result[c]['delivery_type_code'];
				var deliveryTypeName 	= result[c]['delivery_type_name'];
				var language 	= result[c]['language'];
				var sessionId   = result[c]['session_id'];
				var countryName = result[c]['country_name'];
				var locationName = result[c]['location'];
				var locationAddr1 = result[c]['loationaddr1'];
				var locationAddr2 = result[c]['locationaddr2'];
				var locationCity = result[c]['locationcity'];
				var locationState = result[c]['locationstate'];
				var locationZip = result[c]['locationzip'];
				Drupal.t('Web-based');
				Drupal.t('Virtual Class');
				Drupal.t('Video');
				Drupal.t('Classroom');

				var sessionStartDate = result[c]['sess_start_date'];
				if(result[c]['enrolled_id'].length > 0){
					var enrolledId = result[c]['enrolled_id'][0];
				}else{
					var enrolledId = '';
				}
				
				if(result[c]['enrolled_last_comp_class'].length > 0){
					var last_comp_enrolledId = result[c]['enrolled_last_comp_class'][0].enrolled_id;
				}else{
					var last_comp_enrolledId = '';
				}
				
				var waitList = result[c]['waitlist_status'];
				var availableSeats = result[c]['availableSeats'];


				var checkedValue = "";

				if(isadminsidefield != 'Y') {
					if(enrolledId.comp_status == 'lrn_crs_cmp_cmp') {
						checkedValue = "checked";
					}
				}

				if(result.length == 1) {
					checkedValue = "checked";
				}


				var startDate = '';
				var startDateVtip = '';
				var sessioncount = 1; // 072871: Catalog - Select Class pop up - Time zone pop up window is breaking
				if(result[c]['session_details'].length > 0) {
					var sDay = result[c]['session_details'][0]['start_date'];
					var sTime = result[c]['session_details'][0]['start_time'];
					var sTimeForm = result[c]['session_details'][0]['start_form'];
                    
						if(result[c]['session_details'].length > 1) {
							sessLenEnd = result[c]['session_details'].length-1;
							var eDay = result[c]['session_details'][sessLenEnd]['start_date'];
							var eTime = result[c]['session_details'][sessLenEnd]['end_time'];
							var eTimeForm = result[c]['session_details'][sessLenEnd]['end_form'];

							startDate = sDay +' '+ sTime+' '+'<span class="time-zone-text">'+sTimeForm+'</span>'+ ' ' +Drupal.t('LBL621')+ ' ' +eDay+ ' ' +eTime+' <span class="time-zone-text">'+eTimeForm+'</span>';
							startDateVtip =  sDay +' '+ sTime+' '+sTimeForm+' ' +Drupal.t('LBL621')+ ' ' +eDay+ ' ' +eTime+' '+eTimeForm;
						}else {

							var eTime = result[c]['session_details'][0]['end_time'];
							var eTimeForm = result[c]['session_details'][0]['end_form'];

							startDate = sDay +' '+ sTime+' '+'<span class="time-zone-text">'+sTimeForm+'</span>'+ ' ' +Drupal.t('LBL621')+ ' ' +eTime+' <span class="time-zone-text">'+eTimeForm+'</span>';
							startDateVtip =  sDay +' '+ sTime+' '+sTimeForm+' ' +Drupal.t('LBL621')+ ' ' +eTime+' '+eTimeForm;
						}

                     if(result[c]['delivery_type_code']=='lrn_cls_dty_ilt'){
                    	 var sDay = result[c]['session_details'][0]['start_date'];
     					var sTime = result[c]['session_details'][0]['start_time'];
     					var sTimeForm = result[c]['session_details'][0]['start_form'];
     					var usDay = result[c]['session_details'][0]['ilt_start_date'];
     					var usTime = result[c]['session_details'][0]['ilt_start_time'];
     					var usTimeForm = result[c]['session_details'][0]['ilt_start_form'];
     					var loc_tz = result[c]['session_details'][0]['loc_tz'];
     					var loc_tzcode = result[c]['session_details'][0]['loc_tzcode'];
     					var user_tz = result[c]['session_details'][0]['user_tz'];
     					var user_tzcode = result[c]['session_details'][0]['user_tzcode'];
     						if(result[c]['session_details'].length > 1) {
     							sessLenEnd = result[c]['session_details'].length-1;
     							var eDay = result[c]['session_details'][sessLenEnd]['start_date'];
     							var eTime = result[c]['session_details'][sessLenEnd]['end_time'];
     							var eTimeForm = result[c]['session_details'][sessLenEnd]['end_form'];
     							var uDay = result[c]['session_details'][sessLenEnd]['ilt_start_date'];
     							var uTime = result[c]['session_details'][sessLenEnd]['ilt_end_time'];
     							var uTimeForm = result[c]['session_details'][sessLenEnd]['ilt_end_form'];
                                
     							startDate = sDay+' '+ sTime+' '+'<span class="time-zone-text">'+sTimeForm+'</span>'+ ' ' +Drupal.t('LBL621')+ ' ' +eDay+ ' ' +eTime+' <span class="time-zone-text">'+eTimeForm+'</span>'+ ' ' +user_tz+' '+user_tzcode+'';
     							startDateVtip =  sDay +' '+ sTime+' '+sTimeForm+' ' +Drupal.t('LBL621')+ ' ' +eDay+ ' ' +eTime+' '+eTimeForm+ ' ' +user_tz+' '+user_tzcode;
     							sessstartDate = usDay +' '+ usTime+' '+'<span class="time-zone-text">'+usTimeForm+'</span>'+ ' ' +Drupal.t('LBL621')+ ' ' +uDay+ ' ' +uTime+' <span class="time-zone-text">'+uTimeForm+'</span>'+ ' ' +loc_tz+' '+loc_tzcode+'';
     							sessioncount = 2;
     						}else {

     							var eTime = result[c]['session_details'][0]['end_time'];
     							var eTimeForm = result[c]['session_details'][0]['end_form'];
     							var uTime = result[c]['session_details'][0]['ilt_end_time'];
     							var uTimeForm = result[c]['session_details'][0]['ilt_end_form'];

     							startDate = sDay +' '+ sTime+' '+'<span class="time-zone-text">'+sTimeForm+'</span>'+ ' ' +Drupal.t('LBL621')+ ' ' +eTime+' <span class="time-zone-text">'+eTimeForm+'</span>'+ ' ' +user_tz+' '+user_tzcode+'';
     							startDateVtip =  sDay +' '+ sTime+' '+sTimeForm+' ' +Drupal.t('LBL621')+ ' ' +eTime+' '+eTimeForm+ ' ' +user_tz+' '+user_tzcode;
     							sessstartDate = usDay +' '+ usTime+' '+'<span class="time-zone-text">'+usTimeForm+'</span>'+ ' ' +Drupal.t('LBL621')+ ' ' +uTime+' <span class="time-zone-text">'+uTimeForm+'</span>'+ ' ' +loc_tz+' '+loc_tzcode+'';
     							
     						}
                     }

					var inc = 0;
					var passParams = "[";

					var sessLen = result[c]['session_details'].length;
					// console.log('session_details', result[c]['session_details']);
					$(result[c]['session_details']).each(function(){
						// console.log('session_details', $(this));
						inc=inc+1;
						passParams += "{";
						 passParams += "'sessionTitle':'"+(($(this).attr("session_title")) ? $(this).attr("session_title") : '')+"',";
						 passParams += "'sessionDay':'"+$(this).attr("session_day")+"',";
						 passParams += "'sessionSDate':'"+$(this).attr("start_date")+"',";
						 passParams += "'start_time':'"+$(this).attr("start_time")+"',";
						 passParams += "'end_time':'"+$(this).attr("end_time")+"',";
						 passParams += "'sessionSDayForm':'"+$(this).attr("start_form")+"',";
						 if(deliveryTypeCode == 'lrn_cls_dty_ilt'){
							 passParams += "'session_id':'"+$(this).attr("session_id")+"',";
							 passParams += "'iltsessionDay':'"+$(this).attr("ilt_session_day")+"',";
							 passParams += "'iltsessionSDate':'"+$(this).attr("ilt_start_date")+"',";
							 passParams += "'iltstart_time':'"+$(this).attr("ilt_start_time")+"',";
							 passParams += "'iltend_time':'"+$(this).attr("ilt_end_time")+"',";
							 passParams += "'iltsessionSDayForm':'"+$(this).attr("ilt_start_form")+"',";
							 passParams += "'loc_tz':'"+$(this).attr("loc_tz")+"',";
							 passParams += "'loc_tzcode':'"+$(this).attr("loc_tzcode")+"',";
							 passParams += "'user_tz':'"+$(this).attr("user_tz")+"',";
							 passParams += "'user_tzcode':'"+$(this).attr("user_tzcode")+"',";
							 passParams += "'iltsessionEDayForm':'"+$(this).attr("ilt_end_form")+"',";
						}
						 passParams += "'sessionEDayForm':'"+$(this).attr("end_form")+"',";
						 passParams += "'sessionInstructorName':'"+$(this).attr("sessionInstructorName")+"'";
						 passParams += "}";
						 if(inc < sessLen) {
							 passParams += ",";
						 }

					});
					passParams += "]";

				}else{
					var passParams="''";
				}
				var LocationNameArg = ((locationName != null) ? ((unescape(locationName).replace(/"/g, '&quot;')).replace(/'/g, "\\'")) : locationName);
				var LocationAdd1Arg = ((locationAddr1!= null) ? ((unescape(locationAddr1).replace(/"/g, '&quot;')).replace(/'/g, "\\'")) : locationAddr1);
				var LocationAdd2Arg = ((locationAddr2 != null) ? ((unescape(locationAddr2).replace(/"/g, '&quot;')).replace(/'/g, "\\'")) : locationAddr2);
				var LocationcityArg = ((locationCity != null) ? ((unescape(locationCity).replace(/"/g, '&quot;')).replace(/'/g, "\\'")) : locationCity);
				var param = "data={'classId':'"+classId+"','classCode':'"+escape(classCode)+"','classDesc':'"+escape(classDesc)+"','language':'"+language+"'," +
			    		"'sessionId':'"+sessionId+"','deliveryTypeCode':'"+deliveryTypeCode+"','countryName':'"+countryName+"','locationName':'"+LocationNameArg+"','locationAddr1':'"+LocationAdd1Arg+"','locationAddr2':'"+LocationAdd2Arg+"'," +
	    				"'locationCity':'"+LocationcityArg+"','locationState':'"+locationState+"','locationZip':'"+locationZip+"'," +
   						"'sessionDetails':"+passParams+"}";


	 			rhtml += '<tr class="set-height ui-widget-content" id ="lp-class-'+classId+'">';
	 			if(last_comp_enrolledId!=''){
					if(last_comp_enrolledId == enrolledId.enrolled_id){
						checkedValue = (waitList==0 && availableSeats==0)?checkedValue+' disabled="disabled"': checkedValue;
					}else{
						checkedValue = '';
					}
				}else{
					checkedValue = (waitList==0 && availableSeats==0)?checkedValue+' disabled="disabled"': checkedValue;
				}
				if(fromPage == "MyTeam") {
					if(deliveryTypeCode =='lrn_cls_dty_vcl' || deliveryTypeCode =='lrn_cls_dty_ilt')  {
						rhtml += '<td class="course-sub-class-detail"><table border="0" width="100%" cellpadding="0" cellspacing="0"><tr><td valign="top" class="course-detail-col1">';
						rhtml += '<a id="lp-class-accodion-'+classId+'" href="javascript:void(0);" data="'+param+'" class="title_close" onclick=\''+objStr+'.accordionForClassView('+classId+', "'+fromPage+'");\'>&nbsp;</a>';
						rhtml += '<div class="tp-register-iltvcl-select-class limit-title-row"><span class="lp-reg-class-title limit-title limit-title-mulcls-title vtip" title="'+unescape(classTitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
						rhtml += classTitle; /*titleRestricted(classTitle,30);*/
						rhtml += '</span></div></td>';
						if(deliveryTypeCode =='lrn_cls_dty_ilt' && loc_tz!=user_tz ){
						rhtml += '<td valign="top" class="course-detail-col2 vtip" title="'+sDay+' '+sTime+' '+sTimeForm+' to '+eTime+' '+eTimeForm+' '+user_tz+' '+user_tzcode+'"><div><span style="display: inline-block;">'+titleRestrictionFadeoutImage(startDate,'exp-sp-lnrenrollment-timezone', 20)+'';
						}
						else{
							rhtml += '<td valign="top" class="course-detail-col2"><span>'+startDate+'';
						}
						rhtml += '</span>'; 
						if(deliveryTypeCode =='lrn_cls_dty_ilt' && loc_tz!=user_tz ){
							rhtml += qtip_popup_paint(classId,sessstartDate,sessioncount); 
						}
						rhtml += '</div></td>';

						//rhtml += '<input class="rButtonclass" type="radio" id="'+courseId+'-clsregister" name="'+courseId+'-clsregister" value="'+classId+'">';
						//checkedValue = (waitList==0 && availableSeats==0)?checkedValue+' disabled="disabled"': checkedValue;
						rhtml += '<td valign="top" class="course-detail-col3"><input '+checkedValue+' type="radio" id="'+courseId+'-'+classId+'-clsregister" name="'+courseId+'-clsregister" value="'+classId+'"></td>';
					} else {
						rhtml += '<td class="course-sub-class-detail"><table border="0" width="100%" cellpadding="0" cellspacing="0"><tr><td valign="top" colspan="2" class="course-detail-col1-new">';
						rhtml += '<a id="lp-class-accodion-'+classId+'" href="javascript:void(0);" data="'+param+'" class="title_close" onclick=\''+objStr+'.accordionForClassView('+classId+', "'+fromPage+'");\'>&nbsp;</a>';
						rhtml += '<div class="tp-register-select-class limit-title-row"><span class="lp-reg-class-title limit-title limit-title-mulcls-title vtip" title="'+unescape(classTitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
						rhtml += classTitle; /*titleRestricted(classTitle,30);*/
						rhtml += '</span></div></td>';
						//rhtml += '<td valign="top" class="course-detail-col2"><span>'+startDate+'</span></td>';
						//rhtml += '<input class="rButtonclass" type="radio" id="'+courseId+'-clsregister" name="'+courseId+'-clsregister" value="'+classId+'">';
						//checkedValue = (waitList==0 && availableSeats==0)?checkedValue+' disabled="disabled"': checkedValue;
						rhtml += '<td valign="top" class="course-detail-col3"><input '+checkedValue+' type="radio" id="'+courseId+'-'+classId+'-clsregister" name="'+courseId+'-clsregister" value="'+classId+'"></td>';
					}
					rhtml += '</tr></table>';
					rhtml += '<div class="course-delivery-info item-title-code cls-class-title-code">';
					//rhtml += '<span title="'+unescape(classCode)+'" class="vtip">'+titleRestrictionFadeoutImage(unescape(classCode),'tp-view-class-code')+'</span>';
					rhtml += '<div class="line-item-container float-left myteam"><span class="vtip" title="'+unescape(classCode).replace(/"/g, '&quot;')+'">'+titleRestrictionFadeoutImage(unescape(classCode),'tp-view-class-code')+'</span></div>';
					rhtml += '<div class="line-item-container float-left myteam">';
					rhtml += '<span class="pipeline">|</span>';
				} else {
					rhtml += '<td class="course-sub-class-detail"><div class="course-class-content-wrapper"><div class="class-list padtp5" id="class-container-loader-'+classId+'"><div class="class_list_container"><div class="content-row-container id="content-row-container-class-'+classId+'" '+deliveryTypeCode+'">';
				}
				var row_det_type;
				var iconClass;
				if (deliveryTypeCode == '' || deliveryTypeCode == '-') {
					return '<span>&nbsp;</span>';
				}
				else if(deliveryTypeCode=='lrn_cls_dty_wbt'){
					row_det_type = Drupal.t("Web-based");
					iconClass = 'wbt-icon';
		        }
		        else if(deliveryTypeCode=='lrn_cls_dty_vcl'){
		        	row_det_type = Drupal.t("Virtual Class");
					iconClass = 'vcl-icon';
		        }
		        else if(deliveryTypeCode=='lrn_cls_dty_ilt'){
		        	row_det_type = Drupal.t("Classroom");
					iconClass = 'ilt-icon';
		        }
		        else if(deliveryTypeCode=='lrn_cls_dty_vod'){
		        	row_det_type = Drupal.t("Video");
					iconClass = 'vod-icon';
		        }
				if(fromPage == "MyTeam") {
					rhtml += '<span>'+row_det_type+'</span>';
					rhtml += '</div>';
					if(deliveryTypeCode=='lrn_cls_dty_ilt') {
						rhtml += '<div class="line-item-container float-left myteam">';
						rhtml += '<span class="pipeline">|</span>';
						rhtml += '<span>'+unescape(locationName)+'</span>';
						rhtml += '</div>';
					}
					if(deliveryTypeCode=='lrn_cls_dty_ilt' || deliveryTypeCode=='lrn_cls_dty_vcl') {
						if(waitList > 0) {
							rhtml += '<div class="line-item-container float-left myteam">';
							rhtml += '<span class="pipeline">|</span>';
							if(waitList==1)
								rhtml += '<span>'+waitList+" "+Drupal.t("LBL126")+'</span>';
							else
								rhtml += '<span>'+waitList+" "+Drupal.t("LBL127")+'</span>';
							rhtml += '</div>';
						}else if(waitList == 0 && availableSeats==0){
							rhtml += '<div class="line-item-container float-left myteam">';
							rhtml += '<span class="pipeline">|</span>';
							rhtml += '<span>'+Drupal.t("LBL106")+" "+Drupal.t("LBL046")+'</span>';
							rhtml += '</div>';
						}else{
							rhtml += '<div class="line-item-container float-left myteam">';
							rhtml += '<span class="pipeline">|</span>';
							if(availableSeats==1)
								rhtml += '<span>'+availableSeats+" "+Drupal.t("LBL052")+'</span>';
							else
								rhtml += '<span>'+availableSeats+" "+Drupal.t("LBL053")+'</span>';
							rhtml += '</div>';
						}
					}
					if(enrolledId.comp_status == 'lrn_crs_cmp_cmp' || enrolledId.comp_status == 'lrn_crs_cmp_enr') {
						rhtml += '<div class="line-item-container float-left myteam">';
						rhtml += '<span class="pipeline">|</span>';
						var regClassStatus = (enrolledId.comp_status == 'lrn_crs_cmp_cmp') ? Drupal.t("Completed") : Drupal.t("Registered");
						rhtml += '<span>'+regClassStatus+'</span>';
						rhtml += '</div>';
					}
					rhtml += '</div>';
					rhtml += '</td>';
				} else {	// else of fromPage == "MyTeam"
					var classIcon = '<div class="content-icon-container"><div title="'+row_det_type+'" class="content-icon '+iconClass+' vtip"></div></div>';
					// console.log('classIcon', classIcon);
					rhtml += classIcon;
					var classDetail = '<div class="content-detail-container"><div class="content-title vtip limit-title-row"><span title="'+unescape(classTitle).replace(/"/g, '&quot;')+'" class="limit-title lmt-lrp-crs-cls-title vtip">'+classTitle+'</span></div>';
					// console.log('classDetail', classDetail);
					var classInfo = '<div class="course-delivery-info item-title-code content-detail-code">';
					classInfo += '<div class="line-item-container float-left" ><span class="vtip" title="'+unescape(classCode).replace(/"/g, '&quot;')+'">'+titleRestrictionFadeoutImage(unescape(classCode),'tp-view-class-code')+'</span></div>';
					// classInfo += '<span class="pipeline">|</span>';
					// classInfo += '<span>'+row_det_type+'</span>';
					if(deliveryTypeCode=='lrn_cls_dty_ilt') {
						classInfo += '<div class="line-item-container float-left" >';
						classInfo += '<span class="pipeline">|</span>';
						classInfo += '<span class="vtip" title="'+unescape(locationName).replace(/"/g, '&quot;')+'">'+titleRestrictionFadeoutImage(unescape(locationName),'tp-view-location-selectbox')+'</span>';
						classInfo += '</div>';
					}
					if(deliveryTypeCode=='lrn_cls_dty_ilt' || deliveryTypeCode=='lrn_cls_dty_vcl') {
						if(waitList > 0) {
							classInfo += '<div class="line-item-container float-left" >';
							classInfo += '<span class="pipeline">|</span>';
							if(waitList==1) {
								classInfo += '<span>'+waitList+" "+Drupal.t("LBL126")+'</span>';
							} else {
								classInfo += '<span>'+waitList+" "+Drupal.t("LBL127")+'</span>';
							}
							classInfo += '</div>';
						} else if(waitList == 0 && availableSeats==0) {
							classInfo += '<div class="line-item-container float-left" >';
							classInfo += '<span class="pipeline">|</span>';
							classInfo += '<span>'+Drupal.t("LBL106")+" "+Drupal.t("LBL046")+'</span>';
							classInfo += '</div>';
						} else {
							classInfo += '<div class="line-item-container float-left" >';
							classInfo += '<span class="pipeline">|</span>';
							var seats_left_dis = availableSeats+" "+Drupal.t("LBL052");
							if(availableSeats==1) {
								classInfo += '<span class="vtip" title="'+unescape(availableSeats).replace(/"/g, '&quot;')+'">'+titleRestrictionFadeoutImage(unescape(seats_left_dis),'tp-view-class-seatsleft')+'</span>';
							} else {
								classInfo += '<span class="vtip" title="'+unescape(availableSeats).replace(/"/g, '&quot;')+'">'+titleRestrictionFadeoutImage(unescape(seats_left_dis),'tp-view-class-seatsleft')+'</span>';
							}
							classInfo += '</div>';
						}
					}
					if(enrolledId.comp_status == 'lrn_crs_cmp_cmp' || enrolledId.comp_status == 'lrn_crs_cmp_enr') {
						classInfo += '<div class="line-item-container float-left" >';
						classInfo += '<span class="pipeline">|</span>';
						var regClassStatus = (enrolledId.comp_status == 'lrn_crs_cmp_cmp') ? Drupal.t("Completed") : Drupal.t("Registered");
						classInfo += '<span>'+regClassStatus+'</span>';
						classInfo += '</div>';
					}
					var sessionInfo = '';
					var classRegisterStatus = '';
					if(deliveryTypeCode =='lrn_cls_dty_vcl' || deliveryTypeCode =='lrn_cls_dty_ilt') {
						if(deliveryTypeCode =='lrn_cls_dty_ilt' && loc_tz!=user_tz ) {
							sessionInfo += '<div class="float-left" >';
							sessionInfo += '<span valign="top" class="vakku course-detail-col2 clsWithTz vtip" title="'+sDay+' '+sTime+' '+sTimeForm+' to '+eTime+' '+eTimeForm+' '+user_tz+' '+user_tzcode+'"><div><span style="display: inline-block;">'+titleRestrictionFadeoutImage(startDate,'exp-sp-lnrenrollment-timezone', 20)+'';
							sessionInfo += '</span>';
							sessionInfo += qtip_popup_paint(classId,sessstartDate,sessioncount);					
							sessionInfo += '</div></span>';	
							sessionInfo += '</div>';
						} else {
							sessionInfo += '<div class="float-left" >';
							sessionInfo += '<span valign="top" class="vakku course-detail-col2 vtip" title="'+startDateVtip+'">'+titleRestrictionFadeoutImage(startDate,'exp-sp-lnrenrollment-timezone', 20)+'';
							sessionInfo += '</span>'; 		
							sessionInfo += '</div>';
						}
						classRegisterStatus += '<div valign="top" class="content-action-container"><input '+checkedValue+' type="radio" id="'+courseId+'-'+classId+'-clsregister" name="'+courseId+'-clsregister" value="'+classId+'"></div>';
					} else {
						classRegisterStatus += '<div valign="top" class="content-action-container"><input '+checkedValue+' type="radio" id="'+courseId+'-'+classId+'-clsregister" name="'+courseId+'-clsregister" value="'+classId+'"></div>';
					}
					if(sessionInfo != '') {
						classInfo += '<div class="line-item-container float-left" >';
						classInfo += '<span class="pipeline">|</span>';
						classInfo += sessionInfo;
						classInfo += '</div>';
					}
					classInfo += '</div>';
					classDetail += classInfo;
					classDetail += '<div class="limit-desc-row content-description padbt5 '+deliveryTypeCode+'"><div class="limit-desc lmt-lrp-crs-cls-desc vtip">'+classDesc+'</div></div>';
					classDetail += '</div>';
					rhtml += classDetail;
					rhtml += classRegisterStatus;
					rhtml += '</div>';
					var showMoreLess = '<div class="class_list_content"><div class="class-content-content-wrapper"><div id="class_content_more_'+classId+'" class="class-content-more padbt5"><div id="lp-class-accodion-'+classId+'" href="javascript:void(0);" data="'+param+'" class="show_more_less" onclick=\''+objStr+'.accordionForClassView('+classId+');\'>'+Drupal.t("LBL713")+'</div></div></div></div>';
					var moreClassInfo = '<div class="class-content-wrapper class-content-content-wrapper border-box-cnt-tp '+deliveryTypeCode+'"><div class="content-list"><div id="'+classId+'ClassSubGrid" style="display: none;"><div id="class-details-'+classId+'" class="class-level"></div></div></div></div>';
					rhtml += moreClassInfo;
					rhtml += showMoreLess;
					rhtml += '</div></div></div></td>';				
					rhtml += '</div></td>';
				}
				rhtml += '</tr>';
			}

		} else {
			rhtml += '<tr>';
			rhtml += '<td class="no-item-found">'+SMARTPORTAL.t("There are no classes under this course")+'</td>';
			rhtml += '</tr>';
		}
	  rhtml += '</table>';
	  rhtml += '</div>';
	 // alert('final output '+ rhtml)
	  return rhtml;
	  vtip();
	  //$("#course-details-"+data.CourseId).html(rhtml);
	  //$('.class-details-info > tbody > tr:last > td').find('.course-delivery-info').css('border-bottom','0px none');
	 } catch(e) {
			// to do
			// console.log(e, e.stack);
		}
	},


	accordionForClassView : function(classId, fromPage) {
		try{
		var currTr = classId;

		if(!document.getElementById(currTr+"ClassSubGrid")) {
			if(fromPage == "MyTeam") {
				$("#lp-class-"+currTr).after("<tr id='"+currTr+"ClassSubGrid'><td colspan='4'><div id='class-details-"+currTr+"' class='class-level'></div></td></tr>");
				$("#lp-class-accodion-"+currTr).removeClass("title_close");
				$("#lp-class-accodion-"+currTr).addClass("title_open");
				$("#"+currTr+"ClassSubGrid").find(".class-level").css("border-bottom","1px solid #cccccc");
			} else {
				$("#lp-class-"+currTr).find('#content-row-container-class-'+currTr).after("<div class='class-content-wrapper border-box-cnt-tp'><div class='content-list'><div id='"+currTr+"ClassSubGrid'><div id='class-details-"+currTr+"' class='class-level'></div></div></div></div>");
				$("#lp-class-accodion-"+currTr).text(Drupal.t("LBL3042"));
			}
			
			$("#"+currTr+"ClassSubGrid").show();//css("display","block");
			$("#lp-class-"+currTr).removeClass("ui-widget-content");
			$("#"+currTr+"ClassSubGrid").slideDown(1000);
			$("#lp-class-"+currTr).find(".course-delivery-info").css("border-bottom","0px");
			//$("#"+currTr+"ClassSubGrid").find(".class-level").css("margin-left","16px");
			$('.class-details-info > tbody > tr:last > td').find('.class-level').css('border-bottom','0px none');
		} else {
			var clickStyle = $("#"+currTr+"ClassSubGrid").css("display");
			var getWidth=$(".course-class-content-wrapper").find(".content-row-container").width();
    		if((clickStyle == "none") || (clickStyle == 'undefined')) {
    			$("#"+currTr+"ClassSubGrid").show();//css("display","block");
    			$("#"+currTr+"ClassSubGrid").slideDown(1000);
				if(fromPage == "MyTeam") {
					$("#lp-class-accodion-"+currTr).removeClass("title_close");
					$("#lp-class-accodion-"+currTr).addClass("title_open");
					$("#"+currTr+"ClassSubGrid").find(".class-level").css("border-bottom","1px solid #cccccc");
				} else {
					$("#lp-class-accodion-"+currTr).text(Drupal.t("LBL3042"));
					
				}
				$("#lp-class-"+currTr).removeClass("ui-widget-content");
				$("#lp-class-"+currTr).find(".course-delivery-info").css("border-bottom","0px");
				//$("#"+currTr+"ClassSubGrid").find(".class-level").css("margin-left","16px");
				$('.class-details-info > tbody > tr:last > td').find('.class-level').css('border-bottom','0px none');
				//$("#lp-class-"+currTr).find(".course-class-content-wrapper .content-detail-container").removeClass("expand-content-detail-container");
				//$("#lp-class-"+currTr).find(".course-class-content-wrapper .content-detail-container").addClass("expand-content-detail-container");
				if(Drupal.settings.widget.widgetCallback==true){
				$("#lp-class-accodion-"+currTr).parents("tr").find(".course-class-content-wrapper .class_list_container > div").css("width",getWidth);
				}
    		} else {
    			$("#"+currTr+"ClassSubGrid").hide();//css("display","none");
    			$("#"+currTr+"ClassSubGrid").slideUp(1000);
				if(fromPage == "MyTeam") {
					$("#lp-class-accodion-"+currTr).removeClass("title_open");
					$("#lp-class-accodion-"+currTr).addClass("title_close");
				} else {
					$("#lp-class-accodion-"+currTr).text(Drupal.t("LBL713"));
				}
				$("#lp-class-"+currTr).removeClass("ui-widget-content");
				$("#lp-class-"+currTr).addClass("ui-widget-content");
				if(fromPage == "MyTeam") {
					$("#lp-class-"+currTr).find(".course-delivery-info").css("border-bottom","1px solid #cccccc");
					$('.class-details-info > tbody > tr:last > td').find('.course-delivery-info').css('border-bottom','0px none');
				}
				//$("#lnr-tainingplan-register .course-class-content-wrapper .content-row-container").find(".content-detail-container").removeClass("expand-content-detail-container");
    		    //$("#lnr-tainingplan-register .course-class-content-wrapper .content-row-container").find(".content-detail-container").addClass("collapse-content-detail-container");
    		    //$("#lp-class-"+currTr).find(".course-class-content-wrapper .content-detail-container").removeClass("expand-content-detail-container");
    		   // $("#lp-class-accodion-"+currTr).parents("tr").find(".course-class-content-wrapper .content-detail-container").removeAttr("style");
				if(Drupal.settings.widget.widgetCallback==true){
    		     $("#lp-class-accodion-"+currTr).parents("tr").find(".course-class-content-wrapper .class_list_container > div").css("width",getWidth);
				}
    			}
		}


		var data = eval($("#lp-class-accodion-"+currTr).attr("data"));

		var classDetSec = this.paintTPClassSessionDetails(data, fromPage);
		if(fromPage == "MyTeam") {
			$('.class-details-info > tbody > tr:last > td').find('.course-delivery-info').css('border-bottom','0px none');
			$('.class-details-info > tbody > tr.set-height:last td').find('.course-delivery-info').css('border-bottom','0px');
			$('.class-details-info > tbody > tr:last > td').find('.cls-description').css('border-bottom','0px none');
		}
		/*-- #34270 scroll pane for the dynamic contents in team assign learn popup --*/
		if($("#my-team-dialog #gview_tbl-paintCatalogContentResults").length) {
			$("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
		}
		$('.lmt-lrp-crs-cls-title').trunk8(trunk8.class_detail_title);
		$('.lmt-lrp-crs-cls-desc').trunk8(trunk8.lp_detail_course_desc);
		$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		
		//$(".lnr-tainingplan-register").jScrollPane();
		}catch(e){
			// to do
			// console.log(e, e.stack);
		}
	},


	paintTPClassSessionDetails : function(data, fromPage){
		try{
			// console.log(data);
		var oHtml = '';
		if(fromPage == "MyTeam") {
			oHtml += "<table cellpadding='2' class='sub-course-class' cellspacing='2' width='100%'>";
		} else {
			oHtml += '<div class="class-content-wrapper border-box-cnt-tp">';
		}
		if(data.classCode && fromPage == "MyTeam") {
			oHtml += "<tr><td class=''><div class='viewlrn-cls-lbl'>"+Drupal.t("LBL263")+":</div><div class='viewlrn-cls-lbl-val vtip' title='"+unescape(data.classCode)+"'> "+titleRestrictionFadeoutImage(unescape(data.classCode),'assignlearn-tp-cls-title')+"</div></td></tr>";
		}
		if(fromPage == "MyTeam") {
			oHtml += "<tr><td><div class='viewlrn-cls-lbl'>"+Drupal.t("LBL229")+":</div><div class='viewlrn-cls-lbl-val'> "+unescape(data.classDesc)+"</div></td></tr> <tr><td class='cls-description'>";
		} else {
			oHtml += '<div class="content-list"><div class="session-details-warpper">';
		}
		if(data.sessionDetails.length>0) {
			if(fromPage == "MyTeam") {
				oHtml += '<div class="enroll-session-details viewlrn-cls-lbl">'+Drupal.t("LBL670")+':</div>';
			} else {
				oHtml += '<div class="sub-section-title padbt5">'+Drupal.t("LBL277")+'</div>';
			}
			var inc = 1;
			$(data.sessionDetails).each(function(){
				if($(this).attr("sessionTitle")) {
					var sesionsH = ($(this).attr("sessionTitle") != '') ? $(this).attr("sessionTitle") : "&nbsp;";
					var sesionsHead = sesionsH;
					if(fromPage == "MyTeam") {
						oHtml += '<div class="sessionDet"><div class="sessName vtip" title="'+(($(this).attr("sessionTitle") != '') ? unescape($(this).attr("sessionTitle")).replace(/"/g, '&quot;') : "&nbsp;")+'">'+titleRestrictionFadeoutImage(unescape(sesionsHead),'assignlearn-tp-cls-session-title')+'</div>';
						oHtml += '<div class="sessDay">'+$(this).attr("sessionDay")+'</div>';
						if(data.deliveryTypeCode == 'lrn_cls_dty_ilt') {
							oHtml += '<div class="sessDate">'+$(this).attr("sessionSDate")+ " " +$(this).attr("start_time")+ " <span class='time-zone-text'>"+$(this).attr("sessionSDayForm")+"</span>"+' ' + Drupal.t('LBL621') + ' ' +$(this).attr("end_time")+" <span class='time-zone-text'>"+$(this).attr("sessionEDayForm")+"</span>"+$(this).attr("user_tz")+" "+$(this).attr("user_tzcode")+"";
							var locdetails ='<div class="locsessDate">'+$(this).attr("iltsessionSDate")+ " " +$(this).attr("iltstart_time")+ " <span class='time-zone-text'>"+$(this).attr("iltsessionSDayForm")+"</span>"+' ' + Drupal.t('LBL621') + ' ' +$(this).attr("iltend_time")+" <span class='time-zone-text'>"+$(this).attr("iltsessionEDayForm")+"</span>"+$(this).attr("loc_tz")+" "+$(this).attr("loc_tzcode")+"</div>";
							// console.log($(this).attr("user_tz"));
							// console.log($(this).attr("loc_tz"));
							if($(this).attr("user_tz")!= $(this).attr("loc_tz")){
								oHtml += qtip_popup_paint($(this).attr("session_id"),locdetails); 
							}
							oHtml +='</div></div>';
					   }
					   else{
						oHtml += '<div class="sessDate">'+$(this).attr("sessionSDate")+ " " +$(this).attr("start_time")+ " <span class='time-zone-text'>"+$(this).attr("sessionSDayForm")+"</span>"+' ' + Drupal.t('LBL621') + ' ' +$(this).attr("end_time")+" <span class='time-zone-text'>"+$(this).attr("sessionEDayForm")+"</span></div></div>";
					   }
					} else {	// end of if(fromPage == "MyTeam")
					var sessionDetail = '<div class="session-detail-block padbt5 sessionDet">';
					var sessionName = '<div class="session-name session-row">';
					sessionName += '<span class="sess-attr-name">'+Drupal.t("LBL107")+': </span>';
					sessionName += '<div class="sessName vtip" title="'+(($(this).attr("sessionTitle") != '') ? unescape($(this).attr("sessionTitle")).replace(/"/g, '&quot;') : "&nbsp;")+'">'+titleRestrictionFadeoutImage(unescape(sesionsHead),'assignlearn-tp-cls-session-title')+'</div>';
					sessionName += '</div>';
					var sessionDate = '<div class="session-date session-row">';
					sessionDate += '<span class="sess-attr-name">'+Drupal.t("LBL042")+'</span>';
					sessionDate += '<span title="" class="sess-attr-val">';

					
					sessionDate += $(this).attr("sessionDay") + ' ';
			       if(data.deliveryTypeCode == 'lrn_cls_dty_ilt'){
					sessionDate += $(this).attr("sessionSDate")+ " " +$(this).attr("start_time")+ " <span class='time-zone-text'>"+$(this).attr("sessionSDayForm")+"</span>"+' ' + Drupal.t('LBL621') + ' ' +$(this).attr("end_time")+" <span class='time-zone-text'>"+$(this).attr("sessionEDayForm")+"</span>"+$(this).attr("user_tz")+" "+$(this).attr("user_tzcode")+"";
                    var locdetails ='<div class="locsessDate">'+$(this).attr("iltsessionSDate")+ " " +$(this).attr("iltstart_time")+ " <span class='time-zone-text'>"+$(this).attr("iltsessionSDayForm")+"</span>"+' ' + Drupal.t('LBL621') + ' ' +$(this).attr("iltend_time")+" <span class='time-zone-text'>"+$(this).attr("iltsessionEDayForm")+"</span>"+$(this).attr("loc_tz")+" "+$(this).attr("loc_tzcode")+"</div>";
					// console.log($(this).attr("user_tz"));
					// console.log($(this).attr("loc_tz"));   

					if($(this).attr("user_tz")!= $(this).attr("loc_tz")){
						sessionDate += qtip_popup_paint($(this).attr("session_id"), locdetails); 
					}
					// sessionDate +='</div></div>';
			       }
			       else{
					sessionDate += $(this).attr("sessionSDate")+ " " +$(this).attr("start_time")+ " <span class='time-zone-text'>"+$(this).attr("sessionSDayForm")+"</span>"+' ' + Drupal.t('LBL621') + ' ' +$(this).attr("end_time")+" <span class='time-zone-text'>"+$(this).attr("sessionEDayForm")+"</span>";
			       }
				   sessionDate += '</span></div>';
				   sessionDetail += sessionName;
				   sessionDetail += sessionDate;
				  
				   var sessionInstructor = '';
				   if($(this).attr("sessionInstructorName") != null) {
						var instrName = ($(this).attr("sessionInstructorName") == 'null' ? '' : $(this).attr("sessionInstructorName"));
						sessionInstructor += '<div class="session-instructor session-row">';
						sessionInstructor += '<span class="sess-attr-name">'+Drupal.t('Instructor')+': </span>';
						sessionInstructor += '<span class="sess-attr-val vtip" title="'+unescape(instrName).replace(/"/g, '&quot;')+'">';
						// sessionInstructor += '<div class="fade-out-title-container class-detail-session-instructor-fadeout-container" style=""><span class="title-lengthy-text" style="">'+$(this).attr("sessionInstructorName")+'</span></div>';
						sessionInstructor += titleRestrictionFadeoutImage(unescape(instrName).replace(/"/g, '&quot;'), 'class-detail-session-instructor-fadeout-container');
						sessionInstructor += '</span></div>';
					
					}
					sessionDetail += sessionInstructor;
					sessionDetail += '</div>';
					oHtml += sessionDetail;
					// console.log('sessionInstructor', sessionInstructor);
					}
					inc++;
				}
			});
		}
		if(data.language) {
			if(fromPage == "MyTeam") {
				oHtml += "<div class='cls-lang'><div class='viewlrn-cls-lbl'>"+Drupal.t("LBL038")+":</div><div class='viewlrn-cls-lbl-val'> "+Drupal.t(data.language)+"</div></div>";
			} else {
				var locationInfo = '<div class="session-location-warpper"><div class="sub-section-title padbt5">'+Drupal.t("LBL038")+'</div><div class="session-location-block "><div class="location-address padbt10">'+Drupal.t(data.language)+'</div></div></div>';
				oHtml += locationInfo;
			}
		}

		if(data.deliveryTypeCode=='lrn_cls_dty_ilt') {
			var LocationName 	= data.locationName;
			if(LocationName != '') {
				if(fromPage == "MyTeam") {
					oHtml +='<table class="enroll-loc-details"><tr><td class="enroll-location-head" valign="top"><div class="enroll-loc-head viewlrn-cls-lbl">'+Drupal.t("Location")+':</div><div class="viewlrn-cls-lbl-val">';
					oHtml += "<div class='enroll-location-text'>"+unescape(LocationName)+"</div>";
					if(data.locationAddr1 !='' && data.locationAddr1 != null && data.locationAddr1 != 'null') {
						oHtml += "<div class='enroll-location-text'>"+data.locationAddr1+"</div>";
					}
					if(data.locationAddr2 !='' && data.locationAddr2 != null && data.locationAddr2 != 'null') {
						oHtml += "<div class='enroll-location-text'>"+data.locationAddr2+"</div>";
					}
					if(data.locationCity !='' && data.locationCity != null && data.locationCity != 'null') {
						oHtml += "<div class='enroll-location-text'>"+data.locationCity;
						if (data.locationState == '' && data.locationState != null && data.locationState != 'null') {
							oHtml += "<br />";
						}
					}
					if(data.locationState !='' && data.locationState != null && data.locationState != 'null') {
						if (data.locationCity != '' && data.locationCity != null && data.locationCity != 'null') {
						   oHtml += ", ";
						}
						oHtml += "<div class='enroll-location-text'>"+data.locationState+"</div>";
					}
					oHtml += "<div class='enroll-location-text'>"+data.countryName;
					if(data.locationZip !='' && data.locationZip != null && data.locationZip != 'null'){
						oHtml += " - "+data.locationZip;
					}
					oHtml += "</div>";
					oHtml += "</td></tr></table>";
				} else {
					var locationInfo = '';
					locationInfo += '<div class="session-location-warpper">';
					locationInfo += '<div class="sub-section-title padbt5">'+Drupal.t("Location")+': </div>';
					locationInfo += '<div class="session-location-block"><div class="location-address padbt10">';
					locationInfo += unescape(LocationName);
					if(data.locationAddr1 !='' && data.locationAddr1 != null && data.locationAddr1 != 'null') {
						locationInfo += ", "+data.locationAddr1;
					}
					if(data.locationAddr2 !='' && data.locationAddr2 != null && data.locationAddr2 != 'null') {
						locationInfo += ", "+data.locationAddr2;
					}
					if(data.locationCity !='' && data.locationCity != null && data.locationCity != 'null') {
						locationInfo += ", "+data.locationCity;
					}
					if(data.locationState !='' && data.locationState != null && data.locationState != 'null') {
						locationInfo += ", "+data.locationState;
					}
					if(data.locationZip !='' && data.locationZip != null && data.locationZip != 'null'){
						locationInfo += " - "+data.locationZip;
					}
					locationInfo += ", "+data.countryName;
					locationInfo += "</div></div></div>";
					// console.log('locationInfo', locationInfo);
					oHtml += locationInfo;
				}
			}
		}
		if(fromPage == "MyTeam") {
			oHtml += "</td></tr></table>";
		} else {
			oHtml += "</div></div></div>";
		}
		$("#class-details-"+data.classId).html(oHtml);
		$("body").data("learningcore").refreshJScrollPane(".lnr-tainingplan-register");
		//$(".lnr-tainingplan-register").jScrollPane();
		}catch(e){
			// to do
			// console.log(e, e.stack);
		}
		vtip();
	},

	displayEquvPopup : function(widgetId,userId, courseId, classId,result,type,selectValues){
		try{
	    $('#equvMsg-wizard').remove();
	    var html = '';
	    html+='<div id="equvMsg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    html+='<tr><td height="30"></td></tr>';
	   // html+='<tr>';
	    if(result.length == 1)
		html+='<td align="center" class="light-gray-color">'+Drupal.t(result[0]['errormsg']['msg1'])+'</td></tr>';
	    else
	    html+='<td align="center" class="light-gray-color">'+Drupal.t(result[0]['errormsg']['msg2'])+'</td></tr>';

		for(k=0;k < result.length ; k++){
			html+= '<tr><td align="center"><i>"'+unescape(result[k]['equv_title'])+'"</i></td></tr>';
		}


		html+= '<tr><td align="center" class="light-gray-color"><span>'+Drupal.t(result[0]['errormsg']['msg3'])+'</span></td></tr>';
	    //html+='</tr>';
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);
	    var closeButt={};
	    closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#equvMsg-wizard').remove();};
	    closeButt[Drupal.t('Yes')]=function(){ $("body").data("learningcore").callRegisterClass(widgetId,userId, courseId, classId,type,selectValues); $(this).dialog('destroy');$(this).dialog('close');$('#equvMsg-wizard').remove(); };

	    $("#equvMsg-wizard").dialog({
	        position:[(getWindowWidth()-500)/2,100],
	        bgiframe: true,
	        width:500,
	        resizable:false,
	        modal: true,
	        title:Drupal.t('LBL247'),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:true,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });

	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
		$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
	    this.currTheme = Drupal.settings.ajaxPageState.theme;
		if ($.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');
			$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
	    }
	    $("#equvMsg-wizard").show();
	 	if(this.currTheme == "expertusoneV2"){
	 		//changeDialogPopUI();
	 		 $('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
		 	   $('#equvMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
		       $('#select-class-equalence-dialog').find('.ui-dialog-content').addClass('commonMsg-select-class');
		       $('#select-class-equalence-dialog #equvMsg-wizard').css('height','270px');
			   $('#select-class-equalence-dialog #equvMsg-wizard').jScrollPane();
			   changeChildDialogPopUI('select-class-equalence-dialog');
			   $('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
			   if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').prev('.white-btn-bg-left').remove();
			   $('#select-class-equalence-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').remove();
			   }
			}
		 	else {
		 		$('#select-class-equalence-dialog').prevAll().removeAttr('select-class-equalence-dialog');
			 	$('#equvMsg-wizard').closest('.ui-dialog').wrap("<div id='select-class-equalence-dialog'></div>");
				changeChildDialogPopUI('select-class-equalence-dialog');
				$('#select-class-equalence-dialog').prev('.ui-widget-overlay').css('display','none');
			   }
	    $("#equvMsg-wizard").show();
		$('.ui-dialog-titlebar-close, .removebutton').click(function(){
			$('#select-class-dialog').next('.ui-widget-overlay').css('display','block');
	        $("#equvMsg-wizard").remove();
	    });
		}catch(e){
			// to do
		}
	},

	callEquivalencePopup : function(widgetId,userId, courseId, classId, waitList, enrolledStatus,selectValues,courseLevelCnt){
		try{
		if(typeof(selectValues)==='undefined') selectValues = '';
		if(typeof(courseLevelCnt)==='undefined') courseLevelCnt = '';
		var obj = this;
		var loaderObj = widgetId;
		var loaderFlg = true;
		this.createLoader(loaderObj);
		var userId = this.getLearnerId();
		if(!userId) {
			this.callMessageWindow('registertitle',"Please sign in to proceed.");
		}else{
				url = obj.constructUrl("ajax/learningcore/check-equivalence/" + userId + '/' + courseId + '/' + classId);
				var IN_FLIGHT = 'requestinflight';
				var $ajaxcall;
				$ajaxcall = $( this );
               if( ! $ajaxcall.data( IN_FLIGHT ) ){
					$ajaxcall.data( IN_FLIGHT, true );
					$.ajax({
						type: "POST",
						url: url,
						//data:  '',  //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
						success: function(result){
							var	compClassPopup = '';
							var regtestcount = (result.length >0 && result[0].recurringcount) ? result[0].recurringcount : 'N';
							var class_cnt = (result.length >0 && result[0].class_cnt) ? result[0].class_cnt : 0;
							var isCompliance = (result.length >0 && result[0].isCompliance) ? result[0].isCompliance : '';
							var comp_inc = (result.length >0 && result[0].comp_inc) ? result[0].comp_inc : '';
							
							
							if(result.length >0 && result[0].enrollexist){
								compClassPopup = 'Y';
							}
							var tpcompclass = (result.length > 0 && result[0].tpenrollexist) ? 'Y' : '';

							$ajaxcall.data( IN_FLIGHT, true );
							if(result.length > 0 && result[0].enrollexist != 'Y' && result[0].tpenrollexist != 'Y'){
								obj.displayEquvPopup(widgetId,userId, courseId, classId,result,waitList,selectValues);
							}else{
								if((enrolledStatus == 'lrn_crs_reg_cnf' && courseLevelCnt != 'Y' && regtestcount == "Y") || (enrolledStatus=='' && isCompliance==1 && comp_inc=='lrn_crs_cmp_inc')){
									if(class_cnt > 1 && (selectValues != 'fromClasslvl' && selectValues  != '')){
										$("#lnr-catalog-search").data("lnrcatalogsearch").showSelectClass(userId, courseId); 	
									}
									else{
										regMsg = Drupal.t('MSG535') +'<br />'+ Drupal.t('MSG536');
										obj.registerConfirmation('registertitle', regMsg, widgetId, userId, courseId, classId, waitList,selectValues,compClassPopup);
									}
								}else if(tpcompclass == 'Y'){
										if(result.length > 0 && result[0].recurringcount != '' &&  result[0].recurringcount != 'undefined' && result[0].recurringcount != undefined && result[0].recurringcount == "Y"){
									    	regMsg = Drupal.t('MSG535') +'<br />'+ Drupal.t('MSG536');
											obj.registerConfirmation('registertitle', regMsg, widgetId, userId, courseId, classId, waitList,selectValues,compClassPopup);
                                        }else{
											status_msg = Drupal.t('MSG535');
                                        	obj.callMessageWindow(Drupal.t('LBL721'),status_msg);
                                        }
								}else if((compClassPopup == 'Y' || courseLevelCnt == 'Y') && selectValues != 'fromClasslvl'){
										regMsg = Drupal.t('LBL1267') +'<br />'+ Drupal.t('LBL1268');
										obj.registerConfirmation('registertitle', regMsg, widgetId, userId, courseId, classId, waitList,selectValues,compClassPopup,courseLevelCnt);
								}else{
									obj.destroyLoader(loaderObj);
									loaderFlg = false;
									obj.callRegisterClass(widgetId,userId, courseId, classId, waitList,selectValues);
									//$("#tbl-paintCatalogContentResults").trigger("reloadGrid",[{page:1}]);
								}
							}
							if(loaderFlg==true)
								obj.destroyLoader(loaderObj);
						},
					    complete: function()
					    {
							$ajaxcall.data( IN_FLIGHT, false );
					    }
					});
              }
		}
		scrollBar_Refresh('catalog');
		}catch(e){
			// to do
			//console.log(e);
		}
	},
 /*
 * 0024925: Enforce equivalence in training plans
 * for this ticket we created equivalence option for training plan
 * don't delete it. Its may need for feature enhancement
 *
 */
 /*

	callEquivalencePopupTP : function(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId){
		try{

			var obj = this;
			var loaderObj = widgetId;
			var userId = this.getLearnerId();
			if(userId=='') {

				this.callMessageWindow('registertitle',"Please sign in to proceed.");
			}else{
				url = obj.constructUrl("ajax/learningcore/check-equivalence-tp/"+userId+'/'+prgId);
				//alert(url);
				var IN_FLIGHT = 'requestinflight';
				var $ajaxcall;
				$ajaxcall = $( this );
               if( ! $ajaxcall.data( IN_FLIGHT ) ){
					$ajaxcall.data( IN_FLIGHT, true );
					$.ajax({
						type: "POST",
						url: url,
						//data:  '',  //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
						success: function(resultTP){
							var	compClassPopup = '';
							 if(resultTP.length >0 ){
								compClassPopup = 'Y';
								var title ='';
								//alert(JSON.stringify(resultTP));
								for(i=0; i<resultTP.length; i++) {
									title = title+resultTP[i].equv_title+"<br />";

								}
							}
							 regMsg = Drupal.t("MSG703TP")+'<br />'+title+Drupal.t("MSG734TP");
							$ajaxcall.data( IN_FLIGHT, true );
							if(resultTP.length > 0){
									var lengthTP = resultTP.length;
									obj.registerConfirmationTP('registertitle', regMsg,widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId,lengthTP);
								}else{
									obj.callPopupOrNotTP(widgetId, prgId,addToCart,isAdminSide,userListIfAdminSide,recertifyId);
								}
						},
					    complete: function()
					    {
							$ajaxcall.data( IN_FLIGHT, false );
					    }
					});
              }
			}
		}catch(e){
				// to do
			}
	},*/


	getRatingDetails : function(ratingdata,nodeid,average) {
		try{
		var total_average = average/20;

		var data= eval($(ratingdata).attr("data"));
		var ratingDetails = '';

		if(!document.getElementById("rating_details_popup-"+nodeid)) {


			ratingDetails += "<span class='voting-details rating-header'>Rating : "+total_average+" out of 5 stars</span>";

			var ratedArr =new Array();

		    $(data).each(function(){
		    	var rate = $(this).attr("rating_value");
				var rate_value = $(this).attr("rating_value")/20;
				ratedArr[rate_value] = $(this).attr("cnt_value");

				//var widthcnt = $(this).attr("cnt_value") * 10;
				//ratingDetails += "<span class='voting-details'> "+rate_value+" star <span class='voting-flow'><span class='voting-rating' style='width:"+widthcnt+"%'></span></span><span>("+$(this).attr("cnt_value")+")</span></span>";

			});

			for(i = 5;i >= 1;i--){
				var rateValue = (ratedArr[i]!=undefined?ratedArr[i]:0);
				var selectedCntClass = (ratedArr[i]!=undefined?'selected-cnt':'');
				var widthcnt = (ratedArr[i]!=undefined?(ratedArr[i]*5):0);
				ratingDetails += "<span class='voting-details'> "+i+" star <span class='voting-flow'><span class='voting-rating' style='width:"+widthcnt+"%'></span></span><span class='"+selectedCntClass+"'>("+rateValue+")</span></span>";
			}


			$('#rating-popup-'+nodeid).qtip({
				 content: '<div id="rating_details_popup-'+nodeid+'" class="tooltiptop"></div><div class="tooltipmid">'+ratingDetails+'</div><div class="tooltipbottom"></div>',
			     show:{
					when:{
						event:'mouseover'
					},
					effect:'slide'
				 },
				 hide: {
					when:{
						event:'mouseout'
					},
					effect:'slide'
				},
/*				position: {
				    corner: {
				       target: 'bottomLeft',
				       tooltip: 'topLeft'
				    }
				},*/
				style: {
					width: 325,
					background: 'none',
					color: '#333333'
				},
				position: { adjust: { x: -98, y: -5 } }
			});
		}
		}catch(e){
			// to do
		}
	},

	disableFiveStarOnVoting : function(){
	 try{
		var divId = document.getElementById('fivestar-already-rated');
		if(divId != null && divId != "" && divId != undefined){
			$('#fivestar-already-rated .fivestar-click').removeClass('fivestar-click');
		    $('#fivestar-already-rated .fivestar-widget').unbind('mouseover');
		    $('#fivestar-already-rated .fivestar-widget .star a').unbind('click');
		    $('#fivestar-already-rated .fivestar-widget .star a').css('cursor','default');
		}
	 }catch(e){
			// to do
		}
	},

	fiveStarCheck : function(node_id,divId){
	 try{
		Drupal.attachBehaviors();
	    $('#'+divId+node_id+' '+'.fivestar-click').removeClass('fivestar-click');
	    $('#'+divId+node_id+' '+'.fivestar-widget').unbind('mouseover');
	    $('#'+divId+node_id+' '+'.fivestar-widget .star a').unbind('click');
	    $('#'+divId+node_id+' '+'.fivestar-widget .star a').css('cursor','default');
	 }catch(e){
			// to do
		}
	},

	/* Common function to evaluate the typed username and pass word in esignature
		and if true, to proceed with the remaining functionality
	*/
	evaluateLogin : function(){
		//drop call -- accord,enrollId,baseType,refundflag,isCommerceEnabled,assMand,learnerId,classid
		//mark call --- accord,userId,enrolledId,classTitle,learningType,classId
		//$("#instructor-tab-inner").data("instructordesk").dropEnrollCall(enrollId,baseType,"",isCommerceEnabled,assMand,learnerId,classid); $("#dropmsg-content").html("Cancelling the enrollment. Please wait...");
		try{
		var obj = this;
		if(this.mandatoryCheck(this.esignObj.accord)){
			var uname = $('#esign-uname').val();
			var pass = $('#esign-pass').val();
			url = this.constructUrl("ajax/learningcore/evaluate-login");
			var params = {"uname":uname,"pass":pass};
			$.ajax({
				type: "POST",
				url: url,
				data:  params,
				success: function(result){
					if(result == true){
						$('#esign-pass-error').css('display','none');
						$('.esign-msg-close-btn').css('display','none');
						if(obj.esignObj.esignFor == "InstructorCancel"){
							$("#instructor-tab-inner").data("instructordesk").dropEnrollCall(obj.esignObj.enrollId,obj.esignObj.baseType,
									obj.esignObj.refundflag,obj.esignObj.isCommerceEnabled,
									obj.esignObj.assMand,obj.esignObj.learnerId,obj.esignObj.classid);
							$("#dropmsg-content").html(Drupal.t("MSG424"));
						}else if(obj.esignObj.esignFor == "InstructorMarkComplete"){
							$('#esign-pass-error').css('display','none');
							$("#instructor-tab-inner").data("instructordesk").learnerMarkcompleteLearning(obj.esignObj.userId,
									obj.esignObj.enrolledId,obj.esignObj.classTitle,obj.esignObj.learningType,obj.esignObj.classId);
							$('#'+obj.esignObj.fieldset).remove();
						}else if(obj.esignObj.esignFor == "ManagerReject"){
							$("#lnr-myteam-search").data("lnrmyteamsearch").dropEnrollCall(obj.esignObj.userId, obj.esignObj.classId,
									obj.esignObj.enrolledId, obj.esignObj.learningType, obj.esignObj.refundFlag, obj.esignObj.isCommerceEnabled, obj.esignObj.assMand, obj.esignObj.classTitle, obj.esignObj.trid); $("#dropmsg-content").html(Drupal.t('MSG424'));
							$('#'+obj.esignObj.fieldset).remove();
						}else if(obj.esignObj.esignFor == "ManagerMarkComplete"){
							$("#lnr-myteam-search").data("lnrmyteamsearch").markcompleteLearning(obj.esignObj.userId,obj.esignObj.enrolledId,obj.esignObj.classTitle,
									obj.esignObj.rowObj,obj.esignObj.learningType,obj.esignObj.classId,obj.esignObj.trid);
							$('#'+obj.esignObj.fieldset).remove();
						}else if(obj.esignObj.esignFor == "ManagerAssign"){
							$("#lnr-myteam-search").data("lnrmyteamsearch").renderCallAssignClass(obj.esignObj.userId, obj.esignObj.courseId,
									obj.esignObj.classId, obj.esignObj.rowObj, obj.esignObj.wailist);
							$('#'+obj.esignObj.fieldset).remove();
						}else if(obj.esignObj.esignFor == "ManagerAssignProgram"){
							$("#lnr-myteam-search").data("lnrmyteamsearch").renderCallObjectAssignClass(obj.esignObj.userId,
									obj.esignObj.prgId, obj.esignObj.assignObject);
							$('#'+obj.esignObj.fieldset).remove();
						}
					}else{
						$('#esign-pass-error').css('display','block');
						$('.esign-msg-close-btn').css('display','block');
				    	$("#esign-pass").addClass("error");
					}
				}
		    });
		}else{
			$('.esign-msg-close-btn').css('display','none');
			$('#esign-pass-error').css('display','none');
		}
		}catch(e){
			// to do
		}
	},
	/* Common function to paint the esign fieldset when clicking on
		yes button or any okay button in the popups for Instructor Class
		cancel, instructor mark complete, manger reject class and manager mark complete.
	*/
	esign_accord_toggle : function(esignObj){
	 try{
		this.esignObj = esignObj;
		//$('#'+accord).toggle();
		var objStr = '$("body").data("learningcore")';
		var clickStyle = $("#"+esignObj.fieldset).css("display");
		if(clickStyle == "none") {
			var html = "";
			html +='<table cellpadding="4" cellspacing="0" border="0" valign="center">';
			html +='<tr><td class="field-title">'+SMARTPORTAL.t('Username')+'</td><td class="light-gray-color"><input id="esign-uname" type ="text" value="'+esignObj.uname+'" readonly></td></tr>';
			html +='<tr><td class="field-title">'+SMARTPORTAL.t('Password')+'</td><td class="light-gray-color"><input id="esign-pass" type ="password" name = "'+SMARTPORTAL.t('Password')+'" class="mandatory"><div id="esign-pass-error" style="display:none; color:#ff0000;font-size: 0.9em;">Please enter valid password.</div></td></tr>';
			//html +='<tr><td></td><td></td></tr>';
			html +='<tr><td></td><td class="tdButtonHolder" style="padding-right: 29px; text-align: right;"><a class="esign-close" href="javascript:void(0)" onclick=\''+objStr+'.disableButtonOnEsign();\'>'+SMARTPORTAL.t('Close')+'</a><input type ="button" class="form-submit" value ="'+SMARTPORTAL.t("E-Sign")+'"  onclick =\''+objStr+'.evaluateLogin();\'></td></tr>';
			html +='</table>';
			html +='</div>';
			$('#'+esignObj.accord).html(html);
			if(esignObj.fieldset == "esign-fieldset")
			{
				$('#'+esignObj.fieldset).prev('div').children('button').attr('disabled',"disabled");
				$('#'+esignObj.fieldset).prev('div').fadeTo('slow',.3);
			}
			if(esignObj.esignFor == "ManagerAssignProgram" || esignObj.esignFor == "ManagerAssign"){
				$('#tbl-paintCatalogContentResults > tbody > tr:last .myteam-esign-fieldset').addClass("myteam-esign-fieldset-last");
			}
			$('#'+esignObj.fieldset).show();//css("display","block");
			$('#'+esignObj.fieldset).slideDown(1000);

		} else {
   			$('#'+esignObj.fieldset).hide();//css("display","none");
			$('#'+esignObj.fieldset).slideUp(1000);
		}
	 }catch(e){
			// to do
		}
	},

	disableButtonOnEsign : function(){
	 try{
		$('#'+this.esignObj.fieldset).hide();//css("display","none");
		$('#'+this.esignObj.fieldset).slideUp(1000);
		$('#'+this.esignObj.fieldset).prev('div').children('button').removeAttr('disabled');
		$('#'+this.esignObj.fieldset).prev('div').css('opacity','');
	 }catch(e){
			// to do
		}
	},

	getEsignPopup : function(esignObj){
	 try{
    	var obj = this;
    	url = this.constructUrl("ajax/learningcore/getConcatenatedUserDets");
		$.ajax({
			type: "POST",
			url: url,
			//data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
			success: function(details){

				obj.esignObj = esignObj;
			    $('#esign-wizard').remove();
			    var html = "";
			    html += '<div id = "esign-wizard" class="esign-wizard-class">';
			    html += '<div id="esign-pass-error"><span class="esign-span-error">'+details[0].password_valid_txt+'</span></div>';
			    html += '<div id="esign-mandatory-error"><span class="esign-span-error">'+details[0].password_req_txt+'</span></div>';
			    html += '<div class="esign-msg-close-btn" onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();"></div>';
			    html += '<div id="esign-message">'+details[0].esign_static_message+'</div>';
			    html += '<table cellpadding="4" cellspacing="0" border="0" valign="center">';
			    html += '<tr><td colspan="3" class="esign-labels">'+details[0].esign_date_txt+' : '+details[0].curr_date_time+'&nbsp;';
				html += details[0].time_zone+'</td></tr>';
				html += '<tr><td class="esign-labels">'+details[0].esign_name_txt+' : '+details[0].full_name+'</td></tr>';
				html += '</table>';

				html +='<table cellpadding="4" cellspacing="0" border="0" valign="center">';
				html +='<tr><td colspan="2" class="esign-title1">'+details[0].esign_uname_txt+' :</td>';
				html +='<td class="esign-textbox1"><input id="esign-uname" tabindex="1001" type ="text" value="'+details[0].user_name+'" maxlength = "60" size ="32" readonly></td>';
				html +='<td></td></tr>';
				html +='<tr><td colspan="2" class="esign-title2">'+details[0].esign_pass_txt+' :<span class="require-text">*</span></td>';
				html +='<td class="esign-textbox2"><input id="esign-pass" tabindex="1002" type ="password" name = "'+SMARTPORTAL.t('Password')+'" maxlength = "60" size ="32"></td>';
				html +='<td></td></tr>';
				html +='</table>';
				html +='</div>';
			    $("body").append(html);
			    var closeButt={};
			    closeButt[details[0].esign_cancel_txt]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#esign-wizard').remove();
			    if(esignObj){
			    	$("#"+obj.esignObj.popupDiv).show();
			    }
			    };
			    closeButt[details[0].esign_sign_txt]=function(){ $("body").data("learningcore").getNewEvaluateLogin();  };

			    $("#esign-wizard").dialog({
			        position:[(getWindowWidth()-500)/2,200],
			        bgiframe: true,
			        width:'auto',
			        resizable:false,
			        modal: true,
			        title: details[0].esign_title,
			        buttons:closeButt,
			        closeOnEscape: false,
			        draggable:true,
			        overlay:
			         {
			           opacity: 0.9,
			           background: "black"
			         }
			    });
			    $('#esign-wizard').parent('.ui-dialog').wrap("<div id='esign-wizard-dialog'></div>");

				$('#esign-pass').focus();
				$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').attr('tabindex','1003');
				$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').attr('tabindex','1004');
				$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').attr('id','esign-sign-button');

			    $('#esign-wizard-dialog  .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
				$('#esign-wizard-dialog  .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg");
				$('#esign-wizard-dialog  .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
			    $('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("esign-button-wizard").end();
			    $('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("esign-close-button").end();

			    if(esignObj){
			    	$("#"+obj.esignObj.popupDiv).hide();
			    }
			    $("#esign-wizard").show();
			    this.currTheme = Drupal.settings.ajaxPageState.theme;
			 	if(this.currTheme == "expertusoneV2"){
			    changeChildDialogPopUI('esign-wizard-dialog');
			 	}

				$('.ui-dialog-titlebar-close').click(function(){
			        $("#esign-wizard").remove();
			        if(esignObj){
			        	$("#"+obj.esignObj.popupDiv).show();
			        }
			    });
				$("#esign-pass").keyup(function(event){
				    if(event.keyCode == 13){
				        $("#esign-sign-button").click();
				    }
				});

				//Chrome browser dialog box UI fixes
				var getScreenWidth = $(window).width()/4;
				$("#esign-wizard-dialog").find('.ui-dialog').css('left',Math.round(getScreenWidth)+'px');

			}
		});


	 }catch(e){
			// to do
		}
	},


	getEvaluateLogin : function(){
		//drop call -- accord,enrollId,baseType,refundflag,isCommerceEnabled,assMand,learnerId,classid
		//mark call --- accord,userId,enrolledId,classTitle,learningType,classId
		//$("#instructor-tab-inner").data("instructordesk").dropEnrollCall(enrollId,baseType,"",isCommerceEnabled,assMand,learnerId,classid); $("#dropmsg-content").html("Cancelling the enrollment. Please wait...");
		try{
		var obj = this;
		if($('#esign-pass').val() != ''){
			var uname = $('#esign-uname').val();
			var pass = $('#esign-pass').val();
			url = this.constructUrl("ajax/learningcore/evaluate-login");
			var params = {"uname":uname,"pass":pass};
			$.ajax({
				type: "POST",
				url: url,
				data:  params,
				success: function(result){
					if(result == true){
						$('#esign-pass-error').css('display','none');
						$('.esign-msg-close-btn').css('display','none');
						$('#esign-wizard').dialog('destroy');$('#esign-wizard').dialog('close');$('#esign-wizard').remove();
							if(obj.esignObj){
								if(obj.esignObj.esignFor == "InstructorCancel"){
								$("#instructor-tab-inner").data("instructordesk").dropEnrollCall(obj.esignObj.enrollId,obj.esignObj.baseType,
										obj.esignObj.refundflag,obj.esignObj.isCommerceEnabled,
										obj.esignObj.assMand,obj.esignObj.learnerId,obj.esignObj.classid);
								//$("#dropMsg-wizard").show();
								$("#dropmsg-content").html(Drupal.t("MSG424"));
								}else if(obj.esignObj.esignFor == "InstructorMarkComplete"){
									$('#esign-pass-error').css('display','none');
									$("#instructor-tab-inner").data("instructordesk").learnerMarkcompleteLearning(obj.esignObj.userId,
											obj.esignObj.enrolledId,obj.esignObj.classTitle,obj.esignObj.learningType,obj.esignObj.classId);
									//$('#mark-complete-wizard').show();
								}else if(obj.esignObj.esignFor == "ManagerReject"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").dropEnrollCall(obj.esignObj.userId, obj.esignObj.classId,
											obj.esignObj.enrolledId, obj.esignObj.learningType, obj.esignObj.refundFlag, obj.esignObj.isCommerceEnabled, obj.esignObj.assMand, obj.esignObj.classTitle, obj.esignObj.trid); $("#dropmsg-content").html(Drupal.t('MSG424'));
									//$('#reject-wizard').show();
								}else if(obj.esignObj.esignFor == "ManagerMarkComplete"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").markcompleteLearning(obj.esignObj.userId,obj.esignObj.enrolledId,obj.esignObj.classTitle,
											obj.esignObj.rowObj,obj.esignObj.learningType,obj.esignObj.classId,obj.esignObj.trid);
									//$("#mark-complete-wizard").show();
								}else if(obj.esignObj.esignFor == "ManagerAssign"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").renderCallAssignClass(obj.esignObj.userId, obj.esignObj.courseId,
											obj.esignObj.classId, obj.esignObj.rowObj, obj.esignObj.wailist);

								}else if(obj.esignObj.esignFor == "ManagerAssignProgram"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").renderCallObjectAssignClass(obj.esignObj.userId,
											obj.esignObj.prgId, obj.esignObj.assignObject);

								}else if(obj.esignObj.esignFor == "UserAdmin" || obj.esignObj.esignFor == "CatalogClassAdmin"){
									$('#last-button-account').click();
								}else if(obj.esignObj.esignFor == "EsignAdmin"){
									$('.common-esign-save').click();
								}else if(obj.esignObj.esignFor == "UserAddrAdmin"){
									$('.common-esign-save-addr').click();
								}else if(obj.esignObj.esignFor == "AddAdmin"){
									$("#"+obj.esignObj.esignButtId).click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_unpublish"){
									$("#edit-catalog-course-save-unpublish").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_publish"){
									var data = saveInteractionsH5PWrapper(this);
									if(data == false)
									{
										return false;
									}
									$("#INTERACTIONDATA").val(data);
									$("#content_save_pub_btn").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit"){
										var data = saveInteractionsH5PWrapper(this);
										if(data == false)
										{
											return false;
										}
										$("#INTERACTIONDATA").val(data);
										$("#content_save_btn").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new"){
										$("#content_save_btn").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new_publish"){
									$("#content_save_pub_btn").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new_unpublish"){
										$("#edit-catalog-course-save-unpublish").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorPresentationInteractions"){
									saveInteractionsH5PWrapper(null,obj.esignObj.paramForPublish);
								}								
								
								
								$("#"+obj.esignObj.popupDiv).show();
							}else{
								$('#last-button-account').click();
							}
					}else{
						$('#esign-mandatory-error').css('display','none');
						$('.esign-msg-close-btn').css('display','none');
						$('#esign-pass-error').css('display','block');
						$('#esign-pass').val('');
				    	$("#esign-pass").addClass("esign-pass-txt-error");
					}
				}
		    });
		}else{
			$('#esign-pass-error').css('display','none');
			$('#esign-mandatory-error').css('display','block');
			$('.esign-msg-close-btn').css('display','block');
			$("#esign-pass").addClass("esign-pass-txt-error");
		}
		}catch(e){
			// to do
		}
	},

	getNewEvaluateLogin : function(){
		//drop call -- accord,enrollId,baseType,refundflag,isCommerceEnabled,assMand,learnerId,classid
		//mark call --- accord,userId,enrolledId,classTitle,learningType,classId
		//$("#instructor-tab-inner").data("instructordesk").dropEnrollCall(enrollId,baseType,"",isCommerceEnabled,assMand,learnerId,classid); $("#dropmsg-content").html("Cancelling the enrollment. Please wait...");
		try{
		var obj = new Object;
		obj.esignObj =$.fn.getNewEsignPopup.esignObj;
		if($('#esign-pass').val() != ''){
			var uname = $('#esign-uname').val();
			var pass = $('#esign-pass').val();
			url = this.constructUrl("ajax/learningcore/evaluate-login");
			var params = {"uname":uname,"pass":pass};
			$.ajax({
				type: "POST",
				url: url,
				data:  params,
				success: function(result){
					if(result == true){
						$('#esign-pass-error').css('display','none');
						$('.esign-msg-close-btn').css('display','block');
						$('#esign-wizard').dialog('destroy');$('#esign-wizard').dialog('close');$('#esign-wizard').remove();
							if(obj.esignObj){
								
								if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_unpublish"){
									$("#edit-catalog-course-save-unpublish").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_publish"){
									var data = saveInteractionsH5PWrapper(this);
									if(data == false)
									{
										return false;
									}
									$("#INTERACTIONDATA").val(data);
									$("#content_save_pub_btn").click();
									
								}
								if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit"){
										var data = saveInteractionsH5PWrapper(this);
										if(data == false)
										{
											return false;
										}
										$("#INTERACTIONDATA").val(data);
										$("#content_save_btn").click();
								}
								if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new"){
										$("#content_save_btn").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new_publish"){
									$("#content_save_pub_btn").click();
								}
								else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new_unpublish"){
										$("#edit-catalog-course-save-unpublish").click();
								}
								if(obj.esignObj.esignFor == "contentAuthorPresentationInteractions"){
									saveInteractionsH5PWrapper(null,obj.esignObj.paramForPublish);
									
								}								
								
								
								if(obj.esignObj.esignFor == "InstructorCancel"){
								$("#instructor-tab-inner").data("instructordesk").dropEnrollCall(obj.esignObj.enrollId,obj.esignObj.baseType,
										obj.esignObj.refundflag,obj.esignObj.isCommerceEnabled,
										obj.esignObj.assMand,obj.esignObj.learnerId,obj.esignObj.classid);
								//$("#dropMsg-wizard").show();
								$("#dropmsg-content").html(Drupal.t("MSG424"));
								}else if(obj.esignObj.esignFor == "InstructorMarkComplete"){
									$('#esign-pass-error').css('display','none');
									$("#instructor-tab-inner").data("instructordesk").learnerMarkcompleteLearning(obj.esignObj.userId,
											obj.esignObj.enrolledId,obj.esignObj.classTitle,obj.esignObj.learningType,obj.esignObj.classId);
									//$('#mark-complete-wizard').show();
								}else if(obj.esignObj.esignFor == "ManagerReject"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").dropEnrollCall(obj.esignObj.userId, obj.esignObj.classId,
											obj.esignObj.enrolledId, obj.esignObj.learningType, obj.esignObj.refundFlag, obj.esignObj.isCommerceEnabled, obj.esignObj.assMand, obj.esignObj.classTitle, obj.esignObj.trid); $("#dropmsg-content").html(Drupal.t('MSG424'));
									//$('#reject-wizard').show();
								}else if(obj.esignObj.esignFor == "ManagerMarkComplete"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").markcompleteLearning(obj.esignObj.userId,obj.esignObj.enrolledId,obj.esignObj.classTitle,
											obj.esignObj.rowObj,obj.esignObj.learningType,obj.esignObj.classId,obj.esignObj.trid);
									//$("#mark-complete-wizard").show();
								}else if(obj.esignObj.esignFor == "ManagerAssign"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").renderCallAssignClass(obj.esignObj.userId, obj.esignObj.courseId,
											obj.esignObj.classId, obj.esignObj.rowObj, obj.esignObj.wailist);

								}else if(obj.esignObj.esignFor == "ManagerAssignProgram"){
									$("#lnr-myteam-search").data("lnrmyteamsearch").renderCallObjectAssignClass(obj.esignObj.userId,
											obj.esignObj.prgId, obj.esignObj.assignObject);

								}else if(obj.esignObj.esignFor == "DeleteFunctionality"){
									$("body").data("mulitselectdatagrid").deleteEntity(obj.esignObj.type,obj.esignObj.entityId,obj.esignObj.entityType,obj.esignObj.id);
								}else if(obj.esignObj.esignFor == "AddKeywordToTemplate"){
									$("body").data("mulitselectdatagrid").addKeywordtoTemplate(obj.esignObj.type,obj.esignObj.entityId,obj.esignObj.entityType,obj.esignObj.id,obj.esignObj.kwdName);
								}else if(obj.esignObj.esignFor == "UserAdmin" || obj.esignObj.esignFor == "CatalogClassAdmin"){
									$('#last-button-account').click();
								}else if(obj.esignObj.esignFor == "EsignAdmin"){
									$('.common-esign-save').click();
								}else if(obj.esignObj.esignFor == "UserAddrAdmin"){
									$('.common-esign-save-addr').click();
								}else if(obj.esignObj.esignFor == "AddAdmin"){
									$("#"+obj.esignObj.esignButtId).click();
								}
								else if(obj.esignObj.esignFor == "attachCrsDelete"){
								      $("#"+obj.esignObj.objectId).click();
								}
								else if(obj.esignObj.esignFor == "addScreenDetails"){ //Added by Ganesh for Custom Attribute #custom_attribute_0078975
								     $("#hidden-screen-button").click();
								}
								else if(obj.esignObj.esignFor == "confirmationForMdlDel"){
								     deleteModuleCall(obj.esignObj.objectId, obj.esignObj.moduleId,obj.esignObj.objectType);
								}
								else if(obj.esignObj.esignFor == "DeleteAdminObject"){
									$("#root-admin").data("narrowsearch").callDeleteProcess(obj.esignObj.objectId,obj.esignObj.objectType);
								}else if(obj.esignObj.esignFor == "PublishUnpublishCatalog"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishCat(obj.esignObj.catalogId,obj.esignObj.catalogType,obj.esignObj.actionStatus,obj.esignObj.rowObj);
								}else if(obj.esignObj.esignFor == "displaymessagewizard"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishCat(obj.esignObj.catalogId,obj.esignObj.catalogType,obj.esignObj.actionStatus,obj.esignObj.rowObj);
									$("input[name = 'saveandshow']").click();
								}else if(obj.esignObj.esignFor == "PublishUnpublishProgram"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishPrg(obj.esignObj.programId,obj.esignObj.rowObj);
								}else if(obj.esignObj.esignFor == "ActivateDeactivateResource"){
									$("#root-admin").data("narrowsearch").activateAndDeactivateRsc(obj.esignObj.resourceId,obj.esignObj.resourceType,obj.esignObj.rowObj);
								}else if(obj.esignObj.esignFor == "ActivateDeactivateObject"){
									$("#root-admin").data("narrowsearch").activateAndDeactivateObj(obj.esignObj.objectId, obj.esignObj.objectType, obj.esignObj.rowObj);
								}else if(obj.esignObj.esignFor == "publishAndUnpublishSurveyAssessment"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishSur(obj.esignObj.surveyId, obj.esignObj.surveyType, obj.esignObj.rowObj);
								}else if(obj.esignObj.esignFor == "publishAndUnpublishSurveyAssessmentQuestions"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishQus(obj.esignObj.questionId, obj.esignObj.rowObj);
                               }else if(obj.esignObj.esignFor == "publishAndUnpublishContent"){
                            	   $("#root-admin").data("narrowsearch").publishAndUnpublishCnt(obj.esignObj.contentId, obj.esignObj.rowObj);
                              }else if(obj.esignObj.esignFor == "publishAndUnpublishVideo"){
                            	   $("#root-admin").data("narrowsearch").publishAndUnpublishCntVideo(obj.esignObj.contentId, obj.esignObj.rowObj);
                              }else if(obj.esignObj.esignFor == "publishAndUnpublishPresentation"){
                            	   $("#root-admin").data("narrowsearch").publishAndUnpublishCntPresentation(obj.esignObj.contentId, obj.esignObj.rowObj);
                              }else if(obj.esignObj.esignFor == "publishAndUnpublishBanner"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishBan(obj.esignObj.bannerId, obj.esignObj.bannerType, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "publishAndUnpublishLocation"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishLoc(obj.esignObj.locationId, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "publishAndUnpublishCustom"){//#custom_attribute_0078975
									$("#root-admin").data("narrowsearch").publishAndUnpublishCus(obj.esignObj.CustomId, obj.esignObj.rowObj);}
							  else if(obj.esignObj.esignFor == "publishAndUnpublishNotification"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishNot(obj.esignObj.notificationId, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "publishAndUnpublishModule"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishModuleDialog(obj.esignObj.moduleName, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "publishAndUnpublishDiscount"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishDiscountDialog(obj.esignObj.discountId, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "publishAndUnpublishPayment"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishPaymentDialog(obj.esignObj.paymentId, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "publishAndUnpublishOrder"){
									$("#root-admin").data("narrowsearch").publishAndUnpublishOrderDialog(obj.esignObj.orderId, obj.esignObj.orderStatus, obj.esignObj.rowObj);
							  }else if(obj.esignObj.esignFor == "addReportPublishAndUnpublish"){
							  $("body").data("reportsearch").addReportPublishAndUnpublish(obj.esignObj.statusType);
							  }else if(obj.esignObj.esignFor == "displayWarningWizard"){
								  callInsertProcess(obj.esignObj.dupId,'esign');
							  }else if(obj.esignObj.esignFor == "displayDeleteWizardForum"){
								  switch (obj.esignObj.forumObjType) {
							    	case 'forum':
							    		$("#forum-list-display").data("forumlistdisplay").deleteForum(obj.esignObj.objectId,obj.esignObj.objectType);
							    		break;
							    	case 'topic':
							    		$("#forum-topic-list-display").data("forumlistdisplay").deleteTopics(obj.esignObj.objectId,obj.esignObj.nodeId);
								    	break;
							    	case 'comment':
							    		$("#forum-topic-list-display").data("forumlistdisplay").deleteComments(obj.esignObj.objectId,obj.esignObj.nodeId,obj.esignObj.commentId);
							    		break;
							    }
							  }else if(obj.esignObj.esignFor == "DeleteAdminObjectSettingsList"){
								  $('#deleteAddedList-'+obj.esignObj.objectId).click();
							  }

								$("div#"+obj.esignObj.popupDiv).show();
							}else{
								$('#last-button-account').click();
							}
					}else{
						$('#esign-mandatory-error').css('display','none');
						$('.esign-msg-close-btn').css('display','block');
						$('#esign-pass-error').css('display','block');
						$('#esign-pass').val('');
				    	$("#esign-pass").addClass("esign-pass-txt-error");
					}
				}
		    });
		}else{
			$('#esign-pass-error').css('display','none');
			$('#esign-mandatory-error').css('display','block');
			$('.esign-msg-close-btn').css('display','block');
			$("#esign-pass").addClass("esign-pass-txt-error");
		}
		}catch(e){
			// to do
		}
	},

	deleteDrupalUsers : function(drupalUserId){
		try{
		if(drupalUserId != ""){
			url = resource.base_url+'/?q='+"administration/learning-core/delete-drupal-users";
			var params = {"drupalUserId":drupalUserId};
			$.ajax({
				type: "POST",
				url: url,
				data:  params,
				success: function(result){
					//success
				}
			});
		}
		}catch(e){
			// to do
		}
	},

//Dupliacate for QTIP div function is used in the leaner side under User catalog Block
	getLeanerQtipDiv : function(qtipObj,obj) {
	 try{
		var popupId 	= qtipObj.popupDispId;
		this.qtipLenth = this.qtipLenth+1;
		var entityType = qtipObj.entityType;
		//var courseId = qtipObj.courseId!=undefined?qtipObj.courseId:'';
		var url 			  = resource.base_host+'?q='+qtipObj.url; // resource.base_host+'?q=administration/catalogaccess/33/cre_sys_obt_crs';
		var qtipClass 		  = qtipObj.qtipClass;
		var wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
		var hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
		var setwBubble        = wBubble-5;
		var setBtmLeft        = (setwBubble-104)/2;
		var qtipLeftPos       = (wBubble > 700) ? 400 : (setBtmLeft + 20);
		var tipPos = qtipObj.tipPosition;
		var catalogVisibleId = qtipObj.catalogVisibleId;
		var mLeft = 0;
		var tipPosition 	 = qtipObj.tipPosition;
		var topElements,bottomElements;
		var setTip			 = $(obj).position();
		EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.createLoader(popupId);
		$.ajax({
			 type: "GET",
   	         url: url,
   	         // data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
   	         success: function(data){
				$(".active-qtip-div").remove();
				var paintHtml = topElements+"<div id='paintContent"+popupId+"'>"+data.render_content_main+"</div>"+bottomElements;
				var contentDiv = qtipObj.catalogVisibleId+"_disp";
				$("#"+popupId).append("<div class='bottom-qtip-tip active-qtip-div set-wbubble-left'></div>");
				if(qtipClass == 'display-message-positioning'){
					$("#"+popupId).append("<div id='"+contentDiv+"' class='active-qtip-div "+qtipClass+"'></div>");
				}
				else{
					$("#"+popupId).append("<div id='"+contentDiv+"' class='active-qtip-div'></div>");
				}
				$("#"+contentDiv).html(paintHtml);

				$(".bottom-qtip-tip").css('bottom','0px').css('position','absolute').css('z-index','101');
				$("#"+contentDiv).css('position','absolute').css('left','-'+qtipLeftPos+'px').css('bottom','40px').css('z-index','100');


				var p = $("#"+popupId);
				var position = p.position();
				var divHeight = $("#"+contentDiv).height();
				var parentTopPos = Math.round(position.top) + 10;
				var parentLeftPos = Math.round(position.left);
				this.currTheme = Drupal.settings.ajaxPageState.theme;
			 	if(this.currTheme == "expertusoneV2"){
					 if(tipPosition == 'tipfaceTopMiddle'){
						$('#wizarad-myprofile-skills .ui-jqgrid-bdiv').css({'overflow':'visible'});
						$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
						$("#"+popupId+" .bottom-qtip-tip-up").css({'top':+Math.round(setTip.top)+10+'px','left':Math.round(setTip.left)-21+'px','position':'absolute'});
						$(".bottom-qtip-tip").remove();
						$("#"+contentDiv).css({'position':'absolute','left':Math.round(setTip.left)-270+'px','top':Math.round(setTip.top)+38+'px','z-index':'100'});
						$("#learner-myskill-details .block-title-middle #skill-qtipid .active-qtip-div").css({'top':'86px'});
						$("#learner-myskill-details .block-title-middle #skill-qtipid .bottom-qtip-tip-up").css({'top':'57px','left':'567px'});
					}if(tipPosition == 'tipfaceTopMiddleFaceUp'){
						$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
						$("#"+popupId+" .bottom-qtip-tip-up").css({'top':+Math.round(setTip.top)+10+'px','left':Math.round(setTip.left)-21+'px','position':'absolute'});
						$(".bottom-qtip-tip").remove();
						$("#"+contentDiv).css({'position':'absolute','left':Math.round(setTip.left)-90+'px','top':Math.round(setTip.top)+30+'px','z-index':'100'});

					}
			 	}else {
			 		 if(tipPosition == 'tipfaceTopMiddle'){
							$('#wizarad-myprofile-skills .ui-jqgrid-bdiv').css({'overflow':'visible'});
							$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
							$("#"+popupId+" .bottom-qtip-tip-up").css({'top':+Math.round(setTip.top)+10+'px','left':Math.round(setTip.left)-21+'px','position':'absolute'});
							$(".bottom-qtip-tip").remove();
							$("#"+contentDiv).css({'position':'absolute','left':Math.round(setTip.left)-295+'px','top':Math.round(setTip.top)+38+'px','z-index':'100'});
							$("#learner-myskill-details .block-title-middle #skill-qtipid .active-qtip-div").css({'top':'47px','left':'326px'});
							$("#learner-myskill-details .block-title-middle #skill-qtipid .bottom-qtip-tip-up").css({'top':'18px','left':'628px'});
						}if(tipPosition == 'tipfaceTopMiddleFaceUp'){
							$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
							$("#"+popupId+" .bottom-qtip-tip-up").css({'top':+Math.round(setTip.top)+10+'px','left':Math.round(setTip.left)-21+'px','position':'absolute'});
							$(".bottom-qtip-tip").remove();
							$("#"+contentDiv).css({'position':'absolute','left':Math.round(setTip.left)-90+'px','top':Math.round(setTip.top)+30+'px','z-index':'100'});

						}
			 	}
			 	if(tipPosition == 'tipfaceMiddleRight'){
			 		var tipFrom = qtipObj.tipFrom;
			 		var boxRight = '151px';
			 		var tipRight = '103px';
			 		if(tipFrom == 'addUserOrder'){
			 			boxRight = '130px';
			 			tipRight = '81px';
			 		}
			 		else if(tipFrom == 'addProductOrder'){
			 			boxRight = '165px';
			 			tipRight = '116px';
			 		}
					$("#"+popupId).append("<div class='bottom-qtip-tip-right active-qtip-div set-wbubble-left'></div>");
					$(".bottom-qtip-tip-right").css({'top':+parentTopPos-30+'px','position':'absolute','right': tipRight});
					$(".bottom-qtip-tip").remove();
					$("#"+contentDiv).css({'position':'absolute','right':boxRight,'left':'auto','top':+parentTopPos-125+'px','bottom':'0px','z-index':'100'});
				}
				if($("#"+popupId+" .tab-title").width() > 0 ){
					 var labelWidth = ($("#"+popupId+" .tab-title").width())/2;
					 var bubbleWidth = 32;
					 var setbubblePosition = labelWidth - bubbleWidth;
					 $(".set-wbubble-left").css('left', setbubblePosition +'px');
			    }

				//Set buble tool tip arrow position
				tipPosition       = (qtipObj.tipPosition) ? qtipObj.tipPosition : 'bottomMiddle';
				topElements = '<a class="qtip-close-button" onclick="$(\'.active-qtip-div\').remove();"></a><span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
				bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-blt"></td><td class="bubble-br"></td></tr></tbody></table></span>';
				$("#"+popupId).parent().parent().parent().parent().removeClass("qtip-access-control");

				var paintHtml = topElements+"<div id='paintContent"+popupId+"'><div id='show_expertus_message'></div>"+data.render_content_main+"</div>"+bottomElements;
				var contentDiv = qtipObj.catalogVisibleId+"_disp";
				EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader(popupId);
				$("#"+contentDiv).html(paintHtml);
				if(data.drupal_settings) {
				   $.extend(true, Drupal.settings, data.drupal_settings);
				}
					Drupal.attachBehaviors();
	            }
 			});
	 }catch(e){
			// to do
		}
	},

	paintOtherUserProfile: function(qtipObj){
		try{
		$('.ui-dialog').remove();
		var popupId 	= qtipObj.popupDispId;
		var url 			  = resource.base_host+'?q='+qtipObj.url;
		var contentDiv = qtipObj.catalogVisibleId+"_disp";
		var loaderDivId = qtipObj.dataloaderid;
		var dataIntId = qtipObj.dataIntId;
		var stdid		= this.getLearnerId();
		if(stdid == "0" || stdid == "")
		{
		    self.location='?q=learning/enrollment-search';
	        return;
		}
		$('#paintContent'+popupId).remove(); //0079970: Unable to close the user profile pop up
		this.createLoader(loaderDivId);
		var themeKey = Drupal.settings.ajaxPageState.theme;
		var abstractObj = this;
		$.ajax({
			 type: "GET",
  	         url: url,
  	        // data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
  	         success: function(data){
  	        	 //0033772: Code Re-Factoring - Home page - Remove unwanted JavaScript
			if(Drupal.settings.activeModulesList.myactivity == 'Y')
  	        	abstractObj.include("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_activity/exp_sp_my_activity.js");
			if(Drupal.settings.activeModulesList.myskill == 'Y')
  	        	abstractObj.include("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_skill/exp_sp_my_skill.js");
  	        	if(themeKey == "expertusoneV2"){
	  	        	abstractObj.includecss("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_activity/exp_sp_my_activity_v2.css");
	  	        	abstractObj.includecss("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_skill/exp_sp_my_skill_v2.css");
	  	        	abstractObj.includecss("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_profile/exp_sp_my_profile_v2.css");
  	        	}else{
  	        		abstractObj.includecss("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_activity/exp_sp_my_activity.css");
  	  	        	abstractObj.includecss("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_skill/exp_sp_my_skill.css");
  	  	        	abstractObj.includecss("/sites/all/modules/core/exp_sp_core/modules/exp_sp_my_profile/exp_sp_my_profile.css");
  	        	}
				$("#"+contentDiv).dialog({
					bgiframe: true,
					width:535,
					resizable:false,
					draggable:false,
					closeOnEscape: false,
					modal: true,
					close: function(){
						$('.ui-dialog').remove();
						$('#paintContent'+popupId).remove();
						/*if(document.getElementById('wizarad-myprofile-activity')){
							$('#wizarad-myprofile-activity').myprofileactivity();
							$("#wizarad-myprofile-activity").data('myprofileactivity').destroyLoader('wizarad-myprofile-activity');
						}else if(document.getElementById('wizarad-myprofile-skills')) {
							$("#wizarad-myprofile-skills").myprofileskills();
							$("#wizarad-myprofile-skills").data('myprofileskills').destroyLoader('wizarad-myprofile-skills');
						}*/
					},
					title: Drupal.t('LBL852'),
					overlay:
					{
					   opacity: 0.5,
					   background: '#000000'
					 }

				});
				/*if(qtipObj.dataIntId == 'announcement'){
					$('.ui-widget-overlay').css('z-index','1000');
				}else{
					$('.ui-widget-overlay').css('z-index','99');
				}*/
				$('.ui-widget-overlay').css('z-index','1000');
				var paintHtml = "<div id='paintContent"+popupId+"'>"+data+"</div>";
				$('.ui-dialog #'+contentDiv).html(paintHtml);
				var uiHeightSet = '';
				uiHeightSet = $('.ui-dialog:visible').css('top');
				uiHeightSet = Math.round(uiHeightSet.substring(uiHeightSet.length-2,0)) - 120;
				$('.ui-dialog').css('top',uiHeightSet+'px');
				var profileDialogHeight = $("#"+contentDiv).height();
				$(".ui-dialog #"+contentDiv).css('overflow-y','scroll').css('height',440);
				this.currTheme = Drupal.settings.ajaxPageState.theme;
			 	if(this.currTheme == "expertusoneV2"){
			 	$(".ui-dialog #"+contentDiv).addClass('user-popout-container');
				$('.user-popout-container').find('.block').css("margin-top","10px");
				changeDialogPopUI();
				$('.expertusV2PopupContainer').find('.ui-dialog-content').css("padding","0px 13px");

			 	}
				$("#"+loaderDivId).data(dataIntId).destroyLoader(loaderDivId);
				/* #0039834 Ie The Skills and Profile Activity Loader are Gets Generated and It is not Destroyed So Issue is Identifed For only My-profile Page */
				if(Drupal.settings.activeModulesList.myactivity == 'Y'){
					  if ($.browser.msie && loaderDivId == 'catalog-users') {
						$("#wizarad-myprofile-activity").data('myprofileactivity').destroyLoader('wizarad-myprofile-activity');
					  }
				}
				if(Drupal.settings.activeModulesList.myskill == 'Y'){
					if ($.browser.msie && loaderDivId == 'catalog-users') {
						$("#wizarad-myprofile-skills").data('myprofileskills').destroyLoader('wizarad-myprofile-skills');
				    }
				}
				vtip();
				
				setTimeout(function () {
					    $(".user-popout-container .profile-name-inline .limit-title").trunk8(trunk8.profile_title);
						$(".user-popout-container #userprofile-part .limit-desc").trunk8(trunk8.profile_desc);
			    }, 100);
				
			}

		});
		//$(".user-popout-container .profile-name-inline .limit-title").trunk8(trunk8.profile_title);
		//$(".user-popout-container #userprofile-part .limit-desc").trunk8(trunk8.profile_desc);
		}catch(e){
			// to do
		}
	},
	showHideMultipleLi: function() {
		try{
		var n = 1;
		var $list = $('.messages ul');
		$list.find('li').addClass('visibility').removeClass('hide');
		var totalWidth = 0, actualWidth = 0;
		var divId = (document.getElementById('show_expertus_message')!= null)? '#show_expertus_message' :'#show_expertus_tp_message';
		var divwidth= $(divId).parent().css('width');
		divwidth = parseInt(divwidth.substring(0,divwidth.length-2));
		$list.children().each(function() {
			totalWidth = $(this).width();
			if(totalWidth > actualWidth){
				if(totalWidth >= (divwidth-40)){
					actualWidth = divwidth-40;
				}else{
					actualWidth = totalWidth;
				}
			}

		});
		$list.find('li').removeClass('visibility').addClass('hide');
		$list.find('li:lt(' + n + ')').removeClass('hide');
		//$('.messages ul li').css('width',(actualWidth+5)+'px');
		$list.find('.hide').slideDown('slow', function(){
			if(Drupal.settings.ajaxPageState.theme == "expertusoneV2") {
			$('.msg-minmax-icon').css('background','url("/sites/all/themes/core/expertusoneV2/expertusone-internals/images/ExpertusIcons.png") no-repeat -118px -25px');
		    }else{
			$('.msg-minmax-icon').css('background','url("/sites/all/themes/core/expertusone/expertusone-internals/images/ExpertusIcons.png") no-repeat -118px -25px');
		    }
		});
		$('#message-container').css('visibility','visible');
		}catch(e){
			// to do
		}
	},
	/*selectedOptionTypeDisplay : function(sortbytxt,className,toggleClassName) {
		if (sortbytxt!=null && sortbytxt!=undefined) this.sortbyValue = sortbytxt;
		if(this.sortbyValue!=''){
			if(this.sortbyValue == 'AZ'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL017'));
			}
			else if(this.sortbyValue == 'Time'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL044'));
			}
			else if(this.sortbyValue == 'ClassStartDate'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL045'));
			}
			else if(this.sortbyValue == 'Mandatory'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL022'));
			}
			else if(this.sortbyValue == 'ZA'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL018'));
			}
			else if(this.sortbyValue == 'dateOld'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL019'));
			}
			else if(this.sortbyValue == 'dateNew'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL020'));
			}
			else if(this.sortbyValue == 'type'){
				$('.'+className).text('');
				$('.'+className).text(Drupal.t('LBL021'));
			}
		} else {
			$('.'+className).text('');
		}
		$("body").data("learningcore").sortTypeToggle(toggleClassName);
	},*/

	closeErrorMessage: function() {
		try{
		$('#message-container').remove();
		$('#esign-mandatory-error').css('display','none');
		$('#esign-pass-error').css('display','none');
		$('.esign-msg-close-btn').css('display','none');
		}catch(e){
			// to do
		}
	},

	paintLearningImage : function(cellvalue, options, rowObject) {
		try{
		// console.log('cellvalue=', cellvalue, 'rowObject-', rowObject);
		var html = '';
		var clsImage 				= rowObject['learning_type_image'];
		var dataDelType				= rowObject['learning_type'];
		html += '<div title="' +Drupal.t(dataDelType) + '" class="'+ clsImage +' vtip"></div>';
		return html;
		}catch(e){
			// to do
		}
	},

	deleteLearnWidget : function(contentId, widgetId ){
		try{
			var loaderElement = ($(".salesforce-widget").length) ?  "widget" :  "main";
			this.createLoader(loaderElement); // show loader
			$('.loadercontent').css('z-index','2000');
			var params = {
				id: contentId,
				widgetId: widgetId,
				action: "delete",
				salesforce: ($(".salesforce-widget").length) ? 1: 0
			};
			$.ajax({
				type: "POST",
				url: '/?q=user-preference/update',
				data:  params,
				dataType:  'json',
				success: function(result){
					if (result.session != undefined && result.session == 'session_out') {
						self.location='?q=learning/enrollment-search';
						return;
					}
					$("#" + contentId + " #" + widgetId).remove();
					Drupal.settings.last_left_panel = result.last_left_panel;
					//52001: Change class pop not showing when we click on change class link in action link button in My Enrollment panel
					if(widgetId == 'tab_my_learningplan_customized'){
						$( "#page-container" ).append( '<div id="learningplan-tab-inner" class="dummyelement_tab_my_learningplan" style="display:none;"></div>' );
						Drupal.attachBehaviors('learningplan-tab-inner');
						$( "#learningplan-tab-inner" ).learningplan();
					}
					if(widgetId == 'tab_my_enrollment_customized'){
						$(".page-learning-enrollment-search #page-container" ).append( '<div id="learner-enrollment-tab-inner" class="dummyelement_tab_my_enrollment" style="display:none;"></div>' );
						Drupal.attachBehaviors('learner-enrollment-tab-inner');
						$("#learner-enrollment-tab-inner").enrollment();
						$("#learner-enrollment-tab-inner" ).contentLaunch();
					}
					$('#delete-msg-wizard').remove();
					if (result.sidebar == false) {
						$("body").data("learningcore").removeSideBarSection();
					}
					if (result.last_left_panel == true) {
						$("#highlight-list li:first").find(".delete-widget").css("display","none");
						$("#highlight-list li:first").find(".delete-widget-disabled").css("display","block");
						// Retrive 20 rows, when it was a last panel in left - 51857
						var gridId = $("#highlight-list li:first").find(".ui-jqgrid-btable").attr('id');
						$("#"+gridId).setGridParam({rowNum: 20, rowList: [20,30,40], page:1}).trigger('reloadGrid');
						$("#highlight-list li:first").find(".page_count_view").text(20);
					}
					$("body").data("learningcore").destroyLoader(loaderElement);
				}
			});
		}catch(e){
			// to do
		}

	},

	showWidgetList : function(){
		try {
			var params = { salesforce: ($(".salesforce-widget").length) ? 1: 0 };
			$.ajax({
				type: "GET",
				url: '/?q=user-preference/list',
				data:  params,
				success: function(result){
					if (result == 'session_out') {
						self.location='?q=learning/enrollment-search';
						return;
					}
				  if ($("#user-preference-settings #manage-dd-list").length) {
					  $("#user-preference-settings #manage-dd-list").replaceWith(result);
				  } else {
					  $("#user-preference-settings").append(result);
				  }
				//  $('#manage-dd-list').css('visibility','visible');
				  //Vtip-Display toolt tip in mouse over
				  vtip();
				}
			});
		}catch(e){
			// to do
		}
	},

	addLearnWidget : function(contentId, widgetId ){
		try {
			var loaderElement = ($(".salesforce-widget").length) ?  "widget" :  "main";
			this.createLoader(loaderElement); // show loader
			var params = {
				id: contentId,
				widgetId: widgetId,
				action: "add",
				salesforce: ($(".salesforce-widget").length) ? 1: 0
			};
			$.ajax({
				type: "POST",
				url: '/?q=user-preference/update',
				data:  params,
				dataType: 'json',
				success: function(result){
					//52001: Change class pop not showing when we click on change class link in action link button in My Enrollment panel
					if(widgetId == 'tab_my_learningplan_customized'){
						$(".dummyelement_tab_my_learningplan" ).remove();
					}
					if(widgetId == 'tab_my_enrollment_customized'){
				    	$(".dummyelement_tab_my_enrollment" ).remove();
					}
				  if ($(".region-highlight").length == 0) {
					$("#main-wrapper #content .section").append('<div class="region region-highlight"><ul class="sortable-list" id="highlight-list"></ul></div>');
					createSortableList(".region-highlight .sortable-list");
				  }

				  if (result.sidebar == true && $(".region-sidebar-second").length == 0) {
						$("body").data("learningcore").addSideBarSection();
				  }
				  Drupal.settings.last_left_panel = result.last_left_panel;
				  $("#"+contentId).append(result.content);
				  $('#manage-dd-list').css('visibility','hidden');
				  switch(widgetId) {
				  	case "tab_my_enrollment_customized":
				  		enrFilters = [];
				  		enrFilters.push({filterVal : 'lrn_crs_cmp_enr|lrn_crs_cmp_inp|lrn_crs_cmp_att', attrVal : 'Enrolled', type : 'Enrollmentpart',name: 'status_filter_myenrollment'});
				  		Drupal.settings.myenrolmentSearchStr = '&regstatuschk=lrn_crs_cmp_enr|lrn_crs_cmp_inp|lrn_crs_cmp_att&del_type=&tra_type=&price=&scheduled=&reg=&due=&assignedby=&location=&selectedLocID=&searchText=&sortBy=AZ'				 
				  		$("#learner-enrollment-tab-inner").contentLaunch();
				  		$("#block-take-survey").surveylearner();
				  		if(Drupal.settings.convertion.mylearn_version==1) {
				  			$("#learner-enrollment-tab-inner").contentPlayer();
				  		}
						statusFilterSubmit('myenrollment','AZ');
						$("#learner-enrollment-tab-inner").enrollment();
				  		break;
				  	case "tab_my_learningplan_customized":
				  		prgFilters = [];
				  		prgFilters.push({filterVal : 'lrn_tpm_ovr_enr|lrn_tpm_ovr_inp', attrVal : 'Enrolled', type : 'EnrollmentLP',name: 'status_filter_myprograms'});
					    Drupal.settings.myprogramsSearchStr = '&regstatuschk=lrn_tpm_ovr_enr|lrn_tpm_ovr_inp&del_type=&tra_type=&price=&scheduled=&reg=&due=&assignedby=&location=&selectedLocID=&searchText=&sortBy=AZ';
				  		statusFilterSubmit('myprograms','AZ'); 
				  		$("#learningplan-tab-inner").contentLaunch();
				  		$("#block-take-survey").surveylearner();
				  		if(Drupal.settings.convertion.mylearn_version==1) {
				  			$("#learningplan-tab-inner").contentPlayer();
				  		}
				  		$("#learningplan-tab-inner").learningplan();
						break;
				  	case "tab_instructor_desk_customized":
				  		clsFilters = [];
				  		clsFilters.push({filterVal : 'scheduled', attrVal : 'Scheduled', type : 'Scheduled',name: 'status_filter_myclasses'});
				  		Drupal.settings.myclassesSearchStr = '&regstatuschk=scheduled&del_type=&tra_type=&price=&scheduled=&reg=&due=&assignedby=&location=&selectedLocID=&searchText=&sortBy=AZ';
					  	statusFilterSubmit('myclasses','AZ');
					  	$("#instructor-tab-inner").instructordesk();	
						break;
				  	case "announcement":
				  		$("#div_announcement").announcement();
						break;
				  	case "tab_my_calendar":
				  		$("#catalog-admin-cal").mycalendar();
						break;
				  	case "mytranscript":
						$("#div_my_transcript").mytranscript();
						break;
				  	case "online_users":
				  		$("#expertus-online-users").lnrwhoisonline();
						break;
				  }
				 	if (result.last_left_panel == false) {
				 		$("#highlight-list .delete-widget-disabled").css('display','none');
						$("#highlight-list .delete-widget").css('display','block');
						var gridId = $("#highlight-list li:first").find(".ui-jqgrid-btable").attr('id');
						var rowsView = $("#"+gridId).jqGrid('getGridParam', 'rowNum'); // Check the rows, based on the retrive new results
						if (rowsView > 10 ) {
							$("#"+gridId).setGridParam({ rowNum:10, rowList:[10,15,20], page: 1 }).trigger("reloadGrid");
							$("#highlight-list li:first").find(".page_count_view").text(10);
						}
					}
					attachHandlerToFilterIcon();
					$("body").data("learningcore").destroyLoader(loaderElement);
				}
			});
		}catch(e){
			// to do
		}
	},

	removeSideBarSection : function() {
		try {
			Drupal.settings.mylearning_right = false;
			$(".region-sidebar-second").remove();

			$("#content").addClass("clsContentFull");
			var currentPage = $('.ui-pg-input').val();
			var currentWidth = ($(".salesforce-widget").length) ? $("#block-system-main-menu").width() : $("#header").width();
			if ($("#tab_my_enrollment").length) { // enrollment
			  $("#learner-enrollment-tab-inner").data("enrollment").createLoader('enroll-result-container');
			  $("#enroll-result-container").addClass("clsenroll-result-container");
			  if (Drupal.settings.last_left_panel) {
				  $("#paintEnrollmentResults").jqGrid('setGridParam', { rowNum:20, rowList: [20,30,40], page:1}); // set new grid params, when it was a last panel in left
				  $("#highlight-list li:first").find(".page_count_view").text(20);
			  } else {
				  $("#paintEnrollmentResults").jqGrid('setGridParam', { page:1});
			  }
			  $("#paintEnrollmentResults").jqGrid('setGridWidth', currentWidth);
			  $("#paintEnrollmentResults").trigger("reloadGrid");
			}

			if ($("#tab_my_learningplan").length) { // lp
			  $("#learningplan-tab-inner").data("learningplan").createLoader('enroll-lp-result-container');
			  $("#enroll-lp-result-container").addClass("clsenroll-lp-result-container");
			  if (Drupal.settings.last_left_panel) {
				  $("#paintEnrollmentLPResults").jqGrid('setGridParam', { rowNum:20, rowList: [20,30,40], page:1});  // set new grid params, when it was a last panel in left
				  $("#highlight-list li:first").find(".page_count_view").text(20);
			  } else {
				  $("#paintEnrollmentLPResults").jqGrid('setGridParam', { page:1});
			  }
			  $("#paintEnrollmentLPResults").jqGrid('setGridWidth', currentWidth);
			  $("#paintEnrollmentLPResults").trigger("reloadGrid");
			}

			if ($("#tab_instructor_desk").length) { // my classes
			  $("#instructor-tab-inner").data("instructordesk").createLoader('instructor-result-container');
			  $("#instructor-result-container").addClass("clsinstructor-result-container");
			  if (Drupal.settings.last_left_panel) {
				  $("#paintInstructorResults").jqGrid('setGridParam', { rowNum:20, rowList: [20,30,40], page:1});  // set new grid params, when it was a last panel in left
				  $("#highlight-list li:first").find(".page_count_view").text(20);
			  } else {
				  $("#paintInstructorResults").jqGrid('setGridParam', { page:1});
			  }
			  $("#paintInstructorResults").jqGrid('setGridWidth', currentWidth);
			  $("#paintInstructorResults").trigger("reloadGrid");
			}

			$(".enroll-bottom-curve").addClass("clsRightNoData");
		}catch(e){
			// to do
		}
	},

	addSideBarSection : function() {
		try {
			Drupal.settings.mylearning_right = true;

			if ($(".region-sidebar-second").length == 0) {
				$("#main-wrapper #main").append('<div class="region region-sidebar-second column sidebar"><ul class="sortable-list" id="sidebar_second-list"></ul></div>');
				createSortableList(".region-sidebar-second .sortable-list");
			}

			$("#content").removeClass("clsContentFull");
			var currentPage = $('.ui-pg-input').val();

			if ($("#tab_my_enrollment").length) { // enrollment
			  var currentWidth = $("#enroll-result-container").width();
			  $("#learner-enrollment-tab-inner").data("enrollment").createLoader('enroll-result-container');
			  $("#enroll-result-container").removeClass("clsenroll-result-container");
			  $("#paintEnrollmentResults").jqGrid('setGridWidth', currentWidth);
			  $("#paintEnrollmentResults").trigger("reloadGrid",[{page:currentPage}]);

			}

			if ($("#tab_my_learningplan").length) { // lp
			  var currentWidth = 663;
			  $("#learningplan-tab-inner").data("learningplan").createLoader('enroll-lp-result-container');
			  $("#enroll-lp-result-container").removeClass("clsenroll-lp-result-container");
			  $("#paintEnrollmentLPResults").jqGrid('setGridWidth', currentWidth);
			  $("#paintEnrollmentLPResults").trigger("reloadGrid",[{page:currentPage}]);

			}

			if ($("#tab_instructor_desk").length) { // my classes
			  var currentWidth = $("#instructor-result-container").width();
			  $("#instructor-tab-inner").data("instructordesk").createLoader('instructor-result-container');
			  $("#instructor-result-container").removeClass("clsinstructor-result-container");
			  $("#paintInstructorResults").jqGrid('setGridWidth', currentWidth);
			  $("#paintInstructorResults").trigger("reloadGrid",[{page:currentPage}]);

			}

			$(".enroll-bottom-curve").removeClass("clsRightNoData");
		}catch(e){
			// to do
		}
	},

	displayDeleteWizardLearner : function(title,objectId,objectType,wSize){
		try {
			var uniqueClassPopup = '';
			var currTheme = Drupal.settings.ajaxPageState.theme;
			var wSize = (wSize) ? wSize : 300;
			var closeButAction = '';

			closeButAction = function(){ $("body").data("learningcore").deleteLearnWidget(objectType,objectId); };
			$('#delete-msg-wizard').remove();
		    var html = '';
		    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
		    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
			if(currTheme == 'expertusoneV2'){
		    		html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+''+'?'+'</td></tr>';
		    } else {
		    		html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+''+'?'+'</td></tr>';
		    }
		    html+='</table>';
		    html+='</div>';
		    $("body").append(html);
		    var closeButt={};
		    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};
		    closeButt[Drupal.t('Yes')]= closeButAction;

		    $("#delete-msg-wizard").dialog({
		        position:[(getWindowWidth()-400)/2,200],
		        bgiframe: true,
		        width:wSize,
		        minHeight:"auto",
		        resizable:false,
		        modal: true,
		        title: Drupal.t('LBL082') + ' ' + Drupal.t('Panel'),//"title",
		        buttons:closeButt,
		        closeOnEscape: false,
		        draggable:false,
		        overlay:
		         {
		           opacity: 0.9,
		           background: "black"
		         }
		    });
		    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+uniqueClassPopup+"'></div>");

		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
		    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

		    $("#delete-msg-wizard").show();

			$('.ui-dialog-titlebar-close').click(function(){
		        $("#delete-msg-wizard").remove();
		    });
			if(currTheme == 'expertusoneV2'){
		    	changeDialogPopUI();
		    }
			$("#delete-msg-wizard .commanTitleAll").css('padding','30px 24px');
			/*-- 37211: Unable to delete a class in FF version 32.0 --*/
		    if($('div.qtip-defaults').length > 0) {
		    	var prevZindex = $('.qtip-defaults').css('z-index');
		    	$('#delete-object-dialog .ui-widget-content').css('z-index', prevZindex+2);
		    	$('.ui-widget-overlay').css('z-index', prevZindex+1);
		    }
		}catch(e){
			// to do
		}
	},
	refreshJScrollPane: function(selector) {
		try {
			if($(selector).data('jsp') !== undefined) {
				$(selector).data('jsp').reinitialise();
				setTimeout(function () {
					if($(selector+" .jspContainer").find('.jspVerticalBar').length==0){
						$(selector+' .jspPane').css('top','0px');
					}
				},100);
			} else {
				$(selector).jScrollPane({ autoReinitialise: true });
			}
		} catch(e) {
			// window.console.log(e, e.stack);
		}
	},
	refreshLastAccessedLearningRow: function(grid, gridRow) {
		try {
			var rowFound = false;
			// console.log('refreshLastAccessedLearningRow', console.trace());
			var grid = $(grid);
			if(gridRow === undefined) {
				var gridRow = grid.jqGrid('getGridParam', 'lastAccessedRow');
			}
			if(gridRow !== undefined && gridRow != null && typeof gridRow.id != 'undefined') {
				// console.log(gridRow, gridRow.id);
				var enrId = gridRow.id;
				// console.log('refreshLastAccessedLearningRow enr_id', enrId);
				var options = {data: {enr_id: enrId,page:1,rows:1}};
				grid.jqGrid('updateRowByRowId', options);
				rowFound = true;	// return true to stop the grid reload
				grid.jqGrid('setGridParam', {lastAccessedRow: null});	// set it to null to avoid grid reload confusions
			} else {
				// grid.trigger("reloadGrid",[{page:1}]);
				rowFound = false;	// return false so that reload of grid happens as no last accessed grid row found
			}
		} catch(e) {
			rowFound = false;
			// window.console.log(e, e.stack);
		}
		// window.console.log(rowFound);
		return rowFound;
	}
});

$.extend($.ui.learningcore.prototype,EXPERTUS_SMARTPORTAL_AbstractManager, EXPERTUS_SMARTPORTAL_AbstractDetailsWidget,{defaults:{start:true}});

})(jQuery);

$(function() {
	try{
	$("body").learningcore();

  //below code to load showHideMultipleLi() for messgae display
  var wrul=window.location;
	wrul=wrul.toString();
	var tmp=$('#message-container').html();
	if((tmp != null) &&(tmp != '')){
		if(wrul.indexOf("cart")>=0 || wrul.indexOf("administration/order")){
			$('body').data('learningcore').showHideMultipleLi();
		}
	}


  // Command to update score on video ctools modal close
  Drupal.ajax.prototype.commands.updateVODScoreOnCtoolsModalClose = function(ajax, response, status) {
    if (typeof Drupal.CTools.Modal.closeCommand.updateVODScore === 'undefined') {
      //console.log('exp_sp_learning.js : updateVODScoreOnCtoolsModalClose() - response.launched_from = ' + response.launched_from);
      //console.log('exp_sp_learning.js : updateVODScoreOnCtoolsModalClose() - response.course_id = ' + response.course_id);
      //console.log('exp_sp_learning.js : updateVODScoreOnCtoolsModalClose() - response.class_id = ' + response.class_id);
      //console.log('exp_sp_learning.js : updateVODScoreOnCtoolsModalClose() - response.lesson_id = ' + response.lesson_id);
      //console.log('exp_sp_learning.js : updateVODScoreOnCtoolsModalClose() - response.enroll_id = ' + response.enroll_id);
      //console.log('exp_sp_learning.js : updateVODScoreOnCtoolsModalClose() - response.prev_content_status = ' + response.prev_content_status);
      Drupal.CTools.Modal.closeCommand.updateVODScore =
        (function (launchedFrom, courseId, classId, lessonId, versionId,enrollId, prevContentStatus, videoSessionId) {
          var jsObject = 'contentLaunch';
          var objectSelector = '';
           if (launchedFrom == 'LP') {
             var objectSelector = '#learningplan-tab-inner';
           }
           else if (launchedFrom == 'ME') {
        	   if(document.getElementById('lnr-catalog-search'))
        		   var objectSelector = '#lnr-catalog-search';
        	   else
             		var objectSelector = '#learner-enrollment-tab-inner';
           }

           return { cmd: function () {
        	   			  $( "#launch-content-container" ).parent().parent('.ui-widget-content').css( "visibility", "visible" );
        	   			  $("#lplaunch-content-container" ).parent().parent('.ui-widget-content').css( "visibility", "visible" );
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - jsObject = ' + jsObject);
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - launchedFrom = ' + launchedFrom);
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - courseId = ' + courseId);
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - classId = ' + classId);
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - lessonId = ' + lessonId);
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - enrollId = ' + enrollId);
                           //console.log('exp_sp_learning.js : updateVODScore.cmd() - prevContentStatus = ' + prevContentStatus);

                           $(objectSelector).data(jsObject).updateVODScoreOnCtoolsModalClose(
                               launchedFrom,
                               courseId,
                               classId,
                               lessonId,
                               versionId,
                               enrollId,
                               prevContentStatus,
							   videoSessionId,
							   response.type,
							   response.h5p_cnt_id
							   );
                         }
                   };
        })(response.launched_from, response.course_id, response.class_id, response.lesson_id,response.version_id, response.enroll_id, response.prev_content_status, response.video_session_id);
    }
  };

  Drupal.ajax.prototype.commands.ctoolsModalCreateLoader = function(ajax, response, status) {
    EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.createLoader('modal-content');
    $('.ctool-video-modal .ctools-modal-content .ctools-sample-modal-content ctools-face-table').css('margin', '0 auto');
    $('.ctool-video-modal .loaderimg').css('margin', '0 auto');
    $( "#launch-content-container" ).parent().parent('.ui-widget-content').css( "visibility", "hidden" );
    $("#lplaunch-content-container" ).parent().parent('.ui-widget-content').css( "visibility", "hidden" );
	seekForFirstTime = false;
	if(videojs !== undefined && response.video_id !== undefined) {
	disposeVideoJSPlayer(response.video_id);
	videojs(response.video_id, {}, function(){
	  // Player (this) is initialized and ready.
	  var vodPlayer = this;
	  vodPlayer.on('mouseout', function(){ 
		  this.controls(false);
		});

		vodPlayer.on('mouseover', function(){
		  this.controls(true);
		});
	  // $('#'+response.video_id).css('visibility', 'visible');
	  // $('#'+response.video_id).find('video').css('visibility', 'visible');
	  winobj = {closed: false};
	  SCORM_API_WRAPPER.prototype.refreshSession();
	  if(response.play_from !== undefined) {
	    vodPlayer.currentTime(response.play_from);
	    vodPlayer.play();
		seekForFirstTime = true;
	  }
	  vodPlayer.on('loadedmetadata', function() {
		if(seekForFirstTime && response.play_from > this.currentTime()) {
		  this.currentTime(response.play_from);
		  seekForFirstTime = false;
		}
	  });
      if(response.launchedFrom == 'LP'){
          setObj = $("#learningplan-tab-inner").data("contentLaunch");
      }
	  else if(response.launchedFrom == 'ME'){
		  if(document.getElementById('lnr-catalog-search'))
			  setObj = $("#lnr-catalog-search").data("contentLaunch");
		  else
          	setObj = $("#learner-enrollment-tab-inner").data("contentLaunch");
      }
	  updateStatusToDB = setInterval(function(){updateVideoProgressToDB(response,setObj); },Drupal.settings.content);
	  vodPlayer.on('durationchange', function() {
		this.controlBar.progressControl.seekBar.loadProgressBar.update();
	  });
	  $('#loaderdivmodal-content').remove();
	  ajaxInterval = vodPlayer.setInterval(function() {
	    updateVideoProgress(vodPlayer);
	  }, 1000, vodPlayer);
      
	  var updateFreq = (response.update_frequency !== undefined ? (response.update_frequency * 1000) : 10000);
	  saveInterval = setInterval(function() {
	    saveVideoProgress(vodPlayer, false);
	  }, updateFreq, vodPlayer);
      
	  vodPlayer.on('ended', function(){
	    vodPlayer = this;
		if(vodPlayer.techName_ == 'Youtube') {
			vodPlayer.pause();
			vodPlayer.play();
		}
	    var progress	= 100; // when player cursor moved at the end.
	    videoTrackerProgress = {
	      session_id: response.video_id,
	      current_position: this.currentTime(),
	      progress: progress,
	      video_duration: this.duration(),
	      additional_data: {video_session_id: response.video_id}
	    };
	    saveVideoProgress(vodPlayer, true);
	    updateVideoProgressToDB(response,setObj);
	    clearInterval(saveInterval);
	    clearInterval(ajaxInterval);
	    clearInterval(updateStatusToDB);
	  });
	});
	}
  };


  Drupal.behaviors.expInitJWPlayer =  {
    attach: function (context, settings) {
      //alert('In exp_sp_learning.js : Drupal.behaviors.expInitJWPlayer attach()');
      $('.exp-jwplayer:not(.exp-jwplayer-initialized)').addClass('exp-jwplayer-initialized').each(function () {
        //alert($(this).data('exp-jwplayer-settings'));
        var jwPlayerSettings = eval('(' + $(this).data('exp-jwplayer-settings') + ')');
        jwPlayerSettings.events = {
        		onReady : function() {
        			EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader('modal-content');/*this.play();*/
        			// console.log(this);
//        			this.seek(100);
        			expjwPlayerSettings = this;
        		},
        		onError : function(e) {
        			$('.exp-jwplayer-container').hide();
        			$('.no-video-found').show();
        		},
        		onComplete: function() {
					// console.log("video completed!");
				}
        };
        var initDivId = $(this).attr('id');
        //alert ('In exp_sp_learning.js : Drupal.behaviors.expInitJWPlayer attach() : id = ' + initDivId);
        if (typeof jwplayer === "undefined") {
          //alert("In exp_sp_learning.js : jwplayer is undefined");
          $.getScript("/sites/all/modules/core/exp_sp_core/js/jwplayer/jwplayer.js",
              function() {
                jwplayer(initDivId).setup(jwPlayerSettings);
              }
          );
        }
        else {
          //alert("In exp_sp_learning.js : jwplayer is already defined");
          jwplayer(initDivId).setup(jwPlayerSettings);
        }
        if(document.getElementById('launch-lp-wizard')){
        	$('#launch-lp-wizard').parent().css('display', 'none');
        }
        else if(document.getElementById('launch-wizard')){
        	$('#launch-wizard').parent().css('display', 'none');
        }
      });
    }
  };

  Drupal.behaviors.expInitJWPlayerYouTube =  {
    attach: function (context, settings) {
      //alert('In exp_sp_learning.js : Drupal.behaviors.expInitJWPlayerYouTube attach()');
      $('.exp-jwplayer-yt:not(.exp-jwplayer-yt-initialized)').addClass('exp-jwplayer-yt-initialized').each(function () {
        //alert($(this).data('exp-jwplayer-yt-settings'));
        var jwPlayerSettings = eval('(' + $(this).data('exp-jwplayer-yt-settings') + ')');
        jwPlayerSettings.events = {
        		onReady : function() {
        			EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader('modal-content');/*this.play();*/
					// console.log(this);
       			// this.seek(100);
					expjwPlayerSettings = this;
        			},
    			onError : function(e) {
    				// console.log("video error!");
        		},
        		onComplete: function() {
					// console.log("video completed!");
				}
        };
        var initDivId = $(this).attr('id');
        //alert ('In exp_sp_learning.js : Drupal.behaviors.expInitJWPlayerYouTube attach() : id = ' + initDivId);
        if (typeof jwplayer === "undefined") {
          //alert("In exp_sp_learning.js : jwplayer is undefined");
          $.getScript("/sites/all/modules/core/exp_sp_core/js/jwplayer/jwplayer.js",
              function() {
                jwplayer(initDivId).setup(jwPlayerSettings);
              }
          );
        }
        else {
          //alert("In exp_sp_learning.js : jwplayer is already defined");
          jwplayer(initDivId).setup(jwPlayerSettings);
        }
      });
    }
  };
	}catch(e){
		// to do
		// console.log(e);
	}
});

(function($) {
	$.fn.getNewEsignPopup = function(esignObj){
	try{
	var obj = new Object;//this;
	if(typeof(esignObj) == "string"){
		$.fn.getNewEsignPopup.esignObj = $.parseJSON(esignObj);
	}else{
		$.fn.getNewEsignPopup.esignObj = esignObj;
	}
	url = resource.base_url+'/?q='+"ajax/learningcore/getConcatenatedUserDets";
	$.ajax({
		type: "POST",
		url: url,
		//data:  '', //Commented by ganeshbabuv to avoid the data value as null when invoke the ajax callback for implement salesforce cookieless option #0054508 on 30th Sep 2015 10:40 AM
		success: function(details){
			obj.esignObj = $.fn.getNewEsignPopup.esignObj;
		    $('#esign-wizard , #esign-wizard-dialog').remove(); // esign-wizard-dialog Removed For this Issue #0038827
		    var html = "";
		    html += '<div id = "esign-wizard" class="esign-wizard-class">';
		    html += '<div id="esign-pass-error"><span class="esign-span-error">'+details[0].password_valid_txt+'</span></div>';
		    html += '<div id="esign-mandatory-error"><span class="esign-span-error">'+details[0].password_req_txt+'</span></div>';
		    html += '<div class="esign-msg-close-btn" onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();"></div>';
		    html += '<div id="esign-message">'+details[0].esign_static_message+'</div>';
		    html += '<table class="esign-table" cellpadding="3" cellspacing="0" border="0" valign="center">';
		   // html += '<tr><td><table cellpadding="4" cellspacing="0" border="0" valign="center">';
		    html += '<tr><td class="esign-labels esign-field-label">'+details[0].esign_date_txt+' : </td><td class="esign-label-values esign-label-values-container">'+details[0].curr_date_time+'&nbsp;';
			html += details[0].time_zone+'</td></tr>';
			html += '<tr><td class="esign-field-label esign-field-label-name">'+details[0].esign_name_txt+' : </td><td class="esign-label-values esign-field-label-name">'+details[0].full_name+'</td></tr>';
			//html += '</table>';

			//html +='<table cellpadding="4" cellspacing="0" border="0" valign="center">';
			html +='<tr><td class="esign-field-label">'+details[0].esign_uname_txt+' :</td>';
			html +='<td class="esign-label-values"><input id="esign-uname" tabindex="1001" type ="text" disabled="true" class="readonly-text" value="'+details[0].user_name+'" maxlength = "60" size ="32" readonly></td>';
			html +='</tr>';
			html +='<tr><td class="esign-field-label">'+details[0].esign_pass_txt+' :<span class="require-text">*</span></td>';
			html +='<td class="esign-label-values"><input id="esign-pass" tabindex="1002" type ="password" name = "'+SMARTPORTAL.t('Password')+'" maxlength = "60" size ="32"></td>';
			html +='</tr>';
			html +='</table>';
			//html +='</td></tr></table>';
			html +='</div>';
		    $("body").append(html);
		    var closeButt={};
		    closeButt[details[0].esign_cancel_txt]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#esign-wizard').remove();
		    if(esignObj){
		    	if(obj.esignObj.esignFor == "AddAdmin"){
		    		$("body").data("learningcore").deleteDrupalUsers(obj.esignObj.drupalUserId);
				}else if(obj.esignObj.esignFor == "contentAuthorPresentationInteractions") 
				{
					//$("#h5p_presentation_frame").contents().find("#h5p-content-node-form").attr("esigndisplayed","off");
					$(".h5p-editor-iframe").attr("esigndisplayed","off");
				}else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit" || obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_publish" || obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_unpublish"){
							$(".h5p-editor-iframe").attr("esigndisplayed","off");
					}
				else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new" || obj.esignObj.esignFor == "contentAuthorAddInteractions_new_publish" || obj.esignObj.esignFor == "contentAuthorAddInteractions_new_unpublish"){
							$("#exp-sp-administration-contentauthor-addedit-form").attr("esigndisplayed","off");
					}
				else if(obj.esignObj.esignFor == "attachCrsDelete"){
				
				}
		    	$("div#"+obj.esignObj.popupDiv).show();
		    }
		    };
		    closeButt[details[0].esign_sign_txt]=function(){ $("body").data("learningcore").getNewEvaluateLogin();  };

		    $("#esign-wizard").dialog({
		        position:[(getWindowWidth()-400)/2,200],
		        bgiframe: true,
		        width:348,
		        resizable:false,
		        modal: true,
		        title: details[0].esign_title,
		        buttons:closeButt,
		        closeOnEscape: false,
		        draggable:true,
		        overlay:
		         {
		           opacity: 0.9,
		           background: "black"
		         }
		    });

		    $('#esign-wizard').parent('.ui-dialog').wrap("<div id='esign-wizard-dialog'></div>");

			 setTimeout(function () {
		    	  $('#esign-pass').focus();
		    	}, 10);

			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').attr('tabindex','1003');
			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').attr('tabindex','1004');
			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').attr('id','esign-sign-button');

			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');
			$('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
		    $('#esign-wizard-dialog  .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg esign-admin-save-button-left-bg"></div>');
			$('#esign-wizard-dialog  .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg");
			$('#esign-wizard-dialog  .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
		    $('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("esign-button-wizard").end();
		    $('#esign-wizard-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("esign-close-button").end();

		    if(esignObj){
		    	$("div#"+obj.esignObj.popupDiv).hide();
		    }
		    $("#esign-wizard").show();
		    this.currTheme = Drupal.settings.ajaxPageState.theme;
		 	if(this.currTheme == "expertusoneV2"){
		 	changeChildDialogPopUI('esign-wizard-dialog');
		    }
		 	//when add/attach content E-Sign pop up gets hidden behind the Add content pop up #0030278 And z-index Increased For this Ticket #0040188 and #0040178
		 	$('#esign-wizard').parent('.ui-dialog').parent('#esign-wizard-dialog').prev('#esign-wizard-dialog').remove();
		    $("#esign-wizard-dialog").find('.ui-dialog').css('z-index','60011');
		    $("#esign-wizard-dialog").next('.ui-widget-overlay').css({'z-index':'60010','position':'fixed'});

		   $('.ui-dialog-titlebar-close').click(function(){
		        $("#esign-wizard").remove();
		        if(esignObj){
				    if(obj.esignObj.esignFor == "AddAdmin"){
				    	$("body").data("learningcore").deleteDrupalUsers(obj.esignObj.drupalUserId);
				    }else if(obj.esignObj.esignFor == "contentAuthorPresentationInteractions") 
					{
						//$("#h5p_presentation_frame").contents().find("#h5p-content-node-form").attr("esigndisplayed","off");
						$(".h5p-editor-iframe").attr("esigndisplayed","off");
						
					}
				    else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_edit"  || obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_publish" || obj.esignObj.esignFor == "contentAuthorAddInteractions_edit_unpublish"){
				    	$(".h5p-editor-iframe").attr("esigndisplayed","off");
					}
				    else if(obj.esignObj.esignFor == "contentAuthorAddInteractions_new" || obj.esignObj.esignFor == "contentAuthorAddInteractions_new_publish" || obj.esignObj.esignFor == "contentAuthorAddInteractions_new_unpublish"){
							$("#exp-sp-administration-contentauthor-addedit-form").attr("esigndisplayed","off");
					}
				    
		        	$("div#"+obj.esignObj.popupDiv).show();
		        }
		    });
			$("#esign-pass").keyup(function(event){
			    if(event.keyCode == 13){
			        $("#esign-sign-button").click();
			    }
			});

			//Chrome browser dialog box UI fixes
			//var getScreenWidth = $(window).width()/4;
			//$("#esign-wizard-dialog").find('.ui-dialog').css('left',Math.round(getScreenWidth)+'px');

		}
	});
	return false;
	}catch(e){
		// to do
	}
};
})(jQuery);
function addslashes(str) {
	  return (str + '')
	    .replace(/[\\"']/g, '\\$&')
	    .replace(/\u0000/g, '\\0');
	}
function paintContentStatus(launchInfo, courseId, classId, elementId,lessonCnt,enroll_progress) {
	try{
//	console.log(Drupal.settings.convertion.mylearn_version);
	 if(Drupal.settings.convertion.mylearn_version==0){
	  //  console.log(launchInfo); 
	    var crsClassId      = courseId + '_' + classId
	    var attemptDiv      = 'attempt_left_' + crsClassId;
	    var validityDiv     = 'content_validity_' + crsClassId;
	    var progressDiv     = 'content_progress_' + crsClassId;
//	    console.log('attemptDiv: ' +attemptDiv);
//	    console.log('validityDiv: ' +validityDiv);
	    if (launchInfo.triggering_lesson_details != undefined) {  // content update from launch.js
	    	var isMultiContent  = (lessonCnt > 1) ? true : false;
	        var attemptLeft     = launchInfo.triggering_lesson_details.AttemptLeft;
	        var ValidityDays    = launchInfo.triggering_lesson_details.ValidityDays;
	        var remDays    		= launchInfo.triggering_lesson_details.remDays;
	        var IsLaunchable    = launchInfo.triggering_lesson_details.IsLaunchable;
	        var LaunchType      = launchInfo.triggering_lesson_details.LaunchType;
	        var SuspendData     = launchInfo.triggering_lesson_details.SuspendData;
	    } else {
	        var isMultiContent  = (launchInfo.length > 1) ? true : false;
	        var attemptLeft     = launchInfo[0].AttemptLeft;
	        var ValidityDays    = launchInfo[0].ValidityDays;
	        var remDays    		= launchInfo[0].remDays;
	        var IsLaunchable    = launchInfo[0].IsLaunchable;
	        var LaunchType      = launchInfo[0].LaunchType;      
	        var SuspendData     = launchInfo[0].SuspendData;     
	        
	    }
//	    console.log('attemptLeft' + attemptLeft);
//	    console.log('ValidityDays' + ValidityDays);
//	    console.log('remDays' + remDays);
	    if (attemptLeft != 'notset'){
	       var attemptHtml      = parseInt(attemptLeft) + ' ' + Drupal.t('LBL202');
	       if(document.getElementById(attemptDiv)) {
	           $('#'+attemptDiv).html(attemptHtml);
	       } else {
	           var attemptFullHtml = '<div class="course-attempt-left"><span id="attempt_left_' + crsClassId + '" class="attempts_left">' + attemptHtml + '</span></div>';
	           if (elementId != undefined && IsLaunchable && !isMultiContent) {
	                $('#'+elementId).parents('.top-record-div').append(attemptFullHtml);
	           }
	       }
	    }
	    var remValidityDays = ValidityDays - remDays;
	    if (ValidityDays != '' && remValidityDays !== undefined) {
	    	remValidityDays = parseInt(remValidityDays);
	       var dayString = (remValidityDays == 1) ? Drupal.t('LBL910') : Drupal.t('LBL605');
	       var ValidityHtml     =  parseInt(remValidityDays) + ' ' + dayString + ' ' + Drupal.t('LBL604');
	       if(document.getElementById(validityDiv)) {
	           $('#'+validityDiv).html(ValidityHtml);
	       } else {
	           var validityFullHtml = '<div class="course-content-validity yyyyy">';
	           if (attemptLeft != 'notset') {
	                validityFullHtml += '<span id="content_concat_str_' + crsClassId + '" class="content_concat_string">' + Drupal.t('LBL647') + '</span>';
	           }
	           validityFullHtml += '<span id="content_validity_' + crsClassId + '" class="content_validity">' + ValidityHtml + '</span></div>'; 
	           if (elementId != undefined && IsLaunchable && !isMultiContent) {
	                $('#'+elementId).parents('.top-record-div').append(validityFullHtml);
	           }
	       }       
	    }
	           
	       if(document.getElementById(progressDiv)) {
				var suspend_data = (SuspendData != null && SuspendData != "" && SuspendData != undefined) ? JSON.parse(unescape(SuspendData)) : null;
				var progress = (suspend_data != null && suspend_data != undefined) ? suspend_data['progress'] : 0;
				var progress = (progress == null || isNaN(progress)) ? 0 : progress;
				var progress_data = parseInt(progress) + '% ' + Drupal.t('Completed');
				$('#'+progressDiv).html(progress_data);
	       }else{
	       
	          if(LaunchType == "VOD" && !isMultiContent){       
		            progressFullHtml = '<div class="course-content-validity">';     
		            if ((ValidityDays != '' && remValidityDays !== undefined) || attemptLeft != 'notset') {   
		           	  progressFullHtml += '<span id="content_concat_str_' + crsClassId + '" class="content_concat_string">' + Drupal.t('LBL647') + '</span>';
		          	}
		        	var suspend_data = (SuspendData != null && SuspendData != "" && SuspendData != undefined) ? JSON.parse(unescape(SuspendData)) : null;
					var progress = (suspend_data != null && suspend_data != undefined) ? suspend_data['progress']  : 0;
					progress = isNaN(progress) ? 0 : progress;
					progressFullHtml += '<span id="content_progress_' + crsClassId + '" class="content_validity">' + progress + '% ' + Drupal.t('Completed')+ '</span></div>'; 
	           if (elementId != undefined && IsLaunchable && !isMultiContent) {
	                	$('#'+elementId).parents('.top-record-div').append(progressFullHtml);
	           }
	       }
	    }
	       if(document.getElementById("learning-plan-details-display-content")){
				 var urlpro = resource.base_url+'/?q='+'ajax/get-progress/'+enroll_progress;
				 $.ajax({
						type: "POST",
						url: urlpro,
						data:  {updateFrom: 'TP'},
						success: function(result){
							var res_arr = result.split('*~*');
							progressBarRound(res_arr[2],res_arr[1], 'enr_progress','prm_progress_',$("#lnr-catalog-search").data("contentPlayer"));
							//progressbarlpdetail(res_arr[2],res_arr[1], 'enr_progress','prm_progress_');
							//change the action button label
							var pro_class = $('#prm_progress_'+res_arr[2]).attr('class');
							var cls_arr = pro_class.split(' ');
							var int_cls_arr = cls_arr[1].split('_');
							if(res_arr[3] == 'lrn_tpm_ovr_cmp'){
								$('#object-registerCls_'+int_cls_arr[2]).html('<div>'+Drupal.t("Completed")+'</div>');
							}
							if(res_arr[3] == 'lrn_tpm_ovr_inc'){
								$('#object-registerCls_'+int_cls_arr[2]).html('<div>'+Drupal.t("Registered")+'</div>');
							}
						}
				 });
			}
	       if($("#select-class-dialog #gview_tbl-paintCatalogContentResults").length) { 
				$("body").data("learningcore").refreshJScrollPane("#select-class-dialog #gview_tbl-paintCatalogContentResults");
		   }
	}else{
		var reg_pro_arr = enroll_progress.split('*~*');
		var progress = 0;
		var enroll_id = reg_pro_arr[0];
		if(reg_pro_arr[1]!='' && reg_pro_arr[1] !=undefined){
			if(reg_pro_arr[1]> 0 && reg_pro_arr[1]<=1){
			   progress = reg_pro_arr[1];
			 }
		}
		var launch_status = reg_pro_arr[2];
		if(document.getElementById("paindContentclsid_"+classId)){
			$('#paindContentclsid_'+classId).attr('alt',enroll_id);
			var oldprogressid = $('.progress_'+classId).attr('id');
			var opid_arr = oldprogressid.split('_');
			if(opid_arr[1]==undefined || typeof opid_arr[1] == 'undefined')
				$('.progress_'+classId).attr('id', 'progress_'+enroll_id);
			else if(opid_arr[1]!=enroll_id){
				$('.progress_'+classId).html('');
				$('.progress_'+classId).attr('id', 'progress_'+enroll_id);					
			}
			$('.paindContentclsid_'+classId).attr('id', 'paindContentResults_'+enroll_id);
			setTimeout(function(){
				if(launch_status==1 || launch_status==undefined || typeof launch_status == 'undefined'){
					if(document.getElementById("course-details-display-content")){
						$('#class_content_more_'+classId).hide();
						$('#class_content_moredetail_'+classId).show();
						$('#paindContentclsid_'+classId).click();
					}else if(document.getElementById("class_detail_content")){
						$('#paindContentclsid_'+classId).click();
					}else if(document.getElementById("learning-plan-details-display-content")){
						$('#paindContentclsid_'+classId).click();
					}
				}
				if(launch_status==0){
					$('#class_content_moredetail_'+classId+' .class-content-wrapper').remove();
				}
				else
					$('.progress').show();
				if(document.getElementById("learning-plan-details-display-content")){
					 var urlpro = resource.base_url+'/?q='+'ajax/get-progress/'+enroll_id;
					 $.ajax({
							type: "POST",
							url: urlpro,
							data:  {updateFrom: 'TP'},
							success: function(result){
								var res_arr = result.split('*~*');
								progressBarRound(res_arr[2],res_arr[1], 'enr_progress','prm_progress_',$("#lnr-catalog-search").data("contentPlayer"));
								//change the action button label
								var pro_class = $('#prm_progress_'+res_arr[2]).attr('class');
								var cls_arr = pro_class.split(' ');
								var int_cls_arr = cls_arr[1].split('_');
								if(res_arr[3] == 'lrn_tpm_ovr_cmp'){
									$('#object-registerCls_'+int_cls_arr[2]).html('<div>'+Drupal.t("Completed")+'</div>');
								}
								if(res_arr[3] == 'lrn_tpm_ovr_inc'){
									$('#object-registerCls_'+int_cls_arr[2]).html('<div>'+Drupal.t("Registered")+'</div>');
								}
							}
					 });
				}
				progressBarRound(enroll_id,progress, 'enr_progress','progress_',$("#lnr-catalog-search").data("contentPlayer"));
				//$("#lnr-catalog-search").data("contentPlayer").progressbardetail(enroll_id,progress, 'enr_progress','progress_');
			},100);
		}
	}
	 if(('#selCompleteBy_'+classId).length>0){
		 $('#selCompleteBy_'+classId).show();
	 }
	}catch(e){
		// To Do
	}
}
function registeredToLaunch(launchInfo_arr,userId,classId,courseId,del_type,enrolled_id,action_status,pre_ass_status)
{
	try{
	if(userId!=0)
	   if(action_status == 'Registered' || action_status == Drupal.t('Registered')){
		   if(document.getElementById("registerCls_"+classId))
			 $("#registerCls_"+classId).html('');
			 var launchLen = launchInfo_arr.length;
			 if(launchLen == 1){
				 if(Drupal.settings.convertion.mylearn_version==1){
					 var launchInfo =  eval(launchInfo_arr[0]);
					 var launch_data = {
						masterEnrollId : 0,
						enrollId :	enrolled_id,
						courseId : courseId, 
						classId  : classId,
						userId : userId,
						LaunchFrom : 'CL',
						defaultContent : '',
						//classTitle:launchInfo["Title"],
						pagefrom : 'launch'
					};
						launch_data = objectToString(launch_data);
						var callLaunchUrlFn = "$('#lnr-catalog-search').data('contentPlayer').playContent(" + launch_data + ");";
						var onclickFun = "$('#lnr-catalog-search').data('contentPlayer').playContent(" + launch_data + ");";
				 }else{
				 	var data ='';
					for(i=0;i<launchLen;i++){
						var launchInfo =  eval(launchInfo_arr[0]);
						if (del_type == 'vod'){
				        	var title = launchInfo["Title"];
						    title = encodeURIComponent(title.replace(/\//g, '()|()'));
						    callLaunchUrlFn = "/?q=learning/nojs/play_video/";
						    callLaunchUrlFn += title + "/";
						    callLaunchUrlFn += escape(launchInfo["ContentSubTypeCode"]) + "/";
						    callLaunchUrlFn += escape(launchInfo["LearnerLaunchURL"].replace(/\//g, '()|()')) + '/';
						    callLaunchUrlFn += "ME" + "/";
						    callLaunchUrlFn += courseId + "/";
						    callLaunchUrlFn += classId + "/";
						    callLaunchUrlFn += launchInfo["ID"] + "/";
						    callLaunchUrlFn += launchInfo["VersionId"] + "/";
						    callLaunchUrlFn += enrolled_id + "/";
						    callLaunchUrlFn += escape(launchInfo["StatusCode"]);
			            }else{
			            	var onclickFun = "$('#lnr-catalog-search').data('contentLaunch').launchWBTContent({'LaunchFrom':'CL','Id':'"+launchInfo["ID"]+"','enrollId':'"+enrolled_id+"','VersionId':'"+launchInfo["VersionId"]+"','VersionNum':'"+launchInfo["VersionNum"]+"','url1':'"+launchInfo['LearnerLaunchURL']+"','courseId':'"+courseId+"','classId':'"+classId+"','url2':'"+launchInfo["PresenterLaunchURL"]+"','ErrMsg':''	,'contentType':'"+launchInfo["ContentType"]+"','Status':'"+launchInfo["Status"]+"','LessonLocation':'"+launchInfo["LessonLocation"]+"','launch_data':'"+launchInfo["LaunchData"]+"','suspend_data':'"+launchInfo["SuspendData"]+"','exit':'"+launchInfo["CmiExit"]+"','AICC_SID':'"+launchInfo["AICC_SID"]+"','MasteryScore':'"+launchInfo["masteryscore"]+"'});";
			            }
					    break;
					 }
				 }
			}else{
				 if(Drupal.settings.convertion.mylearn_version==1){
					 var launch_data = {
						masterEnrollId : 0,
						enrollId :	enrolled_id,
						courseId : courseId, 
						classId  : classId,
						userId : userId,
						LaunchFrom : 'CL',
						defaultContent : '',
					//	classTitle:'test',
						pagefrom : 'launch'
					};
						launch_data = objectToString(launch_data);
						var onclickFun = "$('#lnr-catalog-search').data('contentPlayer').playContent(" + launch_data + ");";
				 }else{
					var onclickFun ="$('#lnr-catalog-search').data('enrollment').launchMultiContent("+enrolled_id+",this);";
					var data ="[";
					for(i=0;i<launchLen;i++){
						var launchInfo =  launchInfo_arr[i];
						data +="[{'LaunchFrom':'CL','Id':'"+launchInfo["ID"]+"','ContentId':'"+launchInfo["ContentId"]+"','VersionId':'"+launchInfo["VersionId"]+"','VersionNum':'"+launchInfo["VersionNum"]+"','enrollId':'"+enrolled_id+"','Title':'"+addslashes(launchInfo["Title"])+"','ContentTitle':'"+addslashes(launchInfo["Code"])+"','url1':'"+launchInfo["LearnerLaunchURL"]+"','courseId':'"+courseId+"','IsLaunchable':'"+launchInfo["IsLaunchable"]+"','AttemptLeft':'"+launchInfo["AttemptLeft"]+"','ValidityDays':'"+launchInfo["ValidityDays"]+"','remDays':'"+launchInfo["remDays"]+"','daysLeft':'"+launchInfo["daysLeft"]+"','contValidateMsg':'"+launchInfo["contValidateMsg"]+"','classId':'"+classId+"','url2':'"+launchInfo["PresenterLaunchURL"]+"','ErrMsg':'','contentType':'"+launchInfo["ContentType"]+"','contentSubTypeCode':'"+launchInfo["ContentSubTypeCode"]+"','launchType':'"+launchInfo["LaunchType"]+"','ClsScore':'"+launchInfo["ClsScore"]+"','LesScore':'"+launchInfo["LesScore"]+"','ContScore':'"+launchInfo["ContScore"]+"','Status':'"+launchInfo["Status"]+"','ContentStatus':'"+launchInfo["ContentStatus"]+"','Lessoncnt':'"+launchInfo["Lessoncnt"]+"','LessonLocation':'"+launchInfo["LessonLocation"]+"','launch_data':'"+launchInfo["LaunchData"]+"','suspend_data':'"+launchInfo["SuspendData"]+"','exit':'"+launchInfo["CmiExit"]+"','AICC_SID':'"+launchInfo["AICC_SID"]+"','MasteryScore':'"+launchInfo["masteryscore"]+"','contentQuizStatus':'"+launchInfo["contentQuizStatus"]+"','ContentCompletionStatus':'"+launchInfo["ContentCompletionStatus"]+"','StatusCode':'"+launchInfo["StatusCode"]+"'}],";
					}
					data +="]";
			}
			}
			 //$("#registerCls_"+classId).attr('onclick',null);
			 if(document.getElementById("registerCls_"+classId)){
				 $("#registerCls_"+classId).removeAttr('onclick');
				 if(del_type == 'vod' && launchLen == 1){
					// $("#registerCls_"+classId).css({'line-height':'48px','width':'113px'});
					/* $("#registerCls_"+classId).css('position','absolute');
					 $("#registerCls_"+classId).css('height','40px');
					 $("#registerCls_"+classId).css('padding-top','15px');*/
					 if(parseInt(pre_ass_status) == 1){
						 $("#registerCls_"+classId).attr("alt", callLaunchUrlFn);
						 document.getElementById("registerCls_"+classId).setAttribute('onclick',"$('#lnr-catalog-search').data('lnrcatalogsearch').preAssMsgBox("+enrolled_id+",'sinVod');");
						 $("#registerCls_"+classId).html(Drupal.t('LBL199'));
						 $("#registerCls_"+classId).append('<a href="'+callLaunchUrlFn+'" id="dummylaunch'+enrolled_id+'" style="display:none;" class="enroll-launch use-ajax ctools-modal-ctools-video-style">dummy</a>');
					 }else{
						 $("#registerCls_"+classId).addClass(' enroll-launch use-ajax ctools-modal-ctools-video-style');
						 $("#registerCls_"+classId).attr("href", callLaunchUrlFn);
						 $("#registerCls_"+classId).html(Drupal.t('LBL199'));
					 }
					 Drupal.attachBehaviors($("#registerCls_"+classId));
					 var elementId = "registerCls_"+classId;
					 paintContentStatus(launchInfo_arr, courseId, classId, elementId,'',enrolled_id);
				 }else{
					 //console.log("registerCls_"+classId)
					 if( parseInt(pre_ass_status) == 1 && Drupal.settings.convertion.mylearn_version==0){
						 var alertfun = "$('#lnr-catalog-search').data('lnrcatalogsearch').preAssMsgBox("+enrolled_id+");";
						 var funCom = onclickFun+alertfun;
						 //$("#registerCls_"+classId).attr("onclick", alertfun);
						 document.getElementById("registerCls_"+classId).setAttribute('onclick',alertfun);
						 document.getElementById("registerCls_"+classId).setAttribute('alt',onclickFun);
					 }
					 else{
						 document.getElementById("registerCls_"+classId).setAttribute('onclick',onclickFun);
					 }
					 $("#registerCls_"+classId).attr("data",data);
					 $("#registerCls_"+classId).html(Drupal.t('LBL199'));
					 Drupal.attachBehaviors($("#registerCls_"+classId));
					 var elementId = "registerCls_"+classId;
                     paintContentStatus(launchInfo_arr, courseId, classId, elementId,'',enrolled_id);
				 }
				 $("#registerCls_"+classId).attr('id', 'launch'+enrolled_id);
			 }
            //Code commented as per vincent concern ontime only we give the launch offer.
			 if(document.getElementById('tbl-paintCatalogContentResults')){
					$("#lnr-catalog-search").data("lnrcatalogsearch").createLoader('searchRecordsPaint');
					if(typeof $("#lnr-catalog-search").data("lnrcatalogsearch") == 'undefined' || $("#lnr-catalog-search").data("lnrcatalogsearch").refreshLastAccessedCatalogRow() == false) {
						$("#paintContentResults").trigger("reloadGrid");
					}
			 }
	   }
	}catch(e){
		// To Do
	}
}

function remove_qtip(val){
	$(".active-qtip-div").remove();
}

function showUserPreferenceSettings(){
	try{
	
	$('#manage-dd-list').toggle();
	$("body").data("learningcore").showWidgetList();
	if($('#block-exp-sp-learning-tab-user-customization').hasClass('active')){
		$('#block-exp-sp-learning-tab-user-customization').removeClass('active');
	}else{
		$('#block-exp-sp-learning-tab-user-customization').addClass('active');
	}
	if(!$('#block-exp-sp-learning-tab-user-customization').hasClass('active')){
	     $('#block-exp-sp-learning-tab-user-customization').removeClass('active');
	     $('#block-exp-sp-learning-tab-user-customization').height("");
	     }
	}catch(e){
			// To Do
	}
}
function closeUserPreference() {
	$('#manage-dd-list').css('visibility','hidden');
}
function disableWidgetDeleteAction(elementId) {
	try {
		if (document.getElementById(elementId))
			$("#"+elementId).find('.widget-delete-button').addClass('inactiveLink');
	} catch (e){

	}
}
function activateWidgetDeleteAction(elementId) {
	try {
		if (document.getElementById(elementId))
			$("#"+elementId).find('.widget-delete-button').removeClass('inactiveLink');
	} catch (e){

	}
}
function createSortableList(element) {
	try {
		$(element).sortable({
	        axis: 'y',
	        //containment: 'parent',
	        connectWith: element,
	        forceHelperSize: true,
	        forcePlaceholderSize: true,
	        handle: '.block-title',
	        cancel : '.filter-block',
	        opacity: 0.9,
	        zIndex: 2000,
	        //tolerance: 'pointer',
	        placeholder: 'placeholder',
	        helper: "original",
	        sort: function(event, ui) {
	        	if(Drupal.settings.mylearning_right===false){
	        		$(".ui-sortable-helper #block-exp-sp-lnrenrollment-tab-my-enrollment-customized," +
	        			".ui-sortable-helper #block-exp-sp-lnrlearningplan-tab-my-learningplan-customized," +
	        			".ui-sortable-helper #block-exp-sp-instructor-desk-tab-instructor-desk-customized").css('width', '942px');
	           	} else {
	        		$(".ui-sortable-helper #block-exp-sp-lnrenrollment-tab-my-enrollment-customized," +
	            		".ui-sortable-helper #block-exp-sp-lnrlearningplan-tab-my-learningplan-customized," +
	            		".ui-sortable-helper #block-exp-sp-instructor-desk-tab-instructor-desk-customized").css('width', '658px');
	        	}
	        },
			start: function(event, ui) {
	        },
	        stop: function(e, ui) {
	        	$("#block-exp-sp-lnrenrollment-tab-my-enrollment-customized, #block-exp-sp-lnrlearningplan-tab-my-learningplan-customized, #block-exp-sp-instructor-desk-tab-instructor-desk-customized").removeAttr('style');
	        },
	        update: function(event, ui){
	            var changedList = this.id;
	            var order = $(this).sortable('toArray');
	            var positions = order.join(',');
	        	var params = {id: changedList, positions: positions};
	            $.ajax({
					type: "POST",
					url: '/?q=user-preference/update',
					data:  params,
					dataType: 'json',
					success: function(result){
						if (result.session != undefined && result.session == 'session_out') {
							self.location='?q=learning/enrollment-search';
							return;
						}
					}
				});
	        }
	  	});
	}catch(e){
		// to do
	}
}
function getVideoSuspendData() {
	videoTrackerProgress = {
	session_id: session_id,
	current_position: ytPlayer.getCurrentTime(),
	progress: progress,
	video_duration: ytPlayer.getDuration(),
	additional_data: {video_session_id: session_id},
	content_type : 'youtube'
	};  
}
$('body').bind('click', function(event) {
	 try{
		  if(event.target.id != 'user-preference-settings'){
			  $('#manage-dd-list').css('display','none');
		  }
	 }catch(e){
			// to do
}
});
$(document).ready(function() {
	try{
	  $("#cart-form-pane #cart-form-products .sticky-table tr th:last-child").css("border-left"," 0px");
	  /*-- My learning page widget customization --*/
	  if (Drupal.settings.salesforce.type != "iframe") {
		  createSortableList(".region-sidebar-second .sortable-list");
		  createSortableList(".region-highlight .sortable-list");
	  }
	  //52001: Change class pop not showing when we click on change class link in action link button in My Enrollment panel
	  if(document.getElementById('tab_my_learningplan')==null || document.getElementById('tab_my_learningplan')==undefined){
		  //52687: Course after completion is not moving to completed status.Launch button is still retailed in Catalog Page.
		    // added the parent class bcz of above issue.
			$(".page-learning-enrollment-search #page-container" ).append( '<div id="learningplan-tab-inner" class="dummyelement_tab_my_learningplan" style="display:none;"></div>' );
			Drupal.attachBehaviors('learningplan-tab-inner');
			$( "#learningplan-tab-inner" ).learningplan();
		}
	  if(document.getElementById('tab_my_enrollment')==null || document.getElementById('tab_my_enrollment')==undefined){
			$(".page-learning-enrollment-search #page-container" ).append( '<div id="learner-enrollment-tab-inner" class="dummyelement_tab_my_enrollment" style="display:none;"></div>' );
			Drupal.attachBehaviors('learner-enrollment-tab-inner');
			$("#learner-enrollment-tab-inner").enrollment();
			$("#learner-enrollment-tab-inner").contentLaunch();
		}
	  if(document.getElementById('tab_my_learningplan') !== undefined && $("#block-take-survey" ).data('surveylearner') === undefined) {
		  $('<div id="block-take-survey"></div>').insertAfter("#learningplan-tab-inner");
		  Drupal.attachBehaviors('block-take-survey');
		  $("#block-take-survey").surveylearner();
	  }
	if(Drupal.settings.mylearning.user.survey_urlname == 'surveylink') {
		setTimeout(loadSurveyLink,2000);
	}

	  /*-- My learning page widget customization --*/
	}catch(e){
		// to do
	}
});

function addClearIcon(inputElem){
	try {
		var input = inputElem.attr('id');
		var width = inputElem.width();
		inputElem.width(width - 18);
		width = inputElem.width();
		$('<div class="eol-search-clearance"><span id="searchclear" onmousedown="clearInput(this, \''+input+'\')"></span></div>').insertAfter(inputElem)
		.css({
			'margin-left': width+'px',
			'display': 'block'
		});
	} catch(e) {
		// window.console.log(e, e.stack);
	}
}

function removeClearIcon(inputElem) {
	try {
		if(inputElem.siblings('.eol-search-clearance').length > 0) {
			var width = inputElem.width();
			inputElem.width(width + 18);
			width = inputElem.width();
			inputElem.siblings('.eol-search-clearance').remove();
		}
	} catch(e) {
		
		// window.console.log(e, e.stack);
	}
}

function clearInput(_this, input) {
	try {
		var inputElem = $('#'+input);
		inputElem.val('');
		removeClearIcon(inputElem);
	} catch(e) {
		// window.console.log(e, e.stack);
	}
}

$("#search_searchtext, #forum_searchtext, #reports_searchtext, #myteam_searchtext, #narrow-search-calendar-filter").focus(function () {
	try {
		var inputElem = $(this);
		inputElem.val() == '' || addClearIcon(inputElem);
	} catch(e) {
		// window.console.log(e, e.stack);
	}
})
.blur(function(e) {
	try {
		var inputElem = $(this);
		removeClearIcon(inputElem)
	} catch(e) {
		// window.console.log(e, e.stack);
	}
}).keyup(function () {
	var inputElem = $(this);
	if(inputElem.siblings('.eol-search-clearance').length < 1) {
		inputElem.val() == '' || addClearIcon(inputElem);
	} else {
		inputElem.val() == '' && removeClearIcon(inputElem);
	}
});

function locationdetails(qtipObj,seestime){
 
	// convert the string to object
	if(typeof qtipObj == 'string'){
		var qtipObj =  unserialize(qtipObj);
	}
	$('.qtip-popup-visible').html('').hide();
		
	var cls_id = qtipObj.entityId;
	var popupId 	= qtipObj.popupDispId;
	var entId = qtipObj.entityId;
	var qTipOptions = {
		wid : qtipObj.wid,
		heg : qtipObj.heg,
		top:qtipObj.top,
		entityId : qtipObj.entityId,
		popupDispId : qtipObj.popupDispId,
		postype : qtipObj.postype,
		poslwid : (qtipObj.poslwid == '' || qtipObj.poslwid == undefined || qtipObj.poslwid == null) ? '' : qtipObj.poslwid,
		posrwid : (qtipObj.posrwid == '' || qtipObj.posrwid == undefined || qtipObj.posrwid == null) ? '' : qtipObj.posrwid,
		disp	: (qtipObj.qdis == '' || qtipObj.qdis == undefined || qtipObj.qdis == null) ? ''	: qtipObj.qdis,
		linkid	: qtipObj.linkid,
		dispDown : (qtipObj.dispDown == undefined) ? '': qtipObj.dispDown,
		beforeShow: function() {
			$('#'+popupId+' #visible-popup-'+entId+' #bubble-face-table .bubble-c #paintContent'+popupId).html($('#selSessionId-'+entId).html())
		}
	};
	
	if(qtipObj.entityId.indexOf("changeclass") != -1 
		|| qtipObj.entityId.indexOf("assign-learning-") != -1 
		|| qtipObj.entityId.indexOf("course-details-") != -1) {
		qTipOptions.beforeShow = function() {
			$("#wrapper-visible-popup-"+entId).remove();
			$('#'+popupId+' #visible-popup-'+entId+' #bubble-face-table .bubble-c #paintContent'+popupId).html($('#selSessionId-'+entId).html());
			$('#visible-popup-'+entId).css({'visibility': 'hidden'});
		};
		qTipOptions.afterShow = function() {
			setTimeout(function() {
				var offset = $('#'+qtipObj.linkid).offset();
				var newSpan = $('#visible-popup-'+entId).clone()
				.appendTo('body')
				.offset(offset)
				.zIndex(10010)
				.wrap('<div class="location-session-detail-clone" id="wrapper-visible-popup-'+entId+'"></div>')
				.css({'visibility': 'visible'});
				}, 10);
		};
	}
	$('#' + qtipObj.popupDispId).qtipPopup(qTipOptions);
	$('body').bind('click', function(event) {
		if((event.target.id != 'manage-location-time-'+cls_id+'' || event.target.id != 'manage-location-cal-'+cls_id+'')
				&& document.getElementById('paintContentlocation-session-details_'+cls_id) != null ){
			$('.qtip-popup-visible').html('').hide();
		}
	});
}	
function closeQtip(popupId,entId,onClsFn){
    try{
            if(typeof(onClsFn) == 'undefined') onClsFn='';
            if(popupId == '')
                    $('.qtip-popup-visible').html('').hide();
            else
                    $('#'+popupId+' #visible-popup-'+entId).html('').hide();
            
            if(typeof(onClsFn) == 'function') {
                    onClsFn();
            }
    }catch(e){
            
    }
}

function showClassDetailMore(classId,dType,cStatus) {
	try {
		var classId = (classId != undefined) ? classId : 0;
		//console.log("class id - "+classId);
		//console.log("type - "+dType);
		//console.log("status - "+cStatus);
		if (classId > 0) {
			if(document.getElementById('block-exp-sp-coursedetail-course-details'))
				$("#gbox_paint-classes-list #"+classId+" .content-description").find("#arrow-more").click();
			if(document.getElementById('block-exp-sp-learning-plan-detail-learning-details'))
				$(".learning-classes-details #"+classId+" .content-description").find("#arrow-more").click();
			$('#class_content_moredetail_' + classId).slideDown();
			$('#class_content_more_' + classId).hide();
			var enr_id = $('#paindContentclsid_classId').attr('alt');
			if((dType=='lrn_cls_dty_wbt'||dType=='lrn_cls_dty_vod') && ((cStatus=='lrn_crs_cmp_enr' ||  cStatus == 'lrn_crs_cmp_inp' || cStatus == 'lrn_crs_cmp_att') || (cStatus=='' && enr_id>0))){
				$('#class_content_moredetail_'+classId+' .class-content-wrapper').addClass('padbt10');
				if($('#class_content_moredetail_'+classId+' .class-content-wrapper').length >0){
					$('#paindContentclsid_'+classId).click();
				}
			}
			resetInstructorFadeout('#'+classId);
            $('.lmt-cls-desc-add').trunk8(trunk8.class_detail_add_desc);
		}
	} catch(e) {

	}
}

function resetInstructorFadeout(selector,callFrom){
	selector = (selector == null || selector == undefined) ? '' : selector;
	$(selector + ' .content-instructor-block').each(function(){
		var insCnt = $(this).find('.content-instructor-row').size();
		if(insCnt == 1 || (callFrom == 'class' && insCnt == 2)){ // Reset the max-width for instructors
			var w1 = $(this).width();
			w1 = (callFrom == 'class' && insCnt == 2) ? Math.ceil(w1/insCnt) : w1;
			var w2 = $(this).find('.avatar-image').width();
			var w3 = (w1-w2) - 20;
			var pw = (callFrom == 'class' && insCnt == 2) ? 50 : 100; 
			$(this).find('.content-instructor-row').css('width',pw+'%');
			$(this).find('.content-instructor-row .content-instructor-detail').css('max-width',w3+'px');
			$(this).find('.content-instructor-row .content-instructor-detail .class-detail-ins-details-name-fadeout-container').css('max-width',w3+'px');
			$(this).find('.content-instructor-row .content-instructor-detail .class-detail-ins-details-job-fadeout-container').css('max-width',w3+'px');
		}
		$(this).find('.content-instructor-detail .class-detail-ins-details-name-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
		$(this).find('.content-instructor-detail .class-detail-ins-details-job-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
	});

	$(selector + ' .session-details-warpper .session-instructor').each(function(){
		var insCnt = $(this).find('.class-detail-session-instructor-fadeout-container').size();
		var mWidth = $(this).find('.sess-attr-val').width();
		if(insCnt > 1){
			mWidth = Math.ceil(mWidth/insCnt)-10; // subtract the with by 10 for comma and a space between two names
			mWidth = mWidth <= 60 ? 58 : mWidth;
		}
		$(this).find('.class-detail-session-instructor-fadeout-container').css('max-width',mWidth+"px");
		$(this).find('.class-detail-session-instructor-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
	});
	
	$(selector + ' .session-details-warpper .session-name').each(function(){
		var insCnt = $(this).find('.class-detail-session-title-fadeout-container').size();
		var mWidth = $(this).find('.sess-attr-val').width();
		if(insCnt > 1){
			mWidth = Math.ceil(mWidth/insCnt)-10; // subtract the with by 10 for comma and a space between two names
			mWidth = mWidth <= 60 ? 58 : mWidth;
		}
		$(this).find('.class-detail-session-title-fadeout-container').css('max-width',mWidth+"px");
		$(this).find('.class-detail-session-title-fadeout-container').each(function() {
			if($(this).width() >= $(this).find('.title-lengthy-text').width() && $(this).find('.title-lengthy-text').width() != 0) {
				$(this).find('.fade-out-image').remove();
			}
		});
	});
}

function showClassDetailLess(classId) {
	try {
		var classId = (classId != undefined) ? classId : 0;

		if (classId > 0) {
			if(document.getElementById('block-exp-sp-coursedetail-course-details'))
				$("#gbox_paint-classes-list #"+classId+" .content-description").find("#arrow-less").click();
			if(document.getElementById('block-exp-sp-learning-plan-detail-learning-details'))
				$(".learning-classes-details #"+classId+" .content-description").find("#arrow-less").click();
			$('#class_content_moredetail_' + classId).slideUp();
			setTimeout(function(){$('#class_content_more_' + classId).show();},300)
		}
	} catch(e) {
		
	}
}

function updateVideoProgress(vodPlayer) {
	if(vodPlayer === undefined || vodPlayer.duration() == 0) {
		return;
	}

	var percentage 	= (vodPlayer.currentTime() / vodPlayer.duration()) * 100;
	var progress 	= isNaN(percentage) == false ? percentage : 0;

	videoTrackerProgress = {
				session_id: vodPlayer.id_,
				current_position: vodPlayer.currentTime(),
				progress: progress,
				video_duration: vodPlayer.duration(),
				additional_data: {video_session_id: vodPlayer.id_}
			};
}
function updateVideoProgressToDB(response,setObj){
	if($('#video-container').length) {
		var launchedFrom 	= response.launchedFrom;
		var courseId 		= response.video_detail_arr[0]
		var	classId			= response.video_detail_arr[1]
		var	lessonId		= response.video_detail_arr[2]
		var	versionId		= response.video_detail_arr[3]
		var	enrollId		= response.video_detail_arr[4]
		var prevContentStatus = '';
		var launchflag      = 1;
		setObj.updateVODScoreOnCtoolsModalClose(launchedFrom, courseId, classId, lessonId, versionId, enrollId, prevContentStatus, launchflag); 
	}
}
                
function saveVideoProgress(vodPlayer, ended) {
	try {
		if((ended || (videojs(vodPlayer.id_) !== undefined && !vodPlayer.paused())) && vodPlayer.duration() != 0) {
			$.ajax({
				url:"?q=ajax/update-launch/vod",
				type: 'POST',
				data: videoTrackerProgress,
				success: function() {
					// console.log("Call is successful.");
				},
				error: function() {
					// console.log("Call is unsuccessful.");
				},
				complete: function() {
					// console.log("Server update complete.");
        }
      });
    }
	}
	catch(e) {
		// console.log(e);
	}
}
function loadSurveyLink(){
	$.cookie('SurUrlName', null);
	$.cookie('Surpath', null);
	var json_obj = Drupal.settings.mylearning.survey_data;
	var msg_string='';
	msg_string = (Drupal.settings.mylearning.user.survey_objecttype == 'cre_sys_obt_cls') ? Drupal.t('Class') : Drupal.t('Training Plan');
	
	var widgetname;
	if(Drupal.settings.mylearning.user.survey_objecttype == 'cre_sys_obt_cls' && Drupal.settings.mylearning.user.survey_dedicatetpcount < 1)
		widgetname = Drupal.t('MSG858');
	else
		widgetname = Drupal.t('MSG859');
	
	if(Drupal.settings.mylearning.user.survey_userwidget == 0) {
	if(Drupal.settings.mylearning.user.survey_count > 0) {
		if(Drupal.settings.mylearning.user.survey_enrollcount > 0) {
	
	if((Drupal.settings.mylearning.user.survey_recurringcount > 0) || ((Drupal.settings.mylearning.user.survey_recertify == 1) && (Drupal.settings.mylearning.user.survey_sharetype=='multiple')) || (Drupal.settings.mylearning.user.survey_multipleTP >= 1 && Drupal.settings.mylearning.user.survey_enrollcount > 1)) {
		 if(json_obj !== 'null') {
			 if(Drupal.settings.mylearning.user.survey_myenrolltab == 'Yes' || Drupal.settings.mylearning.user.survey_multipleTP >= 1) {
				 if($('#learning_filter_myenrollment_EnrollCompleted').parent().hasClass('checkbox-unselected')) {
					setTimeout(function(){
						$('#myenrollment-learner-menu #learning_filter_myenrollment_EnrollCompleted').click(); 
						selectedMenuFilter('myenrollment','EnrollCompleted','lrn_crs_cmp_cmp');
					}, 10);
					setTimeout(function(){statusFilterSubmit('myenrollment');}, 60);
				 }
			 } 
			 if(Drupal.settings.mylearning.user.survey_myprogramstab == 'Yes' || Drupal.settings.mylearning.user.survey_multipleTP >= 1) {
				 if($('#learning_filter_myprograms_EnrollLPCompleted').parent().hasClass('checkbox-unselected')){
				 	setTimeout(function(){
				 		$('#myprograms-learner-menu #learning_filter_myprograms_EnrollLPCompleted').click();
				 		selectedMenuFilter('myprograms','EnrollLPCompleted','lrn_tpm_ovr_cmp');
				 	}, 150);
				 	setTimeout(function(){statusFilterSubmit('myprograms');}, 200);
				 }
			 }
			 setTimeout(function(){
				 $('#learner-enrollment-tab-inner').data('enrollment').launchMultiSurvey(json_obj);
			 }, 1500);
			 	return;
		 } else
				 return;
		}
			

		if(Drupal.settings.mylearning.user.survey_sharetype == 'single' && Drupal.settings.mylearning.user.survey_enrollstatus == null ) {
			$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('Not Registered')+' '+Drupal.t('LBL102'));
		} else if (Drupal.settings.mylearning.user.survey_id == '' || Drupal.settings.mylearning.user.survey_id == null) {
			$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG850'));
		} else {

		switch(Drupal.settings.mylearning.user.survey_enrollstatus) {
			case 'lrn_crs_cmp_inc': 
			case 'lrn_tpm_ovr_inc':	
			case 'lrn_crs_cmp_nsw':
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('Incomplete')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_crs_reg_can': 
			case 'lrn_tpm_ovr_cln':
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('Canceled')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_crs_reg_rsv':
			case 'lrn_tpm_ovr_rsv':
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('LBL942')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_crs_reg_rsc':	
			case 'lrn_tpm_ovr_rsc':
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('LBL942')+Drupal.t('Canceled')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_crs_cmp_exp': 
			case 'lrn_tpm_ovr_exp':	
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('Expired')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_tpm_ovr_wtl':
			case 'lrn_crs_reg_wtl':
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('LBL138')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_crs_reg_ppm': 
			case 'lrn_crs_reg_ppv':
			case 'lrn_tpm_ovr_ppv':
			case 'lrn_tpm_ovr_ppm': 
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('Pending')+' '+Drupal.t('LBL102'));
				break;
			case 'lrn_crs_cmp_cmp':
			case 'lrn_crs_cmp_enr':
			case 'lrn_crs_cmp_inp':
			case 'lrn_tpm_ovr_cmp':
			case 'lrn_tpm_ovr_enr':
			case 'lrn_tpm_ovr_inp':
				if(Drupal.settings.mylearning.user.survey_status == 0 || (Drupal.settings.convertion.mylearn_version==1 && Drupal.settings.mylearning.user.survey_completion !== 'ALL')) {
					if(Drupal.settings.convertion.mylearn_version==1) { 
						if(Drupal.settings.mylearning.user.survey_objecttype=='cre_sys_obt_cls' && Drupal.settings.mylearning.user.survey_dedicatetpcount < 1) {
							 if(Drupal.settings.mylearning.user.survey_enrollstatus == 'lrn_crs_cmp_cmp' && ($('#learning_filter_myenrollment_EnrollCompleted').parent().hasClass('checkbox-unselected'))) {
										$('#myenrollment-learner-menu #learning_filter_myenrollment_EnrollCompleted').click(); 
										selectedMenuFilter('myenrollment','EnrollCompleted','lrn_crs_cmp_cmp');
									statusFilterSubmit('myenrollment');
							 }	
							 setTimeout(function(){callContentPlayer('');}, 1800);
						} else {
							if((Drupal.settings.mylearning.user.survey_enrollstatus == 'lrn_crs_cmp_cmp' || Drupal.settings.mylearning.user.survey_enrollstatus == 'lrn_tpm_ovr_cmp') && ($('#learning_filter_myprograms_EnrollLPCompleted').parent().hasClass('checkbox-unselected'))){
								setTimeout(function(){
							 		$('#myprograms-learner-menu #learning_filter_myprograms_EnrollLPCompleted').click();
							 		selectedMenuFilter('myprograms','EnrollLPCompleted','lrn_tpm_ovr_cmp');
							 	}, 10);
							 	setTimeout(function(){statusFilterSubmit('myprograms');}, 60);
							 }
							setTimeout(function(){callContentPlayer('');}, 1800);
							}
							} else {
						if(Drupal.settings.mylearning.user.survey_objecttype=='cre_sys_obt_cls' && Drupal.settings.mylearning.user.survey_dedicatetpcount < 1) {
							if(Drupal.settings.mylearning.user.survey_enrollstatus == 'lrn_crs_cmp_cmp' && ($('#learning_filter_myenrollment_EnrollCompleted').parent().hasClass('checkbox-unselected'))) {
								setTimeout(function(){
									$('#myenrollment-learner-menu #learning_filter_myenrollment_EnrollCompleted').click(); 
									selectedMenuFilter('myenrollment','EnrollCompleted','lrn_crs_cmp_cmp');
								}, 10);
								setTimeout(function(){statusFilterSubmit('myenrollment');}, 60);
							}
							setTimeout(function(){
								$("#block-take-survey").data("surveylearner").callTakeSurveyToClass(Drupal.settings.mylearning.user.survey_objectid,""+decodeURIComponent(Drupal.settings.mylearning.user.survey_objectname)+"",""+Drupal.settings.mylearning.user.survey_objecttype+"","survey","",Drupal.settings.mylearning.user.survey_enrollid,"NULL","enroll-result-container");
							}, 600);
							setTimeout(function(){
								$("#block-take-survey").data("surveylearner").moveNext(Drupal.settings.mylearning.user.survey_id);
							}, 650);
						} else {
							if((Drupal.settings.mylearning.user.survey_enrollstatus == 'lrn_crs_cmp_cmp' || Drupal.settings.mylearning.user.survey_enrollstatus == 'lrn_tpm_ovr_cmp') && ($('#learning_filter_myprograms_EnrollLPCompleted').parent().hasClass('checkbox-unselected'))){
								setTimeout(function(){
							 		$('#myprograms-learner-menu #learning_filter_myprograms_EnrollLPCompleted').click();
							 		selectedMenuFilter('myprograms','EnrollLPCompleted','lrn_tpm_ovr_cmp');
							 	}, 10);
							 	setTimeout(function(){statusFilterSubmit('myprograms');}, 60);
							}
							setTimeout(function(){
								$("#block-take-survey").data("surveylearner").callTakeSurveyToClass(Drupal.settings.mylearning.user.survey_objectid,""+decodeURIComponent(Drupal.settings.mylearning.user.survey_objectname)+"",""+Drupal.settings.mylearning.user.survey_objecttype+"","survey","",Drupal.settings.mylearning.user.survey_enrollid,"NULL","enroll-lp-result-container");
							}, 600);
							setTimeout(function(){
								$("#block-take-survey").data("surveylearner").moveNext(Drupal.settings.mylearning.user.survey_id);
							}, 650);
						}	
					}
			} else {
				$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG394'));
			}
		}
		}
	} else {
		$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG849')+' '+msg_string+' '+Drupal.t('MSG847')+' '+Drupal.t('Not Registered')+' '+Drupal.t('LBL102'));
	}
			
	} else {
		$("body").data("learningcore").callMessageWindow('Survey',Drupal.t('MSG850'));
	}
	
	} else {
		$("body").data("learningcore").callMessageWindow('Survey',widgetname);
	}
	$('#select-class-equalence-dialog .ui-dialog').css({'width':'auto', 'min-width':'394px'});
	$('#select-class-equalence-dialog .ui-dialog #commonMsg-wizard tr td:first').height('27');
	$('.ui-dialog #commonMsg-wizard').css('min-height','63px');
	$('.ui-dialog #commonMsg-wizard span.select-greyed-out-text').css({'width': 'auto', 'padding': '0px 16px 16px'});
	$('.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset').css('min-width','auto');
	$('.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset .removebutton').css('margin-right','2px');
}


function RefreshFadeoutForSF(selector,divcont,linecont,fromPage){
 	   if($('.item-title-code').find('.title-lengthy-text').width()>0) {
        	resetFadeOutByClass(selector,divcont,linecont,fromPage);     
        }else{
           setTimeout(function(){RefreshFadeoutForSF(selector,divcont,linecont,fromPage);}, 100);
        }
}

function  Refreshtrunk8( fromPage, lcont) {
	   if($('.limit-title-row').find('.'+lcont).height()>0 ) {
		      if(fromPage=='myenrollments'){
		           $('.limit-title-enr').trunk8(trunk8.myenroll_title);
				   $('.limit-desc-enr').trunk8(trunk8.myenroll_desc);
			  }else if(fromPage=='myprograms'){
				   $('.limit-title-lp').trunk8(trunk8.myprogramLP_title);
				   $('.limit-desc-lp').trunk8(trunk8.myprogramLP_desc);
			  }
	    }else{
	           setTimeout(function(){Refreshtrunk8(fromPage,lcont );}, 100);
	    } 
};
//var reloadFlagForPagination=true;
(function($) {
	try{
	$.widget("ui.narrowsearch",{
						// Static variables
						widgetName : 'narrowsearch',
						widgetInitId : 'root_admin',
						widgetSelector : '#root_admin',
						searchBasePath : '',
						firstTime : true,
						filterSets : new Array(), // Each element of this  array is an object, e.g. {type: "checkbox", code: "orgstatus"}
						lastSortType : '',
						lastSortTypeHtmlId : '',
						exportPath : '',
						printPath : '',
						showTopTextFilter: true,
						topTextFilterLabel:'',
						tabContentType:'narrow_search',
						qtipLoadSet : new Array(),
						qtipLenth : 0,

						_init:function(){
							//this.initAdminLinks();
							this.currTheme = Drupal.settings.ajaxPageState.theme;
							var pageUrl = window.location.search;
							if (pageUrl.indexOf("admincalendar") < 0) // search call restricted for admin cal
								this.getSearchContentDisp();

						},

						getUrlVars : function (name) {
							var vars = {};
							var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
								vars[key] = value;
							});
							return vars[name];
						},

						getModuleURLs : function(){
							var qPath = this.getUrlVars('q');
							if(qPath == 'administration'){
								//qPath = $('#root-admin-links-holder li:first-child a').attr('href');
								//window.location.href = qPath;
								return false;
							}
							var qPathArray = qPath.split('/');
							var urlArray = new Array();
							urlArray['main_module'] = qPathArray[1];
							urlArray['sub_module'] = qPathArray[2];
							return urlArray;
						},

						getSearchContentDisp : function() {
							var obj = this;
							var curObj = this;

							var moduleURLs = obj.getModuleURLs();
							if (moduleURLs === false) {
							  return false;
							}

							/* Highlight root admin menu */
							if($('#block-system-main-menu a[href="/?q=administration"]').hasClass('active') == false){
								$('#block-system-main-menu a[href="/?q=administration"]').addClass('active-trail active');
								$('#block-system-main-menu a[href="/?q=administration"]').parent().addClass('active-trail');
							}
							
						  /* Highlight selected menu links */
						  $("ul.list-item-administrator li a").removeClass("root-admin-links-selected");
						  $("#"+moduleURLs['main_module']).addClass("root-admin-links-selected");

						  /* THE BELOW LINES WRITTEN FOR NEW THEME BY VJ*/
						  $("ul.list-item-administrator li.admin-left-panel-module-list").removeClass("root-admin-module-selected");
						  $("#"+moduleURLs['main_module']).parent().addClass("root-admin-module-selected");
							curObj.createLoader("root-admin-search-right-col");
 							url = obj.constructUrl("administration/search-filter/"+moduleURLs['sub_module']);
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(data){

								   curObj.destroyLoader("root-admin-search-right-col");

								   var detailsObj = jQuery.parseJSON(data);

								   // Extend Drupal.settings, if any settings are present in the data
								   if (detailsObj!=null && detailsObj.drupal_settings) {
								     $.extend(true, Drupal.settings, detailsObj.drupal_settings);
								   }

								   /* Display the various admin tabs, etc. including the tab-content-main div */
                   $("#root-admin-results").html(detailsObj.rendered_main_div);
                   $("#root-admin-results").show();

                   /* Display the content in the main content tab.
                    * For narrow_search, this will render place holder HTML elements for search results jqGrid, sortbar, action bar, etc */
                   $("#tab-content-main").html(detailsObj.rendered_tab_content_main);
                   
                 //Added by vetrivel.P for #0070900
                   if(moduleURLs['sub_module'] == 'user'){
                   var sec = readCookie('user_upload_message');
                   if(sec !== null){
                   		sec = urldecode(sec);
                   		var error = new Array();
                   		error[0] = sec;
                   		$('#show_suspend_message').remove();
                   		 var message = "<div id='show_suspend_message' style='position:absolute;left:0;right:0;'></div></div>";
                   		 var msg='<div id="message-container" style="visibility:visible"><div class="messages error"><ul><li><span>'+error[0]+'</span></li></ul><div class="msg-close-btn" onclick="$(\'#show_suspend_message\').remove();eraseCookie(\'message\');"></div></div></div><img onload="$(\'body\').data(\'learningcore\').showHideMultipleLi();" style="display:none;" src="sites/all/themes/core/expertusone/expertusone-internals/images/close.png" height="0" width="0"/>';
                   		 $('#tab-content-main').prepend(message);
                   		 $("#tab-content-main #show_suspend_message").append(msg);
                   	eraseCookie('user_upload_message');
                   	}
                   }else if(moduleURLs['sub_module'] == 'catalog'){
                       var sec = readCookie('bulk_enrollment_upload_message');
                   if(sec !== null){
                   		sec = urldecode(sec);
                   		var error = new Array();
                   		error[0] = sec;
                   		$('#show_suspend_message').remove();
                   		 var message = "<div id='show_suspend_message' style='position:absolute;left:0;right:0;'></div></div>";
                   		 var msg='<div id="message-container" style="visibility:visible"><div class="messages error"><ul><li><span>'+error[0]+'</span></li></ul><div class="msg-close-btn" onclick="$(\'#show_suspend_message\').remove();eraseCookie(\'message\');"></div></div></div><img onload="$(\'body\').data(\'learningcore\').showHideMultipleLi();" style="display:none;" src="sites/all/themes/core/expertusone/expertusone-internals/images/close.png" height="0" width="0"/>';
                   		 $('#tab-content-main').prepend(message);
                   		 $("#tab-content-main #show_suspend_message").append(msg);
                   	eraseCookie('bulk_enrollment_upload_message');
                   	}
                   }
                  
								   if (detailsObj.rendered_tab_content_type == "narrow_search") { /* If narrow search */
									   /* Display left side filters*/
										 $("#narrow-search").html(detailsObj.rendered_narrow_search_filters);
										 $("#narrow-search").show();
										 if ($('#group_list_count').val() > 4) {
											$('#group_filterset').css({'height': '90px', 'overflow': 'hidden', 'width': '160px'});
											$("#group_filterset").jScrollPane();
										 }

						                /* if ($('#rescountry_filterset #adminFilterlist_country').val() > 5) {
							  				$('#rescountry_filterset').css({'height': '150px', 'overflow': 'hidden', 'width': '160px'});
							  		   		$('#rescountry_filterset').jScrollPane();
						  			     }	*/					              
										 // Ticket No:0080037 (Revision No:0275605, Point No: 2.3) #custom_attribute_0078975
										 var tabHeight= $("#sort-bar-V2").css('height');
										 if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
											 tabHeight = parseInt(tabHeight)-2;
										 
										 /* Display top bar */
										 if (Drupal.settings.ajaxPageState.theme == 'expertusoneV2') {
											 //$("#admin-maincontent_tab").html("<img style='width:24px;height:24px;padding-top:5px;cursor:pointer;' onclick='drawCalendar();' src='/sites/all/themes/core/expertusoneV2/images/calendaricon.png'></img>");
											 $("#admin-maincontent_tab").append(detailsObj.rendered_narrow_search_sortbar);
											 $("#narrow-search-actionbar").remove();
											 // Ticket No:0080037 (Revision No:0275605, Point No: 2.3) #custom_attribute_0078975
											 if(moduleURLs['main_module']=='manage' && (moduleURLs['sub_module']=='announcement' || moduleURLs['sub_module']=='customattribute') && $('#carousel_inner').parent('#carousel_container')) {
												 $("#sort-bar-V2").css('height','0').css('overflow','hidden');
											 }
											 $("#sort-bar-V2").append(detailsObj.rendered_narrow_search_actionbar);
										 }
										 else {
											 $("#narrow-search-results-topbar").html(detailsObj.rendered_narrow_search_sortbar);
											 $("#narrow-search-actionbar").remove();
											 $("#admin-maincontent_tab").append(detailsObj.rendered_narrow_search_actionbar);
										 }
										 $("#narrow-search-results-topbar").show();

									/*	 if (Drupal.settings.ajaxPageState.theme == "expertusoneV2") {
										   var adminSubModelLength = $("ul.AdminsublinktabNavigation li").length;
											 if(adminSubModelLength >= 4) {
											 	 $("ul.AdminsublinktabNavigation li a span span").css('padding','0px 5px 0px 5px');
											 }
										 }*/
										 /* Add class "selected" to this selected tab and raise it up to the front */
										 $( "ul.AdminsublinktabNavigation li").removeClass("selected");
										 $("#admin-tab-"+moduleURLs['sub_module']).parent("li").addClass("selected");
										 resetMainTab(); // Display selected tab if it is in hidden
										 //#custom_attribute_0078975
										//Custom Attribute Changes 
										if(moduleURLs['main_module']=='manage' && $('#carousel_inner').parent('#carousel_container')) {
											var itemcnt = $('#carousel_container #carousel_inner ul li').size();
												// console.log('itemcnt: '+itemcnt);
											if(itemcnt === 6) {
												var sort_width = parseInt($('#sort-bar-V2').width());
													// console.log('load container width: '+sort_width);
												var actionbar_width = parseInt($('#narrow-search-actionbar').width());
													// console.log('load actionbar width: '+actionbar_width);
												var container_width = (sort_width - actionbar_width) - 45;
												var width_calc = '';
												var ulactual_width = $('#carousel_container #carousel_inner ul').width();
													// console.log('ul actual width: '+ulactual_width);
												$('#carousel_container #carousel_inner').css('width', 'auto');
												$('#carousel_container #carousel_inner ul').css('width', 'auto');
												var ul_width = parseInt($('#carousel_container #carousel_inner ul').width());
													// console.log('ul width: '+ul_width);
												var lastli_width = parseInt($('#carousel_container #carousel_inner ul li:last').width());
													// console.log('last li width: '+lastli_width);
												if(container_width > ul_width) {	
													width_calc = container_width;
													$('#carousel_container .last').css('display', 'none');
												} else 
													width_calc = (ul_width - lastli_width) - 4;
												// console.log('carousel_inner width: '+width_calc);
												$('#carousel_container #carousel_inner').css('width', width_calc);
												$('#carousel_container #carousel_inner ul').css('width', ulactual_width);
												
												if(moduleURLs['sub_module']=='customattribute')
													MoveTabNext(itemcnt);
											} else {
												if(moduleURLs['sub_module']=='announcement' || moduleURLs['sub_module']=='customattribute')
													MoveTabNext(itemcnt);
											}
										}
										// Ticket No:0080037 (Revision No:0275605, Point No: 2.3)
										if(moduleURLs['main_module']=='manage' && (moduleURLs['sub_module']=='announcement' || moduleURLs['sub_module']=='customattribute') && $('#carousel_inner').parent('#carousel_container')) {
											setTimeout(function(){
												$("#sort-bar-V2").css('height',tabHeight).css('overflow','visible');
											},500);
										}

										 var linkPath = 'administration/'+moduleURLs['main_module'];
										 var sublinkPath = 'administration/'+moduleURLs['main_module']+'/'+moduleURLs['sub_module'];
										 curObj.initPaths(detailsObj.rendered_tab_content_type);
										 curObj.initFilters();
										 curObj.renderSearchResults(linkPath, sublinkPath);

										 if($('#narrow-search-actionbar')){
								  	   $('#narrow-search-actionbar').hide();
										 }
										 if(typeof detailsObj.rendered_script != 'undefined'){
											 eval(detailsObj.rendered_script+"()");
										 }
										 $('.courselangtype-scroll-list-container, .coursecurrency-scroll-list-container, .contentlang-scroll-list-container, .tpcurrency-scroll-list-container, .surveydetailslang-scroll-list-container, .surveyquestionslang-scroll-list-container, .langtype-scroll-list-container, .grplang-scroll-list-container, .rescountry-scroll-list-container, .announcementlang-scroll-list-container, .ordercurrency-scroll-list-container').jScrollPane({});
				   }
								   else if (detailsObj.rendered_tab_content_type == "ajax-form") {
                     Drupal.attachBehaviors();
                   }
								}
							});
						},

						initPaths : function(tabContentType){   /* Initialize path for search, print, export, filter option */
							if(tabContentType!=""){
							  this.tabContentType=tabContentType;
							}
							if(this.tabContentType=="narrow_search"){
								/* Narrow search filter data lists */
								var filterSetData=$("#narrow-search-filters").attr("data");
								this.filterSets=eval(filterSetData); //commented for issue in Drupal translated strings for french language
								//this.filterSets=eval(filterSetData.replace(/\\u0026#39;/g,"'"));


								/*Sort bar data lists */
								var sortBarData=$("#narrow-search-sortbar").attr("data");
								var sortBarObj = jQuery.parseJSON(eval("'"+ sortBarData +"'"));
								this.lastSortType = sortBarObj.last_sort_type;
								this.lastSortTypeHtmlId = sortBarObj.last_sort_type_html_id;

								/* Action bar data lists */
								var actionBarData=$("#narrow-search-actionbar").attr("data");
								var actionBarObj = jQuery.parseJSON(eval("'"+ actionBarData +"'"));
								this.exportPath = actionBarObj.export_path;
								this.printPath = actionBarObj.print_path;

								/* Other - narrow search data lists */
								var narrowSearchOtherData=$("#narrow-search-results").attr("data");
								var narrowSearchOtherObj = jQuery.parseJSON(eval("'"+ narrowSearchOtherData +"'"));

								this.searchBasePath = narrowSearchOtherObj.search_base_path;
								this.text_filter_ac_path = narrowSearchOtherObj.text_filter_ac_path;
								this.showTopTextFilter = narrowSearchOtherObj.show_top_text_filter;
								this.topTextFilterLabel = narrowSearchOtherObj.top_text_filter_label;

								if(this.topTextFilterLabel==null || this.topTextFilterLabel=="undefined" || this.topTextFilterLabel==undefined){
									this.topTextFilterLabel = (Drupal.settings.ajaxPageState.theme == 'expertusoneV2') ? Drupal.t("LBL304") : Drupal.t("LBL304").toUpperCase();
								}

								if(this.showTopTextFilter){

								  this.initTextFilter(this.text_filter_ac_path);

								  $("#narrow-search-text-filter").val(this.topTextFilterLabel);

								  this.initTextDateFilterBlurStyle("#narrow-search-text-filter", this.topTextFilterLabel,"1");

								  $("#narrow-search-text-filter-container").show();

								}else{

								  $("#narrow-search-text-filter-container").hide();

								}
						   }else{ /* Non - NarrowSearch */

						   }

						},

						displayResultWizard : function(title,message){
						    $('#result-msg-wizard').remove();
						    var html = '';
						    html+='<div id="result-msg-wizard" style="display:none; padding: 0px;">';
						    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';

						    html+= '<tr><td height="40px">&nbsp;</td></tr>';
							html+= '<tr><td align="center" class="light-gray-color">'+message+'</td></tr>';

						    html+='</table>';
						    html+='</div>';
						    $("body").append(html);
						    var closeButt={};
						    closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#result-msg-wizard').remove();};

						    $("#result-msg-wizard").dialog({
						        position:[(getWindowWidth()-400)/2,200],
						        bgiframe: true,
						        width:400,
						        resizable:false,
						        modal: true,
						        title:title,//"Delete",
						        buttons:closeButt,
						        closeOnEscape: false,
						        draggable:false,
						        overlay:
						         {
						           opacity: 0.9,
						           background: "black"
						         }
						    });

						    $('.ui-dialog').wrap("<div id='delete-object-dialog'></div>");

						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
						    $('.ui-dialog-buttonpane .ui-difalog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

						    $("#result-msg-wizard").show();

							$('.ui-dialog-titlebar-close').click(function(){
						        $("#result-msg-wizard").remove();
						    });
							this.currTheme = Drupal.settings.ajaxPageState.theme;
						 	if(this.currTheme == "expertusoneV2"){
						 	 changeDialogPopUI();
							}
						},

						resetUserPassword : function(userEmail, userId, rowObj){
							var obj = this;
							$("#reset-password-loader-"+userId).remove();
							var cRow = $(rowObj).parents("tr").before("<tr><td colspan='3'><div id='reset-password-loader-"+userId+"'></div></td></tr>");
							this.createLoader("reset-password-loader-"+userId);
							url = obj.constructUrl("ajax/administration/people/reset-password" + '/' + userEmail );
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
									result = $.trim(result);
									result = result.split('|');
									$("#root-admin").data("narrowsearch").displayResultWizard(result[0],result[1]);
									$("#root-admin").data("narrowsearch").destroyLoader('reset-password-loader-'+userId);
								}
							});
						},

						publishAndUnpublishCatalog : function(catalogId, catalogType,actionStatus, rowObj, iscompliance) {
							var comp = iscompliance;
							var obj = this;
							url = obj.constructUrl("ajax/administration/learning/catalog/show-catalog" + '/' + catalogId);

							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(access){
									this.currTheme = Drupal.settings.ajaxPageState.theme;

									var show =	$.trim($('#publish-unpublish-'+catalogId).html());

									if(iscompliance == 1 && access == 0 && show == 'Show in Catalog'){
										var uniqueClassPopup = '';
										 $('#delete-msg-wizard').remove();
										    var html = '';
										    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
										    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
										    if(this.currTheme == 'expertusoneV2'){
										   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+Drupal.t("MSG711")+'</td></tr>';
										    } else {
										     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+Drupal.t("MSG711")+'</td></tr>';
										    }
										    html+='</table>';
										    html+='</div>';
										    $("body").append(html);

										    var closeButt={};
										    //closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};
										    closeButt[Drupal.t('LBL109')]=function(){ $("#root-admin").data("narrowsearch").publishAndUnpublishCat(catalogId, catalogType,actionStatus, rowObj);
										    };
										    if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
										    	var esignObj = {'popupDiv':'catalog-publish-unpublis-dialog',
										    			'esignFor':'PublishUnpublishCatalog','catalogId':catalogId,'catalogType': catalogType,'actionStatus': actionStatus, 'rowObj': rowObj};
										    	closeButt[Drupal.t('Yes')]=function(){ $.fn.getNewEsignPopup(esignObj); };

										 }else{
											 closeButt[Drupal.t('Yes')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();
											 setTimeout(function() {
													$('#access-visibility-'+catalogId).click();
												}, 10);
											 };

   										 }
										    $("#delete-msg-wizard").dialog({
										        position:[(getWindowWidth()-400)/2,200],
										        bgiframe: true,
										        width:300,
										        resizable:false,
										        modal: true,
										        title:Drupal.t('LBL749'),
										        buttons:closeButt,
										        closeOnEscape: false,
										        draggable:false,
										        zIndex : 10005,
										        overlay:
										         {
										           opacity: 0.9,
										           background: "black"
										         }
										    });
										    $('.ui-dialog').wrap("<div id='catalog-publish-unpublis-dialog' class='"+uniqueClassPopup+"'></div>");
										    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
										    $(".removebutton").text(Drupal.t("No"));
										    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
										    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
										    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
										    $("#delete-msg-wizard").show();

											$('.ui-dialog-titlebar-close').click(function(){
										        $("#delete-msg-wizard").remove();
										    });
											$('.admin-save-button-middle-bg').click(function(){
										        $("#delete-msg-wizard").remove();
										    });
											$('.removebutton').click(function(){
										        $("#delete-msg-wizard").remove();
										    });
											if(this.currTheme == 'expertusoneV2'){
										    	changeDialogPopUI();
										    }




										}
									else{
										var show = $('#publish-unpublish-'+catalogId).html();
										if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
											var esignObj = {'popupDiv':'catalog-publish-unpublis-dialog',
													'esignFor':'PublishUnpublishCatalog','catalogId':catalogId,'catalogType': catalogType,'actionStatus': actionStatus, 'rowObj': rowObj};
											$.fn.getNewEsignPopup(esignObj); // #0040182 This Function is Missing
										}else{
											$("#root-admin").data("narrowsearch").publishAndUnpublishCat(catalogId, catalogType,actionStatus, rowObj);

										}
									}

								}
							});

						},

						publishAndUnpublishCat : function(catalogId, catalogType,actionStatus, rowObj){
							var obj = this;
							//$("#class-detail-loader-"+catalogId).remove();
							//var cRow = $(rowObj).parents("tr").parents("tr").before("<tr><td colspan='3'><div id='class-detail-loader-"+catalogId+"'></div></td></tr>");
							//this.createLoader("class-detail-loader-"+catalogId);
							url = obj.constructUrl("ajax/administration/learning/catalog/publish-and-unpublish" + '/' + catalogId + '/' + catalogType + '/' + actionStatus);
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
								result = result.split('|');
									if(result[0]=='lrn_crs_sts_atv' || result[0]=='lrn_cls_sts_atv'){
										$("#publish-unpublish-"+catalogId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+catalogId).addClass("crs-unpublish-btn");
									}
									else if(result[0]=='lrn_crs_sts_itv' || result[0]=='lrn_cls_sts_itv'){
										$("#publish-unpublish-"+catalogId).removeClass("crs-unpublish-btn");
										$("#publish-unpublish-"+catalogId).addClass("crs-publish-btn");
									}
									else if(result[0]=='lrn_cls_sts_dld'){
										$("#publish-unpublish-"+catalogId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+catalogId).removeClass("action-crs-publish-btn");
										$("#publish-unpublish-"+catalogId).addClass("crs-pub-enrolled-btn");
										$("#publish-unpublish-"+catalogId).removeAttr("onclick").unbind("click");
									}else if(result[0]=='lrn_cls_sts_can'){
										$("#publish-unpublish-"+catalogId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+catalogId).removeClass("action-crs-publish-btn");
										$("#publish-unpublish-"+catalogId).addClass("crs-pub-enrolled-btn");
										$("#publish-unpublish-"+catalogId).removeAttr("onclick").unbind("click");
									}
									$("#publish-unpublish-"+catalogId).html(result[1]);
								}
							});
						},

						publishAndUnpublishProgram : function(programId, rowObj) {
							 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
							    	var esignObj = {'popupDiv':'program-publish-unpublis-dialog',
							    			'esignFor':'PublishUnpublishProgram','programId':programId,'rowObj': rowObj};
							    	 $.fn.getNewEsignPopup(esignObj);
							 }else{
								 $("#root-admin").data("narrowsearch").publishAndUnpublishPrg(programId, rowObj);
							 }

						},

						publishAndUnpublishPrg : function(programId, rowObj){
							var obj = this;
							url = obj.constructUrl("ajax/administration/learning/program/publish-and-unpublish" + '/' + programId);
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
								result = result.split('|');
									if(result[0]=='lrn_lpn_sts_atv'){
										$("#publish-unpublish-"+programId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+programId).addClass("crs-unpublish-btn");
									}
									else if(result[0]=='lrn_lpn_sts_itv'){
										$("#publish-unpublish-"+programId).removeClass("crs-unpublish-btn");
										$("#publish-unpublish-"+programId).addClass("crs-publish-btn");
									}
									$("#publish-unpublish-"+programId).html(result[1]);
								}
							});
						},
						publishAndUnpublishSurveyAssessment : function(surveyId, surveyType, rowObj) {
							 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
							    	var esignObj = {'popupDiv':'survey-publish-unpublis-dialog',
							    			'esignFor':'publishAndUnpublishSurveyAssessment','surveyId':surveyId,'surveyType':surveyType,'rowObj': rowObj};
							    	 $.fn.getNewEsignPopup(esignObj);
							 }else{
								 $("#root-admin").data("narrowsearch").publishAndUnpublishSur(surveyId, surveyType, rowObj);
							 }

						},

						publishAndUnpublishSur : function(surveyId, surveyType, rowObj){
							var obj = this;
							if(surveyType =='Assessment'){
								url = obj.constructUrl("ajax/administration/assessment/survey-assessment/publish-and-unpublish" + '/' + surveyId + '/' + surveyType);
							}
							else{
								url = obj.constructUrl("ajax/administration/survey/survey-assessment/publish-and-unpublish" + '/' + surveyId + '/' + surveyType);
							}
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
								result = result.split('|');
									if(result[0]=='sry_det_sry_atv'){
										$("#publish-unpublish-"+surveyId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+surveyId).addClass("crs-unpublish-btn");
									}
									else if(result[0]=='sry_det_sry_itv'){
										$("#publish-unpublish-"+surveyId).removeClass("crs-unpublish-btn");
										$("#publish-unpublish-"+surveyId).addClass("crs-publish-btn");
									}
									$("#publish-unpublish-"+surveyId).html(result[1]);
								}
							});
						},

						publishAndUnpublishSurveyAssessmentQuestions : function(questionId, rowObj) {
							 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
							    	var esignObj = {'popupDiv':'survey-publish-unpublis-dialog',
							    			'esignFor':'publishAndUnpublishSurveyAssessmentQuestions','questionId':questionId,'rowObj': rowObj};
							    	 $.fn.getNewEsignPopup(esignObj);
							 }else{
								 $("#root-admin").data("narrowsearch").publishAndUnpublishQus(questionId, rowObj);
							 }

						},

						publishAndUnpublishQus : function(questionId, rowObj){
							var obj = this;
							url = obj.constructUrl("ajax/administration/survey/survey-assessment-questions/publish-and-unpublish" + '/' + questionId );
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
								result = result.split('|');
									if(result[0]=='sry_qtn_sts_atv'){
										$("#publish-unpublish-"+questionId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+questionId).addClass("crs-unpublish-btn");
									}
									else if(result[0]=='sry_qtn_sts_itv'){
										$("#publish-unpublish-"+questionId).removeClass("crs-unpublish-btn");
										$("#publish-unpublish-"+questionId).addClass("crs-publish-btn");
									}
									$("#publish-unpublish-"+questionId).html(result[1]);
								}
							});
						},
			setPositionToCtoolPop : function(path) {
//#custom_attribute_0078975
				// console.log('hello setPositionToCtoolPop');

				if(path.indexOf('group') > 1 || path.indexOf('customattribute') > 1){
					$('#create-dd-list').css('visibility','hidden');
				}
				if(path.indexOf('course-class') > 1 || path.indexOf('program') > 1 || path.indexOf('banner') > 1
						|| path.indexOf('announcement') > 1) {
					var v = $(window).scrollTop();
					if(v < 150) {
						$(window).scrollTop(150);
					}
				}
				// Added by Vincent on 07, Jan 2014 for #0029687: Refresh on Admin Enrollments page
				updatePaginationCookie(1);
				//Custom Attributes for User Registration in Site settings page #custom_attribute_0078975
				setTimeout(function(){
					$('#userregister_scrollbar_container').jScrollPane();
				}, 500);
			},

            publishAndUnpublishContent : function(contentId, rowObj) {
              if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
                   var esignObj = {'popupDiv':'content-publish-unpublis-dialog',
                       'esignFor':'publishAndUnpublishContent', 'contentId':contentId, 'rowObj': rowObj};
                    $.fn.getNewEsignPopup(esignObj);
              }else{
                $("#root-admin").data("narrowsearch").publishAndUnpublishCnt(contentId, rowObj);
              }

           },

           publishAndUnpublishCnt : function(contentId, rowObj){
             var obj = this;
             url = obj.constructUrl("ajax/administration/manage/content/publish-and-unpublish" + '/' + contentId );
             $.ajax({
               type: "POST",
               url: url,
               data:  '',
               success: function(result){
               result = $.trim(result);
               result = result.split('|');
                 if(result[0]=='lrn_cnt_sts_atv'){
                   $("#publish-unpublish-"+contentId).removeClass("crs-publish-btn");
                   $("#publish-unpublish-"+contentId).addClass("crs-unpublish-btn");
                 }
                 else if(result[0]=='lrn_cnt_sts_itv'){
                   $("#publish-unpublish-"+contentId).removeClass("crs-unpublish-btn");
                   $("#publish-unpublish-"+contentId).addClass("crs-publish-btn");
                 }
                 $("#publish-unpublish-"+contentId).html(result[1]);
               }
             });
           },
           
           
           
           publishAndUnpublishVideo : function(contentId, rowObj) {
               if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
                    var esignObj = {'popupDiv':'content-publish-unpublis-dialog',
                        'esignFor':'publishAndUnpublishVideo', 'contentId':contentId, 'rowObj': rowObj};
                     $.fn.getNewEsignPopup(esignObj);
               }else{
                 $("#root-admin").data("narrowsearch").publishAndUnpublishCntVideo(contentId, rowObj);
               }

            },

            publishAndUnpublishCntVideo : function(contentId, rowObj){
              var obj = this;
              url = obj.constructUrl("ajax/administration/contentauthor/video/publish-and-unpublish" + '/' + contentId );
              $.ajax({
                type: "POST",
                url: url,
                data:  '',
                success: function(result){
                result = $.trim(result);
                result = result.split('|');
                  if(result[0]=='lrn_cnt_sts_atv'){
                    $("#publish-unpublish-"+contentId).removeClass("crs-publish-btn");
                    $("#publish-unpublish-"+contentId).addClass("crs-unpublish-btn");
                    $("#share-visibility-"+contentId).removeClass("tab-disable");
                    $("#share-visibility-"+contentId).parent().parent().find(".disable-share-tab-icon").addClass("share-tab-icon");
                    $("#share-visibility-"+contentId).parent().parent().find(".disable-share-tab-icon").removeClass("disable-share-tab-icon");
                    $("#share-visibility-"+contentId).attr("onclick","javascript:void(0);");
                    		$("#share-visibility-"+contentId).click(function()
                    		{
                    										callVisibility({'entityId':contentId,
      														 'entityType':'cre_sys_obt_cnt',
      														 'url':'administration/contentauthor/content-share/'+contentId+'/cre_sys_obt_cnt/0',
      														 'popupDispId':'narrow_search_qtip_share_disp__cre_sys_obt_cnt',
      														 'catalogVisibleId':'narrow_search_qtipShareqtip_visible_disp__cre_sys_obt_cnt',
      														 'wid':645,
      														 'heg':'300',
      														 'postype':'middle',
      														 'poslwid':'50',
      														 'linkid':'share-visibility-'+contentId});
      						});
      														 
                  }
                  else if(result[0]=='lrn_cnt_sts_itv'){
                    $("#publish-unpublish-"+contentId).removeClass("crs-unpublish-btn");
                    $("#publish-unpublish-"+contentId).addClass("crs-publish-btn");
                    $("#share-visibility-"+contentId).addClass("tab-disable");
                    $("#share-visibility-"+contentId).addClass("tab-disable");
                    $("#share-visibility-"+contentId).parent().parent().find(".share-tab-icon").addClass("disable-share-tab-icon");
                    $("#share-visibility-"+contentId).parent().parent().find(".share-tab-icon").removeClass("share-tab-icon");
                    $("#share-visibility-"+contentId).attr("onclick","javascript:void(0);");
                    $("#share-visibility-"+contentId).unbind("click",null);
                  }
                  $("#publish-unpublish-"+contentId).html(result[1]);
                }
              });
            },
            
            
            publishAndUnpublishPresentation : function(contentId, rowObj) {
                if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
                     var esignObj = {'popupDiv':'content-publish-unpublis-dialog',
                         'esignFor':'publishAndUnpublishPresentation', 'contentId':contentId, 'rowObj': rowObj};
                      $.fn.getNewEsignPopup(esignObj);
                }else{
                  $("#root-admin").data("narrowsearch").publishAndUnpublishCntPresentation(contentId, rowObj);
                }

             },

            
             
             publishAndUnpublishCntPresentation : function(contentId, rowObj){
                 var obj = this;
                 url = obj.constructUrl("ajax/administration/contentauthor/presentation/publish-and-unpublish" + '/' + contentId );
                 $.ajax({
                   type: "POST",
                   url: url,
                   data:  '',
                   success: function(result){
                   result = $.trim(result);
                   result = result.split('|');
                     if(result[0]=='lrn_cnt_sts_atv'){
                       $("#publish-unpublish-"+contentId).removeClass("crs-publish-btn");
                       $("#publish-unpublish-"+contentId).addClass("crs-unpublish-btn");
                   $("#share-visibility-"+contentId).removeClass("tab-disable");
                      $("#share-visibility-"+contentId).parent().parent().find(".disable-share-tab-icon").addClass("share-tab-icon");
                      $("#share-visibility-"+contentId).parent().parent().find(".disable-share-tab-icon").removeClass("disable-share-tab-icon");
                      $("#share-visibility-"+contentId).attr("onclick","javascript:void(0);");
                      		$("#share-visibility-"+contentId).click(function()
                      		{
                      										callVisibility({'entityId':contentId,
        														 'entityType':'cre_sys_obt_cnt',
        														 'url':'administration/contentauthor/content-share/'+contentId+'/cre_sys_obt_cnt/0',
        														 'popupDispId':'narrow_search_qtip_share_disp__cre_sys_obt_cnt',
        														 'catalogVisibleId':'narrow_search_qtipShareqtip_visible_disp__cre_sys_obt_cnt',
        														 'wid':645,
        														 'heg':'300',
        														 'postype':'middle',
        														 'poslwid':'50',
        														 'linkid':'share-visibility-'+contentId});
        						});
        								   
                     }
                     else if(result[0]=='lrn_cnt_sts_itv'){
                       $("#publish-unpublish-"+contentId).removeClass("crs-unpublish-btn");
                       $("#publish-unpublish-"+contentId).addClass("crs-publish-btn");
                       $("#share-visibility-"+contentId).addClass("tab-disable");
                       $("#share-visibility-"+contentId).addClass("tab-disable");
                       $("#share-visibility-"+contentId).parent().parent().find(".share-tab-icon").addClass("disable-share-tab-icon");
                       $("#share-visibility-"+contentId).parent().parent().find(".share-tab-icon").removeClass("share-tab-icon");
                       $("#share-visibility-"+contentId).attr("onclick","javascript:void(0);");
                       $("#share-visibility-"+contentId).unbind("click",null);
                    
                     }
                     $("#publish-unpublish-"+contentId).html(result[1]);
                   }
                 });
               },
              
             
            
            

           publishAndUnpublishTax : function(taxId, rowObj) {
               if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
                    var esignObj = {'popupDiv':'tax-publish-unpublis-dialog',
                        'esignFor':'publishAndUnpublishTax', 'taxId':taxId, 'rowObj': rowObj};
                     $.fn.getNewEsignPopup(esignObj);
               }else{
                 $("#root-admin").data("narrowsearch").publishAndUnpublishTaxDialog(taxId, rowObj);
               }

            },

            publishAndUnpublishTaxDialog : function(taxId, rowObj){
              var obj = this;
              url = obj.constructUrl("ajax/administration/commerce/tax/publish-and-unpublish" + '/' + taxId );
              $.ajax({
                type: "POST",
                url: url,
                data:  '',
                success: function(result){
                obj.destroyLoader("paint-narrow-search-results");
                result = $.trim(result);
                result = result.split('|');
                  if(result[0]=='cme_tax_sts_atv'){
                    $("#publish-unpublish-"+taxId).removeClass("crs-publish-btn");
                    $("#publish-unpublish-"+taxId).addClass("crs-unpublish-btn");
                  }
                  else if(result[0]=='cme_tax_sts_itv'){
                    $("#publish-unpublish-"+taxId).removeClass("crs-unpublish-btn");
                    $("#publish-unpublish-"+taxId).addClass("crs-publish-btn");
                  }
                  $("#publish-unpublish-"+taxId).html(result[1]);
                }
              });
            },

            publishAndUnpublishDiscount : function(discountId, rowObj,allowPublishorNot) {
            	allowPublishorNot = (typeof allowPublishorNot == 'undefined') ? 0 : allowPublishorNot;
            	this.currTheme = Drupal.settings.ajaxPageState.theme;

				if(allowPublishorNot == 1){
					var uniqueClassPopup = '';
					 $('#delete-msg-wizard').remove();
					    var html = '';
					    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
					    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
					    if(this.currTheme == 'expertusoneV2'){
					   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+Drupal.t("ERR248")+'</td></tr>';
					    } else {
					     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+Drupal.t("ERR248")+'</td></tr>';
					    }
					    html+='</table>';
					    html+='</div>';
					    $("body").append(html);

					    var closeButt={};
					    closeButt[Drupal.t('LBL123')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};

					    $("#delete-msg-wizard").dialog({
					        position:[(getWindowWidth()-400)/2,200],
					        bgiframe: true,
					        width:300,
					        resizable:false,
					        modal: true,
					        title:Drupal.t('LBL749'),
					        buttons:closeButt,
					        closeOnEscape: false,
					        draggable:false,
					        zIndex : 10005,
					        overlay:
					         {
					           opacity: 0.9,
					           background: "black"
					         }
					    });
					    $('.ui-dialog').wrap("<div id='catalog-publish-unpublis-dialog' class='"+uniqueClassPopup+"'></div>");
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
					    $("#delete-msg-wizard").show();

						$('.ui-dialog-titlebar-close').click(function(){
					        $("#delete-msg-wizard").remove();
					    });

						if(this.currTheme == 'expertusoneV2'){
					    	changeDialogPopUI();
					    }
					}else{
						if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
		                     var esignObj = {'popupDiv':'discount-publish-unpublis-dialog',
		                         'esignFor':'publishAndUnpublishDiscount', 'discountId':discountId, 'rowObj': rowObj};
		                      $.fn.getNewEsignPopup(esignObj);
		                }else{
		                  $("#root-admin").data("narrowsearch").publishAndUnpublishDiscountDialog(discountId, rowObj);
		                }
					}


             },

             publishAndUnpublishDiscountDialog : function(discountId, rowObj){
               var obj = this;
               url = obj.constructUrl("ajax/administration/commerce/discounts/publish-and-unpublish" + '/' + discountId );
               $.ajax({
                 type: "POST",
                 url: url,
                 data:  '',
                 success: function(result){
                 obj.destroyLoader("paint-narrow-search-results");
                 result = $.trim(result);
                 result = result.split('|');
                   if(result[0] == 1){
                     $("#publish-unpublish-"+discountId).removeClass("crs-publish-btn");
                     $("#publish-unpublish-"+discountId).addClass("crs-unpublish-btn");
                   }
                   else if(result[0] == 0){
                     $("#publish-unpublish-"+discountId).removeClass("crs-unpublish-btn");
                     $("#publish-unpublish-"+discountId).addClass("crs-publish-btn");
                   }
                   $("#publish-unpublish-"+discountId).html(result[1]);
                 }
               });
             },

			 publishAndUnpublishGroupDialog : function(objectId, objectType, rowObj,is_admin,owner_cnt) {
				 	var title = Drupal.t('MSG773');
				 	var suspend = $('#action_icon_tooltip_'+objectId).hasClass( "Suspend" );
				 	if(suspend ){
						var uniqueClassPopup = '';
					    $('#delete-msg-wizard').remove();
					    var html = '';
					    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
					    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
					   
					    if(this.currTheme == 'expertusoneV2'){
					   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
					    } else {
					     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+'</td></tr>';
					    }
					    html+='</table>';
					    html+='</div>';
					    $("body").append(html);
	
					    var closeButt={};
					    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};
	
		                 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
		                      var esignObj = {'popupDiv':'object-activate-deactivate-dialog',
								    			'esignFor':'ActivateDeactivateObject','objectId':objectId,'objectType':objectType,'rowObj': rowObj};
		                      closeButt[Drupal.t('Yes')]=function(){ $.fn.getNewEsignPopup(esignObj); };
		                 }else{
		                	 closeButt[Drupal.t('Yes')]=function(){ $("#root-admin").data("narrowsearch").activateAndDeactivateObj(objectId, objectType, rowObj); };
		                 }
	
					    $("#delete-msg-wizard").dialog({
					        position:[(getWindowWidth()-400)/2,200],
					        bgiframe: true,
					        width:300,
					        resizable:false,
					        modal: true,
					        title:Drupal.t('Groups'),
					        buttons:closeButt,
					        closeOnEscape: false,
					        draggable:false,
					        overlay:
					         {
					           opacity: 0.9,
					           background: "black"
					         }
					    });
					    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+uniqueClassPopup+"'></div>");
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
					    $("#delete-msg-wizard").show();
	
						$('.ui-dialog-titlebar-close').click(function(){
					        $("#delete-msg-wizard").remove();
					    });
						if(this.currTheme == 'expertusoneV2'){
					    	changeDialogPopUI();
					    }
				    }else{
				    	 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
					    	var esignObj = {'popupDiv':'object-activate-deactivate-dialog',
								    			'esignFor':'ActivateDeactivateObject','objectId':objectId,'objectType':objectType,'rowObj': rowObj};
					    	 $.fn.getNewEsignPopup(esignObj);
						 }else{
							 $("#root-admin").data("narrowsearch").activateAndDeactivateObj(objectId, objectType, rowObj);
						 }
				    }

           },
             publishAndUnpublishOrder : function(orderId, orderStatus, rowObj) {
					var uniqueClassPopup = '';
				    $('#delete-msg-wizard').remove();
				    var html = '';
				    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
				    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
				    //html+= '<tr><td height="40px">&nbsp;</td></tr>';
				    if(orderStatus == 'payment_received'){
	            		var title = Drupal.t('LBL1163');
	            	}else if(orderStatus == 'canceled'){
	            		var title = Drupal.t('LBL1164');
	            	}
				    if(this.currTheme == 'expertusoneV2'){
				   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
				    } else {
				     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+'</td></tr>';
				    }
				    html+='</table>';
				    html+='</div>';
				    $("body").append(html);

				    var closeButt={};
				    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};

	                 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
	                      var esignObj = {'popupDiv':'order-publish-unpublis-dialog',
	                          'esignFor':'publishAndUnpublishOrder', 'orderId':orderId, 'orderStatus':orderStatus, 'rowObj': rowObj};
	                      closeButt[Drupal.t('Yes')]=function(){ $.fn.getNewEsignPopup(esignObj); };
	                 }else{
	                	 closeButt[Drupal.t('Yes')]=function(){ $("#root-admin").data("narrowsearch").publishAndUnpublishOrderDialog(orderId, orderStatus, rowObj); };
	                 }

				    $("#delete-msg-wizard").dialog({
				        position:[(getWindowWidth()-400)/2,200],
				        bgiframe: true,
				        width:300,
				        resizable:false,
				        modal: true,
				        title:Drupal.t('LBL820')+' - '+orderId,
				        buttons:closeButt,
				        closeOnEscape: false,
				        draggable:false,
				        overlay:
				         {
				           opacity: 0.9,
				           background: "black"
				         }
				    });
				    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+uniqueClassPopup+"'></div>");
				    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
				    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
				    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
				    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
				    $("#delete-msg-wizard").show();

					$('.ui-dialog-titlebar-close').click(function(){
				        $("#delete-msg-wizard").remove();
				    });
					if(this.currTheme == 'expertusoneV2'){
				    	changeDialogPopUI();
				    }

           },

           publishAndUnpublishOrderDialog : function(orderId, orderStatus, rowObj){
         	$('#delete-msg-wizard').remove();
             var obj = this;
             obj.createLoader("main-wrapper");
             url = obj.constructUrl("administration/commerce/orderupdate/ajax" + '/' + orderId + '/' + orderStatus );
             $.ajax({
               type: "POST",
               url: url,
               data:  '',
               success: function(result){
             	//obj.destroyLoader("paint-narrow-search-results");
				if (typeof $("#root-admin").data("narrowsearch").refreshLastAccessedRow != 'undefined' && $("#root-admin").data("narrowsearch").refreshLastAccessedRow() == false) {
             	$("#narrow-search-results-holder").trigger("reloadGrid");
               }
               }
             });
           },


            publishAndUnpublishModule : function(moduleName, rowObj) {
            if(moduleName == 'exp_sp_administration_contentauthor' || moduleName == 'exp_sp_administration_customattribute')    // For enabling/disabling content Author
            	$('#delete-msg-wizard').remove();
              if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
                   var esignObj = {'popupDiv':'mdoule-publish-unpublis-dialog',
                       'esignFor':'publishAndUnpublishModule', 'moduleName':moduleName, 'rowObj': rowObj};
                    $.fn.getNewEsignPopup(esignObj);
              }else{
                $("#root-admin").data("narrowsearch").publishAndUnpublishModuleDialog(moduleName, rowObj);
              }

           },

           publishAndUnpublishModuleDialog : function(moduleName, rowObj){
             var obj = this;
             this.createLoader("main-wrapper");
             url = obj.constructUrl("ajax/administration/sitesetup/moduleinfo/publish-and-unpublish" + '/' + moduleName );
             var reloadgrid = obj.constructUrl("administration/sitesetup/moduleinfo/search/all");
             $.ajax({
               type: "POST",
               url: url,
               data:  '',
               success: function(result){
               result = $.trim(result);
               result = result.split('|');
                 if(result[0]==1){
                   $("#publish-unpublish-"+moduleName).removeClass("crs-publish-btn");
                   $("#publish-unpublish-"+moduleName).addClass("crs-unpublish-btn");
                   if(moduleName == 'exp_sp_administration_module_info_commerce' || moduleName == 'drupalchat'){
                	   window.location.href=window.location.href;
                   }
                 }
                 else if(result[0]==2){
                   $("#publish-unpublish-"+moduleName).removeClass("crs-unpublish-btn");
                   $("#publish-unpublish-"+moduleName).addClass("crs-publish-btn");
                   if(moduleName == 'exp_sp_administration_module_info_commerce' || moduleName == 'drupalchat'){
                	   window.location.href=window.location.href;
                   }
                 }
                 if(moduleName != 'exp_sp_administration_customattribute')
                 $("#publish-unpublish-"+moduleName).html(result[1]);
               //  $("#root-admin").data("narrowsearch").destroyLoader("main-wrapper");
               //  $("#root-admin").data("narrowsearch").createLoader("paint-narrow-search-results");
                 $('#narrow-search-results-holder').setGridParam({url:reloadgrid});
				 if (typeof $("#root-admin").data("narrowsearch").refreshLastAccessedRow != 'undefined' && $("#root-admin").data("narrowsearch").refreshLastAccessedRow() == false) {
				 	$('#narrow-search-results-holder').trigger("reloadGrid",[{page:$(".ui-pg-input").val()}]);
				 }
               }
             });
           },

           publishAndUnpublishPayment : function(paymentId, rowObj) {
             if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
                  var esignObj = {'popupDiv':'payment-publish-unpublis-dialog',
                      'esignFor':'publishAndUnpublishPayment', 'paymentId':paymentId, 'rowObj': rowObj};
                   $.fn.getNewEsignPopup(esignObj);
             }else{
               $("#root-admin").data("narrowsearch").publishAndUnpublishPaymentDialog(paymentId, rowObj);
             }

          },

          publishAndUnpublishPaymentDialog : function(paymentId, rowObj){
            var obj = this;
            this.createLoader("admin-commerce-payment-method-plan");
            url = obj.constructUrl("administration/commerce/setting/payment/action/"+paymentId);
            $.ajax({
              type: "POST",
              url: url,
              data:  '',
              success: function(result){
              result = $.trim(result);
              result = result.split('|');
                if(result[0]==1){
                  $("#publish-unpublish-"+paymentId).removeClass("crs-publish-btn");
                  $("#publish-unpublish-"+paymentId).addClass("crs-unpublish-btn");
                }

                else if(result[0]==0){
                  $("#publish-unpublish-"+paymentId).removeClass("crs-unpublish-btn");
                  $("#publish-unpublish-"+paymentId).addClass("crs-publish-btn");
                }
                $("#publish-unpublish-"+paymentId).html(result[1]);
                $("#root-admin").data("narrowsearch").destroyLoader("admin-commerce-payment-method-plan");

              }
            });
          },

           publishAndUnpublishBanner : function(bannerId, bannerType, rowObj) {
				 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
				    	var esignObj = {'popupDiv':'banner-publish-unpublis-dialog',
				    			'esignFor':'publishAndUnpublishBanner','bannerId':bannerId,'bannerType':bannerType,'rowObj': rowObj};
				    	 $.fn.getNewEsignPopup(esignObj);
				 }else{
					 $("#root-admin").data("narrowsearch").publishAndUnpublishBan(bannerId, bannerType, rowObj);
				 }

			},
//#custom_attribute_0078975
			publishAndUnpublishCustom : function(CustomId, rowObj) {
				 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
				    	var esignObj = {'popupDiv':'Custom-publish-unpublis-dialog',
				    			'esignFor':'publishAndUnpublishCustom','CustomId':CustomId,'rowObj': rowObj};
				    	// console.log('esignObj'+JSON.stringify(esignObj));
				    	 $.fn.getNewEsignPopup(esignObj);
				 }else{
					 $("#root-admin").data("narrowsearch").publishAndUnpublishCus(CustomId, rowObj);
				 }

			},

			publishAndUnpublishAnnouncement : function(annId, annType, rowObj) {
				 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
				    	var esignObj = {'popupDiv':'announcement-publish-unpublis-dialog',
				    			'esignFor':'publishAndUnpublishAnnouncement','annId':annId,'annType':annType,'rowObj': rowObj};
				    	 $.fn.getNewEsignPopup(esignObj);
				 }else{
					 $("#root-admin").data("narrowsearch").publishAndUnpublishAnn(annId, annType, rowObj);
				 }

			},
			publishAndUnpublishAnn : function(annId, annType, rowObj){
				var obj = this;
				url = obj.constructUrl("ajax/administration/manage/announcement/publish-and-unpublish" + '/' + annId + '/' + annType);
				$.ajax({
					type: "POST",
					url: url,
					data:  '',
					success: function(result){
					result = $.trim(result);
					result = result.split('|');
						if(result[0]=='cre_sys_obt_not_atv'){
							$("#publish-unpublish-"+annId).removeClass("crs-publish-btn");
							$("#publish-unpublish-"+annId).addClass("crs-unpublish-btn");
						}
						else if(result[0]=='cre_sys_obt_not_itv'){
							$("#publish-unpublish-"+annId).removeClass("crs-unpublish-btn");
							$("#publish-unpublish-"+annId).addClass("crs-publish-btn");
						}
						$("#publish-unpublish-"+annId).html(result[1]);
					}
				});
			},
			publishAndUnpublishBan : function(bannerId, bannerType, rowObj){
				var obj = this;
				url = obj.constructUrl("ajax/administration/manage/banner/publish-and-unpublish" + '/' + bannerId + '/' + bannerType);
				$.ajax({
					type: "POST",
					url: url,
					data:  '',
					success: function(result){
					result = $.trim(result);
					result = result.split('|');
						if(result[0]=='cbn_anm_sts_atv'){
							$("#publish-unpublish-"+bannerId).removeClass("crs-publish-btn");
							$("#publish-unpublish-"+bannerId).addClass("crs-unpublish-btn");
						}
						else if(result[0]=='cbn_anm_sts_itv'){
							$("#publish-unpublish-"+bannerId).removeClass("crs-unpublish-btn");
							$("#publish-unpublish-"+bannerId).addClass("crs-publish-btn");
						}
						$("#publish-unpublish-"+bannerId).html(result[1]);
					}
				});
			},
//#custom_attribute_0078975
			publishAndUnpublishCus : function(CustomId, rowObj){
				var obj = this;
				url = obj.constructUrl("ajax/administration/manage/customattribute/publish-and-unpublish" + '/' + CustomId );
				

				$.ajax({
					type: "POST",
					url: url,
					data:  '',
					success: function(result){
					result = $.trim(result);
					result = result.split('|');

						if(result[0]=='cre_cattr_sts_atv'){
							

							$("#publish-unpublish-"+CustomId).removeClass("crs-publish-btn");
							$("#publish-unpublish-"+CustomId).addClass("crs-unpublish-btn");
						}
						else if(result[0]=='cre_cattr_sts_itv'){
							

							$("#publish-unpublish-"+CustomId).removeClass("crs-unpublish-btn");
							$("#publish-unpublish-"+CustomId).addClass("crs-publish-btn");
						}
						$("#publish-unpublish-"+CustomId).html(result[1]);
					}
				});
			},
			publishAndUnpublishLocation : function(locationId, rowObj) {
				 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
				    	var esignObj = {'popupDiv':'location-publish-unpublis-dialog',
				    			'esignFor':'publishAndUnpublishLocation','locationId':locationId,'rowObj': rowObj};
				    	 $.fn.getNewEsignPopup(esignObj);
				 }else{
					 $("#root-admin").data("narrowsearch").publishAndUnpublishLoc(locationId, rowObj);
				 }

			},

			publishAndUnpublishLoc : function(locationId, rowObj){
				var obj = this;
				url = obj.constructUrl("ajax/administration/manage/location/publish-and-unpublish" + '/' + locationId );
				$.ajax({
					type: "POST",
					url: url,
					data:  '',
					success: function(result){
						result = $.trim(result);
						result = result.split('|');
						if(result[0]=='not_able_do'){
							this.currTheme = Drupal.settings.ajaxPageState.theme;

							var show =	$.trim($('#publish-unpublish-'+locationId).html());
							var uniqueClassPopup = 'unique-delete-class';
							var wSize = (wSize) ? wSize : 300;
						    $('#delete-msg-wizard').remove();
						    var html = '';
						    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
						    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';

						   // html+= '<tr><td height="40px">&nbsp;</td></tr>';
						    if(this.currTheme == 'expertusoneV2'){
						   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+Drupal.t("The location is associated to class")+'</td></tr>';
						    } else {
						     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+Drupal.t("The location is associated to class")+'</td></tr>';
						    }
						    html+='</table>';
						    html+='</div>';
						    $("body").append(html);
						    var closeButt={};
						    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};


						    $("#delete-msg-wizard").dialog({
						        position:[(getWindowWidth()-400)/2,200],
						        bgiframe: true,
						        width:wSize,
						        resizable:false,
						        modal: true,
						        title:result[1],//"title",
						        buttons:closeButt,
						        closeOnEscape: false,
						        draggable:false,
						        overlay:
						         {
						           opacity: 0.9,
						           background: "black"
						         }
						    });
						    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+uniqueClassPopup+"'></div>");

						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
						    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

						    $("#delete-msg-wizard").show();

							$('.ui-dialog-titlebar-close').click(function(){
						        $("#delete-msg-wizard").remove();
						    });
							if(this.currTheme == 'expertusoneV2'){
						    	changeDialogPopUI();
						    }
							/*-- 37211: Unable to delete a class in FF version 32.0 --*/
						    if($('div.qtip-defaults').length > 0) {
						    	var prevZindex = $('.qtip-defaults').css('z-index');
						    	$('#delete-object-dialog .ui-widget-content').css('z-index', prevZindex+2);
						    	$('.ui-widget-overlay').css('z-index', prevZindex+1);
						    }
						}else{
							if(result[0]=='lrn_res_loc_atv'){
								$("#publish-unpublish-"+locationId).removeClass("crs-publish-btn");
								$("#publish-unpublish-"+locationId).addClass("crs-unpublish-btn");
							}
							else if(result[0]=='lrn_res_loc_itv'){
								$("#publish-unpublish-"+locationId).removeClass("crs-unpublish-btn");
								$("#publish-unpublish-"+locationId).addClass("crs-publish-btn");
							}
							$("#publish-unpublish-"+locationId).html(result[1]);
						}
					}
				});
			},


			publishAndUnpublishNotification : function(notificationId, notificationType) {
				 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
				    	var esignObj = {'popupDiv':'notification-publish-unpublis-dialog',
				    			'esignFor':'publishAndUnpublishNotification','notificationId':notificationId,'notificationType':notificationType};
				    	 $.fn.getNewEsignPopup(esignObj);
				 }else{
					 $("#root-admin").data("narrowsearch").publishAndUnpublishNot(notificationId, notificationType);
				 }

			},

			publishAndUnpublishNot : function(notificationId, notificationType){
				var obj = this;
				if(notificationType == 'notification_template'){
				  url = obj.constructUrl("ajax/administration/manage/notification_template/publish-and-unpublish" + '/' + notificationId );
				}else {
				  url = obj.constructUrl("ajax/administration/manage/certificate/publish-and-unpublish" + '/' + notificationId );
				}
				$.ajax({
					type: "POST",
					url: url,
					data:  '',
					success: function(result){
					result = $.trim(result);
					result = result.split('|');
						if(result[0]=='cre_ntn_sts_atv'){
							$("#publish-unpublish-"+notificationId).removeClass("crs-publish-btn");
							$("#publish-unpublish-"+notificationId).addClass("crs-unpublish-btn");
						}
						else if(result[0]=='cre_ntn_sts_itv'){
							$("#publish-unpublish-"+notificationId).removeClass("crs-unpublish-btn");
							$("#publish-unpublish-"+notificationId).addClass("crs-publish-btn");
						}
						$("#publish-unpublish-"+notificationId).html(result[1]);
					}
				});
			},




						activateAndDeactivateResource : function(resourceId, resourceType, rowObj) {
							 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
							    	var esignObj = {'popupDiv':'program-publish-unpublis-dialog',
							    			'esignFor':'ActivateDeactivateResource','resourceId':resourceId,'resourceType':resourceType,'rowObj': rowObj};
							    	 $.fn.getNewEsignPopup(esignObj);
							 }else{
								 $("#root-admin").data("narrowsearch").activateAndDeactivateRsc(resourceId, resourceType, rowObj);
							 }

						},

						activateAndDeactivateRsc : function(resourceId, resourceType,rowObj){
							var obj = this;
							url = obj.constructUrl("ajax/administration/learning/resource/activate-and-deactivate" + '/' + resourceId+ '/' + resourceType);
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
									if(result=='lrn_res_loc_atv' || result=='lrn_res_fac_atv' || result=='lrn_res_rms_atv'){
										$("#publish-unpublish-"+resourceType+"-"+resourceId).removeClass("crs-publish-btn");
										$("#publish-unpublish-"+resourceType+"-"+resourceId).addClass("crs-unpublish-btn");
										$("#publish-unpublish-"+resourceType+"-"+resourceId).html("Deactivate");
									}
									else if(result=='lrn_res_loc_itv' || result=='lrn_res_fac_itv' || result=='lrn_res_rms_itv'){
										$("#publish-unpublish-"+resourceType+"-"+resourceId).removeClass("crs-unpublish-btn");
										$("#publish-unpublish-"+resourceType+"-"+resourceId).addClass("crs-publish-btn");
										$("#publish-unpublish-"+resourceType+"-"+resourceId).html("Activate");
									}
								}
							});
						},

						activateAndDeactivateObject : function(objectId, objectType, rowObj) {
							 if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
							    	var esignObj = {'popupDiv':'object-activate-deactivate-dialog',
							    			'esignFor':'ActivateDeactivateObject','objectId':objectId,'objectType':objectType,'rowObj': rowObj};
							    	 $.fn.getNewEsignPopup(esignObj);
							 }else{
								 $("#root-admin").data("narrowsearch").activateAndDeactivateObj(objectId, objectType, rowObj);
							 }

						},

						activateAndDeactivateObj : function(objectId, objectType, rowObj){
							//alert(objectType);
							var obj = this;
							if(objectType=='User'){
								url = obj.constructUrl("ajax/administration/people/activate-and-deactivate" + '/' + objectId);
							}
							else if(objectType=='Organization'){
								url = obj.constructUrl("ajax/administration/people/organization/activate-and-deactivate" + '/' + objectId);
							}
							else if(objectType=='Grp'){
								$("#delete-msg-wizard").remove();
								url = obj.constructUrl("ajax/administration/people/group/activate-and-deactivate" + '/' + objectId);
							}
							else if(objectType=='location'){
								url = obj.constructUrl("ajax/administration/location/activate-and-deactivate" + '/' + objectId);
							}
							else if(objectType=='surveyDetails'){
								url = obj.constructUrl("ajax/administration/survey/survey-assessment/publish-and-unpublish" + '/' + objectId + '/'+objectType);
							}
							else if(objectType=='assessmentDetails'){
								url = obj.constructUrl("ajax/administration/assessment/survey-assessment/publish-and-unpublish" + '/' + objectId + '/'+objectType);
							}
							else if(objectType=='surveyQuestion'){
								url = obj.constructUrl("ajax/administration/survey/survey-assessment-questions/publish-and-unpublish" + '/' + objectId + '/'+objectType);
							}
							else if(objectType=='assessmentQuestion'){
								url = obj.constructUrl("ajax/administration/assessment/survey-assessment-questions/publish-and-unpublish" + '/' + objectId + '/'+objectType);
							}
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
								if(objectType=='User' && result=='activeinstr'){
									var error = new Array();
									error[0] = Drupal.t("MSG768");
									$('#show_suspend_message').remove();
							 	    var message = "<div id='show_suspend_message' style='position:absolute;left:0;right:0;'></div></div>";
							 	    var msg='<div id="message-container" style="visibility:visible"><div class="messages error"><ul><li><span>'+error[0]+'</span></li></ul><div class="msg-close-btn" onclick="$(\'#show_suspend_message\').remove();"></div></div></div><img onload="$(\'body\').data(\'learningcore\').showHideMultipleLi();" style="display:none;" src="sites/all/themes/core/expertusone/expertusone-internals/images/close.png" height="0" width="0"/>';
							 	    $('#gview_narrow-search-results-holder').prepend(message);
							 	    $("#gview_narrow-search-results-holder #show_suspend_message").append(msg);
								}else{
									$("#suspend_activate_"+objectId).html(result);
									//alert("objectId" + objectId + "result" + result);
									//44133: German-old-ui-Icon not changing when user is activate and suspend
									if(result==Drupal.t('LBL573')){
										$("#action_icon_tooltip_"+objectId).removeClass('Suspend');
										$("#action_icon_tooltip_"+objectId).addClass('Activate');

									}else{
										$("#action_icon_tooltip_"+objectId).removeClass('Activate');
										$("#action_icon_tooltip_"+objectId).addClass('Suspend');
									}
									if(objectType=='User'){
										$("#action_icon_tooltip_"+objectId).attr('title', result);
									}else{
										$("#suspend_activate_"+objectId).parent('span').attr('title', result);
									}
								}
								}
							});
						},

						initAdminLinks : function() {
							var curObj = this;
							var loadingDiv = "root-admin-search-right-col";

							/* Hide the filter and top search text box,result area */
							$("#narrow-search-text-filter-container").hide();
							$("#narrow-search").hide();
							$("#root-admin-results").hide();
							$("ul.AdminsublinktabNavigation li").removeClass("selected");

							// For Left Navigation Admin Menu Links
							$("ul.list-item-administrator li a").click(function(event,mainMenuId) {

									var linkId;
									if(mainMenuId=="" || mainMenuId=="undefined" || mainMenuId==null){
										 linkId = $(this).attr("id");
									}else{
										 linkId=mainMenuId;
									}
									var ancData = $("#"+linkId).metadata();
									var linkPath = ancData.link_path;

									/* Hides/Show narrow search and text filter */
									$("#narrow-search-text-filter-container").hide();
									$("#narrow-search").hide();
									$("#narrow-search-actionbar-list").hide();
									$("#root-admin-results").hide();

									curObj.createLoader(loadingDiv);

									var url = '?q=ajax/get/modules/'+linkPath;
									$.ajax({
											type : "POST",
											url : url,
											data : '',
											datatype : 'json',
											success : function(data) {
												curObj.destroyLoader(loadingDiv);

												$("#root-admin-results").html(data);
												$("#root-admin-results").show();
												var contentLoadingDiv = 'root-admin-results';

												/* For top tabular submenu in result page.*/
												$("ul.AdminsublinktabNavigation li a").click(function(event,firstSubmenuId){
													if($('#narrow-search-actionbar')){
													  $('#narrow-search-actionbar').hide();
													}

												  $("#narrow-search-text-filter-container").hide();
												  $("#narrow-search").hide();
												  $("#tab-content-main").html('');

													var submenuId;
													if(firstSubmenuId=="" || firstSubmenuId=="undefined" || firstSubmenuId==null){
														 submenuId = $(this).attr("id");
													}else{
														submenuId=firstSubmenuId;
													}

													var subAncData = $("#"+submenuId).metadata();

													/* Add class "selected"  if select  the tab */
													$( "ul.AdminsublinktabNavigation li").removeClass("selected");
													$("#"+ submenuId).parent("li").addClass("selected");

													/* Start - To get the submodules according to tab selection */
													curObj.createLoader(contentLoadingDiv);

													var sublinkPath=subAncData.link_path;
													var sublinkUrl = '?q='+sublinkPath;

													$.ajax({
														type : "POST",
														url : sublinkUrl,
														data : '',
														datatype : 'json',
														success : function(data) {
													     curObj.destroyLoader(contentLoadingDiv);
													     //console.log('ajax success data');
													     //console.log(data);
									   				   var detailsObj = jQuery.parseJSON(data);
									   				   //console.log('ajax success detailsObj');
                               //console.log(detailsObj);
											               // Extend Drupal.settings, if any settings are present in the data
												           if (detailsObj.drupal_settings) {
														     $.extend(true, Drupal.settings, detailsObj.drupal_settings);
														   }
														   /*Display the content for Tab wheather narrow search or non narrow search */
														   $("#tab-content-main").html(detailsObj.rendered_tab_content_main);

														   if(detailsObj.rendered_tab_content_type == "narrow_search"){ /* If narrow search */
															   /* Display left side filters and top bar*/
															   $("#narrow-search").html(detailsObj.rendered_narrow_search_filters);
															   $("#narrow-search").show();

															   // curObj.renderSearchResults();

															   $("#narrow-search-results-topbar").html(detailsObj.rendered_narrow_search_sortbar);
															   $("#narrow-search-actionbar").remove();
															   $("#admin-maincontent_tab").append(detailsObj.rendered_narrow_search_actionbar);
															   $("#narrow-search-results-topbar").show();

															   /* Initialise filters once modules loaded */
															   curObj.initPaths(detailsObj.rendered_tab_content_type);
															   curObj.initFilters();
															   curObj.renderSearchResults(linkPath,sublinkPath);
															   if($('#narrow-search-actionbar')){
													  			 $('#narrow-search-actionbar').hide();
															   }
														   }
														   else if (detailsObj.rendered_tab_content_type == "ajax-form"){
	                               Drupal.attachBehaviors();
														   }
													   } // end success
													}); /* End - To get the submodules according to tab selection */

													/* Show  the text filter */
													$("#narrow-search-actionbar-list").show();
												});

												/* Auto load first sub menu */
												var tmpFirstSubmenuId=$("ul.AdminsublinktabNavigation li a:first").attr("id");
												if(tmpFirstSubmenuId!="" && tmpFirstSubmenuId!="undefined" && tmpFirstSubmenuId!=null){
													 $("#"+tmpFirstSubmenuId).trigger("click",[tmpFirstSubmenuId]);
												}

											  }
										});

									/* Highlight selected menu links */
									$("ul.list-item-administrator li a").removeClass("root-admin-links-selected");
									$("#"+linkId).addClass("root-admin-links-selected");

									/* THE BELOW LINES WRITTEN BY NEW THEME BY VJ*/
									$("ul.list-item-administrator li.admin-left-panel-module-list").removeClass("root-admin-module-selected");
									$("#"+linkId).parent().addClass("root-admin-module-selected");

							 });

							/* Auto load main menu */
							var tmpFirstMainMenuId=$("ul.list-item-administrator li a:first").attr("id");
							//var tmpFirstMainMenuId="collaboration";
							if(tmpFirstMainMenuId!="" && tmpFirstMainMenuId!="undefined" && tmpFirstMainMenuId!=null){
							  $("#"+tmpFirstMainMenuId).trigger("click",[tmpFirstMainMenuId]);
							}

						},

						abstractFunctionAlert : function(functionName) {
							alert('UNDER CONSTRUCTION. Please implement function ' + functionName + ' in admin sub-module\'s js file.');
						},

						missingInitParamAlert : function(paramName) {
							alert('UNDER CONSTRUCTION. Missing init data ' + paramName);
						},

						narrowSearch : function() {
							var curObj=this;
							this.refreshGrid();
						},

						sortSearchResults : function(sortType, sortLinkHtmlId) {
							this.refreshGrid(sortType, sortLinkHtmlId);
						},

						narrowSearchByText : function() {
							this.refreshGrid();
						},

						narrowSearchByAddlText : function(code) {
							this.refreshGrid();
						},

						narrowSearchByDateRange : function(code) {
							this.refreshGrid();
						},

						narrowSearchBySlider : function(code) {
							this.refreshGrid();
						},

						printSearchResults : function() {
							if (this.printPath == undefined || this.printPath == null || this.printPath == '') {
								this.missingInitParamAlert('print_path');
								return; // Impt
							}
							window.location = this.constructUrl(this.printPath + this.getNarrowSearchURLArgs(this.lastSortType,this.lastSortTypeHtmlId));
						},

						exportSearchResults : function() {
							if (this.exportPath == undefined || this.exportPath == null || this.exportPath == '') {
								this.missingInitParamAlert('export_path');
								return; // Impt
							}

							window.location = this.constructUrl(this.exportPath + this.getNarrowSearchURLArgs(this.lastSortType,this.lastSortTypeHtmlId));
						},
//#custom_attribute_0078975						
						downloadSampleUserupload : function() {
							window.location = this.constructUrl("administration/userfeed/download/csv");
                        },

						addItem : function() {
							this.abstractFunctionAlert('addItem');
							return false;
						},

						editItem : function() {
							this.abstractFunctionAlert('editItem');
							return false;
						},

						showHide : function(strOne, strTwo) {
							$('#' + strTwo).toggle();
							var classShowHide = $('#' + strOne).hasClass(
									'cls-show');
							if (classShowHide) {
								$('#' + strOne).removeClass('cls-show');
								$('#' + strOne).addClass('cls-hide');
							} else {
								$('#' + strOne).removeClass('cls-hide');
								$('#' + strOne).addClass('cls-show');
							}
						},

						showHideCourseClass : function(type){
							if (type == 'Class') {
								$('#catalogcoursestatus_container').hide();
								$('#courselangtype_container').hide();
								$('#catalogcoursetag_container').hide();
								$('#catalogcoursemanageby_container').hide();
								$('#classhiddenmanageby_container').hide();
								$('#catalogcoursecurrency_container').hide();
								$('#coursePrice_container').hide();

								$('#catalogclassstatus_container').show();
								$('#classdeliverytype_container').show();
								$('#classPrice_container').show();
								$('#classdaterange_container').show();
								$('#classlangtype_container').show();
								$('#catalogclasstag_container').show();
								/*$('.tagscloud-scrollable:not(.jspScrollable)').each(function () {
									if ($(this).is(':visible')) {
									  var tagsHeight = $(this).height();
									  if (tagsHeight > 175) {
									    $(this).height(175);
										$(this).css('max-height', '175px');
									    $(this).jScrollPane({});
								      }
									}
								});*/

								$('#classLocation_container').show();
								$('#classInstructor_container').show();

								$('#classSurvey_container').show();
								$('#classAssessment_container').show();
								$('#classContent_container').show();
								$('#catalogclassmanageby_container').show();
								$('#catalogclasscurrency_container').show();
								$('#tagentityType').val('tagtipclass');

							} else {
								$('#catalogcoursestatus_container').show();
								$('#courselangtype_container').show();
								$('#catalogcoursetag_container').show();
								$('#catalogcoursemanageby_container').show();
								$('#catalogcoursecurrency_container').show();
								$('#coursePrice_container').show();

								$('#catalogclassstatus_container').hide();
								$('#classdeliverytype_container').hide();
								$('#classPrice_container').hide();
								$('#classdaterange_container').hide();
								$('#classlangtype_container').hide();
								$('#catalogclasstag_container').hide();
								$('#classLocation_container').hide();
								$('#classInstructor_container').hide();
								$('#catalogclassmanageby_container').hide();
								$('#catalogclasscurrency_container').hide();

								$('#classSurvey_container').hide();
								$('#classAssessment_container').hide();
								$('#classContent_container').hide();
								$('#tagentityType').val('tagtip');
							}
						},

						renderSearchResults : function(curModule,subModule) {
						  //console.log (curModule);
						  //console.log (subModule);
							var curObj = this;
							if(Drupal.settings.ajaxPageState.theme == "expertusoneV2"){
								var gridWidth 		= 720;
								var detailsWidth 	= 520;
								var actionWidth 	= 150;
								var iconsWidth 		= 74;
							}else{
								var detailsWidth 	= 595;
								var actionWidth 	= 130;
								var gridWidth 		= 770;
								var iconsWidth 		= 54;
							}
							//Condition for commerce module showindg search widget in JQgrid table format
							if(curModule == 'administration/learning' || subModule == 'administration/manage/content' || subModule == 'administration/contentauthor/video' || subModule == 'administration/contentauthor/presentation' ||  subModule == 'administration/manage/banner'  || subModule == 'administration/sitesetup/moduleinfo'
								|| subModule == 'administration/commerce/order' || subModule == 'administration/manage/announcement') {
								var tmp_html=$('#narrow-search-results-holder').html();
								if(tmp_html=="<TBODY></TBODY>" || tmp_html=="<tbody></tbody>"){
									$('#narrow-search-results-holder').html("");
								}
								if($('#narrow-search-results-holder').html().length <= 0) {
									//("renderSearchResults");
									curObj.createLoader("main-wrapper");
								
									var curObjStr = '$("#' + curObj.widgetInitId + '").data("' + curObj.widgetName + '")';
									//admininister page jqgrid declaration here
									$("#narrow-search-results-holder").jqGrid( {
										url : curObj.constructUrl(curObj.searchBasePath),
										datatype : "json",
										mtype : 'GET',
										colNames : [ 'Icons','Details', 'Action' ],
										//colNames : [ 'Details' ],
										colModel : [ {
											name : 'Icons',
											index : 'Icons',
											classes:'rowpaddTB',
											title : false,
											width : iconsWidth,
											'widgetObj' : curObjStr,
											formatter : curObj.paintSearchResultsIcons
										},  {
											name : 'Details',
											index : 'Details',
											classes:'rowpaddTB',
											title : false,
											width : detailsWidth ,
											'widgetObj' : curObjStr,
											formatter : curObj.paintSearchResults
										}, {
											name : 'Action',
											index : 'Action',
											classes:'rowpaddTB',
											title : false,
											width : actionWidth,
											'widgetObj' : curObjStr,
											formatter : curObj.paintSearchResultsAction
										} ],
										rowNum : 10,
										rowList : [ 10, 25, 50 ],
										pager : '#narrow-search-results-pager',
										viewrecords : true,
										emptyrecords : "",
										sortorder : "desc",
										toppager : true,
										height : 'auto',
										width : gridWidth,
										loadtext : "",
										recordtext : "",
										pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
										loadui : false,
										userdata: "userdata",
										loadComplete : curObj.loadComplete
									});
									/* .navGrid('#narrow-search-results-pager', {
										add : false,
										edit : false,
										del : false,
										search : false,
										refreshtitle : true
									}); */
									// curObj.hidePageControls(true); // show in loadComplete()
								}else{
								curObj.refreshGrid();
								if($('#narrow-search-actionbar')){
								  $('#narrow-search-actionbar').show();
								}
							}
						} else if((curModule == 'administration/people' && subModule != 'administration/people/organization'&&
						            subModule != 'administration/people/group')  ||
						               subModule == 'administration/commerce/setting'  ||  subModule == 'administration/people/setup' ||  subModule == 'administration/manage/announcement' ||  subModule == 'administration/sitesetup/config') {
              				var iconsWidth = 38;
              				if (subModule == 'administration/commerce/setting' || subModule == 'administration/people/setup' || subModule == 'administration/sitesetup/config') {
                				iconsWidth = 80;
                				detailsWidth = 440;
              				}
              			
							var tmp_html=$('#narrow-search-results-holder').html();
							if(tmp_html=="<TBODY></TBODY>" || tmp_html=="<tbody></tbody>"){
								$('#narrow-search-results-holder').html("");
							}
							if($('#narrow-search-results-holder').html().length <= 0) {
								//("renderSearchResults");
								curObj.createLoader("main-wrapper");
								var curObjStr = '$("#' + curObj.widgetInitId + '").data("' + curObj.widgetName + '")';

								if(Drupal.settings.ajaxPageState.theme == "expertusoneV2"){
									var iconsWidth 		= 50;
								}
								$("#narrow-search-results-holder").jqGrid( {
									url : curObj.constructUrl(curObj.searchBasePath),
									datatype : "json",
									mtype : 'GET',
									colNames : [ 'Icons','Details'],
									//colNames : [ 'Details' ],
									colModel : [ {
										name : 'Icons',
										index : 'Icons',
										classes:'rowpaddTB',
										title : false,
										width : iconsWidth,
										'widgetObj' : curObjStr,
										formatter : curObj.paintSearchResultsIcons
									},  {
										name : 'Details',
										index : 'Details',
										classes:'rowpaddTB',
										title : false,
										width : detailsWidth,
										'widgetObj' : curObjStr,
										formatter : curObj.paintSearchResults
									}],
									rowNum : 10,
									rowList : [ 10, 25, 50 ],
									pager : '#narrow-search-results-pager',
									viewrecords : true,
									emptyrecords : "",
									sortorder : "desc",
									toppager : true,
									height : 'auto',
									width : gridWidth,
									loadtext : "",
									recordtext : "",
									pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
									loadui : false,
									loadComplete : curObj.loadComplete
								});
								/* .navGrid('#narrow-search-results-pager', {
									add : false,
									edit : false,
									del : false,
									search : false,
									refreshtitle : true
								}); */
								// curObj.hidePageControls(true); // show in loadComplete()
							}else{
								curObj.refreshGrid();
								if($('#narrow-search-actionbar')){
								  $('#narrow-search-actionbar').show();
								}
							}
						}
//#custom_attribute_0078975
						else if(curModule == 'administration/survey' || subModule == 'administration/survey/surveydetails' || 
								subModule == 'administration/assessment/assessmentdetails' || subModule == 'administration/assessment/assessmentquestions' || 
								subModule == 'administration/survey/surveyquestions' || subModule == 'administration/contentauthor/video' 
									||subModule == 'administration/contentauthor/presentation' 
										||subModule == 'administration/manage/location'
										|| subModule == 'administration/manage/customattribute' || subModule == 'administration/manage/notification_template' || subModule == 'administration/manage/certificate'
							  || subModule == 'administration/commerce/tax' || subModule == 'administration/commerce/discounts'){
							var tmp_html=$('#narrow-search-results-holder').html();
							if(tmp_html=="<TBODY></TBODY>" || tmp_html=="<tbody></tbody>"){
								$('#narrow-search-results-holder').html("");
							}

							if(Drupal.settings.ajaxPageState.theme == "expertusoneV2"){
								var detailsWidth 	= 600;
								var actionWidth 	= 150;
							}else{
								var detailsWidth 	= 655;
								var actionWidth 	= 130;
							}
							if($('#narrow-search-results-holder').html().length <= 0) {
								//("renderSearchResults");
								curObj.createLoader("main-wrapper");
								var curObjStr = '$("#' + curObj.widgetInitId + '").data("' + curObj.widgetName + '")';

								$("#narrow-search-results-holder").jqGrid( {
									url : curObj.constructUrl(curObj.searchBasePath),
									datatype : "json",
									mtype : 'GET',
									colNames : [ 'Details', 'Action' ],
									colModel : [ {
										name : 'Details',
										index : 'Details',
										classes:'rowpaddTB',
										title : false,
										width : detailsWidth,
										'widgetObj' : curObjStr,
										formatter : curObj.paintSearchResults
									}, {
										name : 'Action',
										index : 'Action',
										classes:'rowpaddTB',
										title : false,
										width : actionWidth,
										'widgetObj' : curObjStr,
										formatter : curObj.paintSearchResultsAction
									}],
									rowNum : 10,
									rowList : [ 10, 25, 50 ],
									pager : '#narrow-search-results-pager',
									viewrecords : true,
									emptyrecords : "",
									sortorder : "desc",
									toppager : true,
									height : 'auto',
									width : gridWidth,
									loadtext : "",
									recordtext : "",
									pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
									loadui : false,
									loadComplete : curObj.loadComplete
								});
								/* .navGrid('#narrow-search-results-pager', {
									add : false,
									edit : false,
									del : false,
									search : false,
									refreshtitle : true
								});
								curObj.hidePageControls(true); // show in loadComplete() */
							}else{
								curObj.refreshGrid();
								if($('#narrow-search-actionbar')){
								  $('#narrow-search-actionbar').show();
								}
							}
						}
						else {
							var tmp_html=$('#narrow-search-results-holder').html();
							if(tmp_html=="<TBODY></TBODY>" || tmp_html=="<tbody></tbody>"){
								$('#narrow-search-results-holder').html("");
							}
							if($('#narrow-search-results-holder').html().length <= 0) {
								//("renderSearchResults");
								curObj.createLoader("main-wrapper");
								var curObjStr = '$("#' + curObj.widgetInitId + '").data("' + curObj.widgetName + '")';

								$("#narrow-search-results-holder").jqGrid( {
									url : curObj.constructUrl(curObj.searchBasePath),
									datatype : "json",
									mtype : 'GET',
									//colNames : [ 'Details', 'Action' ],
									colNames : [ 'Details' ],
									colModel : [ {
										name : 'Details',
										index : 'Details',
										classes:'rowpaddTB',
										title : false,
										width : detailsWidth,
										'widgetObj' : curObjStr,
										formatter : curObj.paintSearchResults
									}/*, {
										name : 'Action',
										index : 'Action',
										title : false,
										width : 130,
										'widgetObj' : curObjStr,
										formatter : curObj.paintSearchResultsAction
									}*/ ],
									rowNum : 10,
									rowList : [ 10, 25, 50 ],
									pager : '#narrow-search-results-pager',
									viewrecords : true,
									emptyrecords : "",
									sortorder : "desc",
									toppager : true,
									height : 'auto',
									width : gridWidth,
									loadtext : "",
									recordtext : "",
									pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
									loadui : false,
									loadComplete : curObj.loadComplete
								});
								/* .navGrid('#narrow-search-results-pager', {
									add : false,
									edit : false,
									del : false,
									search : false,
									refreshtitle : true
								});
								curObj.hidePageControls(true); // show in loadComplete() */
							}else{
								curObj.refreshGrid();
								if($('#narrow-search-actionbar')){
								  $('#narrow-search-actionbar').show();
								}
							}
						}
					},

						paintSearchResults : function(cellvalue, options,rowObject) {
							return rowObject['details'];
						},

						paintSearchResultsAction : function(cellvalue, options,rowObject) {
							return rowObject['action'];
						},
						paintSearchResultsIcons : function(cellvalue, options,rowObject) {
							return rowObject['image'];
						},

						/* hidePageControls : function(hideAll) {
						//Ayyappan
						console.log('hide pager heer');
						  var lastDataRow = $('#narrow-search-results-holder tr.ui-widget-content').filter(":last");
						  //console.log(lastDataRow.length);

              // if (hideAll) {
                //$('#narrow-search-results-pager').hide();
                 if(this.currTheme == "expertusoneV2")
    	  			$('#root-admin-results .block-footer-left').show();
      				$('#narrow-search-results-pager').hide();

                //remove bottom dotted border from the last row in result if records are present
                if (lastDataRow.length != 0) {
                  //console.log('hidePageControls() : hideAll - last data row found');
                  lastDataRow.children('td').css('border', '0 none');
                }
              }
              else {
              	$('#narrow-search-results-pager').show();
                //console.log('hidePageControls() : hide only next/prev page control');
                if(this.currTheme == "expertusoneV2")
                $('#root-admin-results .block-footer-left').hide();
                $('#narrow-search-results-pager #narrow-search-results-pager_center #first_narrow-search-results-pager').hide();
                $('#narrow-search-results-pager #narrow-search-results-pager_center #last_narrow-search-results-pager').hide();
                $('#narrow-search-results-pager #narrow-search-results-pager_center #next_narrow-search-results-pager').hide();
                $('#narrow-search-results-pager #narrow-search-results-pager_center #prev_narrow-search-results-pager').hide();
                $('#narrow-search-results-pager #narrow-search-results-pager_center #sp_1_narrow-search-results-pager').parent().hide();
                //if (lastDataRow.length != 0) {
                  //add bottom dotted border from the last row in result if records are present
                  //lastDataRow.children('td').css('border-bottom', '1px dotted #CCCCCC');
                //}
              }
						}, */

	showPageControls : function() {
	  //console.log('showPageControls() : show all control');
	  $('#narrow-search-results-pager').show();
	  if(this.currTheme == "expertusoneV2")
	  $('#root-admin-results .block-footer-left').hide();
	  $('#narrow-search-results-pager #narrow-search-results-pager_center #first_narrow-search-results-pager').show();
	  $('#narrow-search-results-pager #narrow-search-results-pager_center #last_narrow-search-results-pager').show();
      $('#narrow-search-results-pager #narrow-search-results-pager_center #next_narrow-search-results-pager').show();
      $('#narrow-search-results-pager #narrow-search-results-pager_center #prev_narrow-search-results-pager').show();
      $('#narrow-search-results-pager #narrow-search-results-pager_center #sp_1_narrow-search-results-pager').parent().show();
             // issue In Pagination Width
      if(this.currTheme == "expertusone")
    	  $('#narrow-search-results-pager #narrow-search-results-pager_center').removeAttr("style");
      //add bottom dotted border from the last row in result if records are present
      //var lastDataRow = $('#narrow-search-results-holder tr.ui-widget-content').filter(":last");
      //if (lastDataRow.length != 0) {
        //lastDataRow.children('td').css('border-bottom', '1px dotted #CCCCCC');
      //}
				},

						loadComplete : function(response, postdata, formid, updateShowMore) {
							var curObj=this;
							curObj.widgetInitId="root-admin";
							curObj.widgetName="narrowsearch";

							Drupal.attachBehaviors(); // for initializing ctools.
							$('#narrow-search-results-holder').show();
							//alert("Load Complete");
							if($('#narrow-search-actionbar')){
							  $('#narrow-search-actionbar').show();
							}
							//38455: Managed by filters me is not checked when login as multilanguage
							// Managed By behavior
							var userData = $('#narrow-search-results-holder').jqGrid('getGridParam', 'userData');
				              if (typeof userData.managedBy != 'undefined' && userData.managedBy != '') {
				                var managedByCheckboxId = '#managed_by_1 input';	//change by ayyappans for 0040223: See more link is not working in narrow filter in user grid page
				                if (typeof userData.adminPage != 'undefined' && userData.adminPage == 'class') {
				                  managedByCheckboxId = '#managed_by_1 input';
				                }

				                if (typeof userData.adminPage != 'undefined' && userData.adminPage == 'class') {
				                  $('#checkbox_clspgopened').attr('checked', 'checked');
				                  $('#checkbox_clspgopened').parent().removeClass('narrow-search-filterset-checkbox-unselected');
				                  $('#checkbox_clspgopened').parent().addClass('narrow-search-filterset-checkbox-selected');
				                }

				                if (userData.managedBy == 'me') {
				                  $(managedByCheckboxId).attr('checked', 'checked');
				                  $(managedByCheckboxId).parent().removeClass('narrow-search-filterset-checkbox-unselected');
				                  $(managedByCheckboxId).parent().addClass('narrow-search-filterset-checkbox-selected');
				                  $('#managed_by_1').children('.narrow-search-filterset-item-label-unselected').removeClass('narrow-search-filterset-item-label narrow-search-filterset-item-label-unselected').addClass('narrow-search-filterset-item-label narrow-search-filterset-item-label-selected');
				                }
				              }

							var numRecords = parseInt($("#narrow-search-results-holder").getGridParam("records"), 10);
							//console.log('loadComplete() : numRecords = ' + numRecords);
							if (numRecords == 0) {
								$('#narrow-search-no-records').show();
							} else {
								$('#narrow-search-no-records').hide();
							}

							// Show pagination only when search results span multiple pages
			              var recordsPerPage = parseInt($("#narrow-search-results-holder").getGridParam("reccount"), 10);
			              //console.log('loadComplete() : recordsPerPage = ' + recordsPerPage);

			              var hideAllPageControls = true;
			              if (numRecords > 10) { // 10 is the least view per page option.
			                hideAllPageControls = false;
			                //console.log('loadComplete() : hideAllPageControls set to false');
			                $("#page-container #narrow-search-results-holder tr.ui-widget-content:last-child > td.rowpaddTB").css("padding-bottom","9px");
			              }

			              /* if (numRecords <= recordsPerPage) {
			               //console.log('loadComplete() : numRecords <= recordsPerPage : hide pagination controls');
			                $('#' + curObj.widgetInitId).data(curObj.widgetName).hidePageControls(hideAllPageControls);
			              }
			              else {
			                //console.log('loadComplete() : numRecords <= recordsPerPage : show pagination controls including view per page control');
			                $('#' + curObj.widgetInitId).data(curObj.widgetName).showPageControls();
			              } */
							//$('#' + curObj.widgetInitId).data(curObj.widgetName).initGrid('#' + curObj.widgetInitId,curObj.widgetName);
							if ($('#' + curObj.widgetInitId).data(curObj.widgetName).firstTime) {
								$("#narrow-search-filters").show();
								$("#narrow-search-results-topbar").show();
								$("#" + response.initial_sort_type_html_id).addClass('sortype-high-lighter');
								$('#' + curObj.widgetInitId).data(curObj.widgetName).firstTime = false;
								$('#' + curObj.widgetInitId).data(curObj.widgetName).initGrid('#' + curObj.widgetInitId,curObj.widgetName);
							}
							else{
								if($('#' + curObj.widgetInitId).data(curObj.widgetName).lastSortTypeHtmlId)
								    $("#" + $('#' + curObj.widgetInitId).data(curObj.widgetName).lastSortTypeHtmlId).addClass('sortype-high-lighter');
								else
									$("#" + response.initial_sort_type_html_id).addClass('sortype-high-lighter');
							}
							$('#' + curObj.widgetInitId).data(curObj.widgetName).destroyLoader('paint-narrow-search-results');
							$('#' + curObj.widgetInitId).data(curObj.widgetName).destroyLoader('main-wrapper');
								//Vtip-Display toolt tip in mouse over
//							$('.fade-out-title-container').each(function() {
//								//console.log($(this).width());
//								//console.log($(this).find('.title-lengthy-text').width());
//								if($(this).width() >= $(this).find('.title-lengthy-text').width()) {
//									$(this).find('.fade-out-image').remove();
//								}
//								//title-lengthy-text
//							});
								 vtip();
								 resetFadeOutByClass('#narrow-search-results-holder','narrow-search-results-item-detail','vtip','admin'); /*Viswanathan added for #76811*/
							$('.limit-title').trunk8(trunk8.admin_title);
					 		$('.limit-desc').trunk8(trunk8.admin_desc);
						//	Drupal.attachBehaviors();
							// if ($("#paint-narrow-search-results").data('showmore') === undefined) {
							updateShowMore = ((updateShowMore == undefined || updateShowMore == null) ? true : updateShowMore);

							if(updateShowMore) {
								$("#paint-narrow-search-results").showmore({
									showAlways: true,
									'grid': '#narrow-search-results-holder',
									'gridWrapper': '#main-wrapper',
									'showMore': '#admin-narrow-search-show-more'
								});
							}
								//bind onclick event for the ajax edit narrow search result icon
								$('#narrow-search-results-holder tr.jqgrow:not(.click-binded)').bind('mousedown', function (e) {
									try {
										// console.log('click happens');
										$('#narrow-search-results-holder').setGridParam({
											'lastAccessedRow': $(e.target).closest("tr.jqgrow")[0]
										});
									} catch (e) {
										// console.log(e, e.stack);
									}
								})
								.addClass('click-binded');
							// }
							// console.log($("#paint-narrow-search-results"), $("#paint-narrow-search-results").data('showmore'));
						},

						getNarrowSearchURLArgs : function(sortType,sortTypeHtmlId) {

							var searchNarrowParams = '';
							var curObj=this;
							var numfilterSets = curObj.filterSets.length;

							for ( var i = 0; i < numfilterSets; i++) {
								searchNarrowParams += '&' + curObj.filterSets[i].code + '=';
								var appliedFilters = '';
								switch (curObj.filterSets[i].type) {
								case 'radio':
									appliedFilters += $('input[name="'+curObj.filterSets[i].code+'"]:checked').val();
									break;

								case 'checkbox':
									$('#' + curObj.filterSets[i].code + '_filterset .narrow-search-filterset-checkbox').each(function() {
														if ($(this).is(':checked')) {
															appliedFilters += (appliedFilters == '') ? '': '|';
															appliedFilters += $(this).val();
														}
									});
									break;

								case 'addltext':
									var tmpDefaultText;
									var curText = $('#' + curObj.filterSets[i].code + '-addltext-filter').val();
									if (curText == curObj.filterSets[i].defaultText || curText == undefined || curText === null || curText == "") {
										tmpDefaultText = '';
									} else {
										tmpDefaultText = curText;
									}
									appliedFilters += encodeURIComponent(tmpDefaultText);
									break;

								case 'tagscloud':
									var curText = $('#' + curObj.filterSets[i].code + '-addltext-filter').val();
									if(curText == undefined || curText === null || curText == ""){
										curText = '';
									}
									appliedFilters += encodeURIComponent(curText);
									break;

								case 'slider':
									var prefix = $('#'+curObj.filterSets[i].code+'_filterset').data("prefix");
									var suffix = $('#'+curObj.filterSets[i].code+'_filterset').data("suffix");
									var tempprice;
									var Lprice = '';
									var Rprice = '';

									if($( '#value-slide-left-'+curObj.filterSets[i].code+'' ).val() != undefined){
										Lprice = $( '#value-slide-left-'+curObj.filterSets[i].code+'' ).val().replace(prefix+suffix,'');
									}
									if($( '#value-slide-right-'+curObj.filterSets[i].code+'' ).val() != undefined){
										Rprice = $( '#value-slide-right-'+curObj.filterSets[i].code+'' ).val().replace(prefix+suffix,'');
									}
									
									if((Lprice == undefined || Lprice === null || Lprice == "") || (Rprice == undefined || Rprice === null || Rprice == "")) {
										tempprice = '';
									}
									else {
										tempprice = $.trim(Lprice+'|'+Rprice);
									}
//									if(tempprice == 'undefined-undefined' || tempprice == undefined-undefined || tempprice =='|' || tempprice == undefined || tempprice === null || tempprice == "")
//										tempprice = '';

									appliedFilters += tempprice;
									break;

								case 'daterange':
									var clrLinkSelector = '#' + curObj.filterSets[i].code + '-daterange-clr';

									var fromDate = $('#' + curObj.filterSets[i].code + '-daterange-from-date').val();
									var toDate = $('#' + curObj.filterSets[i].code + '-daterange-to-date').val();

									if (fromDate == curObj.filterSets[i].from_default_text || fromDate == undefined || fromDate === null || fromDate == "") {
										fromDate = '';
									} else {
										$(clrLinkSelector).css('display','block');
									}

									if (toDate == curObj.filterSets[i].to_default_text || toDate == undefined || toDate === null || toDate == "") {
										toDate = '';
									} else {
										$(clrLinkSelector).css('display','block');
									}
									appliedFilters += fromDate + '|' + toDate;
									break;
								} // end switch

								searchNarrowParams += appliedFilters;
							} // end for loop

							// Append sortby to the search string
							searchNarrowParams += '&sortby=' + sortType;

							// Append text substring from Search By Text filter
							var textFilter = ($('#narrow-search-text-filter').val() == curObj.topTextFilterLabel) ? '' : $('#narrow-search-text-filter').val();
							 //44552: search not working in survey and assessment page.
							searchNarrowParams += '&textfilter=' + encodeURIComponent(textFilter);

							return searchNarrowParams;
						},

						refreshGrid : function(sortType, sortTypeHtmlId) {
							if($('#narrow-search-actionbar')){
							  //$('#narrow-search-actionbar').hide();
							}
							var curObj=this;

							if (sortType == undefined || sortType == null || sortType == '') {
								sortType = curObj.lastSortType;
							}
							if (sortTypeHtmlId == undefined || sortTypeHtmlId == null || sortType == '') {
								sortTypeHtmlId = curObj.lastSortTypeHtmlId;
							}
							$('#gview_narrow-search-results-holder').css('min-height', '100px');
                         //   if(curObj.searchBasePath == "administration/learning/catalog/search/all/")
                            curObj.createLoader('main-wrapper');
                         //   else
							//curObj.createLoader('paint-narrow-search-results');

							var ajaxUrl = curObj.constructUrl(curObj.searchBasePath + curObj.getNarrowSearchURLArgs(sortType,sortTypeHtmlId));
							//console.log('ajaxUrl', ajaxUrl);
							if(ajaxUrl.indexOf('catalogtype=Class') !== -1) {
								$('#narrow-search-results-holder').setGridParam({jsonReader: {id: "jqgrid-rowid"}});;
							} else {
								$('#narrow-search-results-holder').setGridParam({jsonReader: {id: "id"}});;
							}
							$('#narrow-search-results-holder').setGridParam({url : ajaxUrl});

							$("#narrow-search-results-holder").trigger("reloadGrid", [ {page : 1} ]);

							curObj.updateCheckboxFiltersDisplay();

							// Highlight correct sort type
							$('.narrow-search-sortbar-sortlinks li').each(function() {
										$(this).find('a').removeClass('sortype-high-lighter');
							});

							if (sortTypeHtmlId.length > 0) {
								$('#' + sortTypeHtmlId).addClass('sortype-high-lighter');
								curObj.lastSortType = sortType;
								curObj.lastSortTypeHtmlId = sortTypeHtmlId;
							}
							vtip();
						},

						updateCheckboxFiltersDisplay : function() {
							$('.narrow-search-filtersets-holder').find('input[type=checkbox]').each(function() {
												if ($(this).is(':checked')) {
													$(this).parent().next('label').removeClass('narrow-search-filterset-item-label-unselected');
													$(this).parent().next('label').addClass('narrow-search-filterset-item-label-selected');
													$(this).parent().removeClass('narrow-search-filterset-checkbox-unselected');
													$(this).parent().addClass('narrow-search-filterset-checkbox-selected'); // The checkbox itself is animage
												} else {
													$(this).parent().next('label').removeClass('narrow-search-filterset-item-label-selected');
													$(this).parent().next('label').addClass('narrow-search-filterset-item-label-unselected');
													$(this).parent().removeClass('narrow-search-filterset-checkbox-selected');
													$(this).parent().addClass('narrow-search-filterset-checkbox-unselected'); // The checkbox itself is an image
												}
											});

							$('.narrow-search-filtersets-holder').find('input[type=radio]').each(function() {
								if ($(this).is(':checked')) {
									$(this).parent().next('label').removeClass('narrow-search-filterset-item-label-unselected');
									$(this).parent().next('label').addClass('narrow-search-filterset-item-label-selected');
									$(this).parent().removeClass('narrow-search-filterset-radio-unselected');
									$(this).parent().addClass('narrow-search-filterset-radio-selected'); // The radio itself is animage
									// the data is undefined,added this condition.							
									if($(".classlangtype-scroll-list-container").jScrollPane({}).data('jsp') != undefined)
									{
									$(".classlangtype-scroll-list-container").jScrollPane({}).data('jsp').destroy();
									}
									$(".classlangtype-scroll-list-container").jScrollPane();	//Apply scroll
									if($(".classcurrency-scroll-list-container").jScrollPane({}).data('jsp') != undefined)
									{
									$(".classcurrency-scroll-list-container").jScrollPane({}).data('jsp').destroy();
									}
									$(".classcurrency-scroll-list-container").jScrollPane();	//Apply scroll	
								} else {
									$(this).parent().next('label').removeClass('narrow-search-filterset-item-label-selected');
									$(this).parent().next('label').addClass('narrow-search-filterset-item-label-unselected');
									$(this).parent().removeClass('narrow-search-filterset-radio-selected');
									$(this).parent().addClass('narrow-search-filterset-radio-unselected'); // The checkbox itself is an image

								}
							})
							vtip();
						},

						initGrid : function(widgetSelector, widgetName) {
							$('#first_narrow-search-results-pager').click(function(e) {
												if (!$('#first_narrow-search-results-pager').hasClass('ui-state-disabled')) {
													$('#narrow-search-results-holder').hide();
													$('#gview_narrow-search-results-holder').css('min-height','100px');
													$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
												}
											});
							$('#prev_narrow-search-results-pager').click(function(e) {
												if (!$('#prev_narrow-search-results-pager').hasClass('ui-state-disabled')) {
													$('#narrow-search-results-holder').hide();
													$('#gview_narrow-search-results-holder').css('min-height','100px');
													$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
												}
											});

							$('#next_narrow-search-results-pager').click(function(e) {
												if (!$('#next_narrow-search-results-pager').hasClass('ui-state-disabled')) {
													$('#narrow-search-results-holder').hide();
													$('#gview_narrow-search-results-holder').css('min-height','100px');
													$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
												}
											});
							$('#last_narrow-search-results-pager').click(function(e) {
												if (!$('#last_narrow-search-results-pager').hasClass('ui-state-disabled')) {
													$('#narrow-search-results-holder').hide();
													$('#gview_narrow-search-results-holder').css('min-height','100px');
													$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
												}
											});

							$('.ui-pg-selbox').bind('change',function() {
												$('#narrow-search-results-holder').hide();
												$('#gview_narrow-search-results-holder').css('min-height','100px');
												$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
												$(widgetSelector).data(widgetName).hidePageControls(false);
												this.blur();
											});

							$(".ui-pg-input").keyup(function(event) {
												if (event.keyCode == 13) {
													$('#narrow-search-results-holder').hide();
													$('#gview_narrow-search-results-holder').css('min-height','100px');
													$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
												}
											});

							if(this.currTheme == "expertusoneV2"){
								$('#narrow-search-results-pager .page-show-prev').bind('click',function() {
									if(parseInt($("#narrow-search-results-pager .page_count_view").attr('id')) < 0){
										$("#narrow-search-results-pager .page_count_view").attr('id','0');
									}else{
										$('#narrow-search-results-holder').hide();
										$('#gview_narrow-search-results-holder').css('min-height','100px');
										$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
										$(widgetSelector).data(widgetName).hidePageControls(false);
									}
								});

								$('#narrow-search-results-pager .page-show-next').bind('click',function() {
									if(parseInt($("#narrow-search-results-pager .page_count_view").attr('id')) >= parseInt($("#narrow-search-results-pager .page-total-view").attr('id'))){
										$("#narrow-search-results-pager .page_count_view").attr('id',($("#narrow-search-results-pager .page_count_view").attr('id')-1));
									}else{
										$('#narrow-search-results-holder').hide();
										$('#gview_narrow-search-results-holder').css('min-height','100px');
										$(widgetSelector).data(widgetName).createLoader('paint-narrow-search-results');
										$(widgetSelector).data(widgetName).hidePageControls(false);
									}
								});

							}
							vtip();
						},

						initTextFilter : function(textFilterACPath) {

							if ($('#narrow-search-text-filter')) {
								var obj = this;
								// Destroy previous autocomplete setup on this field
								$('#narrow-search-text-filter').removeData();

								$("#narrow-search-text-filter").keyup(function(event) {
											if (event.keyCode == 13) {
												obj.narrowSearchByText();
												$('.ac_results').css('display', 'none');
											}
								});

								$('#narrow-search-text-filter-go').click(function() {
									        /*this.currTheme = Drupal.settings.ajaxPageState.theme;*/
											obj.narrowSearchByText();
											 /*var selector='#narrow-search-text-filter';
                                             $(selector).addClass('header-search-text-filter');
                                             $(selector).removeClass('narrow-search-filterset-daterange-nonempty');
                                             $(selector).addClass('narrow-search-filterset-daterange-empty');
                                             if(this.currTheme == 'expertusoneV2'){
                                            	 $(selector).val(Drupal.t('LBL304'));
                                             }else{
                                            	 $(selector).val((Drupal.t('LBL304')).toUpperCase());
                                             }*/

								});

								if (textFilterACPath != undefined && textFilterACPath != 'undefined' && textFilterACPath != null && textFilterACPath != '') {
									textFilterACPath = "/?q="+ textFilterACPath;
									$('#narrow-search-text-filter').autocomplete(textFilterACPath, {
												minChars : 3,
												max : 50,
												autoFill : true,
												mustMatch : false,
												matchContains : false,
												inputClass : "ac_input",
												loadingClass : "ac_loading"
											});
								}
							}

							this.initTextDateFilterBlurStyle("#narrow-search-text-filter", obj.topTextFilterLabel,"1");
							$("#narrow-search-text-filter").focus(function () {
								try {
									var inputElem = $(this);
									inputElem.val() == '' || addClearIcon(inputElem);
								} catch(e) {
									// window.console.log(e, e.stack);
								}
							})
							.blur(function(e) {
								try {
									var inputElem = $(this);
									removeClearIcon(inputElem)
								} catch(e) {
									// window.console.log(e, e.stack);
								}
							}).keyup(function () {
								var inputElem = $(this);
								if(inputElem.siblings('.eol-search-clearance').length < 1) {
									inputElem.val() == '' || addClearIcon(inputElem);
								} else {
									inputElem.val() == '' && removeClearIcon(inputElem);
								}
							});
							vtip();						
						},


						initFilters : function() {

							// init each filter as appropriate
							for ( var i = 0; i < this.filterSets.length; i++) {
								var filterSet = this.filterSets[i];
								 //alert(filterSet.toSource());
								switch (filterSet.type) {
								case 'addltext':
									this.initAddlTextFilter(filterSet);
									break;

//								case 'tagscloud':
//									if ($('#' + filterSet.code + '_tagscloud').is(':visible')) {
//								      var tagsHeight = $('#' + filterSet.code + '_tagscloud').height();
//								      if (tagsHeight > 175) {
//								        $('#' + filterSet.code + '_tagscloud').height(175);
//									    $('#' + filterSet.code + '_tagscloud').css('max-height', '175px');
//										$('#' + filterSet.code + '_tagscloud').jScrollPane({});
//									  }
//	                                }
//									break;

								case 'daterange':
									this.initDateRangeFilter(filterSet);
									break;

								case 'slider' :
									this.initSlider(filterSet);
									break;

								case 'checkbox':
									if (filterSet.code =='group') {
										if ($('#' + filterSet.code + '_filterset').is(':visible')) {
											($('#' + filterSet.code + '_filterset').removeClass('display-more'));
											var groupHeight = $('#' + filterSet.code + '_filterset').height();
										      if (groupHeight > 10) {
											    $('#' + filterSet.code + '_filterset').css({'width':'160px'});
											    //$('#' + filterSet.code + '_filterset').css({'height':'100px','max-height', '100px'});
											    //$('.jspContainer').css('width','160px');
												//$('#' + filterSet.code + '_filterset').jScrollPane({});
										}
									}
								  }
								} // end switch
							} // end for
							//Removing last filter type border
							var filterCount = $('.narrow-search-filterset').filter(':visible').length-1;
							$('.narrow-search-filterset:eq('+filterCount+')').css({'border-bottom':'none','padding-bottom':'0px'});
						},


					    initTextDateFilterBlurStyle : function(selector,defaultText,fromTopFilterTextSearch) {

							var data = selector + '&' + defaultText + '&' + fromTopFilterTextSearch;
							var curObj=this;

							$(selector).blur(data,function(event) { // Can pass a string data only. but not an object data as objects are passed by reference
												var data = event.data;
												var tokens = data.split("&");
												var selector = tokens[0];
												var fieldValue = $(selector).val();
												var defaultText = tokens[1];
												var fromTopFilterTextSearch = tokens[2];

												if(fromTopFilterTextSearch=="1"){
													defaultText=curObj.topTextFilterLabel;
												}

												if (fieldValue == '' || fieldValue == defaultText) {
													$(selector).removeClass('narrow-search-filterset-daterange-nonempty');
													$(selector).addClass('narrow-search-filterset-daterange-empty');
													$(selector).val(defaultText);
												} else if (fieldValue != defaultText) {
													$(selector).removeClass('narrow-search-filterset-daterange-empty');
													$(selector).addClass('narrow-search-filterset-daterange-nonempty');
												}

											});

							$(selector).focus(data,function(event) { // Can pass a string data only.but not an object data as objects are passed by  reference
												var data = event.data;
												var tokens = data.split("&");
												var selector = tokens[0];
												var fieldValue = $(selector).val();
												var defaultText = tokens[1];
												//$(selector).val('');
												if (fieldValue == defaultText) {
													$(selector).val('');
												}
												$(selector).removeClass('narrow-search-filterset-daterange-empty');
												$(selector).addClass('narrow-search-filterset-daterange-nonempty');

											});

							$(selector).change(data,function(event) { // Can pass a string data only.but not an object data as objects are passed by reference
												var data = event.data;
												var tokens = data.split("&");
												var selector = tokens[0];
												var fieldValue = $(selector).val();
												var defaultText = tokens[1];
												var fromTopFilterTextSearch = tokens[2];

												if(fromTopFilterTextSearch=="1"){
													defaultText=curObj.topTextFilterLabel;
												}

												if (fieldValue == '' || fieldValue == defaultText) {
													$(selector).removeClass('narrow-search-filterset-daterange-nonempty');
													$(selector).addClass('narrow-search-filterset-daterange-empty');
													$(selector).val(defaultText);
												} else {
													$(selector).removeClass('narrow-search-filterset-daterange-empty');
													$(selector).addClass('narrow-search-filterset-daterange-nonempty');
												}

											});

							var fieldValue = $(selector).val();

							if (fieldValue == defaultText) {
								$(selector).addClass('header-search-text-filter');
								$(selector).removeClass('narrow-search-filterset-daterange-nonempty');
								$(selector).addClass('narrow-search-filterset-daterange-empty');
								$(selector).val(defaultText);
							}

							vtip();
						},


						initAddlTextFilter : function(filterSet) {
							if ($('#' + filterSet.code + '-addltext-filter')) {

								var obj = this;

								$('#' + filterSet.code + '-addltext-filter').keyup(filterSet.code,function(event) {
													if (event.keyCode == 13) {
														obj.narrowSearchByAddlText(event.data);

														//Display clear link in the arrow search filter
														$('#' + filterSet.code + '-addltext-clr').css('display','block');
														$('.ac_results').css('display', 'none');
													}
								});

								$('#' + filterSet.code + '-addltext-filter-go').click(filterSet.code,function(event) {
									if($("#" + filterSet.code + "-addltext-filter").val() != filterSet.defaultText){
										obj.narrowSearchByAddlText(event.data);
									}
								});

								if (filterSet.acpath != undefined && filterSet.acpath != 'undefined' && filterSet.acpath != null && filterSet.acpath != '') {
									var addlTextFilterACPath = "/?q=" + filterSet.acpath;
									var multipleval = '';
									if(filterSet.code == 'grporg' || filterSet.code == 'grpjobrole' || filterSet.code == 'grploc'|| filterSet.code == 'grpempl' || filterSet.code == 'grpdep' || filterSet.code == 'grpusrtyp' || filterSet.code == 'grpcontry'|| filterSet.code == 'grplang')
										multipleval = true;
									else
										multipleval = false;
									$('#' + filterSet.code + '-addltext-filter') .autocomplete(addlTextFilterACPath,{
														minChars : 3,
														max : 50,
														autoFill : true,
														mustMatch : false,
														matchContains : false,
														inputClass : "ac_input",
														loadingClass : "ac_loading",
														multiple: multipleval

								    });
								} // endif !empty(textFilterACPath)
							} // end filterset exists

							var selector = "#" + filterSet.code + '-addltext-filter';
							var defaultText = filterSet.defaultText;
							this.initTextDateFilterBlurStyle(selector,defaultText);
						},

						initDateRangeFilter : function(filterSet) {
							if ($('#' + filterSet.code + '-daterange-from-date')) {
								filterSet.__init = 'FROM';
								this.initDateRangeDateField(filterSet);
							}
							if ($('#' + filterSet.code + '-daterange-to-date')) {
								filterSet.__init = 'TO';
								this.initDateRangeDateField(filterSet);
							}
						},

						initDateRangeDateField : function(filterSet) {
							var selectorSuffix = (filterSet.__init == 'FROM') ? '-daterange-from-date' : '-daterange-to-date';
							var selector = '#' + filterSet.code + selectorSuffix;
							var buttonText = (filterSet.__init == 'FROM') ? filterSet.from_tooltip : filterSet.to_tooltip;
							var calendarIcon = resource.base_url + '/' + themepath + '/expertusone-internals/images/calendar_icon.JPG';
							// alert(calendarIcon);
							$(selector).datepicker({
												duration : '',
												showTime : false,
												constrainInput : false,
												stepMinutes : 5,
												stepHours : 1,
												time24h : true,
												dateFormat : "mm-dd-yy",
												buttonImage : calendarIcon,
												buttonImageOnly : true,
												firstDay : 0,
												showOn : 'both',
												buttonText : buttonText,
												showButtonPanel : true,
												changeMonth : true,
												changeYear : true,
												daterangeDiffDays : 20000,

												beforeShow : function(input) {

													var data = $("#" + input.id).metadata();
													var dateFieldCode = data.dateFieldCode;
													var dateShowOption = data.dateRangeShowOption;

													if (dateShowOption == "" || dateShowOption == null || dateShowOption == "undefined") {
														dateShowOption = "all";
													}
													if (dateFieldCode == "" || dateFieldCode == null || dateFieldCode == "undefined") {
														var tokens = data .split("-");
														var dateFieldCode = tokens[0];
													}

													var dateMin = null;
													var dateMax = null;
													var fromSelectorCode = dateFieldCode + '-daterange-from-date';
													var toSelectorCode = dateFieldCode + '-daterange-to-date';
													var fromSelector = '#' + fromSelectorCode;
													var toSelector = '#' + toSelectorCode;

													if (input.id == fromSelectorCode && $(fromSelector).datepicker("getDate") != null) {
														var daterangeDiffDays = $(fromSelector).datepicker("option","daterangeDiffDays");

														if (dateShowOption == "future") { // To show future and today date for From Date

															dateMin = new Date();
															dateMax = $(toSelector).datepicker("getDate");
															dateMax.setDate(dateMin.getDate()+daterangeDiffDays);

														} else if (dateShowOption == "past") { // Default is to Show Past and Today Date for From Date

															var toDateFull = $(toSelector).datepicker("getDate");
															var fromDateFull = $(fromSelector).datepicker("getDate");
															var fromDate = fromDateFull.getFullYear()+ ","+ fromDateFull.getMonth()+ ","+ fromDateFull.getDate();
															var toDate = toDateFull.getFullYear()+ ","+ toDateFull.getMonth()+ ","+ toDateFull.getDate();
															var dateFromObj = new Date(fromDate);
															var dateToObj = new Date(toDate);
															var diffDates = dateToObj - dateFromObj;

															dateMax = new Date();

															if (diffDates == 0) {
																dateMin = $(fromSelector).datepicker("getDate");
																dateMin.setDate(dateMin.getDate() - daterangeDiffDays);
																dateMax = new Date();
															} else {
																dateMax = $(toSelector).datepicker("getDate");
																dateMin = $(toSelector).datepicker("getDate");
																dateMin.setDate(dateMax.getDate() - daterangeDiffDays);
																dateMax.setDate(dateMax.getDate() - 0);
															}
														}
													} else if (input.id == toSelectorCode) {

														var daterangeDiffDays = $(toSelector).datepicker("option","daterangeDiffDays");

														if (dateShowOption == "future") { // To Show Future and Today Date for To Date
															dateMax = new Date();
															if ($(fromSelector).datepicker("getDate") != null) {
																dateMin = $(fromSelector).datepicker("getDate");
																dateMax = $(fromSelector).datepicker("getDate");
																dateMax.setDate(dateMax.getDate() + daterangeDiffDays);
															}
														} else if (dateShowOption == "past") { // Default is to Show Past and Today Date for To Date
															dateMax = new Date();
															if ($(fromSelector).datepicker("getDate") != null) {
																dateMin = $(fromSelector).datepicker("getDate");
																var minDate = dateMin.getFullYear()+ ","+ dateMin.getMonth()+ ","+ dateMin.getDate();
																var maxDate = dateMax.getFullYear()+ ","+ dateMax.getMonth()+ ","+ dateMax.getDate();
																var dateFromObj = new Date(minDate);
																var dateToObj = new Date(maxDate);
																var diffDates = dateToObj - dateFromObj;

																if (diffDates <= 0) {
																	dateMin.setDate(dateMin.getDate() - daterangeDiffDays);
																} else {
																	dateMin.setDate(dateMin.getDate() - 0);
																}
															}
														}
													}

													return {
														minDate : dateMin,
														maxDate : dateMax
													};

												}
											});

							var defaultText = (filterSet.__init == 'FROM') ? filterSet.from_default_text : filterSet.to_default_text;

							this.initTextDateFilterBlurStyle(selector,defaultText);
						},

						initSlider: function(filterSet){
							obj = this;
							var valueMin = $('#'+filterSet.code+'_filterset').data("startval");
							var valueMax = $('#'+filterSet.code+'_filterset').data("endval");
							var prefix = $('#'+filterSet.code+'_filterset').data("prefix");
							var suffix = $('#'+filterSet.code+'_filterset').data("suffix");
							if(valueMax > valueMin){

								$('#value-slider-range-' + filterSet.code + '').slider({
									range: true,
									min: valueMin,
									max: valueMax,
									values: [ valueMin, valueMax ],
									slide: function( event, ui ) {
										$( '#value-slide-left-'+filterSet.code+'' ).val( prefix + ui.values[ 0 ] + suffix);
										$( '#value-slide-right-'+filterSet.code+'' ).val( prefix + ui.values[ 1 ] + suffix);
										 //+ " - $" + ui.values[ 1 ] );
									},
									change: function(e,ui){
										//$("#prg-admin-search").data("prgsesarch").searchAction();
										 obj.narrowSearchBySlider();
								    }
								});
								$( '#value-slide-left-'+filterSet.code+'').val( prefix + $('#value-slider-range-'+filterSet.code+'' ).slider( 'values', 0 ) + suffix);
								$( '#value-slide-right-'+filterSet.code+'' ).val( prefix + $( '#value-slider-range-'+filterSet.code+'' ).slider( 'values', 1 ) + suffix);
								/*if(this.currTheme == "expertusoneV2"){
									$( '#value-slider-range-'+filterSet.code+' a:last').css('margin-left','-9px');
								}*/
							}

						},

						/*
						 * IsValidDate() - Check that given date is valid or not -
						 * TRUE if date is valid - FALSE if date is valid
						 */
						IsValidDate : function(Day, Mn, Yr) {
							var DateVal = Mn + "/" + Day + "/" + Yr;
							var dt = new Date(DateVal);

							if (dt.getDate() != Day) {
								//alert('Invalid Date');
								return (false);
							} else if (dt.getMonth() != Mn - 1) {
								// this is for the purpose JavaScript starts the
								// month from 0
								//alert('Invalid Date');
								return (false);
							} else if (dt.getFullYear() != Yr) {
								//alert('Invalid Date');
								return (false);
							}

							return (true);
						},

						/*
						 * validateDateRangeDates() - Action for the Go button
						 * in the daterange component - validates dates in the
						 * date range narrow search component. - On error,
						 * displays the error message in the component. - On
						 * success, submits the search request
						 */
						validateDateRangeDates : function(code,ID) {
                            var fromDefaultText = $('#' + ID).data('default-fromtext');
                            var toDefaultText =  $('#' + ID).data('default-totext');
							var fromDateSelector = '#' + code + '-daterange-from-date';

							var toDateSelector = '#' + code + '-daterange-to-date';

							var dateFrom = ($(fromDateSelector).val() == fromDefaultText) ? '' : $(fromDateSelector).val();
							var dateTo = ($(toDateSelector).val() == toDefaultText) ? '' : $(toDateSelector).val();

							if (dateFrom == '' && dateTo == '') {
								this.narrowSearchByDateRange(code);
								return;
							}

							var msg = "";
							var validFromDate = false;
							var validToDate = false;
							if (dateFrom != "") {
								var dateFromSplit = dateFrom.split('-');
								var fromDay = dateFromSplit[1];
								var fromMonth = dateFromSplit[0];
								var fromYear = dateFromSplit[2];
								validFromDate = this.IsValidDate(fromDay, fromMonth, fromYear);
								if (!validFromDate) {
									msg += Drupal.t("LBL1154");
								}
							}
							if (dateTo != "") {
								var dateToSplit = dateTo.split('-');
								var toDay = dateToSplit[1];
								var toMonth = dateToSplit[0];
								var toYear = dateToSplit[2];
								validToDate = this.IsValidDate(toDay, toMonth, toYear);
								if (!validToDate) {
									if (msg != "")
										msg += "<br/>";
									//msg += Drupal.t("LBL1146");
								}
							}
							if (validFromDate == true && validFromDate == true) {
								var dateFromObjStr = fromYear + '/' + fromMonth + '/' + fromDay;
								var dateToObjStr = toYear + '/' + toMonth + '/'+ toDay;
								var dateFromObj = new Date(dateFromObjStr);
								var dateToObj = new Date(dateToObjStr);
								var diffDates = dateToObj - dateFromObj;
								if (diffDates < 0) {
									if (msg != "")
										msg += "<br/>";
									msg += Drupal.t("LBL1155");
								}
							}
							errMsgDivSelector = '#' + code + '-daterange-errmsg';
							if (msg != "") {
								$(errMsgDivSelector).html(Drupal.t(msg));
								$(errMsgDivSelector).css('display','inline-block');
								$(errMsgDivSelector).show();
							} else {
								$(errMsgDivSelector).hide();
								this.narrowSearchByDateRange(code);
							}

						},

						/*
						 * clearDateRangeFields() - Action for the clear link in
						 * the daterange component
						 */
						clearDateRangeFields : function(code, ID) {
							// Prepare the jQuery selectors
							var fromDefaultText = $('#' + ID).data('default-fromtext');
                            var toDefaultText =  $('#' + ID).data('default-totext');
							var fromDateSelector = "#" + code + "-daterange-from-date";
							var toDateSelector = "#" + code + "-daterange-to-date";
							var clearDateRangeSelector = '#' + code + '-daterange-clr';
							var errMsgDivSelector = '#' + code + '-daterange-errmsg';

							// Show the default texts in date fields in default
							// color and font
							$(fromDateSelector).removeClass('narrow-search-filterset-daterange-nonempty');
							$(fromDateSelector).addClass('narrow-search-filterset-daterange-empty');
							$(fromDateSelector).val(fromDefaultText);

							$(toDateSelector).removeClass('narrow-search-filterset-daterange-nonempty');
							$(toDateSelector).addClass('narrow-search-filterset-daterange-empty');
							$(toDateSelector).val(toDefaultText);

							// Hide the clear link
							$(clearDateRangeSelector).css('display', 'none');

							// Hide the error message box
							$(errMsgDivSelector).hide();

							// Refresh the datepicker
							$(fromDateSelector).datepicker("refresh");
							$(toDateSelector).datepicker("refresh");

							// Search as per cleared filter settings
							this.narrowSearchByDateRange(code);

						},
						/*
						 * validatetextField() - Action for the clear link to appear near the
						 * relevant text box.
						 */

						validatetextField : function(code, ID) {
							var defaultText = $('#' + ID).data('default-text');
							var defaultTextSelector = "#" + code + "-addltext-filter";
							var showClearLink = "#" + code + "-addltext-clr";
							if($("#" + code + "-addltext-filter").val() != defaultText){
								$(showClearLink).css('display', 'block');
							}

						},
						/*
						 * clearTextBoxFields() - Action for the clear link in
						 * the username, organization and location component
						 */
						clearTextBoxFields : function(code, ID) {
							var defaultText = $('#' + ID).data('default-text');
							var defaultTextSelector = "#" + code + "-addltext-filter";
							var clearTextFieldSelector = '#' + code + '-addltext-clr';
							// Show the default texts in date fields in default
							// color and font
							$(defaultTextSelector).removeClass('narrow-search-filterset-daterange-nonempty');
							$(defaultTextSelector).addClass('narrow-search-filterset-daterange-empty');
							$(defaultTextSelector).val(defaultText);
							// Hide the clear link
							$(clearTextFieldSelector).css('display', 'none');
							this.narrowSearchByAddlText(code);

						},

						clearTagsCloudNarrowFilter : function(code) {
							$('#' + code + '-addltext-filter').val('');
							$('.tagscloud-tag').css('text-decoration', '');
							$('#' + code + '-tagscloud-clr').css('display', 'none');
							$('#root-admin').data('narrowsearch').refreshGrid();
						},

						moreListDisplay : function(recLen,dispId,html_id) {
							if(html_id==''){
				            		for(i=0;i<=recLen;i++){
				            			$('#'+dispId+'_'+i).css("display","block");
				            		}
				            		$('#'+dispId+'_more').css("display","none");
				            		$('#'+dispId+'_short').css("display","block");
							}else{
			            		for(i=0;i<=recLen;i++){
			            			$('#'+html_id+' #'+dispId+'_'+i).css("display","block");
			            		}
			            		$('#'+html_id+' #'+dispId+'_more').css("display","none");
			            		$('#'+html_id+' #'+dispId+'_short').css("display","block");
							}
							vtip();
		            	},

		            	shortListDisplay : function(recLen,dispId,html_id){
		            		if(html_id==''){
		            			for(i=0;i<=recLen;i++){
			            			if(i<=4){
			            				$('#'+dispId+'_'+i).css("display","block");
			            				}
			            			else {
			            				$('#'+dispId+'_'+i).css("display","none");
			            				}
			            			}
			            		$('#'+dispId+'_short').css("display","none");
			            		$('#'+dispId+'_more').css("display","block");
		            		}else{
			            		for(i=0;i<=recLen;i++){
			            			if(i<=4){
			            				$('#'+html_id+' #'+dispId+'_'+i).css("display","block");
			            				}
			            			else {
			            				$('#'+html_id+' #'+dispId+'_'+i).css("display","none");
			            				}
			            			}
			            		$('#'+html_id+' #'+dispId+'_short').css("display","none");
			            		$('#'+html_id+' #'+dispId+'_more').css("display","block");
		            		}
		            		vtip();
		            	},


						/*	callDeleteObject : function(objectId,objectType){
						 var obj = this;
							url = obj.constructUrl("ajax/admincore/deleteobject/" + objectId+'/'+objectType);
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
								result = $.trim(result);
								//alert(result)
								   if(result > 0){
									   if(objectType == "Class") {
										   obj.callMessageWindow('Delete','This Class has been Enrolled/Futured. So cannot delete.');
									   }else if(objectType == "Course"){
										   obj.callMessageWindow('Delete','This Course has one of the Enrolled/Futured Class. So cannot delete.');
									   }else{
										   obj.callMessageWindow('Delete','Training Plan');
									   }

								   }else{
									   obj.displayDeleteWizard(objectId,objectType);
								   }
								}
						    });

					},	*/

					callDeleteProcess : function(objectId,objectType){
						$('#delete-msg-wizard').remove();
						var obj = this;
							url = obj.constructUrl("ajax/admincore/deleteprocessobject/" + objectId+'/'+objectType);
							$.ajax({
								type: "POST",
								url: url,
								data:  '',
								success: function(result){
									Drupal.CTools.Modal.dismiss();
									// Admin Calendar - Start - Refresh calendar after delete announcement
									if(window.location.href.indexOf("admincalendar") >0 )
										getCalendarData();
									// Admin Calendar - End
									$("#root-admin").data("narrowsearch").refreshGrid();
								}
						    });

					},

					displayDeleteWizard : function(title,objectId,objectType,wSize){
						var uniqueClassPopup = '';
						if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
							if(objectType == "Class" && document.getElementById('catalog-course-basic-addedit-form')){
								uniqueClassPopup = 'unique-delete-class';
							}
						}
						var wSize = (wSize) ? wSize : 300;
						var closeButAction = '';
						var esignForType = '';
						var settingsList = ['cre_usr_dpt', 'cre_usr_etp', 'cre_usr_jrl', 'cre_usr_jtl', 'cre_usr_ptp'];
						if (settingsList.indexOf(objectType) != -1)  {
							closeButAction = function(){ $('#deleteAddedList-'+objectId).click(); };
							esignForType = 'DeleteAdminObjectSettingsList';
						} else {
							
							if(objectId == "cre_ste_mod_aut" || objectId == "cre_ste_mod_cattr"){   //For enable/Disable of Content Authoring module
								closeButAction = function(){ $("#root-admin").data("narrowsearch").publishAndUnpublishModule(objectType,''); };
							}else{
							closeButAction = function(){ $("#root-admin").data("narrowsearch").callDeleteProcess(objectId,objectType); };
							 }
							esignForType = 'DeleteAdminObject';
						}
							$('#delete-msg-wizard').remove();
					    var html = '';
					    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
					    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';

					   // html+= '<tr><td height="40px">&nbsp;</td></tr>';
					    if(this.currTheme == 'expertusoneV2'){
					    	if(objectType == 'Content')
					    		html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
					    	else
					    		html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+''+'?'+'</td></tr>';
					    } else {
					    	if(objectType == 'Content')
					    		html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: left;">'+title+'</td></tr>';
					    	else
					    		html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+''+'?'+'</td></tr>';
					    }
					    html+='</table>';
					    html+='</div>';
					    $("body").append(html);
					    var closeButt={};
					    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};

					    if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != "" && objectId != "cre_ste_mod_aut" && objectId != "cre_ste_mod_cattr"){
					    	var esignObj = {'popupDiv':'delete-object-dialog','esignFor':esignForType,'objectId':objectId,'objectType':objectType};
					    	closeButt[Drupal.t('Yes')]=function(){ $.fn.getNewEsignPopup(esignObj);  };
					    }else{
					    	closeButt[Drupal.t('Yes')]= closeButAction;
					    }

					    if(objectType == 'UnlockUser'){
					    	var drupalTitle = Drupal.t("LBL930");
					    }else if(objectType == 'exp_sp_administration_contentauthor'){
					    	var drupalTitle = Drupal.t("LBL749");
					    }else if(objectType == 'exp_sp_administration_customattribute'){
					    	var drupalTitle = Drupal.t("LBL2015");
					    }else{
					    	var drupalTitle = Drupal.t("LBL286");
					    }

					    
					    $("#delete-msg-wizard").dialog({
					        position:[(getWindowWidth()-400)/2,200],
					        bgiframe: true,
					        width:wSize,
					        resizable:false,
					        modal: true,
					        title:Drupal.t(drupalTitle),//"title",
					        buttons:closeButt,
					        closeOnEscape: false,
					        draggable:false,
					        zIndex : 10005,
					        overlay:
					         {
					           opacity: 0.9,
					           background: "black"
					         }
					    });
					    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+uniqueClassPopup+"'></div>");

					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

					    $("#delete-msg-wizard").show();

						$('.ui-dialog-titlebar-close').click(function(){
					        $("#delete-msg-wizard").remove();
					    });
						if(this.currTheme == 'expertusoneV2'){
					    	changeDialogPopUI();
					    }
						/*-- 37211: Unable to delete a class in FF version 32.0 --*/
					    if($('div.qtip-defaults').length > 0) {
					    	var prevZindex = $('.qtip-defaults').css('z-index');
					    	$('#delete-object-dialog .ui-widget-content').css('z-index', prevZindex+2);
					    	$('.ui-widget-overlay').css('z-index', prevZindex+1);
					    }

					},
					
					displayH5PPreview : function(h5pplayer,objectId,objectType,wSize,hSize){
							var uniqueClassPopup = '';
						if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
							if(objectType == "Class" && document.getElementById('catalog-course-basic-addedit-form')){
								uniqueClassPopup = 'unique-delete-class';
							}
						}
						var wSize = (wSize) ? wSize : 300;
						var hSize = (hSize) ? hSize : 800;
						var closeButAction = '';
						var esignForType = '';
						$('#delete-msg-wizard').remove();
					    var html = '';
					    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
					    //html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';

					   
					   //html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
					   
					    
					    //html+='</table>';
					    html+='</div>';
					    $("body").append(html);
					    var closeButt={};
					    var drupalTitle = Drupal.t("LBL694");
					    $("#delete-msg-wizard").dialog({
					        position:'center',//[(getWindowWidth()-400)/2,200],
					        bgiframe: true,
					        width:wSize,
					        height:hSize,
					        resizable:false,
					        modal: true,
					        title:Drupal.t(drupalTitle),//"title",
					        buttons:closeButt,
					        closeOnEscape: true,
					        draggable:false,
					        zIndex : 10005,
					        overlay:
					         {
					           opacity: 0.9,
					           background: "black"
					         }
					    });
					    $('.ui-dialog').wrap("<div id='delete-object-dialog' class='"+uniqueClassPopup+"'></div>");

					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
					    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

					    $("#delete-msg-wizard").show();
					    //display content
					    if(objectType != "customattr"){
					    window.setTimeout(function(){
					    	createLoaderNew("delete-msg-wizard");
					    	},500);
					    }
					    $("#delete-msg-wizard").html(h5pplayer);
					    $("#delete-msg-wizard").css("overflow","hidden");

						$('.ui-dialog-titlebar-close').click(function(){
					        $("#delete-msg-wizard").remove();
					    });
						if(this.currTheme == 'expertusoneV2'){
					    	changeDialogPopUI();
					    }
						/*-- 37211: Unable to delete a class in FF version 32.0 --*/
					    if($('div.qtip-defaults').length > 0) {
					    	var prevZindex = $('.qtip-defaults').css('z-index');
					    	$('#delete-object-dialog .ui-widget-content').css('z-index', prevZindex+2);
					    	$('.ui-widget-overlay').css('z-index', prevZindex+1);
					    }

					},
					

					clearBubblePopupSet : function() {
						//this.qtipLoadSet = array();
					},

					fillCompletionDate : function(uniqueId, uniqueId2){
						var overallDate = $('#overall_completion_date_'+uniqueId2).val();
						$('input[name="hidden_completion_date_'+uniqueId+'"]').val(overallDate);
						//$('#datagrid-completiondate-'+uniqueId).val(overallDate);
					},

					completionDateQTip : function(uniqueId,entityId,sessionStartdate){
					$('.qtip-popup-exempted').html('').hide();
						$('.catalog-pub-add-list').hide();
						$('#completion_date_container_'+uniqueId).show();
						$('#overall_completion_date'+uniqueId).datepicker( "destroy" );

						if(entityId!='' && entityId!=undefined){
							if(sessionStartdate !== undefined) {
								if(this.currTheme == 'expertusoneV2'){
									if($.trim(sessionStartdate)){
										$('#overall_completion_date_'+uniqueId).datepicker({minDate:new Date(sessionStartdate), dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
									}
									else{
									    $('#overall_completion_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
									}
								}else{
								    if($.trim(sessionStartdate)){
										  $('#overall_completion_date_'+uniqueId).datepicker({minDate:new Date(sessionStartdate), dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
										}
										else{
										  $('#overall_completion_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
										}
								} 
							}
							else {
								//will work for TP completion where sessionStartdate will be undefined
								url = this.constructUrl("ajax/administration/getClassStartDate/" + entityId );
								$.ajax({
									type: "POST",
									url: url,
									data:  '',
									success: function(result){
										var sesStartDate = result.replace(/\,/g, '/');
										this.currTheme = Drupal.settings.ajaxPageState.theme;
										if(this.currTheme == 'expertusoneV2'){
											if($.trim(sesStartDate)){
												$('#overall_completion_date_'+uniqueId).datepicker({minDate:new Date(sesStartDate), dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
											}
											else{
											    $('#overall_completion_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
											}
										}else{
										    if($.trim(sesStartDate)){
	 										  $('#overall_completion_date_'+uniqueId).datepicker({minDate:new Date(sesStartDate), dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
	 										}
	 										else{
	 										  $('#overall_completion_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
	 										}
										}
									}
								});
							}

						}else{
							this.currTheme = Drupal.settings.ajaxPageState.theme;
							if(this.currTheme =='expertusoneV2'){
								$('#overall_completion_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
							}else{
								$('#overall_completion_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
					        }
						}
					},

					fillRegistrationDate : function(uniqueId, uniqueId2){
						var overallDate = $('#overall_registration_date_'+uniqueId2).val();
						$('input[name="hidden_registration_date_'+uniqueId+'"]').val(overallDate);
						$('#registration_date_container_'+uniqueId).hide();
					},

					registrationDateQTip : function(uniqueId,entityId, isPastClass, sessionStartdate){
						$('.catalog-pub-add-list').hide();
						if(entityId!='' && entityId!=undefined){
							if(isPastClass) {
								$('#registration_date_container_'+uniqueId).show();
								$('#overall_registration_date'+uniqueId).datepicker("destroy");
								this.currTheme = Drupal.settings.ajaxPageState.theme;
								if(this.currTheme == 'expertusoneV2'){
									if($.trim(sessionStartdate)){
										$('#overall_registration_date_'+uniqueId).datepicker({maxDate:new Date(sessionStartdate), dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
									}
									else{
										$('#overall_registration_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
									}
								}else{
									if($.trim(sessionStartdate)){
										$('#overall_registration_date_'+uniqueId).datepicker({maxDate:new Date(sessionStartdate), dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
									}
									else{
										$('#overall_registration_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
									}
								}
							}
						}else{
							this.currTheme = Drupal.settings.ajaxPageState.theme;
							if(this.currTheme =='expertusoneV2'){
								$('#overall_registration_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "both", buttonImage: themepath+"/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
							}else{
								$('#overall_registration_date_'+uniqueId).datepicker({dateFormat: "mm/dd/yy", showOn: "button", buttonImage: "sites/all/themes/core/expertusone/expertusone-internals/images/calendar_icon.JPG", buttonImageOnly: true });
					        }
						}
					},

					getBubblePopup : function(qtipObj) {
						try{						
							closeQtip('');					
							var popupId 	= qtipObj.popupDispId;	
							var qtipLen 	= this.qtipLenth;
							var inArrQtip = $.inArray(popupId, this.qtipLoadSet);
							this.qtipLoadSet[qtipLen] = popupId;
							this.qtipLenth = this.qtipLenth+1;
							var entityType = qtipObj.entityType;
							var courseId = qtipObj.courseId!=undefined?qtipObj.courseId:'';
							var url 			  = resource.base_host+'?q='+qtipObj.url; // resource.base_host+'?q=administration/catalogaccess/33/cre_sys_obt_crs';
							var wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
							var hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
							var setwBubble        = wBubble-20;
							var setBtmLeft        = (setwBubble-104)/2;
							var topElements = '<span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
							var bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-b"><table cellspacing="0" width="100%" cellpadding="0"><tbody><tr><td class="bubble-blt" style="width:'+setBtmLeft+'px"></td><td class="bubble-blm"></td><td class="bubble-blr" style="width:'+setBtmLeft+'px"></td></tr></tbody></table></td><td class="bubble-br"></td></tr></tbody></table>';
							var tipPos = qtipObj.tipPosition;
							var catalogVisibleId = qtipObj.catalogVisibleId;
							var mLeft = 0;
							var tipPosition;
							var messageStyle = '';
							var bwidth = '';
							var crTheme = Drupal.settings.ajaxPageState.theme;
							switch(qtipObj.tipPosition) {
								case 'bottomRight':
									wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
									hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
									setwBubble        = wBubble-20;
									setBtmLeft        = (setwBubble-104)/2;
									mLeft			  = (qtipObj.catalogVisibleId.indexOf('editclass')>0)?45:(qtipObj.catalogVisibleId.indexOf('AttachCrsIdqtip')>0)?58:(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0)?49:62;
									bwidth            = (qtipObj.catalogVisibleId.indexOf('addusers')>0)?wBubble:Math.round((wBubble/2)/5);
									setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('addusers')>0)?'214':(bwidth*6)+12;
									setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('editclass')>0)?'373':(qtipObj.catalogVisibleId.indexOf('addclass')>0)?'373':(qtipObj.catalogVisibleId.indexOf('AttachCrsIdqtip')>0)?'168':(bwidth*6)+12;
									if(crTheme == 'expertusoneV2') {
									  setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('addusers')>0)?'172':(bwidth*6)+12;
									  setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('editclass')>0)?'373':(qtipObj.catalogVisibleId.indexOf('addclass')>0)?'373':(qtipObj.catalogVisibleId.indexOf('AttachCrsIdqtip')>0)?'168':(bwidth*6)+12;
									}
									/*if (navigator.userAgent.indexOf("Chrome")>0){
									  setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('editclass')>0)?'373':(bwidth*6)+12;
									}else{

									}*/
									//Set buble tool tip arrow position
									tipPosition       = (qtipObj.tipPosition) ? qtipObj.tipPosition : 'bottomMiddle';
									topElements = '<span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
									bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-b"><table cellspacing="0" width="100%" cellpadding="0"><tbody><tr><td class="bubble-blt" style="width:'+setBtmLeft+'px"></td><td class="bubble-blr" style="width:'+setBtmLeft+'px"></td><td class="bubble-blm"></td></tr></tbody></table></td><td class="bubble-br"></td></tr></tbody></table>';
									$("#"+popupId).parent().parent().parent().parent().removeClass("qtip-access-control");
								break;
								case 'bottomCorner':
									wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
									hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
									setwBubble        = wBubble-20;
									if(crTheme != 'expertusoneV2') {
										if (navigator.userAgent.indexOf("Chrome")>0){
											setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?(wBubble==780?374:344):(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?7:(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?191:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?451:451;
											setBtmRight       = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?281:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?650:651):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?16:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?175:175;
											mLeft			  = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?325:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?712:712):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?59:218;
										}else{
											setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?(wBubble==780?374:344):(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?6:(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?191:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?458:451;
											setBtmRight       = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?283:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?535:619):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?16:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?178:175;
											mLeft			  = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?325:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?712:712):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?59:218;
										}
									}else {
										if (navigator.userAgent.indexOf("Chrome")>0){
											setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?(wBubble==780?374:344):(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?7:(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?191:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?472:451;
											setBtmRight       = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?281:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?650:651):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?16:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?185:175;
											mLeft			  = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?325:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?712:712):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?59:218;
										}else{
											setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?(wBubble==780?374:344):(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?6:(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?191:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?472:451;
											setBtmRight       = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?283:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?651:619):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?16:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0)?185:175;
											mLeft			  = (qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls')?325:(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not'))?((entityType=='cre_sys_obt_not')?712:712):(qtipObj.catalogVisibleId.indexOf('listvaledit')>0)?59:218;
										}
									}

									//Set buble tool tip arrow position
									//var tipPosition       = (qtipObj.tipPosition) ? qtipObj.tipPosition : 'bottomMiddle';
									tipPosition       = 'bottomRight';
									topElements = '<span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
									bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-b"><table cellspacing="0" width="100%" cellpadding="0"><tbody><tr><td class="bubble-blt" style="width:'+setBtmLeft+'px"></td><td class="bubble-blm"></td><td class="bubble-blr" style="width:'+setBtmRight+'px"></td></tr></tbody></table></td><td class="bubble-br"></td></tr></tbody></table>';
								break;
								case 'rightBottom':
									//alert("right bottom");
									wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
									hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
									setwBubble        = wBubble-20;
									//setRightTop        = (hBubble-104)/2;
									tipPosition       = 'rightBottom';
									topElements = '<span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
									bottomElements ='</td><td class="bubble-cr-empty"><table cellspacing="0" width="100%" height="260" cellpadding="0"><tbody><tr><td class="bubble-brt" style="height: 169px"></td></tr><tr><td class="bubble-brm"></td></tr><tr><td class="bubble-brb" style="height:30px"></td></tr></tbody></table></td></tr><tr><td class="bubble-bl"></td><td class="bubble-bm"></td><td class="bubble-br"></td></tr></tbody></table>';
								break;
								case 'bottomLeft' :
									wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
									hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
									setwBubble        = wBubble-20;
									bwidth            = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?wBubble:Math.round((wBubble/2)/5);
									if(crTheme != 'expertusoneV2') {
									setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'17':bwidth+2;
									setBtmRight       = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'191':(bwidth*6)+12;
									setBtmMiddle	  = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'64':bwidth+2;
									 if (navigator.userAgent.indexOf("Chrome")>0){
										setBtmRight       = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'203':(bwidth*6)+12;
									 }
									}
									else{
										setBtmLeft        = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'14':bwidth+2;
										setBtmRight       = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'155':(bwidth*6)+12;
										setBtmMiddle	  = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'52':bwidth+2;
										if (navigator.userAgent.indexOf("Chrome")>0){
											setBtmRight       = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?'194':(bwidth*6)+12;
										}
									}
									mLeft			  = (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?-63:-110;
									//Set buble tool tip arrow position
									messageStyle      =  (qtipObj.catalogVisibleId.indexOf('listvalues')>0)?"margin-left: -120px;":'';
									tipPosition       = 'bottomLeft';
									topElements = '<span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
									bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-b"><table cellspacing="0" width="100%" cellpadding="0"><tbody><tr><td class="bubble-blt" style="width:'+setBtmLeft+'px"></td><td class="bubble-blm" style="width:'+setBtmMiddle+'px"></td><td class="bubble-blr" style="width:'+setBtmRight+'px"></td></tr></tbody></table></td><td class="bubble-br"></td></tr></tbody></table>';
									$("#"+popupId).parent().parent().parent().parent().removeClass("qtip-access-control");
									break;
								default:
									wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
									hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
									setwBubble        = wBubble-20;
									setBtmLeft        = (setwBubble-104)/2;
									//Set buble tool tip arrow position
									tipPosition       = (qtipObj.tipPosition) ? qtipObj.tipPosition : 'bottomMiddle';
									topElements = '<span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
									bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-b"><table cellspacing="0" width="100%" cellpadding="0"><tbody><tr><td class="bubble-blt" style="width:'+setBtmLeft+'px"></td><td class="bubble-blm"></td><td class="bubble-blr" style="width:'+setBtmLeft+'px"></td></tr></tbody></table></td><td class="bubble-br"></td></tr></tbody></table>';
									$("#"+popupId).parent().parent().parent().parent().removeClass("qtip-access-control");

							}
							if(popupId == "qtip_addlistvalues_visible_disp_0_cre_usr_jtl" || popupId == "qtip_addlistvalues_visible_disp_0_cre_usr_dpt" || popupId == "qtip_addlistvalues_visible_disp_0_cre_usr_etp"  || popupId == "qtip_addlistvalues_visible_disp_0_cre_usr_jrl" || popupId == "qtip_addlistvalues_visible_disp_0_cre_usr_ptp"){
								$('.page-administration-people-setup #add_lst_pg_next,.page-administration-people-setup #add_lst_pg_previous,.page-administration-people-setup #add_lst_pg_last,.page-administration-people-setup #add_lst_pg_first,.page-administration-people-setup #add_lst_pg_txtfld,.page-administration-people-setup #listvalues-autocomplete,.page-administration-people-setup #search_listvalues').attr('style','pointer-events: none');								
							}
							try{
								$('#'+popupId).qtip("destroy");
							}catch(e){
								//Nothing to do
							}
							$('#'+qtipObj.catalogVisibleId).closest(".qtip").remove();
							//IMPORTANT !!! qtip-child, qtip-parent -- Do not set or use this class anywhere else -- this is meant to be for qtip issue fixes

							 var qtipClass = (qtipObj.qtipClass) ? qtipObj.qtipClass : 'qtip-child';
							 if(qtipSubClass != null) {
								 var qtipSubClass = (qtipObj.qtipSubClass) ? qtipObj.qtipSubClass : '';
								 qtipClass = (qtipSubClass != null) ? qtipClass+" "+qtipSubClass : qtipClass;
							 }
							 if(!document.getElementById(qtipObj.catalogVisibleId)) {
								if((!document.getElementById("popup_container_"+popupId))) {
									$('#'+popupId).qtip({
										overwrite: false, // Make sure another tooltip can't overwrite this one without it being explicitly destroyed
										content: {
										 	text: "<div style='min-height:75px;' id='"+qtipObj.catalogVisibleId+"'><div id='"+qtipObj.catalogVisibleId+"_disp' style='margin-left:"+mLeft+"px;min-height:75px;'>&nbsp;</div></div>",
										 	title: {
												      text: ' ',
												      button: '<div id="'+qtipObj.catalogVisibleId+'_close" class="admin-bubble-close" onclick="closeQtyp(\''+qtipObj.catalogVisibleId+'\',\''+courseId+'\')"> </div>'
											   	   }
											},
										   api:{
												beforeShow: function(){
													//	Hide qtip till the content load
													var qtupActive = $("#"+qtipObj.catalogVisibleId).closest(".qtip-active");
													$('#'+qtipObj.catalogVisibleId+"_close").css('visibility','hidden');
													$(qtupActive).find('.qtip-tip').css('visibility','hidden');
												},
										 		onShow: function() {
													// Hide qtip till the content load
													var qtupActive = $("#"+qtipObj.catalogVisibleId).closest(".qtip-active");
													$('#'+qtipObj.catalogVisibleId+"_close").css('visibility','hidden');
													$(qtupActive).find('.qtip-tip').css('visibility','hidden');
													$('.qtip').each(function(){
														var tmp = this;
														if($(tmp).find('#'+qtipObj.catalogVisibleId).each(function(){
															if($(tmp).attr('class').indexOf('qtip-active')<0){
																try{
																	$('#'+popupId).qtip("destroy");
																	$(this).remove();
																}catch(e){
																	//Nothing to do
																}
															}
														}));
													});
										 			if(tipPos != 'bottomCorner') {
								 						$("#"+catalogVisibleId).parent().parent().parent().parent().removeClass("qtip-access-control");

								 					}
													if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_addtemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0){
														var popTop = ($('#'+popupId).offset());
														var xtop = ($.browser.msie)?110:100;
														popTop = Math.round(popTop.top)-xtop;
														$("#"+qtipObj.catalogVisibleId).parents('.qtip-active').css('top',popTop+"px");
													}
													if(qtipObj.catalogVisibleId.indexOf('MoveUsersqtip')>0 && navigator.userAgent.indexOf("Chrome")>=0 ){
														var popTop = ($('#'+popupId).offset());
														var xtop = 150;
														popTop = Math.round(popTop.top)-xtop;
														$("#"+qtipObj.catalogVisibleId).parents('.qtip-active').css('top',popTop+"px");
													}
													$("#"+qtipObj.catalogVisibleId).parents('.qtip-active').addClass(qtipClass);
								 					//IMPORTANT !!! modal-qtips-close Do not set or use this class anywhere else -- this is meant to be for qtip issue fixes
								 					$("#"+qtipObj.catalogVisibleId).parents('.qtip-active').addClass('modal-qtips-close');
								 					$("#"+qtipObj.catalogVisibleId).parents('.qtip-active').siblings('.qtip-child').hide();
								 					if(qtipClass == "qtip-parent" || qtipClass == 'qtip-parent add-key-word-edit-list')
								 					$("#"+qtipObj.catalogVisibleId).parents('.qtip-active').siblings('.qtip-parent').hide();

													//if(!document.getElementById("paintContent"+popupId)) {
								 					if(1==1){
														EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.createLoader(qtipObj.catalogVisibleId+"_disp");
														var loadPos=0;
														if(tipPosition == 'rightBottom') {
									 						$(qtupActive).find('.qtip').addClass('qtip-access-control');
															$(qtupActive).find('.qtip-tip').attr('style','height: 64px');
															$(qtupActive).find('.qtip-tip').css('background','url("/sites/all/themes/core/expertusone/expertusone-internals/images/bubble_arrow_point_right.png") no-repeat -1px 3px');
															$(qtupActive).find('.qtip-tip').css('bottom','79px');
															$(qtupActive).find('.qtip-tip').css('left','638px');
															$(qtupActive).find('.qtip-tip').css('position','absolute');
															$('#'+qtipObj.catalogVisibleId+"_close").css('top','');
														}
														if(tipPosition == 'bottomRight' && mLeft!=0) {
															//$('.qtip-tip').css('right','-35px');
									 						var leftPos=0;
									 						var rightPos="0px";
									 						var bottomPos="0px";
									 						var zIndex;
									 						var crTheme = Drupal.settings.ajaxPageState.theme;
									 						var bnrAccleftPos = (crTheme == 'expertusoneV2') ? 672 : 663;
									 						this.currTheme = Drupal.settings.ajaxPageState.theme;

									 						if(qtipObj.tipPosition == 'bottomCorner'){ // Access control fix
									 							if(qtipObj.catalogVisibleId.indexOf('Accessqtip')>0 && entityType=='cre_sys_obt_cls'){ // Class Access control
									 								loadPos = 520;
									 								leftPos = 308;
									 								rightPos = "-12px";
									 							}else if((qtipObj.catalogVisibleId.indexOf('Accessqtip')>0) && (entityType=='cre_sys_obt_anm' || entityType=='cre_sys_obt_not')){ // Banner / Announcement Access control
									 								loadPos = 715;
									 								leftPos = (crTheme == 'expertusoneV2') ? ((entityType=='cre_sys_obt_not')?693:692) : 692;;
									 								rightPos = (entityType=='cre_sys_obt_not')?"-31px":"-30px";
									 							}else if((qtipObj.catalogVisibleId.indexOf('Accessqtip')>0) && entityType!='cre_sys_obt_crs' && crTheme == 'expertusoneV2'){ // TP Access
									 								loadPos = 430;
									 								leftPos = 205;
									 								rightPos = "-6px";
									 							}else {
									 								loadPos = 430;
									 								leftPos = 201;
									 								rightPos = "-12px";
									 							}
									 						}else{ //class qtip position fix
									 							if(qtipObj.catalogVisibleId.indexOf('editclass')>0){
									 								loadPos = 380;
									 								leftPos = 28;
									 								rightPos = "-14px";
									 							}else if(qtipObj.catalogVisibleId.indexOf('AttachCrsIdqtip')>0){
									 								loadPos = 380;
									 								leftPos = 40;
									 								rightPos = "-27px";
									 							}else if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0){
									 								loadPos = 380;
									 								leftPos = 30;
									 								rightPos = "-18px";
									 								zIndex ="100";
									 								bottomPos = (this.currTheme == "expertusoneV2") ? "0px" : "-64px";
									 							}else if(qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0){
									 								loadPos = 380;
									 								leftPos = 44;
									 								rightPos = "-31px";
									 								zIndex ="100";
									 								bottomPos = (this.currTheme == "expertusoneV2") ? "0px" : "-64px";
									 							}else if(qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0){
									 								loadPos = 380;
									 								leftPos = 30;
									 								rightPos = "-18px";
									 								zIndex ="100";
									 							}else if(qtipObj.catalogVisibleId.indexOf('AttachIdqtip_addusers')>0){
									 								loadPos = 380;
									 								leftPos = 65;
									 								zIndex ="100";
									 								rightPos = "-41px";
									 							}else if(qtipObj.catalogVisibleId.indexOf('listvalues')>0){
									 								zIndex ="100";
									 							}else if(qtipObj.catalogVisibleId.indexOf('listvalpeoedit')>0){
									 								zIndex ="100";
									 							}else{
									 								loadPos = 380;
									 								leftPos = 44;
									 								rightPos = "-31px";
									 							}
									 						}

															$(qtupActive).find('.qtip').addClass('qtip-access-control');
															$(qtupActive).find('.qtip-tip').css('right',rightPos);
															$('#'+qtipObj.catalogVisibleId+"_close").css('left',leftPos);
															if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0){
																$(qtupActive).find('.qtip-tip').css('bottom',bottomPos);
																$(qtupActive).find('.qtip-tip').css('z-index',zIndex);
																var isAtLeastIE11 = !!(navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/MSIE/))? true : false;
																if(this.currTheme == "expertusoneV2" && $.browser.msie && parseInt($.browser.version, 10)=='10' || this.currTheme == "expertusoneV2" && isAtLeastIE11==1 ){
																	$(".qtip-button .admin-bubble-close").css({"top":"-2px"});
																	$(qtupActive).find('.qtip-tip').css('bottom','-8px');
																}
                                                               if(navigator.userAgent.indexOf("Safari")!=-1){
																	$(qtupActive).find('.qtip-tip').css('bottom','-8px');
																}
															}
															if(qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_addtemplate')>0){
																$(qtupActive).find('.qtip-tip').css('z-index',zIndex);
																if(this.currTheme == "expertusoneV2" && $.browser.msie && parseInt($.browser.version, 10)=='10'){
																	$(".qtip-button .admin-bubble-close").css({"top":"-2px"});
																}
																if(navigator.userAgent.indexOf("Safari")!=-1){
																	$(qtupActive).find('.qtip-tip').css('bottom','-8px');
																}
															}
															if(qtipObj.catalogVisibleId.indexOf('AttachIdqtip_addusers')>0){
																$(qtupActive).find('.qtip-tip').css('z-index',zIndex);
															}
															if(qtipObj.catalogVisibleId.indexOf('listvalues')>0){
																$(qtupActive).find('.qtip-tip').css('z-index',zIndex);
																if(this.currTheme == "expertusoneV2"){
																if($.browser.msie && parseInt($.browser.version, 10)=='10'){
																	$(qtupActive).find('.qtip-tip').css('bottom','1px');
																	$(".qtip-button .admin-bubble-close").css({"left":"43px","top":"-4px"});
																}else if($.browser.msie && parseInt($.browser.version, 10)=='9'){
																	$(qtupActive).find('.qtip-tip').css('bottom','0');
																	$(".qtip-button .admin-bubble-close").css({"left":"43px","top":"-4px"});
																}else if($.browser.msie && parseInt($.browser.version, 10)=='8'){
																	$(qtupActive).find('.qtip-tip').css({"bottom":"41px","right":"20px"});
																	$(".qtip-button .admin-bubble-close").css({"left":"43px","top":"-3px"});
																}else{
																	$(qtupActive).find('.qtip-tip').css('right','-31px');
																	$(".qtip-button .admin-bubble-close").css({"left":"44px"});
																}
																}else{
																	if($.browser.msie && parseInt($.browser.version, 10)=='10'|| $.browser.msie && parseInt($.browser.version, 10)=='9'){
																		$(qtupActive).find('.qtip-tip').css({'bottom':'0','right':'-31px'});
																		$(".qtip-button .admin-bubble-close").css({"left":"43px","top":"-4px"});
																	}else if($.browser.msie && parseInt($.browser.version, 10)=='8'){
																		$(qtupActive).find('.qtip-tip').css({"bottom":"40px","right":"19px"});
																		$(".qtip-button .admin-bubble-close").css({"left":"43px","top":"-3px"});
																	}else{
																		$(qtupActive).find('.qtip-tip').css('right','-31px');
																		$(".qtip-button .admin-bubble-close").css({"left":"44px"});
																	}

																}
															}

														}else if(tipPosition == 'bottomLeft' && mLeft!=0){
															var leftPos=0;
									 						var rightPos="0px";
															if(qtipObj.catalogVisibleId.indexOf('MoveUsersqtip')>0){
																loadPos = 380;
								 								leftPos = 407;
								 								rightPos = "-14px";
								 								if(this.currTheme != "expertusoneV2" && $.browser.msie && parseInt($.browser.version, 10)=='9'){
																	$(qtupActive).find('.qtip-tip').css('bottom','0');
																}
								 								if(this.currTheme != "expertusoneV2" && $.browser.msie && parseInt($.browser.version, 10)=='8'){
																	$(qtupActive).find('.qtip-tip').css('bottom','40px');
																	$(qtupActive).find('.qtip-tip').css('margin-bottom','38px');
																}
								 								if(this.currTheme = "expertusoneV2" && $.browser.msie && parseInt($.browser.version, 10)=='10'){
																	$(qtupActive).find('.qtip-tip').css('bottom','0');
																}
								 								$(qtupActive).find('.qtip-tip').css('right',rightPos).css("left","13px");
															}else if(qtipObj.catalogVisibleId.indexOf('listvalues')>0){
																leftPos = "-80px";
																$(qtupActive).find('.qtip-tip').css('left','16px');
																if (navigator.userAgent.indexOf("Chrome")>0){
																	$(qtupActive).find('.qtip-tip').css('left','13px');
																}
																if($.browser.msie && parseInt($.browser.version, 10)=='8'){
																	$(qtupActive).find('.qtip-tip').css('margin-bottom','38px');
																}
																if($.browser.msie && parseInt($.browser.version, 10)=='9' || $.browser.msie && parseInt($.browser.version, 10)=='10'){
																	$(qtupActive).find('.qtip-tip').css('bottom','0');
																}
															}
															//$(qtupActive).find('.qtip').addClass('qtip-access-control');
															$(qtupActive).find('.qtip-tip').css('right',rightPos);
															$('#'+qtipObj.catalogVisibleId+"_close").css('left',leftPos);
														}
														if(qtipObj.catalogVisibleId.indexOf("Access")>=0 || qtipObj.catalogVisibleId.indexOf("addclass")>=0
																|| qtipObj.catalogVisibleId.indexOf("editclass")>=0){
																$('#loaderdiv'+qtipObj.catalogVisibleId+"_disp").css('padding-left',loadPos);
														}
													   if(qtipObj.catalogVisibleId.indexOf("addclass")>=0){
														   if($.browser.msie && parseInt($.browser.version, 10)=='9' || $.browser.msie && parseInt($.browser.version, 10)=='10'){
																$(qtupActive).find('.qtip-tip').css('bottom','0');
																$(".qtip-button .admin-bubble-close").css({"left":"44px","top":"-1px"});
															}else if($.browser.msie && parseInt($.browser.version, 10)=='8'){
																$(qtupActive).find('.qtip-tip').css('bottom','40px');
																$(qtupActive).find('.qtip-tip').css('right','19px');
																$(qtupActive).find('.qtip-tip').css("margin-bottom","38px");
															}
													   }
													   if(qtipObj.catalogVisibleId.indexOf('editclass')>0){
															if($.browser.msie && parseInt($.browser.version, 10)=='8'){
																$(qtupActive).find('.qtip-tip').css('margin-bottom','76px');
																$(qtupActive).find('.qtip-tip').css('margin-right','50px');
															}
															if($.browser.msie && parseInt($.browser.version, 10)=='9' || $.browser.msie && parseInt($.browser.version, 10)=='10' ){
																$(qtupActive).find('.qtip-tip').css('bottom','0');
															}
														}
													   if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0){
														   if($.browser.msie && parseInt($.browser.version, 10)=='8' && this.currTheme == "expertusoneV2"){
																$(qtupActive).find('.qtip-tip').css('right','26px');
							 								}
								 						}
													   if(qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0){
														   if($.browser.msie && parseInt($.browser.version, 10)=='8' && this.currTheme == "expertusoneV2"){
																$(qtupActive).find('.qtip-tip').css('right','26px');
							 								}
														   if($.browser.msie && parseInt($.browser.version, 10)=='8' && this.currTheme != "expertusoneV2"){
																$(qtupActive).find('.qtip-tip').css('right','32px');
																$(qtupActive).find('.qtip-tip').css('bottom','32px');
							 								}
														   if($.browser.msie && parseInt($.browser.version, 10)=='10' && this.currTheme != "expertusoneV2"){
															   $(".qtip-button .admin-bubble-close").css("top","-3px");
														   }
														 }


														if(qtipObj.catalogVisibleId.indexOf('listvaledit')>0){
															$(qtupActive).find('.qtip-tip').css('right','-12px');
															$('#'+qtipObj.catalogVisibleId+"_close").css('left','40px');
														}
														var bubbleTop = $("#"+qtipObj.catalogVisibleId).closest(".qtip-active").css('top');
														bubbleTop = parseInt(bubbleTop.substring(0,bubbleTop.length-2));
														var bubblehb = $("#"+qtipObj.catalogVisibleId).css('height');
														bubblehb = parseInt(bubblehb.substring(0,bubblehb.length-2));
														if(document.getElementById('qtip_position')!=null){
															$('#qtip_position').val(qtipObj.catalogVisibleId+"#"+bubbleTop+"#"+bubblehb);
														}
											 			$.ajax({
											 				 type: "GET",
												   	         url: url,
												   	         data:  '',
												   	         success: function(data){
											 					var paintHtml = topElements+"<div id='paintContent"+popupId+"'><div id='show_expertus_message' style='"+messageStyle+"'></div>"+data.render_content_main+"</div>"+bottomElements;
											 					$.extend(true, Drupal.settings, data.drupal_settings);
											 					$("#"+qtipObj.catalogVisibleId+"_disp").html(paintHtml);
											 					EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader(qtipObj.catalogVisibleId+"_disp");

											 					var bubbleha = $("#"+qtipObj.catalogVisibleId).css('height');
											 					bubbleha = parseInt(bubbleha.substring(0,bubbleha.length-2));
																bubbleTop = bubbleTop-(bubbleha-bubblehb);
																$("#"+qtipObj.catalogVisibleId).closest(".qtip-active").css('top',bubbleTop);
																bubblehb = $("#"+qtipObj.catalogVisibleId).css('height');
																bubblehb = parseInt(bubblehb.substring(0,bubblehb.length-2));
																if(document.getElementById('qtip_position')!=null){
																	$('#qtip_position').val(qtipObj.catalogVisibleId+"#"+bubbleTop+"#"+bubblehb);
																}
																$('#'+qtipObj.catalogVisibleId+"_close").css('visibility','visible');
																$(qtupActive).find('.qtip-tip').css('visibility','visible');
																this.currTheme = Drupal.settings.ajaxPageState.theme;
																if ($.browser.msie) {
																	if($.browser.version == 9){
																	  // Conditionally set top to 0 to fix the issue reported in ticket #0032959
																	  if (qtipObj.catalogVisibleId.indexOf('qtipAttachIdqtip') < 0 &&
																	        qtipObj.catalogVisibleId.indexOf('renderTagsId') < 0 &&
																	          qtipObj.catalogVisibleId.indexOf('renderPrintCerId') < 0 &&
																	            qtipObj.catalogVisibleId.indexOf('qtipBusinessqtip') < 0) {
																		  $('#' + qtipObj.catalogVisibleId + "_close").css('top', '0px');
																	  }
																		$(qtupActive).find('.qtip-tip').addClass('qtip-tip-ie9');
																	}
																	if($.browser.version == 10){
																		if(qtipObj.catalogVisibleId.indexOf('addclass')>=0 || qtipObj.catalogVisibleId.indexOf('editclass')>=0){
																			 $('#' + qtipObj.catalogVisibleId + "_close").css('top', '-2px');
																		}
																	}
																	if($.browser.version == 8 && (qtipObj.catalogVisibleId.indexOf('qtip_addusers_visible_disp')>0 ||
																			((qtipObj.catalogVisibleId.indexOf('Accessqtip')>0) && crTheme == 'expertusoneV2'))){
																		$('#'+qtipObj.catalogVisibleId+"_close").css('top','0px');
																	}

																	if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0){
																		//var bot = ($.browser.version==7)?-8:-67;
																		if($.browser.version == 8){
																		bottomPos = (this.currTheme == "expertusoneV2") ?-5:-31;
																		rightPos = "25px";
																		$(qtupActive).find('.qtip-tip').css('bottom',bottomPos+'px');
																		$(qtupActive).find('.qtip-tip').css('right',rightPos);
																	  }else if($.browser.version == 9 || $.browser.version == 10){
																		bottomPos = (this.currTheme == "expertusoneV2") ?-8:-68;
																		$(qtupActive).find('.qtip-tip').css('bottom',bottomPos+'px');
																	  }
																	  else if($.browser.version == 10 && this.currTheme != "expertusoneV2"){
																		bottomPos = -68;
																		$(qtupActive).find('.qtip-tip').css('bottom',bottomPos+'px');
																		$(".qtip-button .admin-bubble-close").css("top","-3px");
																	 }
													        	   }
																	if(qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_addtemplate')>0){
																		var bot = ($.browser.version==8)?-5:-8;
																		$(qtupActive).find('.qtip-tip').css('bottom',bot+'px');
																		if($.browser.version==8){
																			$('.qtip-tip').css("margin-right","6px");
																			$('.qtip-tip').css("margin-bottom","37px");
																		}
																	}
																}
																if (navigator.userAgent.indexOf("Chrome")>0) {
																	if(qtipObj.catalogVisibleId.indexOf('renderTagsId')>=0 || qtipObj.catalogVisibleId.indexOf('AttachIdqtip_visible')>0
																			|| qtipObj.catalogVisibleId.indexOf('Businessqtip_visible')>0 || qtipObj.catalogVisibleId.indexOf('renderPrintCerId') >=0){
																		$('#'+qtipObj.catalogVisibleId+"_close").css('top','-10px');
																	}
																	if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_addtemplate')>0){
																		/*--#41331 - Chorome browser qtip position fix --*/
																		bottomPos = (this.currTheme == "expertusoneV2") ? "-8px" : "-68px";
																		$(qtupActive).find('.qtip-tip').css('bottom',bottomPos);
																	}
																	if(qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0){
																		$(qtupActive).find('.qtip-tip').css('bottom','-8px');
																	}
																}
																if(qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_addtemplate')>0){
																	$('.bubble-blr').attr('style','width: 124px');
																}
																if(qtipObj.catalogVisibleId.indexOf('BannerAccessqtip')>0 && (Drupal.settings.ajaxPageState.theme == 'expertusoneV2')){
																	$('#'+qtipObj.catalogVisibleId+"_close").css('left','669px');
																	$(qtupActive).find('.qtip-tip').css('right','-17px');
																	if (navigator.userAgent.indexOf("Chrome")>0 || ($.browser.msie && $.browser.version == 9)) {
																		$('.bubble-blt').attr('style','width: 19px');
																		$('.bubble-blr').attr('style','width: 627px');
																	}
																}
																if(qtipObj.catalogVisibleId.indexOf('MoveUsersqtip')>0 && $.browser.msie && $.browser.version != 7){
																	$('#'+qtipObj.catalogVisibleId+"_close").css('top','0px');
																	if($.browser.version == 8){
																		$('.bubble-blt').css('width','58px');
																	}else if($.browser.version == 10 || $.browser.version == 9){
																		$('.bubble-blt').css('width','58px');
																	    $('.bubble-blm').css('width','58px');
																	    $('.bubble-blr').css('width','350px');
																	}else{
																		$('.bubble-blt').css('width','48px');
																	    $('.bubble-blr').css('width','290px');
																	}
																}
															  if(qtipObj.catalogVisibleId.indexOf('MoveUsersqtip')>0){
																  if(navigator.userAgent.indexOf("Chrome")>0 || navigator.userAgent.indexOf("Safari")!=-1){
																	$('.bubble-blt').css('width','61px');
																    $('.bubble-blr').css('width','375px');
																  }
															  }
																if(qtipObj.catalogVisibleId.indexOf('AttachIdqtip_listvalues')>0){
																	if(navigator.userAgent.indexOf("Chrome")>0){
																		$('.bubble-blt').attr('style','width: 14px');
																		$('.bubble-blr').attr('style','width: 194px');
																	}else if(navigator.userAgent.indexOf("Safari")!=-1){
																		$('.bubble-blt').attr('style','width: 17px');
																	    $('.bubble-blr').attr('style','width: 191px');
																    }
																}
																if(qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachCertification_addtemplate')>0){
																	if(navigator.userAgent.indexOf("Chrome")>0){
																		$('.bubble-blt').attr('style','width: 131px');
																	}
																	else{
																		$('.bubble-blt').attr('style','width: 164px');
																		$('.bubble-blr').attr('style','width: 362px');
																	}
																	var isAtLeastIE11 = !!(navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/MSIE/))? true : false;
																	if(this.currTheme == "expertusoneV2" && isAtLeastIE11==1 ){
																	$(".qtip-button .admin-bubble-close").css({"top":"-2px"});
																	$(qtupActive).find('.qtip-tip').css('bottom','-8px');
																	}
																}
																if(qtipObj.catalogVisibleId.indexOf('MoveUsersqtip_visible')>0 && navigator.userAgent.indexOf("Chrome")>0){
																	$('.bubble-blt').attr('style','width: 61px');
																	$('.bubble-blr').attr('style','width: 375px');
																}
																
															if(tipPosition == 'bottomRight' && mLeft!=0) {
															if(qtipObj.catalogVisibleId.indexOf('listvalpeoedit')>0){
																leftPos = "44px";
																topPos  = "-2px";
																$(qtupActive).find('.qtip-tip').css({'z-index':zIndex,'right':'-31px'});
																$('#'+qtipObj.catalogVisibleId+"_close").css({'left':leftPos,'top':topPos});
																$('.bubble-blt').css('width','184px');
																$('.bubble-blr').css('width','0');
																$('.bubble-blm').css('width','58px');
																if(navigator.userAgent.indexOf("Chrome")>0){
																$('.bubble-blt').css('width','206px')
																}else if($.browser.version == 10 || $.browser.version == 9){
																$(qtupActive).find('.qtip-tip').css("bottom","0");
																$('.bubble-blt').css('width','185px');
																}
																
															}}
																/*if((qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')>0 || qtipObj.catalogVisibleId.indexOf('AttachNotification_addtemplate')>0) &&
																		$.browser.msie ){
																	$('#edit-subject').focus();
																}*/
																// Fix for 0014517: Issue in Class Admin while adding multiple classes - Added by Vincent July 30, 2012
																if(qtipObj.catalogVisibleId.indexOf('addclass')>=0 || qtipObj.catalogVisibleId.indexOf('editclass')>=0
																		|| (qtipObj.catalogVisibleId.indexOf('AttachNotification_edittemplate')) || (qtipObj.catalogVisibleId.indexOf('AttachCertification_edittemplate'))){
																		
																	var tipTop = $('#'+qtipObj.catalogVisibleId).offset().top;
																	var dScrollTop = $("#modal-content").scrollTop();
																	if(tipTop<=0){
																		var toScroll=dScrollTop-Math.abs(tipTop);
																		$("#modal-content").scrollTop(toScroll);
																		bubbleTop=bubbleTop-tipTop;
																		bubbleha = $("#"+qtipObj.catalogVisibleId).css('height');
													 					bubbleha = parseInt(bubbleha.substring(0,bubbleha.length-2));
																		bubbleTop = bubbleTop-(bubbleha-bubblehb);
																		$("#"+qtipObj.catalogVisibleId).closest(".qtip-active").css('top',bubbleTop);
																	}
																}
																Drupal.attachBehaviors();
											 					bubbleha = $("#"+qtipObj.catalogVisibleId).css('height');
											 					bubbleha = parseInt(bubbleha.substring(0,bubbleha.length-2));
																bubbleTop = bubbleTop-(bubbleha-bubblehb);
																$("#"+qtipObj.catalogVisibleId).closest(".qtip-active").css('top',bubbleTop);
											 					vtip();
											 					if(data.status_message != '' && data.cloned != 0){
											 						$("#bubble-face-table #show_expertus_message").html(data.status_message);
											 					}
										   	                 }
											   			});
											 			//remove style attr border and background to add/edit qtip
											 			$('.qtip-contentWrapper,.qtip-title').each(function(){
															$(this).removeAttr("style");
															$('.qtip-wrapper,.qtip-content').css("overflow","visible");
															if($.browser.version == 8){
																$('.qtip-content').css("padding-bottom","43px");
																if(qtipObj.catalogVisibleId.indexOf('AttachIdqtip_listvalues')>0)
																$('.qtip-tip').css("margin-bottom","76px");
															}
															$('.qtip').css("padding-bottom","24px");
															$(qtupActive).find('.qtip-tip').css("margin-left","-33px");
										          	    });
										 			}
									         }
									      },
									     show:{
											when:{
													event:'click',
													target:$("#"+popupId)
												},
											ready: true // Needed to make it show on first mouseover event
											//effect:'slide'
										 },
										 hide: {
												when:{
										   			event:'',
										   			target:''
												}
										//effect:'slide'
										},
										position: {
										    corner:{
										    	   	target: 'topMiddle',
										    	   	tooltip: tipPosition
										    	  }
										},
										style: {
											width:wBubble,
											height:hBubble,
											background: 'none',
											color: '#333333',
												tip: {
										         corner: tipPosition
												}
									   }
								 });
							}
						}
					}catch(sp){
						//alert(sp.toString());
					}
				},
				getQtipDiv : function(qtipObj,isVCSession,event) {
					var xCoordinate ='';
					var yCoordinate ='';
					var popupId 	= qtipObj.popupDispId;
					var qtipLen 	= this.qtipLenth;
					var inArrQtip = $.inArray(popupId, this.qtipLoadSet);
					this.qtipLoadSet[qtipLen] = popupId;
					this.qtipLenth = this.qtipLenth+1;
					var entityType = qtipObj.entityType;
					var entityId   = qtipObj.entityId;
					var courseId = qtipObj.courseId!=undefined?qtipObj.courseId:'';
					var url 			  = resource.base_host+'?q='+qtipObj.url; // resource.base_host+'?q=administration/catalogaccess/33/cre_sys_obt_crs';
					var wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
					var hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
					var setwBubble        = wBubble-20;
					var setBtmLeft        = (setwBubble-104)/2;
					var qtipLeftPos       = (wBubble > 700) ? 400 : (setBtmLeft + 20);
					var tipPos = qtipObj.tipPosition;
					var catalogVisibleId = qtipObj.catalogVisibleId;
					var mLeft = 0;
					var tipPosition;
					var qtipTopBottomDisplay;
					var topElements,bottomElements;
					var assignHtml  = qtipObj.assignHtml;
					var mtobj=this;
					var rowVal = qtipObj.rowVal;
					var qtip_tbl_clsName = qtipObj.qtip_tbl_clsName!=undefined ? qtipObj.qtip_tbl_clsName:'';
					var loaderId = (qtipObj.sessionPopupId == null || qtipObj.sessionPopupId == '') ?  popupId :qtipObj.sessionPopupId;
					$('body').live('click', function(e){
			    		xCoordinate = e.pageX;
			    		yCoordinate = e.pageY;
			    	});
					//console.log("qtipTopBottomDisplay001: "+ qtipObj.tipPosition);
					//EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.createLoader(qtipObj.catalogVisibleId+"_disp");
					// Added by Vincent for #0021894
					EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.createLoader(loaderId);
					if(isVCSession>=0){
						var i=isVCSession;
						var timeZone = $('#time_zone_'+i).val();
						var session_meetingid = $("#session_meetingid_"+i).val();
						var session_attendeepass = $("#session_attendeepass_"+i).val();
						var session_presenterpass = $("#session_presenterpass_"+i).val();
						var session_attendeeurl = $("#session_attendeeurl_"+i).val();
						var session_presenterurl = $("#session_presenterurl_"+i).val();
						var hid_session_details_id = $("#hid_session_details_id_"+i).val();

						var formDetail = '{"timezone":"'+timeZone+
									'","session_meetingid":"'+session_meetingid+
									'","session_attendeepass":"'+session_attendeepass+
									'","session_presenterpass":"'+session_presenterpass+
									'","session_attendeeurl":"'+escape(encodeURIComponent(session_attendeeurl))+
									'","session_presenterurl":"'+escape(encodeURIComponent(session_presenterurl))+
									'","instructor_id":"'+hid_session_details_id+'"}';

						//var tt = encodeURIComponent(formDetail)
						url = url + "/"+formDetail;
					}
					if(catalogVisibleId.indexOf('addpermissions')>=0){
						$('#loaderdiv'+popupId).css('top','-80px');
					}
					if(popupId.indexOf('qtip_visible_disp_addsession_iprange')>=0)
					{
						$('#loaderdiv'+popupId).css('left','180px').css('top','-60px');
					}
					if (popupId.indexOf("exp_meeting_qtip_visible_disp_addpresenter_0_presenter") >= 0) {
						$('#loaderdiv'+popupId).css('left','250px').css('top','-78px');
					}
					$.ajax({
		 				 type: "GET",
			   	         url: url,
			   	         data:  '',
			   	     //    async: false,
			   	         success: function(data){
							//alert('X='+xCoordinate+' Y='+yCoordinate);
			   	        	 
			   	        	if(qtipObj.qtipClass != 'admin-qtip-access-parent lrn_cls_vct_web' && qtipObj.qtipClass != 'admin-qtip-presenter-access-parent') {			   	        	 
			   	        		$(".active-qtip-div").remove();
			   	        	}			   	        	
			   	        	var span_width1 = $('.admin-addanother-session-details-info').width();
			   	        	var span_width2 = $('.chosen-meeting-type').width();
							var paintHtml = topElements+"<div id='paintContent"+popupId+"'><div id='show_expertus_message'></div>"+data.render_content_main+"</div>"+bottomElements;
							var contentDiv = qtipObj.catalogVisibleId+"_disp";
							
														
							if(qtipObj.qtipClass == 'admin-qtip-access-parent lrn_cls_vct_exp' || qtipObj.qtipClass == 'admin-qtip-access-parent lrn_cls_vct_web' || qtipObj.qtipClass == 'admin-qtip-access-parent lrn_cls_vct_oth' || qtipObj.qtipClass == 'admin-qtip-presenter-access-parent') {
								var repstr = qtipObj.qtipClass;
								var replacedstr = repstr.replace(' ','-');
								$("#"+popupId).append("<div id="+replacedstr+" class='bottom-qtip-tip active-qtip-div set-wbubble-left' ></div>");
							} 
							else {
								$("#"+popupId).append("<div class='bottom-qtip-tip active-qtip-div set-wbubble-left'></div>");
							}
							
							if(qtipObj.qtipClass == 'display-message-positioning' || qtipObj.qtipClass == 'pwdstrength-admin-popup' || qtipObj.qtipClass == 'admin-qtip-presenter-access-parent' || qtipObj.qtipClass == 'admin-qtip-access-parent lrn_cls_vct_exp' || qtipObj.qtipClass == 'admin-qtip-access-parent lrn_cls_vct_web' || qtipObj.qtipClass == 'admin-qtip-access-parent lrn_cls_vct_oth') {
								$("#"+popupId).append("<div id='"+contentDiv+"' class='active-qtip-div "+qtipObj.qtipClass+"'></div>");
							}else{
								$("#"+popupId).append("<div id='"+contentDiv+"' class='active-qtip-div'></div>");
							}
							$("#"+contentDiv).html(paintHtml);
							if(catalogVisibleId.indexOf('addroletousers')>=0){
								$("#paintContent"+popupId).css('min-height','225px');
							}
							$(".bottom-qtip-tip").css('bottom','0px').css('position','absolute').css('z-index','101');
							//$('#upload_browse_and_url').find('#search-list-title-keyword').css('z-index','0');
							//$('#upload_detail_container').find('.content-browse-upload').css('z-index','0');
							if (qtipObj.qtipClass == 'add-key-word-popup') {
								$("#"+contentDiv).css('position','absolute').css('left','-'+parseInt(qtipLeftPos-98)+'px').css('bottom','40px').css('z-index','100');
							}
							else if (qtipObj.qtipClass == 'pwdstrength-admin-popup') {
							  $("#"+contentDiv).css('position','absolute').css('left','-'+parseInt(qtipLeftPos-48)+'px').css('bottom','40px').css('z-index','100');
							}
							else if (catalogVisibleId.indexOf("1_qtip_visible_disp_addsession_iprange")==0) {
								$("#"+contentDiv).css('position','absolute').css('left',parseInt(qtipLeftPos)-133+'px').css('bottom','48px').css('z-index','100');
							}
							else if (catalogVisibleId.indexOf("2_qtip_visible_disp_addsession_iprange")==0) {
								$("#"+contentDiv).css('position','absolute').css('left','-6px').css('bottom','30px').css('z-index','100');
							}
							else if (catalogVisibleId.indexOf("qtip_visible_disp_iprange_1_iprange_disp")==0) {
								$("#"+contentDiv).css('position','absolute').css('left',parseInt(qtipLeftPos-75)+'px').css('bottom','40px').css('z-index','100');
							}
							else if (catalogVisibleId.indexOf("EditSessionIdqtip") < 0) {
								$("#"+contentDiv).css('position','absolute').css('left','-'+qtipLeftPos+'px').css('bottom','40px').css('z-index','100');
							}
							var p = $("#"+popupId);
							var position = p.position();
							var divHeight = $("#"+contentDiv).height();
		 					var parentTopPos = position.top + 130;
		 					//alert("top Pos: "+parentTopPos+" | divHeight: "+divHeight);
		 					if($("#"+popupId+" .tab-title").width() > 0 ){
								 var labelWidth = ($("#"+popupId+" .tab-title").width())/2;
								 var bubbleWidth = 32;
								 var setbubblePosition = labelWidth - bubbleWidth;
								 $(".set-wbubble-left").css('left', setbubblePosition +'px');
						    }
		 					if(catalogVisibleId.indexOf("MoreEditSession")>0||catalogVisibleId.indexOf("EditSessionIdqtip")>0){
		 						$('.session-add-list').hide();
		 					}

		 				   var dispop=$('.add_session_popup').css('display');
		 				   var SRecrowCount = $('#admin-data-grid').find('.admin-datagrid-session-with-addanother .ui-jqgrid-bdiv tr').length;
		 				   var sessionScrId=$('#admin-data-grid').parent('div').attr("class");

		 				   if (parentTopPos < divHeight && position.top!=0 || catalogVisibleId.indexOf("AddMoreSessionIdqtip")>0)  {
		 					  //Add another session qtip working code
		 					  if(sessionScrId=="catalog-class-session-basic-addedit-form-container" && SRecrowCount > 5){
		 							qtipTopBottomDisplay = "tipfaceUp";
									if(catalogVisibleId.indexOf("EditSessionIdqtip") < 0);
									$("#"+contentDiv).css('position','absolute').css('left','-'+qtipLeftPos+'px').css('top','42px').css('bottom','0px').css('z-index','100');

		 					  }else{
		 					   if ($.browser.msie && $.browser.version == 7) {
									qtipTopBottomDisplay = "tipfaceUp";
									$(".narrow-search-multi-action-container div").css("position"," ");
									$(".active-qtip-div").remove();
									$("body").append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
									$("body").append("<div id='"+contentDiv+"' class='active-qtip-div'></div>");
									$("#"+contentDiv).prev().css('top',+yCoordinate+'px').css('position','absolute').css('left',+(xCoordinate-30)+'px').css('z-index','101');
									$(".bottom-qtip-tip").remove();
									if(catalogVisibleId.indexOf("EditSessionIdqtip") < 0)
										$("#"+contentDiv).css('top',+(yCoordinate+29)+'px').css('position','absolute').css('left',+(xCoordinate-setBtmLeft)+'px').css('z-index','100');
		 						} else {
		 							qtipTopBottomDisplay = "tipfaceUp";
									$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
									//add script for qtip arrow come twoice in add another session
									 if(dispop=="block") {
			 						 $("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('position','absolute');
			 						 $("#"+popupId).last('div').prev('.bottom-qtip-tip-up').remove();
			 					        } else	{
										 $("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('position','absolute').css('left','-10px');//add minus 10px for tipfaceup qtip
									 }
									$(".bottom-qtip-tip").remove();
									if(catalogVisibleId.indexOf("EditSessionIdqtip") < 0);
									$("#"+contentDiv).css('position','absolute').css('left','-'+qtipLeftPos+'px').css('top','42px').css('bottom','0px').css('z-index','100');
								}
		 					}
		 				  }
		 					if( qtipObj.tipPosition == 'tipTopLeft'){
		 						qtipTopBottomDisplay = "tipfaceUp";
								//Add another session qtip working code
								if(sessionScrId=="catalog-class-session-basic-addedit-form-container" && SRecrowCount > 5){
								    $(".bottom-qtip-tip").remove();
									$("#"+popupId).append("<div class='bottom-qtip-tip active-qtip-div set-wbubble-left'></div>");
								    $("#"+popupId+" .bottom-qtip-tip").css('bottom','2px').css('left','55').css('z-index','101').css('position','absolute');
									//$("#"+popupId+" .active-qtip-div").css('bottom','30px');
							    	$("#"+popupId+" .active-qtip-div").css('left','55px'); /*viswanathan changed 76px to 55px for #74374*/
									$("#"+contentDiv).css('position','absolute').css('left','-19px').css('top','').css('bottom','40px').css('z-index','100');
								}
								else{
								    $("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
								    
								    
								    if(qtipObj.qtipClass == 'admin-qtip-access-parent another-lrn_cls_vct_web' || qtipObj.qtipClass == 'admin-qtip-access-parent another-lrn_cls_vct_oth' || qtipObj.qtipClass == 'admin-qtip-access-parent another-lrn_cls_vct_exp') {
								    var repstr = qtipObj.qtipClass;
								    var replacedstr = repstr.split(' ');
									$("#"+popupId+" .active-qtip-div").addClass(replacedstr[1]);
								    
								    	if ((navigator.userAgent.toLowerCase().indexOf('chrome') > -1) || ($.browser.msie && $.browser.version < 8)) {
								    		$("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('position','absolute').css('left',parseInt((span_width1+span_width2)-13)+'px');
								    	} else {
								    		$("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('position','absolute').css('left',parseInt((span_width1+span_width2)-9)+'px');
								    	}
								    } else {
								    	$("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('position','absolute');
								    }
								    
								    
								    $(".bottom-qtip-tip").remove();
								    $("#"+contentDiv).css('position','absolute').css('left','-'+19+'px').css('top','42px').css('bottom','0px').css('z-index','100');
								}
						    } else if(qtipObj.tipPosition == 'tipTopRight') {

						    	$("#"+popupId+" .bottom-qtip-tip-up").css('left','-20px');
						    	if(catalogVisibleId.indexOf("EditSessionIdqtip") >0){
						    		if(catalogVisibleId.indexOf("qtip_EditSessionIdqtipvisible_disp_iprange")==0)
				    				{
				    				$("#"+contentDiv).css('position','absolute').css('left','').css('right','-'+34+'px').css('top','').css('bottom','-'+12+'px').css('z-index','100');
				    				$("#"+popupId+" .bottom-qtip-tip").css('bottom','').css('left','-26px').css('z-index','101').css('position','absolute');
				    				}
						    		else
						    		{
						    		//edit and more session qtip working code
						    		if(rowVal>4){
						    			$("#"+popupId+" .bottom-qtip-tip").css('bottom','2px').css('left','-26px').css('z-index','101').css('position','absolute');
						    			$("#"+contentDiv).css('position','absolute').css('left','').css('right','-'+34+'px').css('top','').css('bottom','40px').css('z-index','100');
						    		}else{
						    			$(".bottom-qtip-tip").remove();
						    			$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
						    			$("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('left','-26px').css('position','absolute');
						    			$("#"+contentDiv).css('position','absolute').css('left','').css('right','-'+34+'px').css('top','42px').css('bottom','0px').css('z-index','100');
						    			
						    	    	}
						    		 }
						    	}else{
						    	  $("#"+contentDiv).css('position','absolute').css('left','-'+375+'px').css('top','42px').css('bottom','0px').css('z-index','100');
						    	}
						    }else if(qtipObj.tipPosition == 'tipfaceMiddleRight' && catalogVisibleId.indexOf("AddNewSessionIdqtip") >0 ) {
						       	var getSessTop=$("#"+catalogVisibleId+"_disp").offset();
						       	if(parseInt(getSessTop.top) < "30"){
						    		qtipTopBottomDisplay = "tipfaceUp";
						    		$(".bottom-qtip-tip").remove();
					    			$("#"+popupId).append("<div class='bottom-qtip-tip-up active-qtip-div set-wbubble-left'></div>");
					    			$("#"+popupId+" .bottom-qtip-tip-up").css('top','13px').css('left','300px').css('position','absolute');
					    			$("#"+contentDiv).css('position','absolute').css('left','0').css('right','').css('top','42px').css('bottom','0px').css('z-index','100');
					       			//Drupal.ajax.prototype.commands.CtoolsModalAdjust();
					    			
						    	}else{
						    	qtipTopBottomDisplay = "tipfaceUp";
						    	$("#"+popupId+" .active-qtip-div").css('bottom','32px');
						    	if (Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
						    		$("#"+popupId+" .active-qtip-div").css('left','319px');
						    		$("#"+contentDiv).css('position','absolute').css('left','0').css('bottom','70px').css('z-index','auto');
						    	} else{
						    		$("#"+popupId+" .active-qtip-div").css('left','210px');
						    		$("#"+contentDiv).css('position','absolute').css('left','0').css('bottom','70px').css('z-index','unset');
						    	}
						    	}
						    }
							switch(qtipTopBottomDisplay) {
							case 'tipfaceUp':
								wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
								hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
								setwBubble        = wBubble-20;
								setBtmLeft        = (setwBubble-104)/2;
								mLeft			  = (qtipObj.catalogVisibleId.indexOf('editclass')>0)?45:(qtipObj.catalogVisibleId.indexOf('AttachCrsIdqtip')>0)?58:82;
								//Set buble tool tip arrow position
								tipPosition       = (qtipObj.tipPosition) ? qtipObj.tipPosition : 'bottomMiddle';
								topElements = '<a class="qtip-close-button" onclick="$(\'#root-admin\').data(\'narrowsearch\').removeActiveQtip(\''+catalogVisibleId+'\');"></a><span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table" class="'+qtip_tbl_clsName+'"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
								bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-blt"></td><td class="bubble-br"></td></tr></tbody></table></span>';
								$("#"+popupId).parent().parent().parent().parent().removeClass("qtip-access-control");
							break;
							default:
								wBubble 		  = qtipObj.wBubble;//700; //Bubble Popup Width
								hBubble 		  = qtipObj.hBubble;//300; //Bubble Popup Height
								setwBubble        = wBubble-20;
								setBtmLeft        = (setwBubble-104)/2;
								//Set buble tool tip arrow position
								tipPosition       = (qtipObj.tipPosition) ? qtipObj.tipPosition : 'bottomMiddle';
								topElements = '<a class="qtip-close-button" onclick="$(\'#root-admin\').data(\'narrowsearch\').removeActiveQtip(\''+catalogVisibleId+'\');"></a><span id="popup_container_'+popupId+'"><table cellspacing="0" cellpadding="0" width="'+setwBubble+'px" height="'+hBubble+'px" id="bubble-face-table" class="'+qtip_tbl_clsName+'"><tbody><tr><td class="bubble-tl"></td><td class="bubble-t"></td><td class="bubble-tr"></td></tr><tr><td class="bubble-cl"></td><td valign="top" class="bubble-c">';
								bottomElements ='</td><td class="bubble-cr"></td></tr><tr><td class="bubble-bl"></td><td class="bubble-blt"></td><td class="bubble-br"></td></tr></tbody></table></span>';
								$("#"+popupId).parent().parent().parent().parent().removeClass("qtip-access-control");
							}
							var paintHtml = topElements +
                              "<div id='paintContent" + popupId + "'>" +
                                "<div id='show_expertus_message'></div>" +
                                data.render_content_main +
                              "</div>" +
                              bottomElements;
							var contentDiv = qtipObj.catalogVisibleId+"_disp";
              				if(data.drupal_settings) {
							   $.extend(true, Drupal.settings, data.drupal_settings);
							}
              				EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader(loaderId);
							$("#"+contentDiv).html(paintHtml);
							//EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader(qtipObj.catalogVisibleId+"_disp");

							//For getting default meeting details on VC session details page
							if(assignHtml == 'meeting-container'){
								mtobj.getMeetingType();
							}
							Drupal.attachBehaviors();
							if(catalogVisibleId.indexOf('addpermissions')>=0 || catalogVisibleId.indexOf('addlistpermissions')>=0){
								$('#admin-add-scroll').jScrollPane({});
								/*if(catalogVisibleId.indexOf('addpermissions')>=0){
									$('#permission-cancel-save-btn').css('margin-right','-4px')
								}else{
									$('#permission-cancel-save-btn').css('margin-right','18px')
								}*/
							} else if(catalogVisibleId.indexOf('qtipAttachIdqtip_visible_disp')>=0){
								var heigt = $("#scrolldiv").height();
								if(heigt > 80){
									$('#catalog-attachment-disp-container #scrolldiv').css('height','100px');
									$('#catalog-attachment-disp-container #scrolldiv').jScrollPane({});
									}
								}
							if(catalogVisibleId.indexOf('qtipAddSessionIdqtip_visible_disp')>=0){
								$(".bottom-qtip-tip").css('bottom','2px').css('left','0').css('position','absolute').css('z-index','101');
							}else if (catalogVisibleId.indexOf("1_qtip_visible_disp_addsession_iprange")==0) {
								$(".bottom-qtip-tip").css('bottom','20px').css('left','195px').css('position','absolute').css('z-index','101');
							}else if (catalogVisibleId.indexOf("2_qtip_visible_disp_addsession_iprange")==0) {
								$(".bottom-qtip-tip").css('bottom','2px').css('left','0').css('position','absolute').css('z-index','101');
							}
							} //end $.ajax success

						});
                vtip();
				},
				visiblePopup : function(qtipObj) {
					try{
						var url = resource.base_host+'?q='+qtipObj.url;
						var popupId 	= qtipObj.popupDispId;
						//var catalogVisibleId = qtipObj.catalogVisibleId;
						var entId = qtipObj.entityId;
						var qtipScrollId = qtipObj.scrollid;

						$.ajax({
			 				 type: "GET",
				   	         url: url,
				   	         data:  '',
				   	         success: function(data){
			 					//var paintHtml = bpTop+"<div id='paintContent"+popupDispId+"'><div id='show_expertus_message' style='"+messageStyle+"'></div>"+data.render_content_main+"</div>"+bpBot;
			 					$('#'+popupId+' #visible-popup-'+entId+' #bubble-face-table .bubble-c #paintContent'+popupId).html(data.render_content_main);
			 					$.extend(true, Drupal.settings, data.drupal_settings);
			 					EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader("paintContent"+popupId);

			 					if(qtipScrollId != '' && qtipScrollId != undefined && qtipScrollId != null){
			 						var qtipScrollType = (qtipObj.scrolltype == 'class') ? '.' : '#';
			 						$('#'+popupId+' '+qtipScrollType+qtipScrollId).jScrollPane('destroy');
			 						$('#'+popupId+' '+qtipScrollType+qtipScrollId).jScrollPane({});
			 					}
								Drupal.attachBehaviors();
			 					vtip();
			 					
			 					if('[qtipObj.linkid^=visible-sharelink]') {
			 						if (navigator.appVersion.indexOf("Safari")!= -1 && ($(window).height() < 742))
			 							$('#program-tp-basic-addedit-form-container .survey-attach-grid-wrapper .ui-jqgrid .jqgrow #bubble-face-table td.bubble-c').css('height','33px');
			 								 						
									if(Drupal.settings.user.language !== undefined && $.inArray(Drupal.settings.user.language, ["pt-pt", "de", "fr"]) != -1) {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-30px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-15px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ru') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-33px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-15px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ja') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-30px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-15px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ko') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-26px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-3px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'zh-hans') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-54px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-32px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-42px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'it') { 
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-3px');
										else
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'es') { 
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'en-us') { 
										if ((navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1) || (navigator.appVersion.indexOf("Trident/7.0")!= -1))
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-3px');
										else
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									}else {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-28px');
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									}
								}
		   	                 }
			   			});

					}catch(e){
						alert(e);
					}

				},
				timepickerLoad : function(){
				try{
					$('input.exp-timepicker').click(function(){
						var attributeId = $(this).attr('id');
						var expDropDownId = 'exp-dropdown-'+attributeId;
						var c = $(this).attr('class');
						var x= c.indexOf('callback')>=0?c.substring(c.indexOf('callback')):'';
						var y = x.substring(x.indexOf('-')+1,(x.indexOf(' ')>0?x.indexOf(' '):x.length));
						var hours, minutes;
						$('.exp-timepicker-selection').css('display', 'none');
						if($(this).val() == Drupal.t('hh:mm')){
							$(this).val('');
						}
						if($('#'+expDropDownId).length >0){
							if($('#'+expDropDownId).is(':visible') == true){
								$('#'+expDropDownId).css('display', 'none');
							} else {
					 			$('#'+expDropDownId).css('display', 'block');
							}
						} else {
							$(this).after('<div id="'+expDropDownId+'" data="'+attributeId+'" class="exp-timepicker-selection"><ul></ul></div>');
							for(var i = 0 ;i <= 1425; i += 15){
								hours = Math.floor(i / 60);
								minutes = i % 60;
								if (hours < 10){
								    hours = '0' + hours;
								}
								if (minutes < 10){
								    minutes = '0' + minutes;
								}
								$('#'+expDropDownId+' ul').append('<li>'+hours + ':' + minutes + '</li>');
						    }
							$('div.exp-timepicker-selection li').click(function(){
								var attributeId = $(this).closest('.exp-timepicker-selection').attr('data');
								var selectedTime = $(this).html();
								$('#'+attributeId).val(selectedTime);
								$(this).closest('.exp-timepicker-selection').css('display', 'none');
								if(y!=null && y!=undefined && y!='undefined' && $.trim(y) !=''){
									eval(y+'('+attributeId+')');
								}
							});
						}
					});
					
  			$('body,#admin-data-grid td').bind("click",function(event){
                  if($(event.target).hasClass('exp-timepicker') != true){
                   $('.exp-timepicker-selection').css('display', 'none');
                  }	
				  if($('#exp-dropdown-start_hours').is(':visible')) {
					var Index = $('#exp-dropdown-start_hours').parents('.active-qtip-div').siblings('.bottom-qtip-tip').zIndex();
				    $('#exp-dropdown-start_hours').parents('.active-qtip-div').siblings('.bottom-qtip-tip').zIndex(100);
				  } else {
					var Index = $('#exp-dropdown-start_hours').parents('.active-qtip-div').siblings('.bottom-qtip-tip').zIndex();
				    $('#exp-dropdown-start_hours').parents('.active-qtip-div').siblings('.bottom-qtip-tip').zIndex(101);
				  }
               });
               
           }catch(e){
			 alert(e);
			}
                  
				},
                /* added function to randomize li tags while switching between meetings during session creation */
				reverseSessionType : function(){
					if($(".session-list-ul li").length == 1 )
						{
							$(".session-list-ul li").addClass("single_meeting");
						}
					$('.session_type_list').click(function(){
						var liId = $(this).attr("id");
					    $('.session-list-ul li:eq(0)').removeClass('admin-save-button-middle-bg');
					    $('.session-list-ul li:eq(0)').text($('.session-list-ul li:eq(0)').text().replace(Drupal.t("LBL287"), ''));
						$('.session-list-ul span.session-list').append($('.session-list-ul li:eq(0)'));
						$('#'+liId).text(Drupal.t('LBL287')+' '+$('#'+liId).text());
						$('#'+liId).addClass('admin-save-button-middle-bg');
						$('.session-list-ul span.admin-save-button-left-bg').after($(this));
						$('.session-list-ul span.session-list').hide();
						if(document.getElementById('lrn_cls_vct_oth') && liId != "lrn_cls_vct_oth"){
							$('.session-list-ul span.session-list').append($('#lrn_cls_vct_oth'));
						}

						if(liId =='lrn_cls_vct_web') {
							$('.admin-empty-text-msg').text(Drupal.t('MSG756'));
							$('.expertus-meeting-button-container div.add_session_button_div div.dropdownadd-dd-list-arrow').css('left','95px');
						} else if(liId =='lrn_cls_vct_oth') {
							$('.admin-empty-text-msg').text(Drupal.t('MSG757'));
							$('.expertus-meeting-button-container div.add_session_button_div div.dropdownadd-dd-list-arrow').css('left','95px');
						} else {
							$('.admin-empty-text-msg').text(Drupal.t('MSG800'));
							$('.expertus-meeting-button-container div.add_session_button_div div.dropdownadd-dd-list-arrow').css('left','130px');
						}
			
						vtip();
						//$(".session-list-ul li:not(#"+liId+")").randomize();
					});

				},

				removeActiveQtip: function(id) {
				  // Handle cancel policy qtip popup close
				  var cancelPolicyQtip = $('.active-qtip-div').parents('.cancel-policy-popup-wrapper');
				  if (cancelPolicyQtip) {
				    if(id=='qtip_visible_disp_addpresenter_0_presenter') {
						  $('#exp_meeting_qtip_visible_disp_addpresenter_0_presenter').empty();
					 } else {
						  $('.active-qtip-div').remove();
					 }
				    if (cancelPolicyQtip.hasClass('add-another-cancel-policy-popup')) {
  				    //alert('closing cancel policy add another qtip popup');
  				    var defaultLabel = $('#add-another-cancel-policy-label').data('default-label');
  				    $('#add-another-cancel-policy-label').text(defaultLabel);
				    }
				    return;
				  }

				  $('.active-qtip-div').remove();
					$(".narrow-search-multi-action-container div").css("position","relative");
					if(id!=null){
						if(id.indexOf('AddMoreSessionId')>=0){
							$('#meeting-title').html('');
						}else if(id.indexOf('addroletousers')>=0){
							$("#narrow-search-results-holder").trigger("reloadGrid",[{page:1}]);

						}
					}
				},

				getInlineEdit : function(inlineData){
                    if(inlineData){
                    	this.actualInlineData = inlineData;
                        var inlineEditData= eval(inlineData);
                        this.inlineEditData = inlineEditData;
                        var html ="";
                        var callBlur = '$("#root-admin").data("narrowsearch")';
                        var widthAnchor = $("#tag-name-div-"+this.inlineEditData.tagEntityId+" a").width();
                        var heightAnchor = $("#tag-name-div-"+this.inlineEditData.tagEntityId+" a").height();
                        //html += '<input type ="text" class="tag-edit-txtbox" id="tag-list-name-id-'+this.inlineEditData.tagEntityId+'" style = "width:'+widthAnchor+'px;height:'+heightAnchor+'px;" value ="'+decodeURIComponent(this.inlineEditData.tagName)+'" onblur="$(\'#root-admin\').data(\'narrowsearch\').updateTagList(this);" onkeydown="$(\'#root-admin\').data(\'narrowsearch\').updateTagsOnKeyDown(event,this);" />';
                        html += '<input type ="text" maxlength="150" class="tag-edit-txtbox" id="tag-list-name-id-'+this.inlineEditData.tagEntityId+'" style = "width:'+widthAnchor+'px;height:'+heightAnchor+'px;" value ="" onblur="$(\'#root-admin\').data(\'narrowsearch\').updateTagList(this);" onkeydown="$(\'#root-admin\').data(\'narrowsearch\').updateTagsOnKeyDown(event,this);" />';
                        $("#tag-name-div-"+this.inlineEditData.tagEntityId).html(html);
    					$('#tag-list-name-id-'+this.inlineEditData.tagEntityId).focus();
    					$("#tag-list-name-id-"+this.inlineEditData.tagEntityId).val(decodeURIComponent(this.inlineEditData.tagName));
                    }
                },

                updateTagsOnKeyDown : function(evt,updateTag){

            		evt = evt || window.event;
            	    var charCode = evt.keyCode || evt.which;
            	    if (charCode == 13) {
            	    	updateTag.blur();
            	        evt.preventDefault();
            	        evt.stopPropagation();
            	        return false;
            	    }
            	},

                updateTagList : function(updatedTag){
            		var obj = this;
            		this.actualInlineData = this.actualInlineData.replace(/"/g,"&quot;");
                    var inlineData = this.inlineEditData;
                    var updatedTagName = $(updatedTag).attr("value");
                    var exist_tag_name = decodeURIComponent(inlineData.tagName);
//                    var allowedChars = /^[a-z A-Z0-9@*.,_\-\'\|]+$/;
//                    var restrictedSet = /[~`!#$%^&()+=\\}\]{\[\":;?\/><]/;	//for 34642: Handling of multi-language tags in cloud based on learner's preferred language
//                    if(restrictedSet.test(updatedTagName)) {
//                    	var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li style="width: 250px;"><span>' +Drupal.t('LBL191') + ' ' + Drupal.t('MSG639') + '</span></li></ul><div onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();" class="msg-close-btn"></div></div></div></div>';
//                    	$("#show_expertus_message").append(error_msg);
//                    	return false;
//                    }
                    if(updatedTagName != '' && $.trim(updatedTagName) != "" && updatedTagName != exist_tag_name){
                    	newupdatedTagName = updatedTagName.replace(/\//g,Drupal.settings.custom.EXP_AC_SEPARATOR);
	                    url = obj.constructUrl("administration/update-tags/"+inlineData.entityId+"/"+inlineData.emptyId+"/"+inlineData.entityType+"/"+encodeURIComponent(newupdatedTagName)+"/"+inlineData.tagEntityId);
	                    $.ajax({
	                        type: "POST",
	                        url: url,
	                        data:  '',
	                        success: function(result){	                        	
	                        	if(result == 'error'){
	                        		var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li><span>' +Drupal.t('LBL191') + ' ' + Drupal.t('LBL271') + '</span></li></ul><div onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();" class="msg-close-btn"></div></div></div></div>';
                    				$("#paintContentVisiblePopup #show_expertus_message").append(error_msg);
                    				return false;
	                        	}else{                  		
		                            obj.inlineEditData.tagName = encodeURIComponent(updatedTagName); //'data={"entityId":"'+inlineData.entityId+'","entityType":"'+inlineData.entityType+'","tagName":"'+updatedTagName+'","tagEntityId":"'+inlineData.tagEntityId+'","tagId":"'+inlineData.tagId+'"}';
		                            //obj.inlineEditData = obj.inlineEditData.replace('"',"&quot;");
		                            var html = "";
		                            obj.actualInlineData = obj.actualInlineData.replace(/&quot;/g,'"');
		                            obj.actualInlineData = eval(obj.actualInlineData);
		                            obj.actualInlineData.tagName = escape(updatedTagName);
		                            obj.actualInlineData = "data= "+EXPERTUS_SMARTPORTAL_AbstractManager.convertJsonToString(obj.actualInlineData);
		                            obj.actualInlineData = obj.actualInlineData.replace(/"/g,"&quot;");
		                            html += '<a href="javascript:void(0);" id="tag-list-name-id-'+inlineData.tagEntityId+'" name="tag-list-name-id-'+inlineData.tagEntityId+'" class = "tag-list-name"  ondblclick ="$(\'#root-admin\').data(\'narrowsearch\').getInlineEdit(\''+ obj.actualInlineData +'\');">'+updatedTagName+'</a>';
		                            $("#tag-name-div-"+inlineData.tagEntityId).html(html);
	                           }
	                        }
	                    });
                    }else{
                    	var html = "";
                    	obj.actualInlineData= addslashes(obj.actualInlineData);
                    	obj.actualInlineData.tagName = updatedTagName;
                    	obj.actualInlineData = obj.actualInlineData.replace(/"/g,"&quot;");
                        html += '<a href="javascript:void(0);" id="tag-list-name-id-'+inlineData.tagEntityId+'" name="tag-list-name-id-'+inlineData.tagEntityId+'" class = "tag-list-name"  ondblclick ="$(\'#root-admin\').data(\'narrowsearch\').getInlineEdit(\''+ obj.actualInlineData+'\');">'+exist_tag_name+'</a>';
                        $("#tag-name-div-"+inlineData.tagEntityId).html(html);
                    }
                },


                getInlineEditAttachedCourse : function(inlineData,e){
                	//e.preventDefault();
                	//console.log("double click trigger ");
                    if(inlineData){
                        var inlineEditData= eval(inlineData);
                        this.inlineEditData = inlineEditData;
                    }
                   
                   //0073705:single and double quotes
                    var fullGroupNameData = this.inlineEditData.fullGroupName;
                    fullGroupNameData = fullGroupNameData.replace(/"/g, '&quot;');


          
                    tpTabDoubleClickData = {
                    		'selector':"#attachedcourse-name-div-"+this.inlineEditData.courseId+'-'+this.inlineEditData.recertifyFlag,
                    		'data':$("#attachedcourse-name-div-"+this.inlineEditData.courseId+'-'+this.inlineEditData.recertifyFlag).html(),
                    		'oldName': $("#attachedcourse-name-div-"+this.inlineEditData.courseId+'-'+this.inlineEditData.recertifyFlag + " a span").text()
                    } 
                    var html ="";
                    var callBlur = '$("#root-admin").data("narrowsearch")';
                    var inline_txt = $("#attachedcourse-name-div-"+this.inlineEditData.courseId+"-"+this.inlineEditData.recertifyFlag+" #expires_duration").html();
                    html += '<input maxlength="250" type ="text" class="attachedcourse-edit-txtbox" id="attachedcourse-list-name-id-'+this.inlineEditData.courseId+'-'+this.inlineEditData.recertifyFlag+'" value ="'+fullGroupNameData+'" onkeydown="$(\'#root-admin\').data(\'narrowsearch\').updateAttachedCourseGroupKeyDown(event, this);" onblur="$(\'#root-admin\').data(\'narrowsearch\').updateAttachedCourseGroup(this);">';
                    html += '<span id ="expires_duration">'+inline_txt+'</span>';
                    $("#attachedcourse-name-div-"+this.inlineEditData.courseId+'-'+this.inlineEditData.recertifyFlag).html(html);
                    $('#attachedcourse-list-name-id-'+this.inlineEditData.courseId+'-'+this.inlineEditData.recertifyFlag).focus();
                },

                updateAttachedCourseGroupKeyDown : function(evt, updatedGroup){
            		evt = evt || window.event;
            	    var charCode = evt.keyCode || evt.which;
            	    if (charCode == 13) {
            	    	$("#root-admin").data("narrowsearch").updateAttachedCourseGroup(updatedGroup);
            	        evt.preventDefault();
            	        return false;
            	    }

                },

                updateAttachedCourseGroup : function(updatedGroup){
                    var inlineData = this.inlineEditData;
                    var updatedGroupName = $.trim($(updatedGroup).attr("value"));
                    var oldGroupName = this.inlineEditData.groupName;
                    this.inlineEditData.groupName = updatedGroupName;
                    var obj = this;
                    var fieldname = Drupal.t("LBL1003")+' '+Drupal.t("LBL3060");
                    var characterlist = "a-z A-Z 0-9 @ * ' . _ -";
                    var grpNameExists = 0;
                       /**Change by: ayyappans
                     * #37078: UI Issue in TP when adding any special characters in the group name
                     * Root Cause: If the group name contains special characters " and ' the object string gets broken and causes javascript error.
                     * Fix: validation has been added for Group name to contain alphanumerics, spaces and speacial characters ._-@*
                     * 		maxlength characters property added to textbox attachedcourse-list-name-id-?
                     * */
                   if(Drupal.settings.user.language == 'en-us')
                	   {
                	   var allowedChars = /^[a-z A-Z0-9@*\'\"._-]+$/;
                	   if ( updatedGroupName == '' || !allowedChars.test(updatedGroupName)) {
                           var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li style="width: 200px;"><span>' +  Drupal.t('MSG811', {'@fieldname' : fieldname , '@character list' : characterlist }) + "</span></li></ul><div onclick=\"$('body').data('learningcore').closeErrorMessage();\" class=\"msg-close-btn\"></div></div></div></div>";
                           $("#show_expertus_message").html(error_msg);
                           return false;
                         }
                	   }
                   else {
                	   var allowedChars = /^[a-z A-Z0-9@*\'\"._-]+$/;;
                	   if (updatedGroupName == '' || !allowedChars.test(updatedGroupName)) {
                           var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li style="width: 200px;"><span>' +  Drupal.t('MSG811', {'@fieldname' : fieldname , '@character list' : characterlist }) + "</span></li></ul><div onclick=\"$('body').data('learningcore').closeErrorMessage();\" class=\"msg-close-btn\"></div></div></div></div>";
                           $("#show_expertus_message").html(error_msg);
                           return false;
                       }
                   }
                   if(updatedGroupName.length > 49){
                   		var current_length = updatedGroupName.length;
                   		 var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li style="width: 200px;"><span>' +  Drupal.t('!name cannot be longer than %max characters but is currently %length characters long.', {'!name' : fieldname , '%max' : 50 ,'%length' : current_length}) + "</span></li></ul><div onclick=\"$('body').data('learningcore').closeErrorMessage();\" class=\"msg-close-btn\"></div></div></div></div>";
                          $("#show_expertus_message").html(error_msg);
                          return false;
                   }
                   //Group name validation
                   $('#program_attach_tabs ul li a').each(function(i) {
                   		var validationmsg = Drupal.t("LBL1003")+' '+Drupal.t("LBL107")+Drupal.t("LBL271");
				    	if (this.text == updatedGroupName) {
				    	 	grpNameExists = 1;
				    	}
					});
					if(grpNameExists == 1){
						var validationmsg = Drupal.t("LBL1003")+' '+Drupal.t("LBL107")+Drupal.t("LBL271");
						var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li style="width: 200px;"><span>' +  validationmsg + "</span></li></ul><div onclick=\"$('body').data('learningcore').closeErrorMessage();\" class=\"msg-close-btn\"></div></div></div></div>";
                        $("#show_expertus_message").html(error_msg);
                        return false;
				 	}
					
                   var groupName = decodeURIComponent(updatedGroupName);
                    //37078 : End of code change
                    if (updatedGroupName == "No Group Name" || updatedGroupName == "") {
                        updatedGroupName = oldGroupName;
                        this.inlineEditData.groupName = updatedGroupName;
                        full_grp_name = addslashes(inlineData.fullGroupName);
                        group_name = addslashes(inlineData.groupName);
                        var html = "";
                        var datanew = 'data={"entityId":"'+inlineData.entityId+'","entityType":"'+inlineData.entityType+'","groupName":"'+group_name+'","fullGroupName":"'+full_grp_name+'","courseId":"'+inlineData.courseId+'","recertifyFlag":"'+inlineData.recertifyFlag+'"}';
                        datanew = unescape(datanew).replace(/"/g, '&quot;');
                        html += '<a href="javascript:void(0);" id="attachedcourse-list-name-id-'+inlineData.courseId+'-'+inlineData.recertifyFlag+'" name="attachedcourse-list-name-id-'+inlineData.courseId+'-'+inlineData.recertifyFlag+'" class = "attachedcourse-list-name"  ondblclick ="$(\'#root-admin\').data(\'narrowsearch\').getInlineEditAttachedCourse(\''+datanew+'\',this);">'+updatedGroupName+'</a>';
                        $("#attachedcourse-name-div-"+inlineData.courseId+'-'+inlineData.recertifyFlag).html(html);
                    } else {
                    	obj.createLoader('attach_course_dt');
                        url = obj.constructUrl("administration/update-attachedcourse-group/"+inlineData.entityId+"/"+inlineData.entityType+"/"+updatedGroupName+"/"+inlineData.courseId+"/"+inlineData.recertifyFlag);
                        $.ajax({
                            type: "POST",
                            url: url,
                            data:  '',
                            success: function(result) {
	                        	tpTabDoubleClick = false;
	                        	if(tpTabDoubleClickData != null){
	                        		var oldData = tpTabDoubleClickData.data;
	                        		oldGroupName = tpTabDoubleClickData.oldName;

						formatOldGroupName=oldGroupName;
						formatOldGroupName = formatOldGroupName.replace(/"/g,"&quot;");
						oldData=oldData.replace(/\\/g, '');
						formatUpdatedGroupName=updatedGroupName;
						formatUpdatedGroupName = formatUpdatedGroupName.replace(/"/g,"\\&quot;");
						oldData = oldData.replace( new RegExp(formatOldGroupName, "gi"), formatUpdatedGroupName);

	                        		var clk = $(oldData + ' a').attr('onclick');
	                        		var dblclk = $(oldData + ' a').attr('ondblclick');
		                        	$(tpTabDoubleClickData.selector).html(oldData);
						//var acText = $(tpTabDoubleClickData.selector +" span:first").text();
						$(tpTabDoubleClickData.selector +" span:first").text(updatedGroupName);
		                        	$("#attachedcourse-name-div-"+inlineData.courseId+'-'+inlineData.recertifyFlag).attr('title',updatedGroupName);
		                        	$( "#page-container-tabs-prg" ).tabs('destroy');
		            				$( "#page-container-tabs-prg" ).tabs({});
		                        	tpTabDoubleClickData = null;
	                        	}
	                        	obj.destroyLoader('attach_course_dt');
                            }
                        });
                    }
                },
                moreSurAssSearchHideShow : function () {
                    $('#select-list-surass-dropdown-list').slideToggle();
                    $('#select-list-surass-dropdown-list li:last').css('border-bottom','0px none');
                	},
                	/* Ticket: 46992 */
                	moreSurAssSearchHideShowTag : function () {
                        $('#select-list-surass-dropdown-list-tag').slideToggle();
                        $('#select-list-surass-dropdown-list-tag li:last').css('border-bottom','0px none');
                    	},
                    	/* Ticket: 46992 */
               moreSurAssSearchTypeText : function(dCode,dText) {
                    $('#select-list-surass-dropdown-list').hide();
                    $('#select-list-surass-dropdown').text(dCode);
                    $('#search_all_surass_type-hidden').val(dText);
                    var displayText;
                    if(dText=='surassqus'){
                 	   displayText = Drupal.t('LBL324');
                    }else{
                 	   displayText =Drupal.t('LBL036') + ' ' + dCode;
                    }
                    //var displayText = Drupal.t('LBL036') + ' ' + dCode;
            		$('#surassattchedquestions-autocomplete').val(displayText);
            		$('#surassattchedquestions-autocomplete_hidden').val(displayText);
            		$('#surassattchedquestions-autocomplete').addClass('input-field-grey');

             },
             /* Ticket: 46992 */
             moreSurAssSearchTypeTextTag : function(dCode,dText) {

                 $('#select-list-surass-dropdown-list-tag').hide();
                 $('#select-list-surass-dropdown-tag').text(dCode);
                 $('.admin_add_multi_search_container #tagsearch_all_surass_type-hidden').val(dText);

                 var displayText;
                 if(dText=='surassqus'){
              	   displayText = Drupal.t('LBL324');
                 }else{
              	   displayText =Drupal.t('LBL193');
                 }
                 //var displayText = Drupal.t('LBL036') + ' ' + dCode;

         		$('#surassattachquestion-autocomplete-tag').val(displayText);
         		$('#surassattachquestion-autocomplete-tag_hidden').val(displayText);
         		$('#surassattchedquestions-autocomplete-tag').addClass('input-field-grey');

          },
          /* Ticket: 46992 */
               moreCourseSearchTypeText : function(dCode,dText) {
                    //console.log('moreCourseSearchTypeText() called');
                    $('#select-list-course-dropdown').text(dCode);
                    $('#search_all_course_type-hidden').val(dText);
                    var displayText;
                    if(dText=='crstit'){
                 	   displayText = Drupal.t('LBL088')+ ' '+ Drupal.t('LBL083');
                    }else{
                 	   displayText =Drupal.t('LBL036') + ' ' + dCode;
                    }
                    //var displayText = Drupal.t('LBL036') + ' ' + dCode;
            		$('#tpattchedcoursename-autocomplete').val(displayText);
            		$('#tpattchedcoursename-autocomplete_hidden').val(displayText);
            		$('#tpattchedcoursename-autocomplete').addClass('input-field-grey');

             },
             	moreAdduserSearchTypeText : function(dCode,dText) {
                 //console.log('moreCourseSearchTypeText() called');
            	 $('#search-list-class-title-keyword #select-list-class-dropdown-list').hide();
                 $('#select-list-class-dropdown').text(dCode);
                 $('#search_all_user_type-hidden').val(dText);
                 var displayText;
                 if(dText=='usrtit'){
              	   displayText = Drupal.t('LBL181');
                 }else if(dText=='fultit'){
              	   displayText =Drupal.t('LBL036') + ' ' + Drupal.t('LBL691');
                 }
                 else{
              	   displayText =Drupal.t('LBL036') + ' ' + dCode;
                 }
                 //var displayText = Drupal.t('LBL036') + ' ' + dCode;
         		$('#username-search-autocomplete').val(displayText);
         		$('#username-search-autocomplete_hidden').val(displayText);
         		$('#username-search-autocomplete').addClass('input-field-grey');

          	},
          	 moreUserSearchTypeText : function(dCode,dText) {
          		$('#search-list-class-title-keyword #select-list-class-dropdown-list').hide();
                $('#select-list-class-dropdown-adduser').text(dCode);
                $('#search_all_user_type-hidden').val(dText);
                var displayText;
                if(dText=='usrtitle'){
             	   displayText = Drupal.t('LBL181');
                }else if(dText=='fultitle'){
             	   displayText =Drupal.t('LBL036') + ' ' + Drupal.t('LBL691');
                }else if(dText=='grptitle'){
             	   displayText =Drupal.t('LBL1270');
                }
                else{
             	   displayText =Drupal.t('LBL036') + ' ' + dCode;
                }
                //var displayText = Drupal.t('LBL036') + ' ' + dCode;
        		$('#addusername-search-autocomplete').val(displayText);
        		$('#addusername-search-autocomplete_hidden').val(displayText);
        		$('#addusername-search-autocomplete').addClass('input-field-grey');

          },
                getInlineEditAttachedQuestion : function(inlineData){
                    if(inlineData){
                        var inlineEditData= eval(inlineData);
                        this.inlineEditData = inlineEditData;
                    }
                    var html ="";
                    var callBlur = '$("#root-admin").data("narrowsearch")';
                    html += '<input size="16" type ="text" class="attachedquestion-edit-txtbox" id="attachedquestion-list-name-id-'+this.inlineEditData.questionId+'" value ="'+this.inlineEditData.fullGroupName+'" onkeydown="return $(\'#root-admin\').data(\'narrowsearch\').updateAttachedQuestionGroupKeyDown(event, this);" onblur="return $(\'#root-admin\').data(\'narrowsearch\').updateAttachedQuestionGroup(this);">';
                    $("#attachedquestion-name-div-"+this.inlineEditData.questionId).html(html);
                    $('#attachedquestion-list-name-id-'+this.inlineEditData.questionId).focus();

                },

                updateAttachedQuestionGroupKeyDown : function(evt, updatedGroup){
            		evt = evt || window.event;
            	    var charCode = evt.keyCode || evt.which;
            	    if (charCode == 13) {
            	    	$("#root-admin").data("narrowsearch").updateAttachedQuestionGroup(updatedGroup);
            	        evt.preventDefault();
            	        return false;
            	    }

                },
                searchClassNameFilter : function(courseId,classId){
                	var obj = this;
                	var className    = encodeURIComponent($('#classname-autocomplete').val());
                	var searchType   = $('#search_all_classs_type-hidden').val();
					var pagerId	     = '#admin-course-class-list-'+courseId+'-pagination_toppager';
					var objStr       = '$("#root_admin").data("narrowsearch")';

					obj.createLoader("paint-class-search-results-datagrid");
					$("#admin-course-class-list-"+courseId+"-pagination").setGridParam({url: this.constructUrl("administration/class-pagination/"+courseId+"/"+classId+"/0&class_name="+className+"&search_Type="+searchType)});
					$("#admin-course-class-list-"+courseId+"-pagination").trigger("reloadGrid",[{page:1}]);

					//$('#paintContentResults').setGridParam({url: this.constructUrl('learning/catalog-search/search/all/'+searchStr)});
				    //$("#paintContentResults").trigger("reloadGrid",[{page:1}]);
               },
               moreClassSearchHideShow : function () {
                   $('#select-list-class-dropdown-list').slideToggle();
                   $('#select-list-class-dropdown-list li:last').css('border-bottom','0px none');
               	},

              moreClassSearchTypeText : function(dCode,dText) {
                   $('#select-list-class-dropdown-list').hide();
                   $('#select-list-class-dropdown').text(dCode);
                   $('#search_all_classs_type-hidden').val(dText);
                   $('#search_all_user_type-hidden').val(dText);
                   var displayText;
                   if(dText=='clstit'){
                	   displayText = Drupal.t('LBL766');
                   }else if (dText=='clsstatus') {
                	   displayText =Drupal.t('LBL036') + ' ' + Drupal.t('Class')+ ' ' + dCode;
                   }else if(dText=='usrtit' || dText=='fultit' ){
		                $('#username-search-autocomplete').val(displayText);
		                $('#username-search-autocomplete_hidden').val(displayText);
		              	$('#username-search-autocomplete').addClass('input-field-grey');
		              	$('#username-search-autocomplete').focus();
                   }
                   else{
                	   displayText =Drupal.t('LBL036') + ' ' + dCode;
                   }
                   //var displayText = Drupal.t('LBL036') + ' ' + dCode;

           		$('#classname-autocomplete').val(displayText);
           		$('#classname-autocomplete_hidden').val(displayText);
           		$('#classname-autocomplete').addClass('input-field-grey');

            },

            templateDisplayPagination : function(notificationId,templateId,argType){
				var obj = this;
				var pagerId	= '#admin-notification-template-list-'+notificationId+'-pagination_toppager';
				var objStr = '$("#root_admin").data("narrowsearch")';
				if(argType == 'notification_template'){
				  urlType = "administration/manage/notification_template/temp-pagination/"+notificationId+"/"+templateId;
				}else{
				  urlType = "administration/manage/certificate/temp-pagination/"+notificationId+"/"+templateId;
				}
				//CREATE LOADER ICON
				obj.createLoader("paint-template-search-results-datagrid");
				$("#admin-notification-template-list-"+notificationId+"-pagination").jqGrid({
					url: this.constructUrl(urlType),
					datatype: "json",
					mtype: 'GET',
					//colNames:['Detail'],
					colModel:[ {name:'Detail',index:'detail', title: false, width:620, 'widgetObj':objStr, sortable: false, formatter: obj.displayClassListValues  }],
					rowNum:5,
					rowList:[5,10,15],
					pager: pagerId,
					viewrecords:  true,
					multiselect: false,
					emptyrecords: "",
					toppager: false,
					height: "auto",
					width: 620,
					loadtext: "",
					recordtext: "",
					pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
					loadui:false,
					loadComplete:obj.callbackTemplateListDataGrid
					}).navGrid('#pager-datagrid-'+notificationId,{add:false,edit:false,del:false,search:false,refreshtitle:true});
				$("#admin-notification-template-list-"+notificationId+'-pagination_toppager').hide();
				//}
				},
			callbackTemplateListDataGrid : function(response, postdata, formid) {
				var listRows 	= 	5;
				//var curObj	 	=	this;
				var curObjStr 	= 	$("#root-admin").data("narrowsearch");
				$('#admin-notification-template-list-'+response.notificationId+'-pagination').show();
				//$('#gview_admin-notification-template-list-'+response.notificationId+'-pagination').css();
				var element = document.getElementById('modal-content');
				if(element.clientHeight == element.scrollHeight){
					$("#gbox_admin-notification-template-list-"+response.notificationId+"-pagination").css('width','620px');
					$("#gbox_admin-notification-template-list-"+response.notificationId+"-pagination").css('overflow','hidden');
				}
				// Hide the pagination, if the record count in the view learning table is equal to or less than
				var recordCount = $('#admin-notification-template-list-'+response.notificationId+"-pagination").jqGrid('getGridParam', 'records');

		        if (recordCount == 0) {
		        	$("#admin-notification-template-list-"+response.notificationId+"-pagination"). css('display','block');
		            var html = Drupal.t('MSG381')+'.';
		            $("#admin-notification-template-list-"+response.notificationId+"-pagination").html('<tr><td class="border-style-none" width="620px"><div id="add-edit-class-norecords" class="no-records-msg">'+html+'</div></td></tr>');
		            $('#admin-notification-template-list-'+response.notificationId+"-pagination").css('text-align','center');
		            $('.border-style-none').css('border','0');
		        } else if(recordCount > listRows){
			        $("#admin-notification-template-list-"+response.notificationId+"-pagination_toppager").show();
			        if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
			         $("#admin-notification-template-list-"+response.notificationId+"-pagination_toppager_center").css('width','229px');
			        }else{
			         $("#admin-notification-template-list-"+response.notificationId+"-pagination_toppager_center").css('width','250px');
			        }

			        $('#add-edit-class-norecords').css('display','none');
				} else {
					$('#add-edit-class-norecords').css('display','none');
				}

				curObjStr.initGridTemplatePagination(response.notificationId);
				curObjStr.destroyLoader('paint-template-search-results-datagrid');

				$('#admin-notification-template-list-pagination-'+response.notificationId+' tr').click(function(event){
					event.stopPropagation();
				});

				$('.edit-class-list-container').last().css('border','0px none');
				var backdrop_height = $(document).height();
				$('#modalBackdrop').css('height',backdrop_height+'px');
				//When Template is added,the save and publish button is enabled
				$('.pub-unpub-only-save-btn').attr('disabled',false);
				$('.save-pub-unpub-sub-menu input').removeClass('save-and-enable-disabled');
				$('#admin-notification-template-list-'+response.notificationId+'-pagination tr td').find('div.edit-class-list').last().css('border-bottom','0px none');

				//Vtip-Display toolt tip in mouse over
				 vtip();
			},
			initGridTemplatePagination : function(notificationId) {
				var curObjStr 	= 	$("#root-admin").data("narrowsearch");

				//NEXT PREVIOUS LOADER SETTING
				$('#first_admin-notification-template-list-'+notificationId+'-pagination_toppager').click(function(e) {
									if (!$('#first_admin-notification-template-list-'+notificationId+'-pagination_toppager').hasClass('ui-state-disabled')) {
										$('#admin-notification-template-list-'+notificationId+'-pagination').hide();
										$('#gview_admin-notification-template-list-'+notificationId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-template-search-results-datagrid');
									}
								});
				$('#prev_admin-notification-template-list-'+notificationId+'-pagination_toppager').click(function(e) {
									if (!$('#prev_admin-notification-template-list-'+notificationId+'-pagination_toppager').hasClass('ui-state-disabled')) {
										$('#admin-notification-template-list-'+notificationId+'-pagination').hide();
										$('#gview_admin-notification-template-list-'+notificationId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-template-search-results-datagrid');
									}
								});
				$('#next_admin-notification-template-list-'+notificationId+'-pagination_toppager').click(function(e) {
									if (!$('#next_admin-notification-template-list-'+notificationId+'-pagination_toppager').hasClass('ui-state-disabled')) {
										$('#admin-notification-template-list-'+notificationId+'-pagination').hide();
										$('#gview_admin-notification-template-list-'+notificationId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-template-search-results-datagrid');
									}
								});
				$('#last_admin-notification-template-list-'+notificationId+'-pagination_toppager').click(function(e) {
									if (!$('#last_admin-notification-template-list-'+notificationId+'-pagination_toppager').hasClass('ui-state-disabled')) {
										$('#admin-notification-template-list-'+notificationId+'-pagination').hide();
										$('#gview_admin-notification-template-list-'+notificationId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-template-search-results-datagrid');
									}
								});

				$(".ui-pg-input").keyup(function(event) {
									if (event.keyCode == 13) {
										$('#admin-notification-template-list-'+notificationId+'-pagination').hide();
										$('#gview_admin-notification-template-list-'+notificationId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-template-search-results-datagrid');
									}
								});

			},
		    userDisplayPagination : function(roleId,userId){
				var obj = this;
				var pagerId	= '#admin-course-class-list-'+roleId+'-pagination_toppager';
				var objStr = '$("#root_admin").data("narrowsearch")';

				//CREATE LOADER ICON
				obj.createLoader("paint-user-search-results-datagrid");

				$("#admin-course-class-list-"+roleId+"-pagination").jqGrid({
					url: this.constructUrl("administration/people/group/user-pagination/"+roleId+"/"+userId),
					datatype: "json",
					mtype: 'GET',
					colNames:[  Drupal.t('LBL054'),Drupal.t('LBL691'),Drupal.t('LBL102'), multiselectCheckbox],
					colModel:[ { name:'User Name',index:'UserName', title: false, width:120, 'widgetObj':objStr, formatter: obj.userDisplayGridValues },
					           { name:'Full Name',index:'FullName', title: false, width:200, 'widgetObj':objStr, formatter: obj.userDisplayGridValues },
					           { name:'Status',index:'Status', title: false, width:80, 'widgetObj':objStr, formatter: obj.userDisplayGridValues, hidden: hideStatusOption },
					           { name:'MultiselectCheck',index:'MultiselectCheck', title: false, width:19, 'widgetObj':objStr, formatter: obj.userDisplayGridValues, sortable: false}
					         ],
					rowNum:5,
					rowList:[5,10,15],
					pager: pagerId,
					viewrecords:  true,
					multiselect: false,
					emptyrecords: "",
					toppager: false,
					height: "auto",
					width: 570,
					loadtext: "",
					recordtext: "",
					pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
					loadui:false,
					loadComplete:obj.callbackUserListDataGrid
					}).navGrid('#pager-datagrid-'+roleId,{add:false,edit:false,del:false,search:false,refreshtitle:true});
				$("#admin-course-class-list-"+roleId+'-pagination_toppager').hide();
				setQtipPosition();
			},
			callbackUserListDataGrid : function(response, postdata, formid) {
				var listRows 	= 	5;
				//var curObj	 	=	this;
				var curObjStr 	= 	$("#root-admin").data("narrowsearch");
				$('#admin-course-class-list-'+response.roleId+'-pagination').show();
				var element = document.getElementById('modal-content');
				if(element.clientHeight == element.scrollHeight){
					$("#gbox_admin-course-class-list-"+response.roleId+"-pagination").css('width','570px');
					$("#gbox_admin-course-class-list-"+response.roleId+"-pagination").css('overflow','hidden');
				}
				// Hide the pagination, if the record count in the view learning table is equal to or less than
				var recordCount = $('#admin-course-class-list-'+response.roleId+"-pagination").jqGrid('getGridParam', 'records');

		        if (recordCount == 0) {
		        	$("#admin-course-class-list-"+response.roleId+"-pagination"). css('display','block');
		            var html = Drupal.t('MSG381')+'.';
		            $("#admin-course-class-list-"+response.roleId+"-pagination").html('<tr><td class="border-style-none" width="570px"><div id="add-edit-class-norecords" class="no-records-msg">'+html+'</div></td></tr>');
		            $('#admin-course-class-list-'+response.roleId+"-pagination").css('text-align','center');
		            $('.border-style-none').css('border','0');
		        } else if(recordCount > listRows){
			        $("#admin-course-class-list-"+response.roleId+"-pagination_toppager").show();
			        $('#add-edit-class-norecords').css('display','none');
				} else {
					$('#add-edit-class-norecords').css('display','none');
				}

				curObjStr.initGridUserPagination(response.roleId);
				curObjStr.destroyLoader('paint-user-search-results-datagrid');

				$('#admin-course-class-list-pagination-'+response.roleId+' tr').click(function(event){
					event.stopPropagation();
				});

				$('.edit-class-list-container').last().css('border','0px none');
				var backdrop_height = $(document).height();
				$('#modalBackdrop').css('height',backdrop_height+'px');
				//Vtip-Display toolt tip in mouse over
				 vtip();
			},
			initGridUserPagination : function(roleId) {
				var curObjStr 	= 	$("#root-admin").data("narrowsearch");

				//NEXT PREVIOUS LOADER SETTING
				$('#prev_admin-course-class-list-'+roleId+'-pagination_toppager').click(function(e) {
									if (!$('#prev_admin-course-class-list-'+roleId+'-pagination_toppager').hasClass('ui-state-disabled')) {
										$('#admin-course-class-list-'+roleId+'-pagination').hide();
										$('#gview_admin-course-class-list-'+roleId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-class-search-results-datagrid');
									}
								});
				$('#next_admin-course-class-list-'+roleId+'-pagination_toppager').click(function(e) {
									if (!$('#next_admin-course-class-list-'+roleId+'-pagination_toppager').hasClass('ui-state-disabled')) {
										$('#admin-course-class-list-'+roleId+'-pagination').hide();
										$('#gview_admin-course-class-list-'+roleId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-class-search-results-datagrid');
									}
								});

				$(".ui-pg-input").keyup(function(event) {
									if (event.keyCode == 13) {
										$('#admin-course-class-list-'+roleId+'-pagination').hide();
										$('#gview_admin-course-class-list-'+roleId+'-pagination').css('min-height','50px');
										curObjStr.createLoader('paint-class-search-results-datagrid');
									}
								});

			},



				classDisplayPagination : function(courseId,classId,oldClassId){
					var obj = this;
					var pagerId	= '#admin-course-class-list-'+courseId+'-pagination_toppager';
					var objStr = '$("#root_admin").data("narrowsearch")';

					//CREATE LOADER ICON
					obj.createLoader("paint-class-search-results-datagrid");
					if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
						var Wgrid = '835';
					} else {
						var Wgrid = '827';
					}

					$("#admin-course-class-list-"+courseId+"-pagination").jqGrid({
						url: this.constructUrl("administration/class-pagination/"+courseId+"/"+classId+"/"+oldClassId),
						datatype: "json",
						mtype: 'GET',
						colNames:['Detail'],
						colModel:[ {name:'Detail',index:'detail', title: false, width:860, 'widgetObj':objStr, sortable: false, formatter: obj.displayClassListValues  }],
						rowNum:5,
						rowList:[5,10,15],
						pager: pagerId,
						viewrecords:  true,
						multiselect: false,
						emptyrecords: "",
						toppager: false,
						height: "auto",
						width: Wgrid,
						loadtext: "",
						recordtext: "",
						pgtext : "{0}"+" "+Drupal.t('LBL981')+" "+"{1}",
						loadui:false,
						loadComplete:obj.callbackClassListDataGrid
						}).navGrid('#pager-datagrid-'+courseId,{add:false,edit:false,del:false,search:false,refreshtitle:true});
					$("#admin-course-class-list-"+courseId+'-pagination_toppager').hide();
					setQtipPosition();
				},
				callbackClassListDataGrid : function(response, postdata, formid) {
				Drupal.ajax.prototype.commands.CtoolsModalAdjust(null, null, null);
					if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
						var Wgrid = '835';
					} else {
						var Wgrid = '827';
					}
					var listRows 	= 	5;
					//var curObj	 	=	this;
					var curObjStr 	= 	$("#root-admin").data("narrowsearch");
					$('#admin-course-class-list-'+response.courseId+'-pagination').show();
					var element = document.getElementById('modal-content');
					if(element.clientHeight == element.scrollHeight){
						$("#gbox_admin-course-class-list-"+response.courseId+"-pagination").css('width',Wgrid+'px');
						$("#gbox_admin-course-class-list-"+response.courseId+"-pagination").css('overflow','hidden');
					}
					// Hide the pagination, if the record count in the view learning table is equal to or less than
					var recordCount = $('#admin-course-class-list-'+response.courseId+"-pagination").jqGrid('getGridParam', 'records');

			        if (recordCount == 0) {
			        	$("#admin-course-class-list-"+response.courseId+"-pagination"). css('display','block');
			            var html = Drupal.t('MSG381')+'.';
			            $("#admin-course-class-list-"+response.courseId+"-pagination").html('<tr><td class="border-style-none" width="'+Wgrid+'px"><div id="add-edit-class-norecords" class="no-records-msg">'+html+'</div></td></tr>');
			            $('#admin-course-class-list-'+response.courseId+"-pagination").css('text-align','center');
			            $('.border-style-none').css('border','0');
			            $("#admin-course-class-list-"+response.courseId+"-pagination_toppager").hide();
			        } else if(recordCount > listRows){
				        $("#admin-course-class-list-"+response.courseId+"-pagination_toppager").show();
				        if ( $.browser.msie && parseInt($.browser.version, 10)=='9'){
				        $("#admin-course-class-list-"+response.courseId+"-pagination_toppager").find('.ui-pg-table').css('width', 'auto');
				        }
				        $('#add-edit-class-norecords').css('display','none');
					} else {
						$('#add-edit-class-norecords').css('display','none');
						$("#admin-course-class-list-"+response.courseId+"-pagination_toppager").hide();
					}

					curObjStr.initGridClassPagination(response.courseId);
					curObjStr.destroyLoader('paint-class-search-results-datagrid');

					$('#admin-course-class-list-pagination-'+response.courseId+' tr').click(function(event){
						event.stopPropagation();
					});

					$('.edit-class-list-container').last().css('border','0px none');
					var backdrop_height = $(document).height();
					$('#modalBackdrop').css('height',backdrop_height+'px');
					//Vtip-Display toolt tip in mouse over
					 vtip();
					 $("#admin-course-class-list-"+response.courseId+"-pagination > tbody > tr:last > td > .edit-class-list"). css('border','0px none');
				},


				initGridClassPagination : function(courseId) {

					var curObjStr 	= 	$("#root-admin").data("narrowsearch");

					//NEXT PREVIOUS LOADER SETTING
					$('#first_admin-course-class-list-'+courseId+'-pagination_toppager').click(function(e) {
										if (!$('#first_admin-course-class-list-'+courseId+'-pagination_toppager').hasClass('ui-state-disabled')) {
											$('#admin-course-class-list-'+courseId+'-pagination').hide();
											$('#gview_admin-course-class-list-'+courseId+'-pagination').css('min-height','50px');
											curObjStr.createLoader('paint-class-search-results-datagrid');
										}
									});
					$('#prev_admin-course-class-list-'+courseId+'-pagination_toppager').click(function(e) {
										if (!$('#prev_admin-course-class-list-'+courseId+'-pagination_toppager').hasClass('ui-state-disabled')) {
											$('#admin-course-class-list-'+courseId+'-pagination').hide();
											$('#gview_admin-course-class-list-'+courseId+'-pagination').css('min-height','50px');
											curObjStr.createLoader('paint-class-search-results-datagrid');
										}
									});
					$('#next_admin-course-class-list-'+courseId+'-pagination_toppager').click(function(e) {
										if (!$('#next_admin-course-class-list-'+courseId+'-pagination_toppager').hasClass('ui-state-disabled')) {
											$('#admin-course-class-list-'+courseId+'-pagination').hide();
											$('#gview_admin-course-class-list-'+courseId+'-pagination').css('min-height','50px');
											curObjStr.createLoader('paint-class-search-results-datagrid');
										}
									});
					$('#last_admin-course-class-list-'+courseId+'-pagination_toppager').click(function(e) {
										if (!$('#last_admin-course-class-list-'+courseId+'-pagination_toppager').hasClass('ui-state-disabled')) {
											$('#admin-course-class-list-'+courseId+'-pagination').hide();
											$('#gview_admin-course-class-list-'+courseId+'-pagination').css('min-height','50px');
											curObjStr.createLoader('paint-class-search-results-datagrid');
										}
									});

					$(".ui-pg-input").keyup(function(event) {
										if (event.keyCode == 13) {
											$('#admin-course-class-list-'+courseId+'-pagination').hide();
											$('#gview_admin-course-class-list-'+courseId+'-pagination').css('min-height','50px');
											curObjStr.createLoader('paint-class-search-results-datagrid');
										}
									});

				},
				displayClassListValues : function(cellvalue, options, rowObject) {
					return rowObject['detail'];
				},

				userDisplayGridValues : function(cellvalue, options, rowObject){
				    var type = $('body').data('mulitselectdatagrid').type;
					var mode = $('body').data('mulitselectdatagrid').mode;
					var uniqueId = $('body').data('mulitselectdatagrid').uniqueId;
					var entityId = $('body').data('mulitselectdatagrid').entityId;
					var entityType = $('body').data('mulitselectdatagrid').entityType;
					var groupname  = '';
					var index  = options.colModel.index;
					var rowEditOptionId =  rowObject['id'] + '-' + type + '-' + entityId + '-' + entityType + '-' + index;
					if(index == 'MultiselectCheck'){
						var inputType = 'checkbox';
						var id = rowObject['MultiselectCheck'];
						return '<input type="'+inputType+'" id="multiselect-singlecheck-'+uniqueId+'_'+id+'" value="'+id+'" class="multiselect-singlecheck" />';
					}else if(index == 'UserName'){
							var titleAllowed = type == 'RoleAddusers' ?  13 : 20;
							var userNameRestricted = $('body').data('mulitselectdatagrid').titleRestricted(rowObject[index], titleAllowed);
							return '<span class="vtip" title="'+htmlEntities(rowObject[index])+'">'+userNameRestricted+'</span>';

				   }else if(index == 'FullName'){

						var titleAllowed = type == 'RoleAddusers' ?  15 : 35;
						var fullNameRestricted = $('body').data('mulitselectdatagrid').titleRestricted(rowObject[index], titleAllowed);
						return '<span class="vtip" title="'+htmlEntities(rowObject[index])+'">'+fullNameRestricted+'</span>';

					}


				},

                updateAttachedQuestionGroup : function(updatedGroup){

                    var inlineData = this.inlineEditData;
                    var updatedGroupName = escape($(updatedGroup).attr("value"));
                    var oldGroupName	= this.inlineEditData.groupName;
                    this.inlineEditData.groupName = updatedGroupName;
                    var obj = this;
                    /*-- #36135: Isuse in Survey/Assessment group name tool --*/
                    var regGroupName = /^[A-Za-z0-9.,@_\s]{0,100}$/;  // /[^a-zA-Z0-9,.@\'\_ |\/]/
                    var grpString = decodeURIComponent(updatedGroupName);
                    // 36135 : validatin code added
                    if(!regGroupName.test(grpString)) {
                    	var error_msg = '<div><div id="message-container" style="visibility: visible;"><div class="messages error"><ul><li style="width: 200px;"><span>' +Drupal.t('MSG644') + ' ' + Drupal.t('MSG639') + '</span></li></ul><div onclick="$(\'body\').data(\'learningcore\').closeErrorMessage();" class="msg-close-btn"></div></div></div></div>';
                    	$("#show_expertus_message").append(error_msg);
                    	return false;
                    }
                    if(updatedGroupName == "No Group Name" || updatedGroupName == "") {
                    	updatedGroupName = oldGroupName;
                    	this.inlineEditData.groupName = updatedGroupName;
                    	var html = "";
                        html += '<a href="javascript:void(0);" id="attachedquestion-list-name-id-'+inlineData.questionId+'" name="attachedquestion-list-name-id-'+inlineData.questionId+'" class = "attachedcourse-list-name"  ondblclick ="$(\'#root-admin\').data(\'narrowsearch\').getInlineEditAttachedQuestion();">'+updatedGroupName+'</a>';
                        $("#attachedquestion-name-div-"+inlineData.questionId).html(html);
                    }else{
                    	obj.createLoader('survey_attach_questions_dt');
                        url = obj.constructUrl("administration/update-attachedquestion-group/"+inlineData.entityId+"/"+updatedGroupName+"/"+inlineData.questionId);
                        $.ajax({
                            type: "POST",
                            url: url,
                            data:  '',
                            success: function(result){
                        	    obj.destroyLoader('survey_attach_questions_dt');
                        	    var result = result.split('|');
                        	    var shortGroupName = result[0];
                        	    var longGroupName = result[1];
                                var html = "";
                                var dataQuesGroup = 'data={"entityId":"'+inlineData.entityId+'","entityType":"'+inlineData.entityType+'","groupName":"'+$.trim(shortGroupName)+'","fullGroupName":"'+$.trim(longGroupName)+'","questionId":"'+inlineData.questionId+'"}';
                                dataQuesGroup = unescape(dataQuesGroup).replace(/"/g, '&quot;');
                                html += '<a href="javascript:void(0);" id="attachedquestion-list-name-id-'+inlineData.questionId+'" name="attachedquestion-list-name-id-'+inlineData.questionId+'" class = "attachedquestion-list-name"  ondblclick ="$(\'#root-admin\').data(\'narrowsearch\').getInlineEditAttachedQuestion(\''+dataQuesGroup+'\');">'+titleRestrictionFadeoutImage(shortGroupName,'survey-grp-name')+'</a>';
                                $("#attachedquestion-name-div-"+inlineData.questionId).html(html);
                                $("#attachedquestion-name-div-"+inlineData.questionId).attr('title', longGroupName);
                            }
                        });
                    }

                },

                /*

                updateAttachedQuestionScore : function(inlineData){
                	if(inlineData){
                          var inlineEditData= eval(inlineData);
                          this.inlineEditData = inlineEditData;
                    }
                	var scoreValue = $('#edit-edit-attachquestion-list-score-'+this.inlineEditData.loopId).val();
	                 if(scoreValue != ''){
	                    var obj = this;
	                    url = obj.constructUrl("administration/update-attachedquestion-score/"+this.inlineEditData.entityId+"/"+this.inlineEditData.entityType+"/"+this.inlineEditData.questionId+"/"+scoreValue);
	                    $.ajax({
	                        type: "POST",
	                        url: url,
	                        data:  '',
	                        success: function(result){

	                    	}
	                    });
	                 }

                },

                updateAttachedQuestionScoreKeyDown : function(evt, inlineData){
            		evt = evt || window.event;
            	    var charCode = evt.keyCode || evt.which;
            	    if (charCode == 13) {
            	    	$("#root-admin").data("narrowsearch").updateAttachedQuestionScore(inlineData);
            	        evt.preventDefault();
            	        return false;
            	    }

                }*/

		updatePreviewContent :function(){
        	/*
				function to redirect callback of content launch
				--> searches for the callback function on close of the content and removes the corresponding record from
				slt_aicc_interaction -- only for aicc contents

			*/

            var url='';
            var post_data='';
            if(scoobj._type == "AICC" || scoobj._type == "AICC Course Structure") {
            	var sid = $('#root-admin').data('narrowsearch').launchAICCId;
            	url = resource.base_url+"/sites/all/commonlib/AICC_Handler.php";
            	post_data={"session_id":sid,"command":"UPDATEAICCPREVIEW"};

        		var obj = this;
        		$.ajax({
        			type: "POST",
        			url: url,
        			data:  post_data,
        			success: function(result) {

        			}
        	    });
            }
        },

        showExpAdminDropdownMenu : function (dropdownListId) {
          var dropdownListSelector = '#' + dropdownListId;
            if ($(dropdownListSelector).is(":visible")) {
              //console.log('showExpAdminDropdownMenu() : is already displayed ' + dropdownListId);
              // hideExpAdminDropDownMenu() will hide the dropdown menu when it is already displayed.
            }
            else {
              //console.log('showExpAdminDropdownMenu() : showing ' + dropdownListId);
              $(dropdownListSelector).slideDown(); // show menu
              $(dropdownListSelector + ' li:last').css('border-bottom','0px none');

              $('html').bind('mousedown.' + dropdownListId, {dropdownListId : dropdownListId},
                                           $("#root-admin").data("narrowsearch").hideOnClickExpAdminDropDownMenu);
            }
         },

         hideOnClickExpAdminDropDownMenu : function (e) {
           var dropdownListId = e.data.dropdownListId;
           var dropdownListSelector = '#' + dropdownListId;
           var el = e.target;
           var dropdown = $('#' + dropdownListId + ':visible')[0];
           if(typeof dropdown == 'undefined') {
             //console.log('hideOnClickExpAdminDropDownMenu() : no dropdown menu open. Returning true');
             $('html').unbind('mousedown.' + dropdownListId, $("#root-admin").data("narrowsearch").hideOnClickExpAdminDropDownMenu);
             return true;
           }

           // Hide the dropdown menu
           //console.log('hideOnClickExpAdminDropDownMenu() : hiding ' + dropdownListId);
           $(dropdownListSelector).slideUp(); // hide menu
           $('html').unbind('mousedown.' + dropdownListId, $("#root-admin").data("narrowsearch").hideOnClickExpAdminDropDownMenu);
           return false; // no need to propagate the event further
        },

        meetingUrlCreate : function (meetingName,classId) {
        	if(meetingName == 'lrn_cls_vct_oth'){ // Others
        		$('#session_presenter_password').val('');
        		$('#session_attende_password').val('');
        		$('#session_meeting_id').val('');
        		$('#attendee_url').css('display','block');
        		$('#presenter_url').css('display','block');
        		$('#attendee_password').css('display','none');
        		$('#presenter_password').css('display','none');
        		$('#meeting_id_dt').css('display','none');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class');
        		$('.admin-addedit-session-details-meeting tr:visible').addClass('session-meeting-vc-class-others');

	        }else if(meetingName == 'lrn_cls_vct_exp'){ // Expertus Meeting
        		$('#session_presenter_password').val('');
        		$('#session_attende_password').val('');
        		$('#session_meeting_id').val('');
        		$('#session_presenter_password').attr('disabled',true).addClass('admin-grey-out-fields');
        		$('#session_attende_password').attr('disabled',true).addClass('admin-grey-out-fields');
        		$('#session_meeting_id').attr('disabled',true).addClass('admin-grey-out-fields');
        		$('.session-pass-mandatory').css('display','none');
        		$('#attendee_url').css('display','none');
        		$('#presenter_url').css('display','none');
/*        		$('#attendee_password').css('display','block');
        		$('#presenter_password').css('display','block');
        		$('#meeting_id_dt').css('display','block'); */

        		$('#attendee_password').css('display','none');
        		$('#presenter_password').css('display','none');
        		$('#meeting_id_dt').css('display','none');
        		$('.admin-addedit-session-details-meeting tr:visible').addClass('session-meeting-vc-class');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class-others');

	        }else{
	        	$('#session_presenter_password').attr('disabled',false).removeClass('admin-grey-out-fields');
    			$('#session_attende_password').attr('disabled',false).removeClass('admin-grey-out-fields');
    			$('#session_meeting_id').attr('disabled',false).removeClass('admin-grey-out-fields');
        		$('.session-pass-mandatory').css('display','inline-block');
        		$('#attendee_url').css('display','none');
        		$('#presenter_url').css('display','none');
        		$('#attendee_password').css('display','block');
        		$('#presenter_password').css('display','block');
        		$('#meeting_id_dt').css('display','none');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class-others');
	        }
        },

		getMeetingType : function(){
        	var meetingtypeid = $('#set-meeting-type').val();
            var class_id = $('#class_id').val();
            if(meetingtypeid == 'lrn_cls_vct_oth'){
            	$('#session_presenter_password').val('');
        		$('#session_attende_password').val('');
        		$('#session_meeting_id').val('');
            	$('#attendee_url').css('display','block');
        		$('#presenter_url').css('display','block');
        		$('#attendee_password').css('display','none');
        		$('#presenter_password').css('display','none');
        		$('#meeting_id_dt').css('display','none');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class');
        		$('.admin-addedit-session-details-meeting tr:visible').addClass('session-meeting-vc-class-others');
            }else if(meetingtypeid == 'lrn_cls_vct_exp'){ // Expertus Meeting
        		$('#session_presenter_password').val('');
        		$('#session_attende_password').val('');
        		$('#session_meeting_id').val('');
        		$('#session_presenter_password').attr('disabled',true).addClass('admin-grey-out-fields');
        		$('#session_attende_password').attr('disabled',true).addClass('admin-grey-out-fields');
        		$('#session_meeting_id').attr('disabled',true).addClass('admin-grey-out-fields');
        		$('.session-pass-mandatory').css('display','none');
        		$('#attendee_url').css('display','none');
        		$('#presenter_url').css('display','none');
        		$('#attendee_password').css('display','none');
        		$('#presenter_password').css('display','none');
        		$('#meeting_id_dt').css('display','none');
        		$('.admin-addedit-session-details-meeting tr:visible').addClass('session-meeting-vc-class');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class-others');
	        }else{
	        	var getDisAttr = $('#session_meeting_id');
	        	if(!getDisAttr.attr('disabled')){
	        		$('#session_presenter_password').attr('disabled',false);
	        		$('#session_attende_password').attr('disabled',false);
	        		$('#session_meeting_id').attr('disabled',false);
	        	}
    			$('.session-pass-mandatory').css('display','inline-block');
    			$('#session_presenter_password').removeClass('admin-grey-out-fields');
        		$('#session_attende_password').removeClass('admin-grey-out-fields');
        		$('#session_meeting_id').removeClass('admin-grey-out-fields');
        		$('#attendee_url').css('display','none');
        		$('#presenter_url').css('display','none');
        		$('#attendee_password').css('display','block');
        		$('#presenter_password').css('display','block');
        		$('#meeting_id_dt').css('display','');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class');
        		$('.admin-addedit-session-details-meeting tr:visible').removeClass('session-meeting-vc-class-others');
	        }

        },


         /*
    	function to display popup if content has multiple lessons
    	--> rendered on clicking "preview" for each version
         */
        getPreviewContent : function(contentId,VersionId,lessonlist){

    		var closeButt={};
    	    $('#lesson-wizard').remove();
    	  	html="";
    		html+='<div id="lesson-wizard" class="lesson-wizard-content" style="display:none; padding: 0px;">';
    	    html+= this.getContentVersionLessons(contentId,VersionId,lessonlist);
    	    html+='</div>';
    	    $("body").append(html);
    	    Drupal.attachBehaviors();


    	    $("#lesson-wizard").dialog({
    	        position:[(getWindowWidth()-500)/2,100],
    	        bgiframe: true,
    	        width: 450,
    	        zIndex: 10000,
    	        resizable:false,
    	        modal: true,
    	        title: Drupal.t('LBL889'),
    	        buttons:closeButt,
    	        closeOnEscape: false,
    	        draggable:false,
    	        overlay:
    	         {
    	           opacity: 0.9,
    	           background: "black"
    	         }
    	    });

    	    $("#lesson-wizard").show();

    		$('.ui-dialog-titlebar-close').click(function(){
    	        $("#lesson-wizard").remove();
    	    });
			if(this.currTheme == 'expertusoneV2'){
		    	changeDialogPopUI();
			}
    	    //SCrollbar for content dialogbox
    	    this.scrollBarContentDialog();

        },

        /*
    	function to display the list of lessons inside the dialog
    	--> rendered on clicking "preview" for each version
        */
        getContentVersionLessons : function(contentId,VersionId,data){


    	var lesCnt = 0;
    	var ostr = '';
    	ostr += '<td colspan="2"><div class="enroll-accordian-div">';
    	ostr += '<table class="launch-lesson-view" cellpadding="0" cellspacing="0" width="100%" border="0">';


    	$(data).each(function(){
    		$(this).each(function(){
    			  lesCnt++;
    			  var params = "";
    			  var lessontitle = $(this).attr('title');
    			  var launchurl =  $(this).attr('launchurl');
    			  var contentType = $(this).attr('contentype');
    			  var contentTypeCode = $(this).attr('contentypecode');
    			  var contenthostedtype = $(this).attr('contenthostedtype');
    			  var aicc_sid = $(this).attr('AICC_SID');
    			  var callLaunchUrlFn;
    			  var lessonId =  $(this).attr('lessonid');
    			  if(contentTypeCode != "lrn_cnt_typ_vod"){
    				    params = "{'Id':'"+lessonId+"','url1':'"+launchurl+
    			            "','ErrMsg':'"+"error"+"','contentType':'"+contentType+"','AICC_SID':'"+aicc_sid+"'}";
    				    callLaunchUrlFn = "onclick=\"$('#root-admin').data('narrowsearch').launchLesson("+params+")\"";
    			  }else{
    				    lessontitle = encodeURIComponent(lessontitle.replace(/\//g, '()|()'));
    				    callLaunchUrlFn = "href=\"/?q=learning/nojs/play_video/";
    				    callLaunchUrlFn += lessontitle + "/";
    				    callLaunchUrlFn += escape(contenthostedtype) + "/";
    				    callLaunchUrlFn += escape(launchurl.replace(/\//g, '()|()')) + '/';
    				    callLaunchUrlFn += "ME" + "/";
    				    callLaunchUrlFn += "/";
    				    callLaunchUrlFn += "/";
    				    callLaunchUrlFn += lessonId + "/";
    				    callLaunchUrlFn += "/";
    				    callLaunchUrlFn += "/";
    				    callLaunchUrlFn += "\"";

    			  }

    		      var pipe = '<span class="enroll-pipeline">|</span>';

    			  ostr += '<tr class="enroll-lesson-section"><td class="enroll-launch-column1">';
    			  ostr += '<div class="enroll-course-title-lesson">';
    			  ostr += '<span id="titleAccEn_'+lessonId+'" class="item-title" ><span class="enroll-course-title vtip" title="'+Drupal.t('LBL854')+' '+lesCnt+' : '+unescape(lessontitle).replace(/"/g, '&quot;')+'" href="javascript:void(0);">';
    			  ostr += 'Lesson '+lesCnt+': ' +titleRestricted(decodeURIComponent(lessontitle),35);
    			  ostr += '</span></span>';
    			  ostr += '</div>';
    			  ostr += '<div class="enroll-class-title-info">';
    			  ostr += '<div class="item-title-code">';

    			  ostr += ' </div>';
    			  ostr += '</div>';
    			  ostr += '</td>';
    			  ostr += '<td class="enroll-launch-column2">';
    			  ostr +=   '<div class="enroll-main-list">';
    			  ostr +=     '<label id="' + lessonId + '_launch_button_lbl"' +
    			                  ' class="'+"enroll-launch-full" + ' launch_button_lbl">';

    			  if(contentTypeCode != "lrn_cnt_typ_vod"){
    				  ostr += '<input type="button" id="' + lessonId + '_launch_button"' +
    			                   ' class="' + 'actionLink' + ' enroll-launch"' +

    			                       ' value="' + Drupal.t('LBL199') + '" '+ callLaunchUrlFn  + '>';
    			  }else{
    				  ostr += "<a class='actionLink enroll-launch use-ajax ctools-modal-ctools-video-style' " +
                      "title='" + Drupal.t("LBL199") + "' " +
                        "id='launch" + lessonId + "' " +
                          callLaunchUrlFn +
                            " >" +
                              Drupal.t("LBL199") + "</a>";
    			  }
    			  ostr +=     '</label>';
    			  ostr +=   '</div>';
    			  ostr += '</td></tr>';

    		});
    	});
    	ostr += '</table></div"></td>';
    	return ostr;

        },

        /*
    	function to initialixe scorm wrapper
    	--> called on clicking "preview" for each version
         */
        launchLesson : function(data){
        	var pmType 		= data.contentType;
	        var contentVersion;
	        var contentType;
		    var stdid		= this.getLearnerId();
		    var stdname 	= this.getUserName();
		    $('#root-admin').data('narrowsearch').launchUserId = stdid;
		    $('#root-admin').data('narrowsearch').launchLessonId = data.Id;
		    $('#root-admin').data('narrowsearch').launchAICCId = data.AICC_SID;
		    if(stdid == "0" || stdid == "")
			{
			    self.location='?q=learning/enrollment-search';
		        return;
			}
	        if(pmType.toLowerCase() == 'scorm 1.2' || pmType.toLowerCase() == 'scorm 2004') {
	        	pmType				= pmType;
	        	var pmTypeVer 		= pmType.split(' ');
	            contentType  	= pmTypeVer[0];
	            contentVersion 	= pmTypeVer[1];
	        } else  {
	            contentVersion 	= '';
	            contentType 	= pmType;
	        }

	        var x	= {version: contentVersion,type:contentType};
	        scoobj 	= new SCORM_API_WRAPPER(x);

	        var cdnstatus = data.cdnmodulestatus;
	        if(cdnstatus == 1){
	        	$.ajax({
	        		url: '?q=ajax/getcdnurl/'+data.Id,
					data:  '',
					success: function(result){
						var output = result.split('~~');
						var url1      = output[0];
	        var data1 = {
				    	        url				 : url1,
				    	        callback		 : $('#root-admin').data('narrowsearch').updatePreviewContent,
				    	        learnerId		 : stdid,
				    	        learnerName		 : stdname,
				    	        completionStatus : 'not attempted',
				    	        scoreMax		 : '0',
				    	        scoreMin		 : '0',
				    	        score			 : '0',
				    	        location		 : '',
				    	        courseid 		 : '0',
				    	        classid 		 : '0',
				    	        lessonid 		 : data.Id,
				    	        versionid		 : '0',
				    	        enrollid 		 : '0',
				    	        launch_data		 : '',
				    	        suspend_data     : '',
				    	        exit			 : '',
				    	        aicc_sid		 : data.AICC_SID
				    	    };

				        scoobj.Initialize(data1);
					}
				  });
				} else {

	        var data1 = {
	    	        url				 : decodeURIComponent(data.url1),
	    	        callback		 : $('#root-admin').data('narrowsearch').updatePreviewContent,
	    	        learnerId		 : stdid,
	    	        learnerName		 : stdname,
	    	        completionStatus : 'not attempted',
	    	        scoreMax		 : '0',
	    	        scoreMin		 : '0',
	    	        score			 : '0',
	    	        location		 : '',
	    	        courseid 		 : '0',
	    	        classid 		 : '0',
	    	        lessonid 		 : data.Id,
	    	        versionid		 : '0',
	    	        enrollid 		 : '0',
	    	        launch_data		 : '',
	    	        suspend_data     : '',
	    	        exit			 : '',
	    	        aicc_sid		 : data.AICC_SID
	    	    };

	        scoobj.Initialize(data1);
				}
        },

        scrollBarContentDialog : function(){
	    	var contentDialogHeight = $("#lesson-content-container").height();
	    	if(contentDialogHeight > 550) {
	    		$(".lesson-wizard-content").css('height',550);
	    	} else if(contentDialogHeight <= 550) {
	    		$(".lesson-wizard-content").css('height','auto').css('min-height','70px');
	    	}

        },

        underlineTagAndTriggerSearch : function(tagName, filterCode, currElem) {
      	  try {
      		$('.tagscloud-tag').css('text-decoration', '');
      		$(currElem).css('text-decoration', 'underline');
      		$('#' + filterCode + '-addltext-filter').val(tagName);
									    $('#' + filterCode + '-tagscloud-clr').css('display', 'block');
      	    $('#root-admin').data('narrowsearch').refreshGrid();
      	  }
      	  catch (e) {
      	    // To Do
      	  }
      	},

      underlineTagCloudAndTriggerSearch : function(tagName, filterCode, currElem,tagWeight) {
        	  try {
        		$('.tagscloud-tag').css('text-decoration', '');
        		$(currElem).css('text-decoration', 'underline');
        		$('#' + filterCode + '-addltext-filter').val(tagName);
									    $('#' + filterCode + '-tagscloud-clr').css('display', 'block');
        	    $('#root-admin').data('narrowsearch').refreshGrid();
        	    $tagText = $(currElem).html();
        	    if($('#tagentityType').val() == 'tagtip'){
        	    	 var tagpos = $.inArray($tagText,existtagArrAdmin,0);
             	    if(tagpos == -1){
         				existtagArrAdmin.unshift($tagText);
         				existtagArrAdmin.pop();
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').find('span:last-child').remove();
         				$(currElem).html(descController('FADE OUT',$tagText,weightArrAdmin[tagWeight-1]));
         				var selectedTag = $(currElem).parent().html();
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').prepend('<span class="tagscloud-term">'+selectedTag+'</span>');
         				$(currElem).html($tagText);
         			}else if(tagpos >= 0){
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').find('span:nth-child('+(tagpos+1)+')').remove();
         				if (tagpos > -1) {
         					existtagArrAdmin.splice(tagpos, 1);
         				}
         				existtagArrAdmin.unshift($tagText);
         				$(currElem).html(descController('FADE OUT',$tagText,weightArrAdmin[tagWeight-1]));
         				var selectedTag = $(currElem).parent().html();
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').prepend('<span class="tagscloud-term">'+selectedTag+'</span>');
         				$(currElem).html($tagText);
         			}
        	    }else{
        	    	var tagpos = $.inArray($tagText,existtagClsArrAdmin,0);
             	    if(tagpos == -1){
         				existtagClsArrAdmin.unshift($tagText);
         				existtagClsArrAdmin.pop();
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').find('span:last-child').remove();
         				$(currElem).html(descController('FADE OUT',$tagText,weightArrAdmin[tagWeight-1]));
         				var selectedTag = $(currElem).parent().html();
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').prepend('<span class="tagscloud-term">'+selectedTag+'</span>');
         				$(currElem).html($tagText);
         			}else if(tagpos >= 0){
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').find('span:nth-child('+(tagpos+1)+')').remove();
         				existtagClsArrAdmin.unshift($tagText);
         				if (tagpos > -1) {
         					existtagClsArrAdmin.splice(tagpos, 1);
         				}
         				$(currElem).html(descController('FADE OUT',$tagText,weightArrAdmin[tagWeight-1]));
         				var selectedTag = $(currElem).parent().html();
         				$('#' + filterCode + '_tagscloud #tagcloudcontainerid').prepend('<span class="tagscloud-term">'+selectedTag+'</span>');
         				$(currElem).html($tagText);
         			}
        	    }


        	  }
        	  catch (e) {
        	    // To Do
        	  }
        	},
        	showConfirmPopup: function(submitHandlerId, action, usersList,Type,isPricedClass) {
				try {
					var learners = $('input[name='+usersList+']').val().split(',');
					var getStatus = new Array();
					for (var i=0; i<learners.length; i++) {
						getStatus[i] = $('input[name=enrolled_status_'+learners[i]+']').val();
					}
					var unique = getStatus.filter(function(itm,i,getStatus){
						return i==getStatus.indexOf(itm);
					});
					var getdefaultStatus = new Array();
					for (var i=0; i<learners.length; i++) {
						getdefaultStatus[i] = $('input[name=enrolled_default_status_'+learners[i]+']').val();
					}
					var defltstat = getdefaultStatus.filter(function(itm,i,getdefaultStatus){
						return i==getdefaultStatus.indexOf(itm);
					});				
					 if(defltstat ==  Drupal.t('Completed') && submitHandlerId == 'commonsave_save-button'){
                     $('#'+submitHandlerId).click();
                     return;
                     }   
					var enrollmentStatus;	
					var getStsLength = unique.length;
                     if((isPricedClass == 1 ) && unique == Drupal.t('Canceled')){
                     	$('#show_expertus_message').html(expertus_error_message([Drupal.t('LBL1246')]));
                     	return;
                     }
                  if(getStsLength == 1 && (unique == Drupal.t('Waived')  || (unique == Drupal.t('Enrolled')  && submitHandlerId == 'commonsave_save-button') || (unique == Drupal.t('In progress')  && submitHandlerId == 'commonsave_save-button'))){
                     $('#'+submitHandlerId).click();
                     return;
                     }
					if($('input[name='+usersList+']').val() == "") {
						$('#show_expertus_message').html(expertus_error_message([Drupal.t('ERR106')]));
						return;
					} else if(learners.length == 1) {
						learners = $('#enroll_user_'+$('input[name='+usersList+']').val()).val();
					} else {
						learners = learners.length +" "+ Drupal.t('LBL3080');
					}			
					if(Type=='Class'){
					 var cancelTitleLT = Drupal.t('Class');
					}else{
					 var cancelTitleLT = Drupal.t('Training Plan');
					}
					switch(action) {
						case 'completedandsave':
							enrollmentStatus = Drupal.t('Completed');
						break;
						case 'incompletedandsave':
							enrollmentStatus = Drupal.t('Incomplete');
						break;
						case 'noshowandsave':
							enrollmentStatus = Drupal.t('No Show');
						break;
						case 'cancelledandsave':
							enrollmentStatus = Drupal.t('Canceled');
						break;
						default: enrollmentStatus = "Common";
						break;
					}
					//show jquery dialog with yes or cancel buttons with its action callbacks
					this.currTheme = Drupal.settings.ajaxPageState.theme;
					$('#complete-confirmation-wizard').remove();
					var html = '';
				    html += '<div id="complete-confirmation-wizard" style="display:none; padding: 13px;">';
				    html += '<table width="99%" class="complete-confirmation-table" cellpadding="0" cellspacing="0" border="0" valign="center">';
				    html += '<tr><td height="30"></td></tr>';
				    html += '<tr>';				     
					if(action == "commonsave"){
						if(getStsLength == 1 && learners.length >= 1){
							if(unique == "Completed"){
							html += '<td align="center" id="complete-confirmation-content"><span>'+ Drupal.t('MSG822', {'@learner_name': learners, '@status':Drupal.t('Completed'), '@objtype': cancelTitleLT}) +'</span></td>';
						}else if(unique == "Incomplete"){
							html += '<td align="center" id="complete-confirmation-content"><span>'+ Drupal.t('MSG822', {'@learner_name': learners, '@status':Drupal.t('Incomplete'), '@objtype': cancelTitleLT}) +'</span></td>';
						}else if(unique == "Canceled"){
							html += '<td align="center" id="complete-confirmation-content"><span>'+ Drupal.t('MSG822', {'@learner_name': learners, '@status':Drupal.t('Canceled'), '@objtype': cancelTitleLT}) +'</span></td>';
						}else if(unique == "No Show"){
							html += '<td align="center" id="complete-confirmation-content"><span>'+ Drupal.t('MSG822', {'@learner_name': learners, '@status':Drupal.t('No Show'), '@objtype': cancelTitleLT}) +'</span></td>';
						}
						}else{
							html += '<td align="center" id="complete-confirmation-content"><span>'+ Drupal.t('MSG821', {'@learner_name': learners, '@objtype': cancelTitleLT}) +'</span></td>';
						}	  
					}else{						
						html += '<td align="center" id="complete-confirmation-content"><span>'+ Drupal.t('MSG822', {'@learner_name': learners, '@status': enrollmentStatus, '@objtype': cancelTitleLT}) +'</span></td>';
					}
					html += '</tr>';
		    	   html +='</table>';
		    	   html +='</div>';
		    	   $("body").append(html);
					var confButton = {};
					confButton[Drupal.t('LBL109')] = function() {
						$(this).dialog('destroy');
						$(this).dialog('close');
						$('#complete-confirmation-wizard').remove();
					};
					confButton[Drupal.t('Yes')] = function(){
						$(this).dialog('destroy');
						$(this).dialog('close');
						$('#complete-confirmation-wizard').remove();
						$('#'+submitHandlerId).click();
					}
					var messageLine;
					if(enrollmentStatus == "Common") {
						if(getStsLength == 1 && learners.length >= 1){
							if(unique == "Completed"){
							var messageLine = Drupal.t('LBL3081') + " " +Drupal.t('Completed');
							}
							else if(unique == "Incomplete"){
								var messageLine = Drupal.t('LBL3081') + " " +Drupal.t('Incomplete');
							}
							else if(unique == "Canceled"){
								var messageLine = Drupal.t('LBL3081') + " " +Drupal.t('Canceled');
							}
							else if(unique == "No Show"){
								var messageLine = Drupal.t('LBL3081') + " " +Drupal.t('No Show');
							}
						}else {
							var messageLine = Drupal.t('LBL3082');
						}
					}else{
						var messageLine = Drupal.t('LBL3081') + " " +enrollmentStatus;
					}					
					$("#complete-confirmation-wizard").dialog({
						position:[(getWindowWidth()-500)/2,100],
						autoOpen: false,
						bgiframe: true,
						width: 500,
						resizable: false,
						modal: true,
						title: messageLine,
						buttons: confButton,
						closeOnEscape: false,
						draggable: false,
						zIndex : 10005,
						overlay: {
						   opacity: 0.9,
						   background: "black"
						}
					});
					
					$('.ui-dialog').wrap("<div id='complete-confirmation-wizard-dialog'></div>");
					$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
					
					changeDialogPopUI();
					$("#complete-confirmation-wizard").show();
					$("#complete-confirmation-wizard").dialog('open')
				} catch(e) {
				}
			},
			refreshLastAccessedRow: function (gridRow) {
				try {
					//console.log('refreshLastAccessedRow called');
					var rowFound = false;
					// console.log('refreshLastAccessedCatalogRow', console.trace());
					var grid = $("#narrow-search-results-holder");
					if (gridRow === undefined) {
						var gridRow = grid.jqGrid('getGridParam', 'lastAccessedRow');
					}
					//console.log(gridRow);
					if (gridRow !== undefined && gridRow != null && typeof gridRow.id != 'undefined') {
						//console.log(gridRow, gridRow.id);
						var rowData = ((typeof gridRow.id != 'undefined' && gridRow.id) ? gridRow.id.split('-') : null);
						var options = {
							data: {
								jqgrid_row_id: gridRow.id,
								page: 1,
								rows: 1
							}
						};
						grid.jqGrid('updateRowByRowId', options);
						rowFound = true; // return true to stop the grid reload
						grid.jqGrid('setGridParam', {lastAccessedRow: null});
					} else {
						// grid.trigger("reloadGrid",[{page:1}]);
						rowFound = false; // return false so that reload of grid happens as no last accessed grid row found
					}
				} catch (e) {
					//console.log(e, e.stack);
				}
				//console.log('rowFound ', rowFound, 'gridRow', gridRow);
				return rowFound;
			}
		});
	 $.extend($.ui.narrowsearch.prototype, EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);
		 window.paginationEnter = false;
			$('#add_lst_pg_txtfld').live('click onfocus mousedown',function(){
				$(this).keypress(function(event){
					 if (event.keyCode == 13) {
						 window.paginationEnter = true;
		              }
				});
			});
		$('.enable-edit-icon').live('click mousedown',function(){
			window.paginationEnter = false;
		});
		$('form').live('keyup keypress',function (e) {
		    var charCode = e.charCode || e.keyCode || e.which;
		    if (charCode  == 13 && e.target.nodeName != 'TEXTAREA') {
		        return false;
		    }
		});
		vtip();
	}catch(e){
			// To Do
		}
})(jQuery);
$(function() {
	try{
	$("#root-admin").narrowsearch();
	}catch(e){
			// To Do
		}
});
function editClassDetails(courseId, classId){
	try{
	if($(".qtip-active").length > 0)
		$(".qtip-active").remove();
	$('.course-class-edit-qtip').remove();
	var classVisibility = $('#catalog-class-basic-addedit-form-'+classId).is(':visible');
	$('#catalog-class-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').css('background-color','#FFFFFF');
	$('.edit-class-list').find('.admin-add-button-container').css('display','block');
	if(classVisibility == true){
		$('#catalog-class-basic-addedit-form-'+classId).hide();
	} else {
		$('#catalog-class-basic-addedit-form-'+classId).show();
		if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
			$('#edit-class-list-'+classId).css('background-color','');
		} else {
			$('#edit-class-list-'+classId).css('background-color','#d7ecf9');
		}
		//$('#edit-class-list-'+classId).find('.admin-add-button-container').css('display','none');
	}
	if($('#edit-catalog-course-basic-cancel')){
		$('#edit-catalog-course-basic-cancel').click();
		$('.qtip').find('.qtip-button > div').each(function(){
		    var x = $(this).attr('id');
			if(x.indexOf('cre_sys_obt_crs')>0 || x.indexOf('Course_close')>0 || x.indexOf('PrintCerId')>0){
			 $(this).closest('.qtip').remove();
			};
		});
	}
	}catch(e){
			// To Do
		}
}

function editClassQTipOpen(clickId,i){
	try{
	//Added by Vincent for issue #0015360: Class screen Qtip alignment is incorrect
	var y = $('#catalog-course-basic-addedit-form').height();
	var z = Math.round(y-433+(80*i));
	$('#modal-content').scrollTop(z);

	if($('#'+clickId).hasClass('loaded-edit-class')){
		$('#'+clickId).click();
	}
	$('#'+clickId).addClass('loaded-edit-class');
	}catch(e){
			// To Do
		}
}

function editCourseDetailsView(){
	try{
	$('#catalog-class-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').find('.admin-add-button-container').css('display','block');
    if($('#edit-newtheme-cancel-link')){
		$('#edit-newtheme-cancel-link').click();
	}
	}catch(e){
			// To Do
		}
}

/* added by ganesh #custom_attribute_0078975*/
function editCustomAttributeDetailsView(){
	try{
	$('#customattribute-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').find('.admin-add-button-container').css('display','block');
	if($('#edit-newtheme-cancel-link')){
		$('#edit-newtheme-cancel-link').click();
	}
	}catch(e){
			// To Do
		}
}

function editLocationDetailsView(){
	try{
	$('#resource-facility-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').find('.admin-add-button-container').css('display','block');
	if($('#edit-newtheme-cancel-link')){
		$('#edit-newtheme-cancel-link').click();
	}
	}catch(e){
			// To Do
		}
}

function editAttributesDetailsView(){
	try{
	$('#catalog-class-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').find('.admin-add-button-container').css('display','block');
	$('.admin-course-edit-button-container').hide();
	if($('#edit-newtheme-cancel-link')){
		$('#edit-newtheme-cancel-link').click();
	}
	}catch(e){
			// To Do
		}
}
function addClassDetails(courseId){
	try{
	var classVisibility = $('#catalog-class-basic-addedit-form-').is(':visible');
	$('.admin-course-edit-button-container').show();
	$('#catalog-class-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').css('background-color','#FFFFFF');
	if(classVisibility == true){
		$('#catalog-class-basic-addedit-form-').hide();
		$('#add-edit-class-norecords').show();
	} else {
		$('.edit-class-list').find('.admin-add-button-container').css('display','block');
		$('#catalog-class-basic-addedit-form-').show();
		$('#add-edit-class-norecords').hide();
	}
	if($('#edit-catalog-course-basic-cancel')){
		$('#edit-catalog-course-basic-cancel').click();
	}
	}catch(e){
			// To Do
		}
}


function addFacilityDetails(locationId){
	try{
	var facilityVisibility = $('#resource-facility-basic-addedit-form-').is(':visible');
	$('.admin-course-edit-button-container').show();
	$('#resource-facility-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').css('background-color','#FFFFFF');
	if(facilityVisibility == true){
		$('#resource-facility-basic-addedit-form-').hide();
		$('#add-edit-facility-norecords').show();
	} else {
		$('.edit-class-list').find('.admin-add-button-container').css('display','block');
		$('#resource-facility-basic-addedit-form-').show();
		$('#add-edit-facility-norecords').hide();
	}
	if($('#edit-resource-location-basic-cancel')){
		$('#edit-resource-location-basic-cancel').click();
	}
	}catch(e){
			// To Do
		}
}

function editFacilityDetails(locationId, facilityId){
	try{
	var facilityVisibility = $('#resource-facility-basic-addedit-form-'+facilityId).is(':visible');
	$('#resource-facility-addedit-form-details .addedit-form-wrapper').hide();
	$('.edit-class-list').css('background-color','#FFFFFF');
	$('.edit-class-list').find('.admin-add-button-container').css('display','block');
	if(facilityVisibility == true){
		$('#resource-facility-basic-addedit-form-'+facilityId).hide();
	} else {
		$('#resource-facility-basic-addedit-form-'+facilityId).show();
		if(Drupal.settings.ajaxPageState.theme == 'expertusoneV2'){
			$('#edit-facility-list-'+facilityId).css('background-color','');
		} else {
			$('#edit-facility-list-'+facilityId).css('background-color','#d7ecf9');
		}
		$('#edit-facility-list-'+facilityId).find('.admin-add-button-container').css('display','none');
	}
	if($('#edit-resource-location-basic-cancel')){
		$('#edit-resource-location-basic-cancel').click();
	}
	}catch(e){
			// To Do
		}
}


function displayResourceActionList() {
	try{
	$('.resource-add-list').toggle();
	}catch(e){
			// To Do
		}
}

function displayPubActionList(butnCls) {
	try{
	butnCls = typeof butnCls !== 'undefined' ? butnCls : '';
	if(butnCls!='')
		$('.'+butnCls).toggle();
	else
		$('.catalog-pub-add-list').toggle();
	}catch(e){
			// To Do
		}
}

function displayNarrowSearchAction(id,obj){
	try{
	$('.pub-action-list-'+id).toggle();
	$(obj).closest("tr").prevAll("tr").find("td").find(".narrowsearch-pub-add-list").hide();
	$(obj).closest("tr").nextAll("tr").find("td").find(".narrowsearch-pub-add-list").hide();
	}catch(e){
			// To Do
		}
}

function displayNotificationActionList(e) {
	try{
	$('.catalog-pub-add-list').toggle();
	/* 	0027406: Issue with Notifications */
	//event.stopPropagation();
	if(!e) var e = window.event;
	e.cancelBubble = true;
	e.returnValue = false;
	if ( e.stopPropagation ) e.stopPropagation();
	if ( e.preventDefault ) e.preventDefault();
       return false;
	}catch(e){
			// To Do
		}
}
function showHide(obj,uniqueId){
	try{
	var fieldsetId = $(obj).val();

	//var fieldsetId = $(obj).val();
    var fieldsetId = $(obj).parents('li').attr('id');
    //$(obj).find('option[value="'+fieldsetId+'"]').remove();
    /*
    if($(obj).find('option').length == 1){
        $(obj).remove();
        $('.showselect').remove();
    }
    */
    displayResourceActionList();
	if(fieldsetId=='attachment_fieldset') {
		$('#attachment-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='tag_fieldset') {
		$('#tag-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='prerequisite_fieldset') {
		$('#prerequisite-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='equivalence_fieldset') {
		$('#equivalence-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='survey_fieldset') {
		$('#survey-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='assessment_fieldset') {
		$('#assessment-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='session_detail_fieldset') {
		$('#session-details-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='wbt_detail_fieldset') {
		$('#wbt-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='register_fieldset') {
		$('#register-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='class_register_fieldset') {
		$('#classregister-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='custom_fieldset') {
		$('#custom-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='classroom_fieldset') {
		$('#classroom-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}else if(fieldsetId=='equipment_fieldset') {
		$('#equipment-fieldset-wrapper-'+uniqueId).removeClass('disable-class');
	}
	}catch(e){
			// To Do
		}
}

function selecteDropdown() {
	try{
	$(document).ready(function(){
		if (!$.browser.opera) {
			// select element styling
			$('select.select').each(function(){
				var title = $('.select').attr('title');
				if( $('option:selected', this).val() != ''  ) title = $('option:selected',this).text();
				$(this)
					.css({'z-index':10,'opacity':0,'-khtml-appearance':'none'})
					.after('<span class="showselect">' + title + '</span>')
					.change(function(){
						val = $('option:selected','.select').text();
						$('.select').next().text(val);
						});
			});

		};

	});
	}catch(e){
			// To Do
		}
}
function hideMessageInfo(){
	try{
    setTimeout(function() {
    	$(".messages").hide();
    	Drupal.ajax.prototype.commands.CtoolsModalAdjust(null, null, null);
	}, 10000);
	}catch(e){
			// To Do
		}
}
function increasePopWidth() {
	try{
	/* $("#modalContent > .ctools-modal-content").css('width','925px');
	$("#modal-content").css('width','890px');
	Drupal.ajax.prototype.commands.CtoolsModalAdjust(null, null, null); */
	}catch(e){
			// To Do
		}
}
function textfieldTitleBlur(obj, defaultValue, searchTypeHiddenId,sessionInsId){
	try{
	if(typeof(searchTypeHiddenId)==='undefined') searchTypeHiddenId = '';
	if(typeof(sessionInsId)==='undefined') sessionInsId = '';
	var searchTypeVal = '';
	if(searchTypeHiddenId != ''){
	  searchTypeVal	= $('#'+searchTypeHiddenId).val();
	}
	if(obj.value == '' || obj.value == defaultValue || obj.value == searchTypeVal){
		if(searchTypeVal != ''){
		  $(obj).val(searchTypeVal);
		}else{
		  $(obj).val(defaultValue);
		  if(sessionInsId != ''){
			  $('#hid_instructor_id').val('');
		  }
		}
		$(obj).addClass('input-field-grey');
	} else {
		$(obj).removeClass('input-field-grey');
	}
	}catch(e){
			// To Do
		}
}

function textfieldTitleClick(obj, defaultValue, searchTypeHiddenId){
	try{
	if(typeof(searchTypeHiddenId)==='undefined') searchTypeHiddenId = '';
	var searchTypeVal = '';
	if(searchTypeHiddenId != ''){
	  searchTypeVal	= $('#'+searchTypeHiddenId).val();
	}
	if(obj.value == defaultValue || (searchTypeVal != '' && obj.value == searchTypeVal)){
		$(obj).val('');
		$(obj).removeClass('input-field-grey');
	}
	}catch(e){
			// To Do
		}
}

// Attachment : While do click on to edit, the textbox class will change
function toEditInline(attachId,callEvent) {
	try{
	$("#"+attachId).addClass("edit-attachment-txtbox");
	$("#"+attachId).removeClass("non-editable-txt");
	$("#catalog-attachment-disp-container").find(".attachment-txt-box").each(function(){
	    var gId = $(this).attr("id");
	    if((gId  == attachId) && (callEvent == 'click')) {
	    	$("#"+gId).removeClass("edit-attachment-txtbox");
	    	$("#"+gId).addClass("edit-attachment-txtbox");
	    	$("#"+gId).removeClass("non-editable-txt");
	    } else {
	    	$("#"+gId).removeClass("edit-attachment-txtbox");
	    	$("#"+gId).removeClass("non-editable-txt");
	    	$("#"+gId).addClass("non-editable-txt");
	    }
	});
	}catch(e){
			// To Do
		}
}

//Attachment : While do click on text label, the textbox should be appear with dottet line
function toEditAttachment(id,act) {
	try{
	var callEvent ='blur';
	if(act == 'label') {
		$("#attachment_list_label_"+id).hide();
		$("#attachment_list_edit_"+id).show();
		$("#attachment_list"+id).focus();
		callEvent = 'click';
	} else {
		$("#attachment_list_edit_"+id).hide();
		$("#attachment_list_label_"+id).show();
	}
	var attachId = 'attachment_list'+id;
	$("#"+attachId).addClass("edit-attachment-txtbox");
	$("#"+attachId).removeClass("non-editable-txt");
	$("#catalog-attachment-disp-container").find(".attachment-txt-box").each(function(){
	    var gId = $(this).attr("id");
	    if((gId  == attachId) && (callEvent == 'click')) {
	    	$("#"+gId).removeClass("edit-attachment-txtbox");
	    	$("#"+gId).addClass("edit-attachment-txtbox");
	    	$("#"+gId).removeClass("non-editable-txt");
	    } else {
	    	$("#"+gId).removeClass("edit-attachment-txtbox");
	    	$("#"+gId).removeClass("non-editable-txt");
	    	$("#"+gId).addClass("non-editable-txt");
	    }
	});
	}catch(e){
			// To Do
		}
}

// Attachment: In Edit attachment, to prevent default enter key submit
function toEditAttachmentKeyDown(evt) {
	try{
	evt = evt || window.event;
    var charCode = evt.keyCode || evt.which;
    if (charCode == 13) {
    	$("#attachment_done_btn").click();
    	evt.preventDefault();
        return false;
    }
	}catch(e){
			// To Do
		}
}

function disableEnrterKey(evt){
	try{
	  var eve = evt || window.event;
	  var keycode = eve.keyCode || eve.which || eve.charCode;

	  if (keycode == 13) {
	    eve.cancelBubble = true;
	    eve.returnValue = false;

	    if (eve.stopPropagation) {
	      eve.stopPropagation();
	      eve.preventDefault();
	    }

	    return false;
	  }
	}catch(e){
			// To Do
		}
}

function textfieldTitleChange(obj) {
	try{
	var selectTxt = obj.options[obj.selectedIndex].text;
	if(selectTxt == 'Select'){
		$(obj).removeClass('select-normal-text');
		$(obj).addClass('select-greyed-out-text');
	} else {
		$(obj).removeClass('select-greyed-out-text');
		$(obj).addClass('select-normal-text');
	}
	}catch(e){
			// To Do
		}
}
/* function selectDropdownOnclick(){
	var insList = $('#load_multiselect_session_instructor').val();
	var selectedId = $('#edit-session-presenter :selected').val();
	if(insList != null && insList != undefined  && insList != ''){
			var opt ='';
			var url = "/?q=administration/session/allpresenter/"+insList;
			$.ajax({
				url : url,
				async: false,
				success: function(data) {
					var is_selected = false;
					$.each(data, function(){
						var selected = "";
						if(this.id == selectedId) {
							selected = "selected";
							is_selected = true;
						}
						opt += '<option title="'+this.full_name+'" value="'+this.id+'"  ' +selected+ '>'+this.full_name+'</option>';
					});
					var selCls = (is_selected === false) ? "selected" :"";
					opt = '<option title="Select" '+selCls+'> Select </option>'+opt;
					$('#edit-session-presenter').html(opt);
					//$('#change_instructor').val(1);
				}
			});
	}else{
		$('#edit-session-presenter').html('<option title="Select"  value="selected">Select</option>');
	}
	
} */
function textfieldTitleChangeField(fieldId) {
	try{
	var selectTxt = $('#'+fieldId+' option:selected').text();
	if(selectTxt == 'Select'){
		$('#'+fieldId).removeClass('select-normal-text');
		$('#'+fieldId).addClass('select-greyed-out-text');
	} else {
		$('#'+fieldId).removeClass('select-greyed-out-text');
		$('#'+fieldId).addClass('select-normal-text');
	}
	}catch(e){
			// To Do
		}
}

function remove_messages(msgType){
	try{
	if(msgType == 'class') {
		$('#catalog-class-addedit-form-details .messages').remove();
	} else if(msgType == 'course') {
		$('#catalog-course-basic-addedit-form .messages').remove();
	} else if(msgType == 'location'){
		$('#resource-location-basic-addedit-form .messages').remove();
	} else if(msgType == 'facility'){
		$('#resource-facility-basic-addedit-form .messages').remove();
	}else if(msgType == 'profile'){
		$('#exp-sp-my-profile-form').remove();
	}else if(msgType == 'customattribute') { //#custom_attribute_0078975
		$('#customattribute-basic-addedit-form .messages').remove();
	}
	}catch(e){
			// To Do
		}
}

function opt_sel_attach(id) {
	try{
	if($("#edit-attachment-fieldset-attachment-attachment-radioname-"+id+"-url").attr("checked")) {
		$("#attach_url_control"+id).show();
		$("#attach_browse_control"+id).hide();
	} else {
		$("#attach_url_control"+id).hide();
		$("#attach_browse_control"+id).show();
	}
	}catch(e){
			// To Do
		}
}

function getStatusReason(statusSelectField, uniqueId) {
  try{
	var selectId = $(statusSelectField).attr('id');
	var statusName = $('#' + selectId + ' option:selected').text().toLowerCase();

	if (statusName == 'inactive') {
		$('#admin-status-inactive-part-' + uniqueId).show();
	} else {
		$('#admin-status-inactive-part-' + uniqueId).hide();
	}

	Drupal.ajax.prototype.commands.CtoolsModalAdjust();
  }catch(e){
		// To Do
	}
}
function changeDelTypeInAddClass(delTypeCode){
	try{
	if(delTypeCode != 'lrn_cls_dty_ilt') {
		var locationId = $('.addedit-edit-new_location').attr('id');
		$('#'+locationId).val('');
		$('.addedit-edit-new_location').attr('id');
		$('#'+locationId).val('');
		var maxSeatId = $('.addedit-edit-max_seats').attr('id');
		$('#'+maxSeatId).val('');
	}
	}catch(e){
			// To Do
		}
}

function changeDeliveryType(delTypeCode){
 try{
	//var selectId = $(deliveryType).attr('id');
	//var delTypeCode = $('#'+selectId).val();
	if(delTypeCode == 'lrn_cls_dty_vod' || delTypeCode == 'lrn_cls_dty_wbt'){
		$('#admin-class-delivery-data-part').hide();
		$('#admin-class-delivery-data-part-for-date').hide();//ui-datepicker-trigger
		//$('#admin-class-register-date-container').find('#edit-reg-end-date').attr('readonly','readonly').addClass('admin-grey-out-fields');
		//$('#admin-class-register-date-container').find('.ui-datepicker-trigger').css('visibility','hidden');
		$('.addedit-edit-min_seats').attr('readonly','readonly').addClass('admin-grey-out-fields');
		$('.addedit-edit-max_seats').attr('readonly','readonly').addClass('admin-grey-out-fields');
		$('.addedit-edit-waitlist_count').attr('readonly','readonly').addClass('admin-grey-out-fields');
		$('#admin-class-location-container').find('#edit-class-location').attr('readonly','readonly').addClass('admin-grey-out-fields');
		$('.addedit-edit-class_location').attr('disabled',true);
		$('#two-col-row-lang_code_status_status_temp .addedit-twocol-secondcol .addedit-mandatory').css('visibility','hidden');
		$('#two-col-row-regdate_deadlinedate .addedit-twocol-secondcol .addedit-mandatory').css('visibility','hidden');
		$('#two-col-row-delivery_type_price .addedit-twocol-secondcol .addedit-mandatory').css('visibility','hidden');

	}
	else{
		$('#admin-class-delivery-data-part').show();
		$('#admin-class-delivery-data-part-for-date').show();
		//$('#admin-class-register-date-container').find('#edit-reg-end-date').removeAttr('readonly').removeClass('admin-grey-out-fields');
		//$('#admin-class-register-date-container').find('.ui-datepicker-trigger').css('visibility','visible');
		$('.addedit-edit-min_seats').removeAttr('readonly').removeClass('admin-grey-out-fields');
		$('.addedit-edit-max_seats').removeAttr('readonly').removeClass('admin-grey-out-fields');
		$('.addedit-edit-waitlist_count').removeAttr('readonly').removeClass('admin-grey-out-fields');
		//$('#admin-class-location-container').find('#edit-class-location').removeAttr('readonly').removeClass('admin-grey-out-fields');
		$('#two-col-row-regdate_deadlinedate .addedit-twocol-secondcol .addedit-mandatory').css('visibility','visible');
		$('#two-col-row-delivery_type_price .addedit-twocol-secondcol .addedit-mandatory').css('visibility','visible');

		if(delTypeCode == 'lrn_cls_dty_vcl'){
			$('#admin-class-location-container').find('#edit-class-location').attr('readonly','readonly').addClass('admin-grey-out-fields');
			$('.addedit-edit-class_location').attr('disabled',true);
			//$('#two-col-row-waitlist_count_currency_type').find('.addedit-mandatory').css('visibility','hidden');
			$('#two-col-row-lang_code_status_status_temp .addedit-twocol-secondcol .addedit-mandatory').css('visibility','hidden');
		}
		else if(delTypeCode == 'lrn_cls_dty_ilt') {
		  $('#admin-class-location-container').find('#edit-class-location').removeAttr('readonly').removeClass('admin-grey-out-fields');
		  $('.addedit-edit-class_location').attr('disabled',false);
			//$('#two-col-row-waitlist_count_currency_type').find('.addedit-mandatory').css('visibility','visible');
		  $('#two-col-row-lang_code_status_status_temp .addedit-twocol-secondcol .addedit-mandatory').css('visibility','visible');
		}
		else {
			$('.addedit-edit-class_location').attr('disabled',false);

			//$('#two-col-row-waitlist_count_currency_type').find('.addedit-mandatory').css('visibility','hidden');
			$('#two-col-row-lang_code_status_status_temp .addedit-twocol-secondcol .addedit-mandatory').css('visibility','hidden');
		}
	}
 }catch(e){
		// To Do
	}
}

function displayLongDescription(desc){
	try{
	if(desc == 'short_description') {
		var shortLength = $('.admin-course-class-short-description').find('.addedit-new-field-value').height();
		if(shortLength >= 50) {
				//$('.admin-course-class-short-description').find('.addedit-new-field-value').addClass('add-scroll-button-description');
		}
	}
	else if(desc == 'long_description') {
		var longLength = $('.admin-course-class-long-description').find('.addedit-new-field-value').height();
		if(longLength >= 50) {
				//$('.admin-course-class-long-description').find('.addedit-new-field-value').addClass('add-scroll-button-description');
		}
	}
	}catch(e){
			// To Do
		}
}

function limitTextareaChars(limitField, limitNum){
	try{
	var textValue = $('.textformat-textarea-editor').val();
	var newTextValue = '';
	var limitCount = '';
	if (textValue.length > limitNum) {
		newTextValue = textValue.substring(0, limitNum);
		$('.textformat-textarea-editor').val(newTextValue);
	} else {
		//limitCount = limitNum - textValue.length;
		limitCount = textValue.length;
		$('#char_count_' + limitField).html(limitCount);
	}
	}catch(e){
			// To Do
		}
}

//Added for Custom Attribute #custom_attribute_0078975
function limitCustomAttributeTextareaChars(limitField, limitNum){ 
	try{
	 //alert('limitCustomAttributeTextareaChars');
	var textValue = $('#'+limitField+'_textarea_full_row .textformat-textarea-editor').val();
	// alert('textValue='+textValue);
	var newTextValue = '';
	var limitCount = '';
	if (textValue.length > limitNum) {
		newTextValue = textValue.substring(0, limitNum);
		//$('.textformat-textarea-editor').val(newTextValue);
		$('#'+limitField+'_textarea_full_row .textformat-textarea-editor').val(newTextValue);
		$('#char_count_' + limitField).html(limitNum);
	} else {
		//limitCount = limitNum - textValue.length;
		limitCount = textValue.length;
		$('#char_count_' + limitField).html(limitCount);
	}
	}catch(e){
			// To Do
		}
}



//For MetaTag Feature
function limitTextFieldChars(limitField, limitNum){
	try{
	var textValue = $('.addedit-edit-textfield').val();
	var newTextValue = '';
	var limitCount = '';
	if (textValue.length > limitNum) {
		newTextValue = textValue.substring(0, limitNum);
		$('.addedit-edit-textfield').val(newTextValue);
	} else {
		//limitCount = limitNum - textValue.length;
		limitCount = textValue.length;
		$('#char_count_' + limitField).html(limitCount);
	}
	}catch(e){
			// To Do
		}
}

function fillCancelReason(uniqueId){
	try{
	var cancelReason = $('#cancel_reason_'+uniqueId).val();
	$('input[name="hidden_cancel_reason"]').val(cancelReason);
	$('#qtipIdqtip_class_cancel_disp_'+uniqueId).closest('.qtip-active').remove();
	}catch(e){
			// To Do
		}
}

(function($) {
	$.fn.refreshVersionList = function(contentId) {
		try{
		/* refresh version list on save or other action performed */
		//var pageNo = $(".ui-pg-input").val();
		$("body").data("mulitselectdatagrid").createLoader("paint-class-search-results-datagrid");
		$("#admin-version-list-"+contentId+"-pagination").trigger("reloadGrid",[{page:1}]);
		}catch(e){
  			// To Do
  		}
	};
	
	$.fn.putCustomLabelForContentAuthor = function(){
		putCustomLabelForContentAuthorWrapper();
	};
	
	$.fn.initializePresentationObjects = function()
	{
		initializePresentationObjectsWrapper();	 
	
	}
	$.fn.hideUploadVideoControlAndDisplayLabel = function()
	{
	
		hideUploadVideoControlAndDisplayLabelWrapper();
	};
})(jQuery);


(function($) {
	$.fn.refreshMoveUsersQtip = function(contentId,versionId) {
		try{
		$('input[name="hidden_idlist_ContentMoveUsers-'+contentId+'-'+versionId+'"]').attr('value',0);
		/* refresh users list in move users qtip on save or other action performed */
		$("#datagrid-container-ContentMoveUsers-"+contentId+"-"+versionId).trigger("reloadGrid",[{page:1}]);
		}catch(e){
  			// To Do
  		}
	};

  $.fn.closeMoveUsersQtip = function() {
	  try{
    $(".qtip-active").remove();
    isPopupOpen=0;
	  }catch(e){
			// To Do
		}
  };
})(jQuery);

(function($) {
	$.fn.attachClose = function(entityId,entityType,type) {
		try{
		if(entityType == 'cre_sys_obt_trp'|| entityType == 'cre_sys_obt_cur' || entityType == 'cre_sys_obt_crt' || entityType == 'cre_sys_obt_trn') {
			var object_id = entityId.split('-');
			entityId = object_id[0];
			$('#qtipAttachCrsIdqtip_visible_disp_'+entityId+'_'+entityType).closest('.qtip-active').remove();
		}else if(entityType == 'cre_sec'){
			$('#qtipAttachIdqtip_addusers_visible_disp_'+entityId+'_'+entityType).closest('.qtip-active').remove();
		}else if(entityType == 'admin-order'){
			$(".active-qtip-div").remove();
		}else{
			$('#qtip_visible_disp_attach_question_'+entityId+'_'+entityType).closest('.qtip-active').remove();
		}
		if(entityType == 'cre_sys_obt_trp' || entityType == 'cre_sys_obt_cur' || entityType == 'cre_sys_obt_crt' || entityType == 'cre_sys_obt_trn'){
			var modId = object_id[1];
			var pos = ''; 
			if(modId != '' && modId != undefined && modId != 'undefined' && ($("#module-list-"+modId).index()>= 0)){
				pos = $("#module-list-"+modId).index();
				
			}else{
				//pos = ($(".first-arrow").size() > 0) ? 1 : 0;
				pos = $( "#page-container-tabs-prg .visible-main-tab:last" ).index();
			}
				if($( ".first-arrow" ).size() > 0 ){
					pos = pos-1;
				}
			$( "#page-container-tabs-prg" ).tabs('destroy');
			
	    	$( "#page-container-tabs-prg" ).tabs({
	    		selected: pos
	    	});
	    	
	    	/*Diable attach courses*/
	    	var str = $('#program_attach_tabs .ui-state-active').attr('id');
			var currmod = str.split('-');
			moduleTabclick(currmod[2]);
		}
		}catch(e){
  			// To Do
  		}
	};
})(jQuery);

(function($) {
	$.fn.validateCustomFields = function(customWrapperId,customErrorFlag) {
		try{
		if(customErrorFlag==true)
			$('#'+customWrapperId).show();
		}catch(e){
  			// To Do
  		}
	};
})(jQuery);

(function($) {
	try{
	$.fn.validateCertificate = function(defaultCertifyId) {
		$('input:radio[name="attach_certificate"]').filter('[value="'+defaultCertifyId+'"]').attr('checked', true);
		$('#certificate-display-table').jScrollPane({});
	};
	}catch(e){
			// To Do
		}
})(jQuery);

(function($) {
	try{
	$.fn.scrollPerm = function(permWrapperId) {
		$('#admin-add-scroll').jScrollPane({});
	};
	}catch(e){
			// To Do
		}
})(jQuery);

(function($) {
	try{
	$.fn.scrollTag = function(tagWrapperId) {
		$('#tag-scroll-id').jScrollPane({});
	};
	}catch(e){
			// To Do
		}
})(jQuery);

(function($) {
	try{
	$.fn.scrollView = function(argsList) {
		$("#view-scroll-wrapper").jScrollPane({});
		vtip();
		if($('#viewgroup-detail-wrapper').length) {	//to check group view form is open
			$('#modalContent .ctools-modal-content #ctools-face-table .popup-block-footer-right').css('right', '45px'); //57996
		}
	};
	}catch(e){
			// To Do
		}
})(jQuery);

(function($) {
	try{
	$.fn.cancelClassDetails = function(classId, editable) {
		$('#qtipAttachIdqtip_addlocation_visible_disp_'+classId).closest('.qtip-active').remove();

		if(document.getElementById('qtipAttachIdqtip_addclass_visible_disp_'+classId)){
		  $('#qtipAttachIdqtip_addclass_visible_disp_'+classId).closest('.qtip-active').remove();
		}
		if(document.getElementById('qtipAttachIdqtip_addclass_visible_disp_')){
			  $('#qtipAttachIdqtip_addclass_visible_disp_').closest('.qtip-active').remove();
		}
		if(document.getElementById('qtip_editclass_visible_dispid_'+classId)){
		  $('#qtip_editclass_visible_dispid_'+classId).closest('.qtip-active').remove();
		}
		if (!editable && editable != null && editable != undefined) {
			$("#edit-catalog-course-basic-cancel").click();
		}
		$('#catalog-class-addedit-form-details .addedit-form-wrapper').hide();
		$('.edit-class-list').css('background-color','#FFFFFF');
		$('.edit-class-list').find('.admin-add-button-container').css('display','block');
		$('#catalog-class-basic-addedit-form-'+classId).hide();
	};

	}catch(e){
			// To Do
		}
})(jQuery);

(function($) {
	$.fn.cancelFacilityDetails = function(facilityId) {
		try{
		$('#resource-facility-addedit-form-details .addedit-form-wrapper').hide();
		$('.edit-class-list').css('background-color','#FFFFFF');
		$('.edit-class-list').find('.admin-add-button-container').css('display','block');
		$('#resource-facility-basic-addedit-form-'+facilityId).hide();
		}catch(e){
  			// To Do
  		}
	};
})(jQuery);

function clearMessages(){
	try{
	$(".messages").hide();
	}catch(e){
			// To Do
		}
}

/*function attachmentUploadFile() {
  var provideUrlVisibility = $('#provide_url_id').is(':visible');

  if(provideUrlVisibility == true){
	 $("#provide_url_id").hide();
  }
  $("#attachment_upload_file").click();
}*/

function attachmentProvideUrl() {
	try{
	var provideUrlVisibility = $('#provide_url_id').is(':visible');

	if(provideUrlVisibility == true){
		$("#provide_url_id").hide();
	} else {
		$("#provide_url_id").show();
	}
	}catch(e){
			// To Do
		}
}
function bubblePopupClose(popupId) {
	try{
	$("#"+popupId).remove();
	}catch(e){
			// To Do
		}
}

function removebubblePopup(){
	try{
	$('.qtip').remove();
	}catch(e){
			// To Do
		}
}

function attachSubmitUrl() {
	try{
	//alert("Heree calling");
	// attachment_done_btn
	$("#attachment_done_btn").click();
	}catch(e){
			// To Do
		}
}

function validateCustomFieldClass() {
	try{
	$("#userbasic-custom-fields").find('.input-field-grey').each(function(){
	    var gId= $(this).attr("id");
	    var gVal = $("#"+gId).val();
	    if((gVal == 'Enter a Label') || (gVal == 'Enter a Value')) {
	        $("#"+gId).removeClass('input-field-grey');
	    	$("#"+gId).addClass('input-field-grey');
	    } else {
	    	$("#"+gId).removeClass('input-field-grey');
	    }
	});
	}catch(e){
			// To Do
		}
}


function sequenceDragAndDrop(containerId, type){
	try{
	if(type == 'attach_class_content'){
	  $("#"+containerId+' tbody').sortable({
		handle: '.dragndrop-selectable-item',
		cursor: 'crosshair'
	  });
	}
	else{
	  $("#"+containerId).sortable({
		handle: '.dragndrop-selectable-item',
		cursor: 'crosshair'
	  });
	}
	//$("#"+containerId).bind('click.sortable mousedown.sortable',function(ev){ ev.target.focus(); });
	//$("#"+containerId).disableSelection();
	$("#"+containerId).droppable({
		drop: function( event, ui ) {
			var sequenceOrder = '';
			var sequenceOrderArray = new Array();
			var c = 0;
			if(type == 'attach_class_content'){
				var currentId = $('#'+containerId+' tr.ui-sortable-helper').attr('id');
				var prevId = $('#'+containerId+' tr.ui-sortable-placeholder').prev().attr('id');
			}
			else{
				var currentId = $('#'+containerId+' li.ui-sortable-helper').attr('id');
				var prevId = $('#'+containerId+' li.ui-sortable-placeholder').prev().attr('id');
			}
			var recordStored = 0;
			if(prevId == undefined){
				sequenceOrderArray[0] = currentId;
				recordStored = 1;
				c = 1;
			}
			if(type == 'attach_class_content'){
				$('#'+containerId+' tr.ui-widget-content').each(function(){
					if($(this).attr('id') != currentId){
						sequenceOrderArray[c] = $(this).attr('id');
						if($(this).attr('id') == prevId){
							c++;
							sequenceOrderArray[c] = currentId;
						}
					}
					c++;
			   });
			}
			else{
				$('#'+containerId+' li.draggable-list').each(function(){
				if($(this).attr('id') != currentId){
					sequenceOrderArray[c] = $(this).attr('id');
					if($(this).attr('id') == prevId){
						c++;
						sequenceOrderArray[c] = currentId;
					}
				}
				c++;
				});
			}
			sequenceOrder = sequenceOrderArray.join(",");
			var obj = EXPERTUS_SMARTPORTAL_AbstractDetailsWidget;
			obj.createLoader(containerId);
			var i=1;
			$.ajax({
				url : obj.constructUrl("administration/sequence-drag-drop/"+type+"/"+sequenceOrder),
				async: false,
				success: function(data) {
					obj.destroyLoader(containerId);
					var sequenceArray = sequenceOrderArray.filter(function(v){return v!==''});
					var list_values = ($('#dragndrop li.draggable-list').length)-1;
					var arrLen = sequenceArray.length;
					if(list_values == arrLen ) {
						var i = 0;
						for(i=0; i<arrLen; i++) {
							$("#dragndrop li[id="+ sequenceArray[i] +"]").removeClass('odd-even-row-highlighter');
							if (i%2 == 1) {
								$("#dragndrop li[id="+ sequenceArray[i] +"]").addClass('odd-even-row-highlighter');
							}
						}
					}

				}
			});

		}
	});
	}catch(e){
			// To Do
		}
}
    $('#mandatory-list .man-opt-selection').live('click', function(){
    	try{
		if($(this).next().css('display') == 'block'){
			$(this).next().css('display', 'none');
		} else {
			$('.sub-menu').hide();
			$(this).next().css('display', 'block');
		}
    	}catch(e){
  			// To Do
  		}
	});


	$('#mandatory-list .sub-menu li').live('click', function(){
		try{
		var selectedMO = $(this).html();
		$(this).parent().prev('span').prev('span').html(selectedMO);
		$(this).parent().css('display', 'none');
		var obj = EXPERTUS_SMARTPORTAL_AbstractDetailsWidget;

		var attachValues = $(this).attr('data');
		//alert(attachValues);
		var manValue = 1;
		obj.createLoader('attach_course_dt');
		$.ajax({
			url : obj.constructUrl("administration/update-attachedcourse-mandatory/"+attachValues),
			async: false,
			success: function(data) {
				obj.destroyLoader('attach_course_dt');
				$("#root-admin").data("narrowsearch").refreshGrid();
			}
		});

		return false;
		}catch(e){
  			// To Do
  		}
	});


    $('#attach-question-mandatory-list .man-opt-selection').live('click', function(){
    	try{
		if($(this).next().css('display') == 'block'){
			$(this).next().css('display', 'none');
		} else {
			$(this).next().css('display', 'block');
		}
    	}catch(e){
  			// To Do
  		}
	});


	$('#attach-question-mandatory-list .sub-menu li').live('click', function(){
		try{
		var selectedMO = $(this).html();
		$(this).parent().prev('span').prev('span').html(selectedMO);
		$(this).parent().css('display', 'none');
		var obj = EXPERTUS_SMARTPORTAL_AbstractDetailsWidget;

		var attachValues = $(this).attr('data');
		//alert(attachValues);
		var manValue = 1;
		obj.createLoader('survey_attach_questions_dt');
		$.ajax({
			url : obj.constructUrl("administration/update-attachedquestion-mandatory/"+attachValues),
			async: false,
			success: function(data) {
				obj.destroyLoader('survey_attach_questions_dt');
			}
		});

		return false;
		}catch(e){
  			// To Do
  		}
	});


	(function($) {
		$('.addedit-customfields-wrapper .custom-field-label').live('dblclick', function(){
			try{
			var labelId = $(this).attr('id');
			var inputId = labelId.replace('custom_label_custom_value_', 'custom_input_custom_value_');
			$('#'+labelId).hide();
			$('#'+inputId).show();
			$('#'+inputId+' input').focus();
			}catch(e){
	  			// To Do
	  		}
		});
	})(jQuery);

	function updateCustomLabelKeyDown(evt, newValue, labelDetails, id, loaderWrapper){
		try{
		evt = evt || window.event;
	    var charCode = evt.keyCode || evt.which;
	    if (charCode == 13) {
	        updateCustomLabel(newValue, labelDetails, id, loaderWrapper);
	        evt.preventDefault();
	        return false;
	    }
		}catch(e){
  			// To Do
  		}
	}

	function updateCustomLabel(newValue, labelDetails, id, loaderWrapper) {
		try{
		var labelDetailsArray = labelDetails.split('-');
		var customId = labelDetailsArray[0];
		var entityId = labelDetailsArray[1];
		var entityType = labelDetailsArray[2];

		var obj = EXPERTUS_SMARTPORTAL_AbstractDetailsWidget;
		obj.createLoader(loaderWrapper);
		$.ajax({
			type: "POST",
			async: false,
			url: obj.constructUrl("administration/update-custom-fields/"+newValue+"/"+customId),
			data: '',
			success: function(result){
				$('#custom_label_custom_value_'+id).html(result);
				$('#custom_input_custom_value_'+id).hide();
				$('#custom_label_custom_value_'+id).attr('title', newValue);
				$('#custom_label_custom_value_'+id).show();
				obj.destroyLoader(loaderWrapper);
			},
			failure : function(){
				obj.destroyLoader(wrapper);
			}
	    });
		}catch(e){
  			// To Do
  		}
		    }
	function attachCrsDelete(callId) {
		try{
		if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
			var esignObj = {'esignFor':'attachCrsDelete','objectId':callId};
			$.fn.getNewEsignPopup(esignObj);
		}else{
			$("#"+callId).click();
		    }
		}catch(e){
  			// To Do
  		}
	}

	function setQtipPosition(){
		try{
		if(document.getElementById('qtip_position')!=null){
			if($('#qtip_position').val()!=''){
				try{
					var initVal = $('#qtip_position').val().split('#');
					var bubbleha = $("#"+initVal[0]).css('height');
					var bubbleTop = initVal[1];
					var bubblehb = initVal[2];
					bubbleha = parseInt(bubbleha.substring(0,bubbleha.length-2));
					bubbleTop = bubbleTop-(bubbleha-bubblehb);
					$("#"+initVal[0]).closest(".qtip-active").css('top',bubbleTop);
				}catch(e){}
			}
		}
		}catch(e){
  			// To Do
  		}
	}

	/**
	 * closeQtyp()
	 *
	 * This function has been added by Vincent on July 19, 2012.
	 * This will be called on clicking the qtip close icon form the top right corner of the Qtip
	 *
	 * @param id
	 * @return
	 */
	function closeQtyp(id,courseId){
		try{
		var tmp ;
		//reloadFlagForPagination=true;
		if(id.indexOf('addclass')>=0){
			tmp=0;
			 //Fixed for #0038166 : added to get hidden value before ctool get closed.
	        var emptyId = $('#bubble-face-table #empty_id').val();
			var entityType = $('#bubble-face-table #entity_value').val();
			if(emptyId != null && emptyId != undefined  && emptyId != ''){
		    	var url = "?q=administration/catalogaccess/delete/"+emptyId+"/"+entityType;
		    	$.ajax({
		 		   type: "POST",
		 		   url: url,
		 		   data:  '',
		 		   success: function(respText){
		 			  res = respText;
		 	  		}
		 		 });
		  	}
		}else{
			tmp = id.substring(id.indexOf('dispid_')+7);
		}
		if(id.indexOf('addclass')>=0 || id.indexOf('editclass')>=0){
		  //Drupal.ckeditorSubmitAjaxForm();
			$("#admin-course-class-list-pagination-wrapper").empty().remove();
			$('#paint-class-search-results-datagrid').empty().remove();
			var res = document.getElementById('enrollment_upload_done_btn_view');
			var result = document.getElementById('course_class_cancel_button');
			if(document.getElementById('attachment-addedit-form-html')){
					$('#attachment-addedit-form-html').attr('enctype','application/x-www-form-urlencoded');
				if(document.getElementById('attachment_upload_file')!=undefined && document.getElementById('attachment_upload_file')!=null && document.getElementById('attachment_upload_file')!='')
					$('#attachment_upload_file').remove();
			}
			else if(res !=null && res != undefined && res != '' ){
				var formname = document.getElementsByClassName('addedit-form');
				if (formname.length > 0)
						$('.addedit-form').attr('enctype','application/x-www-form-urlencoded');
				if(document.getElementById('enrollment_upload_file_view')!=undefined && document.getElementById('enrollment_upload_file_view')!=null && document.getElementById('enrollment_upload_file_view')!='')
					$('#enrollment_upload_file_view').remove();
				if(document.getElementById('enrollment_upload_file')!=undefined && document.getElementById('enrollment_upload_file')!=null && document.getElementById('enrollment_upload_file')!='')
					$('#enrollment_upload_file').remove();
			} else if(result !=null && result != undefined && result != '' ){
				var formname = document.getElementsByClassName('addedit-form');
				if (formname.length > 0)
					$('.addedit-form').attr('enctype','application/x-www-form-urlencoded');
				if(document.getElementById('enrollment_upload_file_view')!=undefined && document.getElementById('enrollment_upload_file_view')!=null && document.getElementById('enrollment_upload_file_view')!='')
					$('#enrollment_upload_file_view').remove();
				if(document.getElementById('enrollment_upload_file')!=undefined && document.getElementById('enrollment_upload_file')!=null && document.getElementById('enrollment_upload_file')!='')				
					$('#enrollment_upload_file').remove();
				if(document.getElementById('course_class_cancel_button')!=undefined && document.getElementById('course_class_cancel_button')!=null && document.getElementById('course_class_cancel_button')!='')
		 	        $("#course_class_cancel_button").click();
			}
		  	removeQtip(tmp);
		  	if(window.location.href.indexOf("admincalendar")>0)
			{
				$(".close").click();
				adminCalCloseHandler("classaddedit");
			}
		}
		if(id.indexOf('addtemplate') >=0 || id.indexOf('edittemplate') >=0 ){
			//alert(document.getElementById('notify_template_cancel_button'));
			$("#notify_template_cancel_button").click();
			removeClassQtip();
		}
		if(id.indexOf('MoveUsersqtip') >=0 ){
			var contentId = id.split("_");
			isPopupOpen=0;
			$.fn.refreshVersionList(contentId[3]);
		}
		$('#'+id+"_disp").html('');
		$('#'+id+"_disp").closest(".qtip-active").hide();
		
		if(id == "qtipAttachIdqtip_listvalues_visible_disp_0_cre_usr_dpt" || id == "qtipAttachIdqtip_listvalues_visible_disp_0_cre_usr_etp" || id == "qtipAttachIdqtip_listvalues_visible_disp_0_cre_usr_jrl"  || id == "qtipAttachIdqtip_listvalues_visible_disp_0_cre_usr_jtl" || id == "qtipAttachIdqtip_listvalues_visible_disp_0_cre_usr_ptp"){
			$('.page-administration-people-setup #add_lst_pg_next,.page-administration-people-setup #add_lst_pg_previous,.page-administration-people-setup #add_lst_pg_last,.page-administration-people-setup #add_lst_pg_first,.page-administration-people-setup #add_lst_pg_txtfld,.page-administration-people-setup #listvalues-autocomplete,.page-administration-people-setup #search_listvalues').removeAttr('style');								
		}
		
		
		}catch(e){
  			// To Do
  		}
	}

	/**
	 * setWordCountDiv()
	 *
	 * This function has been added by Vincent on July 24, 2012 to fix ckeditor word count issue(#0014481).
	 * It is drived form /ckeditor/wordcount/plugin.js to create word count div
	 *
	 * @param id
	 * @return
	 */
	function setWordCountDiv(id){
		try{
		setTimeout(function(){
			try{
				var editorRealName;
				var editor = CKEDITOR.instances[id];
				if(editor!=null && editor!=undefined && editor!='undefined'){
					editorRealName = (editor.element.$.name).split('[');
					if(!document.getElementById('cke_wordcount_'+editor.name)) {
			    		$('#char_count_'+editorRealName[0]).html('<div id="cke_wordcount_'+editor.name+'" style="display: inline-block; float: right; text-align: right; margin-top: 0px; cursor:auto; font:10px helvetica neue,helvetica,arial; height:auto; padding:0; text-align:left; text-decoration:none; vertical-align:baseline; white-space:nowrap; width:auto;color:#666666;">'+$('#char_count_'+editorRealName[0]).html()+'</div>');
			    	}
				}
			}catch(e){
				//Do nothing;
			}
		},4000);
		}catch(e){
  			// To Do
  		}
	}

	function removeAllQtip(){
		try{
		$('.qtip').remove();
		}catch(e){
  			// To Do
  		}
	}

	function removeQtip(id){
		try{
		//reloadFlagForPagination = true;
		if(id== -1){
			$('#qtipAttachIdqtip_addlocation_visible_disp__close').closest('.qtip').remove();
		}else if(id==0){
			$("#course_class_cancel_button").click();
			$('#qtipAttachIdqtip_addclass_visible_disp__close').closest('.qtip').remove();
			$('#qtipAttachIdqtip_addlocation_visible_disp__close').closest('.qtip').remove();
		}else{
			$("#course_class_cancel_button").click();
			$('#qtipAttachIdqtip_addlocation_visible_disp_'+id+'_close').closest('.qtip').remove();
		}
		removeClassQtip();
		}catch(e){
  			// To Do
  		}
	}

	function removeClassQtip(){
		try{
		$('.qtip').find('.qtip-button > div').each(function(){
		    var x = $(this).attr('id');
			if(x.indexOf('cre_sys_obt_cls')>0 || x.indexOf('Class_close')>0){
			 $(this).closest('.qtip').remove();
			};
		});
		}catch(e){
  			// To Do
  		}
	}


(function($) {
	$.fn.addCustomGrayConversion = function(customCount) {
		try{
		//alert(customCount);
		/*for(var i=0; i<customCount;i++){
			$('.addedit-edit-custom-label-field-'+i).addClass('input-field-grey');
			$('.addedit-edit-textarea-custom_value_'+i).addClass('input-field-grey');

		}*/
		$(".addedit-customfields-wrapper").find('.input-field-grey').each(function(){
		    var gId= $(this).attr("id");
		    var gVal = $("#"+gId).val();
		    if((gVal == 'Enter a Label') || (gVal == 'Enter a Value')) {
		        $("#"+gId).removeClass('input-field-grey');
		    	$("#"+gId).addClass('input-field-grey');
		    } else {
		    	$("#"+gId).removeClass('input-field-grey');
		    }
		});
		}catch(e){
  			// To Do
  		}
	};

	// Time picker
	/*$('input.exp-timepicker').live('click',function(){
		var attributeId = $(this).attr('id');
		var expDropDownId = 'exp-dropdown-'+attributeId;
		var hours, minutes;
		$('.exp-timepicker-selection').css('display', 'none');
		if($('#'+expDropDownId).length >0){
			if($('#'+expDropDownId).is(':visible') == true){
				$('#'+expDropDownId).css('display', 'none');
			} else {
	 			$('#'+expDropDownId).css('display', 'block');
			}
		} else {
			$(this).after('<div id="'+expDropDownId+'" data="'+attributeId+'" class="exp-timepicker-selection"><ul></ul></div>');
			for(var i = 0 ;i <= 1425; i += 15){
				hours = Math.floor(i / 60);
				minutes = i % 60;
				if (hours < 10){
				    hours = '0' + hours;
				}
				if (minutes < 10){
				    minutes = '0' + minutes;
				}
				$('#'+expDropDownId+' ul').append('<li>'+hours + ':' + minutes + '</li>');
		    }
		}
	});

	$('div.exp-timepicker-selection li').live('click', function(){
		var attributeId = $(this).closest('.exp-timepicker-selection').attr('data');
		var selectedTime = $(this).html();
		$('#'+attributeId).val(selectedTime);
		$(this).closest('.exp-timepicker-selection').css('display', 'none');
	});*/
	$('body').click(function(event){
		try{
		if($(event.target).hasClass('exp-timepicker') != true){
			$('.exp-timepicker-selection').css('display', 'none');
		}
		}catch(e){
  			// To Do
  		}
	});

})(jQuery);

//Hide the drop down menu option
  $('body,#admin-add-course-training-plan .ui-widget-content').bind('click', function(event) {
	  try{
	  if(event.target.id != 'admin-dropdown-arrow'){
		 $('#select-list-course-dropdown-list').hide();
		 $('#select-list-class-dropdown-list').hide();
		 $('#select-list-surass-dropdown-list').hide();
    }
	  }catch(e){
			// To Do
		}
  });
   //$('body').bind('mousedown', function(event) {
  //if((event.target.nodeName == 'SELECT') || (event.target.nodeName == 'INPUT' && ($(event.target).attr('type') == 'text'|| $(event.target).attr('type') == 'submit'))){
  $('body').bind('mousedown', function(event) {
	  try{
	  var nsParts = window.location.href.split("/?q=");
 	   if((event.target.nodeName == 'SELECT') || (event.target.nodeName == 'INPUT')
 			  || (event.target.nodeName == 'TEXTAREA') || (event.target.nodeName == 'A' && nsParts[1] !='administration/order/create')
 		  	  || (event.target.nodeName == 'SPAN' && nsParts[1] !='administration/order/create') || (event.target.nodeName == 'LI')){
		  $('#message-container').remove();
	  }
	  }catch(e){
			// To Do
		}
  });
/*$('#location-list .loc-disp-selection').live('click', function(){
	if($(this).next().css('display') == 'block'){
		$(this).next().css('display', 'none');
		$('.add-location-cls').css('display', 'none');
	} else {
		$(this).next().css('display', 'block');
		$('.add-location-cls').css('display', 'block');
	}
});

$('#location-list .sub-menu-list li').live('click', function(){
	var selectedMO = $(this).html();
	$(this).parent().prev('span').prev('span').html(selectedMO);
	$(this).parent().css('display', 'none');
	$('.add-location-cls').css('display', 'none');

	var attachValues = $(this).attr('data');
	//$('#class_location').val(attachValues);
	$('input[name$="class_location"]').val(attachValues);

	return false;
});*/

//$('#location-list .loc-disp-selection').live('click', function(){
$('#location-list .top-select').live('click', function(){
	try{
	if($('.sub-menu-list').css('display') == 'inline-block'){
		$('.sub-menu-list').css('display', 'none');
		$('.add-location-cls').css('display', 'none');
	} else {
		var actualWidthofUL = $('ul.sub-menu-list').width();
		if ($.browser.msie  && parseInt($.browser.version, 10) === 7) {
			var widthofUL = actualWidthofUL + 37;
		} else {
			var widthofUL = actualWidthofUL + 10;
			}
		$('.sub-menu-list').css('display', 'inline-block');
		$('.add-location-cls').css('width', +widthofUL+'px');
		$('.add-location-cls').css('display', 'block');
	}
	}catch(e){
			// To Do
		}
});

$('#location-list .sub-menu-list li').live('click', function(){
	try{
	var selectedMO = $(this).html();
	$('#location-input-txt').val(selectedMO);
	$(this).parent().css('display', 'none');
	$('.add-location-cls').css('display', 'none');

	var attachValues = $(this).attr('data');
	//$('#class_location').val(attachValues);
	$('input[name$="class_location"]').val(attachValues);

	return false;
	}catch(e){
			// To Do
		}
});

(function($) {
	try{
	$.fn.classCreateLocation = function(locId,locName,classId) {
		$('#newlocationpaint').append("<li data="+locId+" title='"+locName+"'>"+locName+"</li>");
		$('#location-list .sub-menu-list li ').click();
		sortUnorderedList("newlocationpaint");
/*		if(classId){
			$('#qtipAttachIdqtip_addlocation_visible_disp_'+classId).closest('.qtip-active').remove();
		}*/
	};
	}catch(e){
			// To Do
		}
})(jQuery);
function sortUnorderedList(ul, sortDescending) {
	try{
	  if(typeof ul == "string")
	    ul = document.getElementById(ul);
	  // Get the list items and setup an array for sorting
	  var lis = ul.getElementsByTagName("LI");
	  var vals = [];
	  // Populate the array
	  for(var i = 0, l = lis.length; i < l; i++)
	    vals.push(lis[i].innerHTML);
	  // Sort it
	  vals.sort();
	  if(sortDescending)
	    vals.reverse();
	  // Change the list on the page
	  for(var i = 0, l = lis.length; i < l; i++)
	    lis[i].innerHTML = vals[i];
	}catch(e){
			// To Do
		}
}
if(!document.getElementById('location-list')){
	try{
	$('body').click(function(event) {
		if($(event.target).hasClass('add-location-cls') != true){
			$('.sub-menu-list').css('display', 'none');
			$('.add-location-cls').css('display', 'none');
		}
	});
	}catch(e){
			// To Do
		}
}
function handlePostLoadDropdown(toBeHidden,toBeShown){
	try{
	$('#'+toBeHidden).hide();
	$('#'+toBeShown).show();
	}catch(e){
			// To Do
		}
}

function searchClassNameFilter(courseId,classId,ClassName){
	try{
	var obj = this;
	var pagerId	= '#admin-course-class-list-'+courseId+'-pagination_toppager';
	var objStr = '$("#root_admin").data("narrowsearch")';
	}catch(e){
			// To Do
		}
}

function onlyNumbers(evt)
{
	try{
     var charCode = (evt.which) ? evt.which : evt.keyCode;
     if (charCode == 8 || charCode == 9 || charCode == 46 || (charCode >= 37 && charCode <= 40) || (charCode >= 48 && charCode <= 57) || (charCode >= 96 && charCode <= 105))
    	 return true;
     else
     	return false;
     /*else if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;

     return true;*/
	}catch(e){
			// To Do
		}
}
/* Added by Gayathri for #0073578 */
function onlyNumbersforPrice(evt)
{
	try{
     var charCode = (evt.which) ? evt.which : evt.keyCode;
     if (charCode == 8 || charCode == 9 || charCode == 46 || charCode == 110 || (charCode >= 37 && charCode <= 40) || (charCode >= 48 && charCode <= 57) || (charCode >= 96 && charCode <= 105))
    	 return true;
     else
     	return false;    
	}catch(e){
			// To Do
	}
}
/* Set the focus on location field */
function changeLocationFocus(focusType){
	try{
  if(focusType=='deltype') {
		$('.addedit-edit-delivery_type').focusout();
	}else{
	     $('.addedit-edit-title').focusout();
	}
	}catch(e){
			// To Do
		}
}
/* Set the focus on first field */
function autoFocusFirstField() {
	try{
  $('form').find('select,textarea,input[type=text]').filter(':visible:first').focusout();
	}catch(e){
			// To Do
		}
}

/* Get Meeting details from popup tooltip and assign into form */
function getMeetingDetails(pos) {
	try{
	 /*var timezone = $('#timezone').val();
	 var session_attende_password = $('#session_attende_password').val();
	 var session_presenter_password = $('#session_presenter_password').val();
	 var session_attendee_url = $('#session_attendee_url').val();
	 var session_presenter_url = $('#session_presenter_url').val();
	 var instructorid = $('#hid_instructor_id').val();
	 var session_meeting_id = $('#session_meeting_id').val();

	 $('#time_zone_'+pos).val(timezone);
	 $('#session_attendeepass_'+pos).val(session_attende_password);
	 $('#session_presenterpass_'+pos).val(session_presenter_password);
	 $('#session_attendeeurl_'+pos).val(session_attendee_url);
	 $('#session_presenterurl_'+pos).val(session_presenter_url);
	 $('#hid_session_details_id_'+pos).val(instructorid);
	 $('#session_meetingid_'+pos).val(session_meeting_id);*/

	 $('.active-qtip-div').remove();
	}catch(e){
			// To Do
		}
}

function checkedAll(multiSel,uniqueId){
	try{
		if($(multiSel).attr('checked') == true){
			$('.attach-permission-cls').each(function(){
					$(this).attr('checked', true);
					$(this).parent('td').removeClass('checkbox-unselected').addClass('checkbox-selected');
			});
		} else {
			$('.attach-permission-cls').each(function(){
				$(this).attr('checked', false);
				$(this).parent('td').removeClass('checkbox-selected').addClass('checkbox-unselected');
			});

		}
	}catch(e){
			// To Do
		}
}
function uncheckAllPermission(){
	try{
	// If all checkbox selected - multiselect-all should be checked
	var multiselectVar = true;
	var removeClass = "checkbox-unselected";
	var addClass = "checkbox-selected";
	$('.attach-permission-cls').each(function(){
		if($(this).attr('checked') == false){
			multiselectVar = false;
			removeClass = "checkbox-selected";
			addClass = "checkbox-unselected";
		}
	});
	$('#select-all-checkbox').attr('checked', multiselectVar);
	$('#select-all-checkbox').parent().removeClass(removeClass);
	$('#select-all-checkbox').parent().addClass(addClass);
	}catch(e){
			// To Do
		}
}

function scorllMainTabPrev(){
	try{
	var liCount = $('#sort-bar-V2 .AdminsublinktabNavigation li').size();
	var activeLiLast = $('#sort-bar-V2 .visible-main-tab:first').index();
	if(activeLiLast==1){
		return '';
	}
	//if(liCount>activeLiLast){
		$('#sort-bar-V2 ul li:eq('+(activeLiLast-1)+')').removeClass('hidden-main-tab');
		$('#sort-bar-V2 ul li:eq('+(activeLiLast-1)+')').addClass('visible-main-tab');
		$('#sort-bar-V2 .visible-main-tab:last').removeClass('visible-main-tab').addClass('hidden-main-tab');
	//}
	}catch(e){
			// To Do
		}
}

function scorllMainTabNext(){
	try{
	var liCount = $('#sort-bar-V2 .AdminsublinktabNavigation li').size();
	var activeLiLast = $('#sort-bar-V2 .visible-main-tab:last').index();
	if(activeLiLast==(liCount-2)){
		return '';
	}
	if(liCount>activeLiLast){
		$('#sort-bar-V2 ul li:eq('+(activeLiLast+1)+')').removeClass('hidden-main-tab');
		$('#sort-bar-V2 ul li:eq('+(activeLiLast+1)+')').addClass('visible-main-tab');
		$('#sort-bar-V2 .visible-main-tab:first').removeClass('visible-main-tab').addClass('hidden-main-tab');
	}
	}catch(e){
			// To Do
		}
}

function resetMainTab(){
	try{
	var selected = $('#sort-bar-V2 .selected').index();
	var lastLi = $('#sort-bar-V2 .visible-main-tab:last').index();
	if($('#sort-bar-V2 .selected').css('display')=='none'){
		for(var i=lastLi;i<selected;i++){
			scorllMainTabNext();
		}
	}
	}catch(e){
			// To Do
		}
}

function deleteOrderLineItem(nid,enrid){
	try{
	$("input[name=lineitem_nid]:hidden").val(nid);
	$("input[name=lineitem_enrid]:hidden").val(enrid);
	$("input[name = 'pay_lineitem_canceled']").click();
	}catch(e){
			// To Do
		}
}

function checkboxSelectedUnselectedMultiParent(id){
	try{
	if($(id).is(':checked')){
		$(id).parents().eq(1).removeClass('survey-checkbox-unselected');
		$(id).parents().eq(1).addClass('survey-checkbox-selected');
	}
	else {
		$(id).parents().eq(1).removeClass('survey-checkbox-selected');
		$(id).parents().eq(1).addClass('survey-checkbox-unselected');
	}
	}catch(e){
			// To Do
		}
}

function checkboxSelectedUnselectedAddInf(id){
	try{
	if($(id).is(':checked')){
		$(id).parents().eq(1).removeClass('checkbox-unselected');
		$(id).parents().eq(1).addClass('checkbox-selected');
	}
	else {
		$(id).parents().eq(1).removeClass('checkbox-selected');
		$(id).parents().eq(1).addClass('checkbox-unselected');
	}
	}catch(e){
			// To Do
		}
}
jQuery(function($){
	try{
	var currLang = $('html').attr('xml:lang');
	$.datepicker.regional[currLang] = {
		prevText: Drupal.t('LBL692'),
		nextText: Drupal.t('LBL693')
		};
	$.datepicker.setDefaults($.datepicker.regional[currLang]);
	}catch(e){
			// To Do
		}
});

(function($) {
	try{
	$.fn.getScrollDive = function() {
		var heigt = $("#scrolldiv").height();
		if(heigt > 80){
			$('#catalog-attachment-disp-container #scrolldiv').css('height','100px');
			$('#catalog-attachment-disp-container #scrolldiv').jScrollPane({});
			}
			vtip();
	};
	}catch(e){
			// To Do
		}
})(jQuery);

(function($) {
	try{
	$.fn.cloneScrollPopup = function(classId) {
		var heigt = $('#clonescrolldiv'+classId).height();
		if(heigt > 80){
			//$('#clonescrolldiv').css('height','100px');
			$('#clonescrolldiv'+classId).jScrollPane({});
			}
	};
	}catch(e){
			// To Do
		}
})(jQuery);

//if (Drupal.settings.ajaxPageState.theme == 'expertusoneV2') {
 jQuery("#classdaterange-daterange-from-date,#classdaterange-daterange-to-date").live("click",function() {
	 try{
	jQuery("#ui-datepicker-div").parent('div').removeClass('datepicker-maincontainer');
	jQuery("#ui-datepicker-div").parent('div').removeClass('edit-datepicker-maincontainer');
	jQuery("#ui-datepicker-div").parent('div').removeClass('add-datepicker-maincontainer');
	jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
	jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
	jQuery("#ui-datepicker-div").parent('div').addClass('datepicker-maincontainer');
	 }catch(e){
			// To Do
		}
 });
 jQuery("#edit-reg-end-date,.addedit-edit-reg_end_date").live("click",function() {
	 try{
	 var rdoVal = $('.narrow-search-filterset-radio-selected').find('#radio_Class').val();
	 var rdoVal1 = $('.narrow-search-filterset-radio-selected').find('#radio_Course').val();

	 if(rdoVal =="Class")
	 {
	 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
	 jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
	 jQuery("#ui-datepicker-div").parent('div').addClass('edit-datepicker-maincontainer');
	 }
	 else if(rdoVal1 =="Course")
	 {
	 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
	 jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
	 jQuery("#ui-datepicker-div").parent('div').addClass('add-datepicker-maincontainer');
	 }
	 else
	 {
	 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
	 }
	 }catch(e){
			// To Do
		}
	});
jQuery("#start_date").live("click",function() {
	try{

	 var rdoVal2 = $('.narrow-search-filterset-radio-selected').find('#radio_Class').val();
	 var rdoVal3 = $('.narrow-search-filterset-radio-selected').find('#radio_Course').val();
	 //alert(rdoVal3);
	 if(rdoVal2 =="Class")
	 {
	 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
	 jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
	 jQuery("#ui-datepicker-div").parent('div').addClass('add-sessions-date');
	 $("#ui-datepicker-div").css('z-index','10000');
	 }
	 else if(rdoVal3 =="Course")
	 {
	 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
	 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
	 jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
	 jQuery("#ui-datepicker-div").parent('div').addClass('add-sessions-date');
	 $("#ui-datepicker-div").css('z-index','10000');
	 }
	}catch(e){
			// To Do
		}
});
function datepickerAddEdit(){
	try{

		 var rdoVal2 = $('.narrow-search-filterset-radio-selected').find('#radio_Class').val();
		 var rdoVal3 = $('.narrow-search-filterset-radio-selected').find('#radio_Course').val();
		 if(rdoVal2 =="Class"){
			 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
			 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
			 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
			 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
			 jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
			 jQuery("#ui-datepicker-div").parent('div').addClass('add-sessions-date');
			 $("#ui-datepicker-div").css('z-index','10000');
		 }
		 else if(rdoVal3 =="Course"){
			 jQuery("#ui-datepicker-div").parents('div').removeClass('datepicker-maincontainer');
			 jQuery("#ui-datepicker-div").parents('div').removeClass('add-datepicker-maincontainer');
			 jQuery("#ui-datepicker-div").parents('div').removeClass('edit-datepicker-maincontainer');
			 jQuery("#ui-datepicker-div").parents('div').removeClass('add-sessions-date');
			 jQuery("#ui-datepicker-div").wrapAll(document.createElement('div'));
			 jQuery("#ui-datepicker-div").parent('div').addClass('add-sessions-date');
			 $("#ui-datepicker-div").css('z-index','10000');
		 }
		 $('#end_date , #start_date').bind('change',function() {
		  if($('#end_date').val()!= '' && $('#end_date').val() != undefined && $('#start_date').val() != '' && $('#start_date').val()!= undefined  && ($('#start_date').val() != 'mm-dd-yyyy' || $('#end_date').val() != 'mm-dd-yyyy')) {
			  if($('#start_date').val() == $('#end_date').val() ){
				  $(".weekday-checkbox-input").attr("checked", false);
				  $(".weekday-checkbox-input").parent().removeClass('checkbox-selected');
				  $(".weekday-checkbox-input").parent().addClass('checkbox-unselected');
				  $(".weekday-checkbox-input").attr("disabled", true);
				  $(".session_det_eachday").addClass('greyoutcheckbox');
     			  }
			  else{
				  $('.weekday-checkbox-input').removeAttr("disabled");
				  $(".session_det_eachday").removeClass('greyoutcheckbox');
			  	}
			  if($('#start_date').val()!= 'mm-dd-yyyy' && $('#end_date').val() != 'mm-dd-yyyy'){
			    var start = $('#start_date').val();
				var end = $('#end_date').val()
			    var countdays = getCountOf( start,end );
			    // console.log(countdays);
			     for (var key in countdays) {
				  if(countdays[key] ==0){
					 $("#"+key).attr("checked", false);
					  $("."+key).removeClass('checkbox-selected');
					  $("."+key).addClass('checkbox-unselected');
					  $("#"+key).attr("disabled", true);
					  $("#"+key+"-text").addClass('greyoutcheckbox');
				  	}
			     }
			}
		  }
		});	

	}catch(e){
			// To Do
	}
}


function parseDate(input) {
    var parts = input.split('-');
    return new Date(parts[2], parts[0]-1, parts[1]); 
  }
function getCountOf( date1, date2){
  var dateObj1 = parseDate(date1);
  var dateObj2 = parseDate(date2);
  var week = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
  var dayToSearch = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
  	var days_count = [];
  		for(var i = 0; i < dayToSearch.length; i++){
  				var dayIndex = week.indexOf( dayToSearch[i] );
  				var count = 0;
  					while ( dateObj1.getTime() <= dateObj2.getTime()){
  						if (dateObj1.getDay() == dayIndex )
  							{
  							   count++;
  								}       
  						dateObj1.setDate(dateObj1.getDate() + 1);
  					}
  					dateObj1 = parseDate(date1);
  					days_count[dayToSearch[i]] = count;
  		}
  return days_count;
}


//}
 $('body').live('click', function (event) {
	 try{
	 $('.add-session-popup-list').css("display","");
		if(event.target.className!='add-another-arrow-link') {
				$('.add-session-popup-list').hide();
			}
	 }catch(e){
			// To Do
		}
	});
$('.add-more-session-list li').live('click', function () {
	try{
	if(navigator.userAgent.indexOf("Chrome")>=0){
      var meetingTypeW=$('.session-add-another-popup-container').find('span.chosen-meeting-type').css("width");
   	  $(this).css('width',meetingTypeW);
	}
	}catch(e){
			// To Do
		}
 });

function updatePaginationCookie(p){
	try{
	var crPage = EXPERTUS_SMARTPORTAL_AbstractManager.getCookie('current_page');
	if(crPage!=''){
	var level = crPage.split('~');
	(p==1)?level[0] = level[0].replace('#0','#1'):level[1] = level[1].replace('#0','#1');
	var updatePage = level[0]+"~"+level[1]+"~"+level[2];
	document.cookie="current_page="+updatePage+"; path=/";
	}
	}catch(e){
			// To Do
		}
}

function manageDropdown(){
	try{
	showHideDropDown();
	var par = $('.grey-btn-bg-right');
	var position = par.position();
	$("#manage-dd-list" ).css( "left" , position.left-110);
    //$("#narrow-search-actionbar-list").find("#manage-dd-list").find("li:first").css('padding-bottom','5px');
    //$("#narrow-search-actionbar-list").find("#manage-dd-list").find("li:last").css('padding-top','5px');
	}catch(e){
			// To Do
		}
}
function createDropdown(){
	try{
	showHideDropDowncreate();
	var par = $('.pink-btn-bg-right');
	var position = par.position();
	$("#create-dd-list" ).css( "left" , position.left-75);
    //$("#narrow-search-actionbar-list").find("#manage-dd-list").find("li:first").css('padding-bottom','5px');
    //$("#narrow-search-actionbar-list").find("#manage-dd-list").find("li:last").css('padding-top','5px');
	}catch(e){
			// To Do
		}
}

/* Added for Custom Attribute - Ganesh  #custom_attribute_0078975 */
function createCustomAttributeDropdown(entity_type){ 
	try{  
		var ddlist_cls='create-dd-list-for-'+entity_type;
		var ddlist = $('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('visibility'); 
		
		if(ddlist == 'hidden'){
			$('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('visibility','visible');
			$('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('display','block');
		}else{
			$('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('visibility','hidden');
			$('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('display','none');
		}   
	}catch(e){
			// To Do
	}
}

//#custom_attribute_0078975
function clickCustomAttributeDropdown(attr_type,entity_type){
	try{   
		if(attr_type!=''){
		  var repl_text = '';
		  var cls_name='';
		  if(attr_type=='cattr_type_checkbox'){
		      repl_text = Drupal.t('LBL2006');
		      cls_name='new-customattribute-wrapper-checkbox';
		  }else if(attr_type=='cattr_type_dropdown'){
		      repl_text = Drupal.t('LBL2007');
		      cls_name='new-customattribute-wrapper-dropdown';
		  }else if(attr_type=='cattr_type_radio'){
		      repl_text = Drupal.t('LBL2008');
		      cls_name='new-customattribute-wrapper-radio';
		  }else if(attr_type=='cattr_type_txtarea'){
		      repl_text = Drupal.t('LBL2010');
		      cls_name='new-customattribute-wrapper-textarea';
		  }else if(attr_type=='cattr_type_txtbox'){
		     repl_text = Drupal.t('LBL2009');
		     cls_name='new-customattribute-wrapper-textbox'; 
		  }  
		  
		  if(repl_text!=''){
		    repl_text = Drupal.t('LBL287')+' '+repl_text;
		    // $('#new-customattribute-link').html(repl_text); 
		     $('.new-customattribute-link-for-'+entity_type).html(repl_text);
		     //$('.addedit-customattributes-wrapper').addClass(cls_name);
		     $('.addedit-customattributes-wrapper .addedit-form-cancel-container-actions').attr('id', cls_name);
		     var ddlist_cls='create-dd-list-for-'+entity_type;
		     $('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('display','none');
		     $('.addedit-customattributes-wrapper #create-dd-list'+'.'+ddlist_cls).css('visibility','hidden');
		  } 
		 
		}  
		 
	}catch(e){
			// To Do
	}
}  

// Visibility pop up close  #custom_attribute_0078975
function closeCustomAttributeQtip(refreshOpt){ 
	try{ 
		$('.qtip-popup-visible').html('').hide();  
		if(refreshOpt=='1'){
		  $('.hidden-save-addedit-entityform').click();
		}   
	}catch(e){
		// To Do
	}
}

function orderQtipVisible(qtipObj){
	
	try{
						//alert('Visible Popup');
						var url = resource.base_host+'?q='+qtipObj.url;
						var popupId 	= qtipObj.popupDispId;
						//var catalogVisibleId = qtipObj.catalogVisibleId;
						var entId = qtipObj.entityId;
						var qtipScrollId = qtipObj.scrollid;

						$.ajax({
			 				 type: "GET",
				   	         url: url,
				   	         data:  '',
				   	         success: function(data){
			 					//var paintHtml = bpTop+"<div id='paintContent"+popupDispId+"'><div id='show_expertus_message' style='"+messageStyle+"'></div>"+data.render_content_main+"</div>"+bpBot;
			 					$('#'+popupId+' #visible-popup-'+entId+' #bubble-face-table .bubble-c #paintContent'+popupId).html(data.render_content_main);
			 					$.extend(true, Drupal.settings, data.drupal_settings);
			 					EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.destroyLoader("paintContent"+popupId);

			 					if(qtipScrollId != '' && qtipScrollId != undefined && qtipScrollId != null){
			 						var qtipScrollType = (qtipObj.scrolltype == 'class') ? '.' : '#';
			 						$('#'+popupId+' '+qtipScrollType+qtipScrollId).jScrollPane('destroy');
			 						$('#'+popupId+' '+qtipScrollType+qtipScrollId).jScrollPane({});
			 					}
								Drupal.attachBehaviors();
			 					//vtip();
			 					
			 					/*
			 					if('[qtipObj.linkid^=visible-sharelink]') {
			 						if (navigator.appVersion.indexOf("Safari")!= -1 && ($(window).height() < 742))
			 							$('#program-tp-basic-addedit-form-container .survey-attach-grid-wrapper .ui-jqgrid .jqgrow #bubble-face-table td.bubble-c').css('height','33px');
			 								 						
									if(Drupal.settings.user.language !== undefined && $.inArray(Drupal.settings.user.language, ["pt-pt", "de", "fr"]) != -1) {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-30px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-15px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ru') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-33px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-15px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ja') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-30px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-15px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ko') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-26px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-3px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'zh-hans') {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-54px');
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-32px');
										else
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-42px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'it') { 
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-3px');
										else
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'es') { 
										if (navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1)
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-4px');
										else
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									} else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'en-us') { 
										if ((navigator.userAgent.indexOf("MSIE") != -1 && navigator.appVersion.indexOf("10")!= -1) || (navigator.appVersion.indexOf("Trident/7.0")!= -1))
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-3px');
										else
											$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									}else {
										$('#catalog-class-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-28px');
										$('#program-tp-basic-addedit-form-container #survey-sharelink-button #edit-sharelink-button').css('margin-right','-14px');
									}
								}
								*/
								
		   	                 }
			   			});

					}catch(e){
						alert(e);
					}
	
}
/* End for Custom attribute */

function showHideDropDown(){
	try{
	var ddlist = $('#manage-dd-list').css('visibility');
	if(ddlist == 'hidden'){
		$('#manage-dd-list').css('visibility','visible');
		$('#download_template').css('visibility','hidden');
                $('#download_template_enroll').css('visibility','hidden');
	}else{
		$('#manage-dd-list').css('visibility','hidden');
		$('#download_template').css('visibility','hidden');
                $('#download_template_enroll').css('visibility','hidden');
	}
	}catch(e){
			// To Do
		}
}
function showHideDropDowncreate(){
	try{
	var ddlist = $('#create-dd-list').css('visibility');
	if(ddlist == 'hidden'){
		$('#create-dd-list').css('visibility','visible');
	}else{
		$('#create-dd-list').css('visibility','hidden');
	}
	}catch(e){
			// To Do
		}
}
$('body').live('click', function (event) {
	try{
	$('#manage-dd-list').css("display","");
	if(event.target.className == 'info-user-upload vtip') {
		$('#manage-dd-list').css('visibility','visible');
		$('#manage-dd-list').css('display','block');
		$('#manage-dd-list').show();
	}else if(event.target.className == 'info-roster-upload vtip'){
                $('#manage-dd-list').css('visibility','visible');
		$('#manage-dd-list').css('display','block');
		$('#manage-dd-list').show();
	}else if(event.target.className!='grey-btn-bg-right') {
		$('#manage-dd-list').css('visibility','hidden');
		$('#manage-dd-list').hide();
	}
	$('#create-dd-list').css("display","");
	if(event.target.className!='pink-btn-bg-right' && event.target.className!='customattr-btn-bg-right'){ //Added for custom attribute by ganesh - #custom_attribute_0078975
		$("#create-dd-list" ).hide();
	}
	}catch(e){
			// To Do
		}
});


$('body').live('click', function (event) {
	try{
		classList = event.target.className.split(" ");
		if(event.target.className !='form-checkbox' && event.target.className !='tab-title' && event.target.className !='manage-clone-list' && event.target.className !='clone-label-list' && event.target.className != 'clone-list-class' && event.target.className != 'select-all-wrapper'
			&& classList[0] != ('jspDrag') && event.target.className != 'jspTrack') {
			$('.manage-clone-list').hide();
			$('.manage-clone-list').css('visibility','hidden');
		}
	}catch(e){
			// To Do
		}
});
$(".searchtext, #narrow-search-text-filter, #search_leaderboard-users_txt, #search_users_txt, #classname-autocomplete, .narrow-search-ac-text-overlap, .searchtag, .searchlocation, #tpattchedcoursename-autocomplete, #username-search-autocomplete, #surassattchedquestions-autocomplete, #countrylist-autocomplete, #enrolluser-autocomplete, #enrolltpuser-autocomplete,#prerequisite-autocomplete,#equivalence-autocomplete,#survey-autocomplete,#assessment-autocomplete,#srch_criteria_catkeyword,#report_table_autocomplete").live("click",function(){
   try{
	if(Drupal.settings.ajaxPageState.theme == 'expertusone' && ($.browser.msie && $.browser.version > 7) )
	 {
       var loaderEl = this;
       var widgetId=$(this).attr("id");
       var filterSearchClsname=$(this).attr("class");
       var filterSearchCls = filterSearchClsname.split(" ");
       $(loaderEl).val("");
       $(loaderEl).parent("div").css("position","relative");
       //reports
       $(loaderEl).closest("div.report-table-search-container").css("position","relative");
       // Top search;
	   $(loaderEl).next(".loader-hidder").remove();
	   $(".loader-hidder").remove();
	   //widget Search
	   $(loaderEl).next(".widget-loader-hidder").remove();
	   $(".widget-loader-hidder").remove();
	   //narrow filter search
	   $(loaderEl).next(".narrowfilter-loader-hidder").remove();
	   $(".narrowfilter-loader-hidder").remove();
	   //course/class search
	   $(loaderEl).next(".crecls-loader-hidder").remove();
	   $(".crecls-loader-hidder").remove();
	   //Country setting search
	   $(loaderEl).next(".countrysett-loader-hidder").remove();
	   $(".countrysett-loader-hidder").remove();
	   //select class search
	   $(loaderEl).next(".selectCls-loader-hidder").remove();
	   $(".selectCls-loader-hidder").remove();
	   //report design wizard left table search
	   $(loaderEl).next(".reportsLTbl-loader-hidder").remove();
	   $(".reportsLTbl-loader-hidder").remove();

	   $(loaderEl).after( "<div class='loader-hidder'>&nbsp;</div>" );

	   loaderEl.onkeydown = function(evt) {
           evt = evt || window.event;
          // alert("keydown: " + evt.keyCode);
          $(".loader-hidder,.widget-loader-hidder, .crecls-loader-hidder, .narrowfilter-loader-hidder, .selectCls-loader-hidder").css({"background-position":"100% -17px","cursor":"none"});
           if(widgetId=="countrylist-autocomplete" || widgetId=="enrolluser-autocomplete" || widgetId=="enrolltpuser-autocomplete" || widgetId=="prerequisite-autocomplete" || widgetId=="equivalence-autocomplete" || widgetId=="survey-autocomplete" || widgetId=="assessment-autocomplete"){
           $(".countrysett-loader-hidder").css({"background-position":"99% -16px","cursor":"none"});
           }
           if(filterSearchCls[1]=="narrow-search-ac-text-overlap" || filterSearchCls[1]=="searchtag" || filterSearchCls[1]=="searchlocation" ){
           	$(".narrowfilter-loader-hidder").css({"background-position":"100% -17px","cursor":"none"});
           }
           };
       loaderEl.onkeyup = function(evt) {
           evt = evt || window.event;
           // alert("keyup: " + evt.keyCode);
           $(".loader-hidder, .widget-loader-hidder, .crecls-loader-hidder, .narrowfilter-loader-hidder, .selectCls-loader-hidder").css("background-position","100% 3px");
           if(widgetId=="countrylist-autocomplete" || widgetId=="enrolluser-autocomplete" || widgetId=="enrolltpuser-autocomplete" || widgetId=="prerequisite-autocomplete" || widgetId=="equivalence-autocomplete" || widgetId=="survey-autocomplete" || widgetId=="assessment-autocomplete"){
             $(".countrysett-loader-hidder").css({"background-position":"99% 5px","cursor":"none"});
           }
           if(filterSearchCls[1]=="narrow-search-ac-text-overlap" || filterSearchCls[1]=="searchtag" || filterSearchCls[1]=="searchlocation" ){
        	 $(".narrowfilter-loader-hidder").css({"background-position":"100% 3px","cursor":"none"});
           }
          };

          if(widgetId=="countrylist-autocomplete" || widgetId=="enrolluser-autocomplete" || widgetId=="enrolltpuser-autocomplete" || widgetId=="prerequisite-autocomplete" || widgetId=="equivalence-autocomplete" || widgetId=="survey-autocomplete" || widgetId=="assessment-autocomplete"){
        	//$(".loader-hidder").css({"right":"22px","top":"1px","height":"22px"});
        	$(".loader-hidder").addClass("countrysett-loader-hidder");
      	    $(".countrysett-loader-hidder").removeClass("loader-hidder");
      	    if(widgetId=="enrolluser-autocomplete" || widgetId=="enrolltpuser-autocomplete"){
      	      $(".countrysett-loader-hidder").css({"right":"1px"}) ;
      	    }
      	    if(widgetId=="prerequisite-autocomplete" || widgetId=="equivalence-autocomplete" || widgetId=="survey-autocomplete" || widgetId=="assessment-autocomplete"){
      	      $(".countrysett-loader-hidder").css({"right":"1px"}) ;
      	    }
          }
          if(widgetId=="search_leaderboard-users_txt" || widgetId=="search_users_txt"){
        	  $(".loader-hidder").addClass("widget-loader-hidder");
        	  $(".widget-loader-hidder").removeClass("loader-hidder");
          }

          if(widgetId=="classname-autocomplete" || widgetId=="tpattchedcoursename-autocomplete" || widgetId=="username-search-autocomplete" || widgetId=="surassattchedquestions-autocomplete" ){
        	  $(".loader-hidder").addClass("crecls-loader-hidder");
        	  $(".crecls-loader-hidder").removeClass("loader-hidder");
        	  if(widgetId=="tpattchedcoursename-autocomplete"){
        	  $(".crecls-loader-hidder").css({"right":"1px","top":"-10px"});
        	  }
        	  if(widgetId=="surassattchedquestions-autocomplete"){
              $(".crecls-loader-hidder").css({"right":"56px","top":"-10px"});
              }
        	 /* if(widgetId=="username-search-autocomplete") {
        	  $(".crecls-loader-hidder").css("right","108px");
        	  }*/
        	  if(widgetId=="classname-autocomplete") {
              $(".crecls-loader-hidder").css("right","23px");
              }
          }
         if(widgetId=="srch_criteria_catkeyword"){
          $(".loader-hidder").addClass("selectCls-loader-hidder");
       	  $(".selectCls-loader-hidder").removeClass("loader-hidder");
         }
        if(widgetId=="report_table_autocomplete"){
             $(".loader-hidder").addClass("reportsLTbl-loader-hidder");
          	 $(".reportsLTbl-loader-hidder").removeClass("loader-hidder");
            }

          if(filterSearchCls[1]=="narrow-search-ac-text-overlap" || filterSearchCls[1]=="searchtag" || filterSearchCls[1]=="searchlocation" ){
        	 $(".loader-hidder").addClass("narrowfilter-loader-hidder");
        	 $(".narrowfilter-loader-hidder").removeClass("loader-hidder");
        	 if(filterSearchCls[1]=="searchtag" || filterSearchCls[1]=="searchlocation"){
        	 $(".narrowfilter-loader-hidder").css({"right":"21px","height":"19px"});
        	 }
          }
        }
   }catch(e){
			// To Do
		}
});
Drupal.ajax.prototype.commands.saveandclosePopup = function(ajax, response, status) {
	   try {
		   $(".active-qtip-div").remove();
		   $("#popup_container_qtip_buisness_disp_"+response.entities).closest(".qtip-active").remove();
		   $("#qtipAccessqtip_visible_disp_"+response.entities).closest(".qtip-active").remove();
	   }
	   catch(e) {
		   //nothing to do
	   }
};
Drupal.ajax.prototype.commands.displaymessagewizard = function(ajax, response, status) {
    try {
    	this.currTheme = Drupal.settings.ajaxPageState.theme;
    	var dupId = response.grpId;
	    $('#delete-msg-wizard').remove();
	    var html = '';
	    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';

    		var title = Drupal.t('MSG711');

	    if(this.currTheme == 'expertusoneV2'){
	   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
	    } else {
	     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+'</td></tr>';
	    }
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);

	    var closeButt={};
	    closeButt[Drupal.t('LBL109')]=function(){  $('input[id="show_catag"]').attr('value',0); $("input[name = 'saveandshow']").click();$('#delete-msg-wizard').remove();};

         if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
	    	var esignObj = {'popupDiv':'catalog-publish-unpublis-dialog',
	    			'esignFor':'displaymessagewizard','catalogId':dupId,'catalogType': 'Class','actionStatus': 'lrn_cls_sts_atv', 'rowObj': this};
	    	closeButt[Drupal.t('Yes')]=function(){ $.fn.getNewEsignPopup(esignObj);$(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};
         }else{
        	 
        	 closeButt[Drupal.t('Yes')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();
	        	 setTimeout(function() {
	     			$('#visible-class-'+dupId).click()
	     		}, 300);
        	 };
         }

	    $("#delete-msg-wizard").dialog({
	        position:[(getWindowWidth()-400)/2,200],
	        bgiframe: true,
	        width:300,
	        resizable:false,
	        modal: true,
	        title:Drupal.t('LBL749'),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:false,
	        zIndex : 10005,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $(".removebutton").text(Drupal.t("No"));
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg");
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

	    if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			 /*$('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');*/
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
	    }
	    $("#delete-msg-wizard").show();

		$('.ui-dialog-titlebar-close').click(function(){
	        $("#delete-msg-wizard").remove();
	    });
		if(this.currTheme == 'expertusoneV2'){
	    	changeDialogPopUI();
	    }
    }
    catch(e){
      //Nothing to do
    }
  };


function orderEdit(){
	 try {
	  setTimeout(function() {
		var orderRow=$(".payment-billing-details-info .order-review-table tr,.payment-user-details-info .order-review-table tr").length;
		for(var i=0; i < orderRow; i++){
			var billH = $(".payment-billing-details-info .order-review-table tr:eq("+i+")").height();
			var userH = $(".payment-user-details-info .order-review-table tr:eq("+i+")").height();
			var maxH = (billH < userH) ? userH : billH;
			$(".payment-billing-details-info .order-review-table tr:eq("+i+"), .payment-user-details-info .order-review-table tr:eq("+i+")").height(maxH);
		}
	  }, 1000);
	  vtip();
	}catch(e) {
		   //nothing to do
	   }
}

function checkPaginationWidth(){
	try {
	if($("#admin-data-grid .ui-pg-table .ui-pg-table").is(":visible")){
	  var pageConWidth=$("#admin-data-grid .ui-pg-table .ui-pg-table").width();
	   $("#exportcontainer").css("right",pageConWidth+15);
	   if(document.getElementById('enrollment-upload-container') !== undefined) {
		if(Drupal.settings.ajaxPageState.theme != "expertusoneV2" && pageConWidth > 0) {
			$('.admin_ac_input_mainform.addedit-edit-enrolluser-autocomplete').width(195);
	 }
		$("#enrollment-upload-container").css("right",pageConWidth+15);
	   }
	 }
	}catch(e) {
		   //nothing to do
	   }
	};

(function($) {
	$.fn.cloneDestroyloader = function() {
		try {
			$("#root-admin").data("narrowsearch").destroyLoader('paint-narrow-search-results');
		} catch (e) {
			// To Do
		}
	};
})(jQuery);


Drupal.ajax.prototype.commands.showClonePopup = function(ajax, response, status) {

    try {
    	classId = response.class_id;
    	$('#manage-clone-list'+classId).html(response.html);

    	showHideCreateCopyDropDown(classId);
    	var par = $('.grey-btn-bg-right-create-copy');
    	var position = par.position();
    	this.currTheme = Drupal.settings.ajaxPageState.theme;
    	if(this.currTheme == "expertusoneV2"){
    	$("#ul-clone-list-"+classId ).css( "right" ,'-25px');
    	}else{
    		$("#ul-clone-list-"+classId ).css( "right" ,'-25px');
    		$("#ul-clone-list-"+classId ).css( "top" ,'30px');
    	}
		    	
    	$(".contentauthorclone").parent().parent().parent().parent().css("width","180px");
		$(".contentauthorclone .jspContainer").css("width","180px");
		$(".contentauthorclone .jspContainer .jspPane").css("width","170px;");
		$(".contentauthorclone .jspContainer .jspPane").css("height","66px;");
		$(".contentauthorclone").closest(".manage-clone-list").css("width","170px;");
		$(". contentauthorclone").css("width","200px");


		
    	Drupal.attachBehaviors();
    	vtip();
    }
    catch(e){
      //Nothing to do
    }
};

function showHideCreateCopyDropDown(entityId){
	try{
		$('.manage-clone-list').hide();
		// Qtippopup Disable
		$('#group-control').remove();
		$('.qtip-popup-visible').hide();

		var ddlist = $('#manage-clone-list' + entityId).css('visibility');
		if (ddlist == 'hidden') {
			$('#ul-clone-list-' + entityId).css('visibility', 'visible');
			$('#ul-clone-list-' + entityId).show();
		} else {
			$('#ul-clone-list-' + entityId).css('visibility', 'hidden');
		}
	}catch(e){
			// To Do
		}
}

function checkboxDisableForCloneCA(obj)
{
	$('#clone-Content').prop('checked','checked');
	$('#clone-Content').parent().removeClass('checkbox-unselected');
	$('#clone-Content').parent().addClass('checkbox-selected');

	if($(obj).attr("id") == "clone-Interactions" && $(obj).is(":checked") == true)
	{
		$('#clone-Interactions').prop('checked','checked');
		$('#clone-Interactions').parent().removeClass('checkbox-unselected');
		$('#clone-Interactions').parent().addClass('checkbox-selected');
		
		$('#clone-Content').prop('checked','checked');
		$('#clone-Content').parent().removeClass('checkbox-unselected');
		$('#clone-Content').parent().addClass('checkbox-selected');
	}else if($(obj).attr("id") == "clone-Interactions" && $(obj).is(":checked") == false)
	{
		$('#clone-Interactions').parent().removeClass('checkbox-selected');
		$('#clone-Interactions').parent().addClass('checkbox-unselected');
		$('#clone-Interactions').prop('checked','');
	}
	
	
	if($(obj).attr("id") == "clone-access" && $(obj).is(":checked") == true)
	{
		$('#clone-access').prop('checked','checked');
		$('#clone-access').parent().removeClass('checkbox-unselected');
		$('#clone-access').parent().addClass('checkbox-selected');
		
		$('#clone-Content').prop('checked','checked');
		$('#clone-Content').parent().removeClass('checkbox-unselected');
		$('#clone-Content').parent().addClass('checkbox-selected');
	}else if($(obj).attr("id") == "clone-access" && $(obj).is(":checked") == false)
	{
		$('#clone-access').parent().removeClass('checkbox-selected');
		$('#clone-access').parent().addClass('checkbox-unselected');
		$('#clone-access').prop('checked','');
	}
	
	/*if($(obj).attr("id") == "clone-Content" && $(obj).is(":checked") == true)
	{
		$('#clone-Content').prop('checked','checked');
		$('#clone-Content').parent().removeClass('checkbox-unselected');
		$('#clone-Content').parent().addClass('checkbox-selected');
	}else if($(obj).attr("id") == "clone-Content" && $(obj).is(":checked") == false)
	{
		$('#clone-Content').prop('checked','');
		$('#clone-Content').parent().removeClass('checkbox-selected');
		$('#clone-Content').parent().addClass('checkbox-unselected');
		
		$('#clone-Interactions').prop('checked','');
		$('#clone-Interactions').parent().addClass('checkbox-unselected');
		$('#clone-Interactions').parent().removeClass('checkbox-selected');
		
		
		
	}*/
	
	//{
	
	//}
/*	if($('#clone-Content').is(':checked')){
		$('#clone-Interactions').attr('disabled','');
		//$('#clone-Interactions').parent().addClass('checkbox-selected');
		//$('#clone-Interactions').parent().removeClass('checkbox-unselected');
		
	}
	else
	{
		//alert($('#clone-Interactions').size());
		
		$('#clone-Interactions').attr('checked','');
		$('#clone-Interactions').parent().addClass('checkbox-unselected');
		$('#clone-Interactions').parent().removeClass('checkbox-selected');
		$('#clone-Interactions').attr('disabled','disabled');
		
		
		
	}*/
	
	$(".jspPane").css("left","0px");
}

function checkboxDisableForClone(type,id){
	if(type == 'class'){
	if(!$('#clone-content_list').is(':checked')){
		$('#clone-enrollment').parent().removeClass('checkbox-selected');
		$('#clone-enrollment').parent().addClass('checkbox-unselected');
		$('#clone-enrollment').attr('checked','');
	}
	}else{
		if(!$('#ul-clone-list-'+id+' #clone-attachedcourses').is(':checked')){
			$('#ul-clone-list-'+id+' #clone-assessment').parent().removeClass('checkbox-selected');
			$('#ul-clone-list-'+id+' #clone-assessment').parent().addClass('checkbox-unselected');
			$('#ul-clone-list-'+id+' #clone-assessment').attr('checked','');
			
			$('#ul-clone-list-'+id+' #clone-survey').parent().removeClass('checkbox-selected');
			$('#ul-clone-list-'+id+' #clone-survey').parent().addClass('checkbox-unselected');
			$('#ul-clone-list-'+id+' #clone-survey').attr('checked','');
		}
	}
}
function checkboxAutoEchckForContentClone(type,id){
	if(type == 'class'){
	if($('#clone-enrollment').is(':checked')){
		$('#clone-content_list').attr('checked','checked');
		$('#clone-content_list').parent().removeClass('checkbox-unselected');
		$('#clone-content_list').parent().addClass('checkbox-selected');
	}
	}else{
		if($('#ul-clone-list-'+id+' #clone-assessment').is(':checked') || $('#ul-clone-list-'+id+' #clone-survey').is(':checked')){
			$('#ul-clone-list-'+id+' #clone-attachedcourses').attr('checked','checked');
			$('#ul-clone-list-'+id+' #clone-attachedcourses').parent().removeClass('checkbox-unselected');
			$('#ul-clone-list-'+id+' #clone-attachedcourses').parent().addClass('checkbox-selected');
}
	}
}

//Added by ganesh for custom attribute #custom_attribute_0078975
Drupal.ajax.prototype.commands.displayScreenWarningWizard = function(ajax, response, status) {
    try { 
        
    	this.currTheme = Drupal.settings.ajaxPageState.theme;
    	//var dupId = response.grpId; 
    	var name =  unescape(response.name).replace(/"/g, '&quot;');   
    	
		$('#delete-msg-wizard').remove();
	    var html = '';
	    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    	var title = name;

	    if(this.currTheme == 'expertusoneV2'){
	   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
	    } else {
	     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+'</td></tr>';
	    }
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);
 
	    var closeButt={};
	    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};

         if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
              closeButt[Drupal.t('Yes')]=function(){
            	  var esignObj = {'popupDiv':'displayScreenWarningWizard','esignFor':'addScreenDetails'};
	                      $.fn.getNewEsignPopup(esignObj); $(this).dialog('destroy');$(this).dialog('close');};
         }else{
        	 closeButt[Drupal.t('Yes')]=function(){  
        	   
        	   $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();
     		   $("#delete-msg-wizard").remove();  
			   $("#hidden-screen-button").click(); 
        	};
         }

	    $("#delete-msg-wizard").dialog({
	        position:[(getWindowWidth()-400)/2,200],
	        bgiframe: true,
	        width:300,
	        resizable:false,
	        modal: true,
	        title:Drupal.t("LBL2015"),//"title",
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:false,
	        zIndex : 10005,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg");
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

	    if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			/* $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');*/
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
	    }
	    $("#delete-msg-wizard").show();

		$('.ui-dialog-titlebar-close').click(function(){
	        $("#delete-msg-wizard").remove();
	    });
		if(this.currTheme == 'expertusoneV2'){
	    	changeDialogPopUI();
	    } 
			    
	      
	     
	   
    }
    catch(e){
      //Nothing to do
    }
  };

Drupal.ajax.prototype.commands.displayWarningWizard = function(ajax, response, status) {
    try {
    	this.currTheme = Drupal.settings.ajaxPageState.theme;
    	var dupId = response.grpId;
    	var name =  unescape(response.name).replace(/"/g, '&quot;');

	    $('#delete-msg-wizard').remove();
	    var html = '';
	    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    	var title = name;

	    if(this.currTheme == 'expertusoneV2'){
	   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+title+'</td></tr>';
	    } else {
	     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+title+'</td></tr>';
	    }
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);

	    var closeButt={};
	    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};

         if(availableFunctionalities.exp_sp_esignature != undefined && availableFunctionalities.exp_sp_esignature != ""){
              closeButt[Drupal.t('Yes')]=function(){
            	  var esignObj = {'popupDiv':'displayWarningWizard','esignFor':'displayWarningWizard', 'dupId':dupId, 'rowObj': this};
	                      $.fn.getNewEsignPopup(esignObj); $(this).dialog('destroy');$(this).dialog('close');};
         }else{
        	 closeButt[Drupal.t('Yes')]=function(){ callInsertProcess(dupId);};
         }

	    $("#delete-msg-wizard").dialog({
	        position:[(getWindowWidth()-400)/2,200],
	        bgiframe: true,
	        width:300,
	        resizable:false,
	        modal: true,
	        title:Drupal.t("Group"),//"title",
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:false,
	        zIndex : 10005,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg");
		 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');

	    if ( $.browser.msie && parseInt($.browser.version, 10)=='9' && this.currTheme == "expertusoneV2"|| $.browser.msie && parseInt($.browser.version, 10)=='8'&& this.currTheme == "expertusoneV2"){
			/* $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').before('<div class="white-btn-bg-left"></div>');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass('white-btn-bg-middle');
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').after('<div class="white-btn-bg-right"></div>');*/
			 $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').next('.white-btn-bg-right').css('margin-right','0px');
	    }
	    $("#delete-msg-wizard").show();

		$('.ui-dialog-titlebar-close').click(function(){
	        $("#delete-msg-wizard").remove();
	    });
		if(this.currTheme == 'expertusoneV2'){
	    	changeDialogPopUI();
	    }
    }
    catch(e){
      //Nothing to do
    }
  };
  function callInsertProcess(dupId,esign){
	  esign = typeof esign !== 'undefined' ? esign : '';
	  $('input[id="grp_war"]').attr('value',1);
	  $('input[id="grp_war_grpId"]').attr('value',dupId);
	  if(esign == 'esign'){
		  $("#esign-role-addedit-form").click();
	  }else{
		  $("input[name = 'grp-save']").click();
	  }
	  $('#delete-msg-wizard').remove();
	}

function callVisibility(qtipObj){
	
	if(typeof(qtipObj.dispGrpView) == 'undefined') qtipObj.dispGrpView='';
	if(typeof(qtipObj.catalogVisibleId) == 'undefined') qtipObj.catalogVisibleId='';
	
	if(document.getElementsByClassName('qtip-close-button') && qtipObj.catalogVisibleId.indexOf("AttachIdqtip_add_grp") <= 0){
	$('.qtip-close-button').click();
}	
	//console.log(paginationEnter);
	if(paginationEnter)
		return false;
	// Clone Onclick Disable
	var ddlist = $('#manage-clone-list' + qtipObj.entityId).css('visibility');
	if (ddlist == 'hidden') {
		$('#ul-clone-list-' + qtipObj.entityId).css('visibility', 'visible');
		$('#ul-clone-list-' + qtipObj.entityId).show();
	} else {
		$('#ul-clone-list-' + qtipObj.entityId).css('visibility', 'hidden');
	}
	$('.manage-clone-list').hide();
	
	if(qtipObj.dispGrpView == 'Y'){ // Added for this ticket #0042617 to show the Hidden tab

		var lId = $('#viewgroup-detail-wrapper #view-scroll-wrapper');
		var mypos = $('#' + qtipObj.popupDispId); // Declaring ID
		 // Popup Calculation
		var lheg = lId.height();
		var popoff = lId.offset();
		 // Action link Calculation
		var newlheg = mypos.height();
		var newpopoff = mypos.offset();

		var gridHeight = (lheg/2) + popoff.top;
		var linkHeight = newlheg + newpopoff.top;

		if(gridHeight < linkHeight){
			qtipObj.dispDown = '';
			if((linkHeight - gridHeight) > 100){
				lId.css("overflow","hidden");
				$('#viewgroup-detail-wrapper #view-scroll-wrapper .jspContainer').css("overflow","hidden");
			}else{
				lId.css("overflow","visible");
				$('#viewgroup-detail-wrapper #view-scroll-wrapper .jspContainer').css("overflow","visible");
			}
		}else{
			lId.css("overflow","visible");
			$('#viewgroup-detail-wrapper #view-scroll-wrapper .jspContainer').css("overflow","visible");
		}
	}else {
		$('#viewgroup-detail-wrapper #view-scroll-wrapper').css("overflow","hidden");
		$('#viewgroup-detail-wrapper #view-scroll-wrapper .jspContainer').css("overflow","hidden");
	}
	$('#group-control').remove();
	//console.log(qtipObj.catalogVisibleId);
	//console.log(qtipObj.catalogVisibleId.indexOf("AttachCrsIdqtip_visible_disp"));
	if(qtipObj.catalogVisibleId.indexOf("AttachCrsIdqtip_visible_disp") > 0 || qtipObj.catalogVisibleId.indexOf("AttachIdqtip_add_grp") > 0 ){
		var str = $('#program_attach_tabs .ui-state-active').attr('id');
		var currmod = str.split('-');
		//console.log(" string " + str);
		qtipObj.url = qtipObj.url + '/' + currmod[2] + '/' + $('#attach_course_dt form input[name="form_build_id"]').val(); 
	}
	if(qtipObj.catalogVisibleId.indexOf("AttachIdqtip_history") <= 0){
	$('.qtip-popup-visible').html('').hide();
	}else{
		$('.qtip-popup-history').html('').hide();
	}
	$('#' + qtipObj.popupDispId).qtipPopup({
		wid : qtipObj.wid,
		heg : qtipObj.heg,
		entityId : qtipObj.entityId,
		popupDispId : qtipObj.popupDispId,
		postype : qtipObj.postype,
		poslwid : (qtipObj.poslwid == '' || qtipObj.poslwid == undefined || qtipObj.poslwid == null) ? '' : qtipObj.poslwid,
		posrwid : (qtipObj.posrwid == '' || qtipObj.posrwid == undefined || qtipObj.posrwid == null) ? '' : qtipObj.posrwid,
		disp	: (qtipObj.qdis == '' || qtipObj.qdis == undefined || qtipObj.qdis == null) ? ''	: qtipObj.qdis,
		linkid	: qtipObj.linkid,
		onClsFn	: qtipObj.onClsFn,
		dispDown : (qtipObj.dispDown == undefined) ? '': qtipObj.dispDown,
	});
	setTimeout(function(){
		EXPERTUS_SMARTPORTAL_AbstractDetailsWidget.createLoader("paintContent"+ qtipObj.popupDispId);
		if('[qtipObj.linkid^=visible-sharelink]') {
			$('#sharelink_disp_div .survey-sharelink-main-wrapper .loadercontent .loaderimg').css('margin-top','-42px');
			$('.qtip_survey_sharelink .loadercontent .loaderimg').css('margin-top','-8px');
		}
	},10);
	//#custom_attribute_0078975
	if(qtipObj.entityType=='order'){ //For custom attribute order
		orderQtipVisible(qtipObj); // For Order	
	}else{
	$("#root-admin").data("narrowsearch").visiblePopup(qtipObj);
}
	
	 
}
// Visibility pop up close
function closeQtip(popupId,entId,onClsFn){
	try{
	
	   //#custom_attribute_0078975 Refresh the association when click on close button from show-in-screen Qtip
	   if(popupId.indexOf('qtip_showinscreen_dis')>=0){ 
	     $('#root-admin').data('narrowsearch').refreshLastAccessedRow();
	   }
	   
		if(typeof(onClsFn) == 'undefined') onClsFn='';
		if(popupId == '')
			$('.qtip-popup-visible').html('').hide();
		else
			$('#'+popupId+' #visible-popup-'+entId).html('').hide();

		if(typeof(onClsFn) == 'function') {
			onClsFn();
		}
	}catch(e){

	}
}
function checkCountryDisable(){
  if($('#add_grp_Country').is(':checked')){
	 $('#add_grp_State').attr('disabled', false);
  }else {
	 $('#add_grp_State').parent().removeClass('checkbox-selected');
	 $('#add_grp_State').parent().addClass('checkbox-unselected');
	 $('#add_grp_State').attr('checked','');
	 $('#add_grp_State').attr('disabled',true);
  }
}
function stateDisabledMessage(){
 if(!($('#add_grp_Country').is(':checked'))){
	 var error = new Array();
	 error[0] = Drupal.t('select a country');
	 var message_call = expertus_error_message(error,'error');
	 $('#show_expertus_message').show();
	 $('#show_expertus_message').html(message_call);
  }
}

function addslashes(string) {
    return string.replace(/'/g, '\\\'');
}

function removeCurrencyPopup(codeval,symbol){
	this.currTheme = Drupal.settings.ajaxPageState.theme;
	var uniqueClassPopup = '';
	 $('#delete-msg-wizard').remove();
	    var html = '';
	    html+='<div id="delete-msg-wizard" style="display:none; padding: 0px;">';
	    html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
	    if(this.currTheme == 'expertusoneV2'){
	   	 html+= '<tr><td style="padding: 30px 24px;" class="commanTitleAll">'+Drupal.t("MSG747")+' "'+codeval +' <span class="currency-override-bold">'+ symbol+'</span>"?'+'</td></tr>';
	    } else {
	     html+= '<tr><td color="#333333" style="padding: 30px 24px; text-align: justify;">'+Drupal.t("MSG747")+' "'+ codeval +' <span class="currency-override-bold">'+ symbol +'</span>"?'+'</td></tr>';
	    }
	    html+='</table>';
	    html+='</div>';
	    $("body").append(html);

	    var closeButt={};
	    closeButt[Drupal.t('LBL109')]=function(){ $(this).dialog('destroy');$(this).dialog('close');$('#delete-msg-wizard').remove();};

		 closeButt[Drupal.t('Yes')]=function(){
			 $("#root-admin").data("narrowsearch").createLoader("currency-detail-wrapper");
			 removeaddedcurrency(codeval);
		 };
	    $("#delete-msg-wizard").dialog({
	        position:[(getWindowWidth()-400)/2,200],
	        bgiframe: true,
	        width:300,
	        resizable:false,
	        modal: true,
	        title:Drupal.t('LBL749'),
	        buttons:closeButt,
	        closeOnEscape: false,
	        draggable:false,
	        zIndex : 10005,
	        overlay:
	         {
	           opacity: 0.9,
	           background: "black"
	         }
	    });
	    $('.ui-dialog').wrap("<div id='catalog-publish-unpublis-dialog' class='"+uniqueClassPopup+"'></div>");
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)').addClass("removebutton").end();
	    $(".removebutton").text(Drupal.t("No"));
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').before('<div class="admin-save-button-left-bg"></div>');
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').addClass("admin-save-button-middle-bg").end();
	    $('.ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)').after('<div class="admin-save-button-right-bg"></div>');
	    $("#delete-msg-wizard").show();

		$('.ui-dialog-titlebar-close').click(function(){
	        $("#delete-msg-wizard").remove();
	    });
		$('.admin-save-button-middle-bg').click(function(){
	        $("#delete-msg-wizard").remove();
	    });
		if(this.currTheme == 'expertusoneV2'){
	    	changeDialogPopUI();
	    }
}

function removeaddedcurrency(val) {
      $.ajax({
       	type: "GET",
       	url: "/?q=administration/sitesetup/config/currency/remove/"+val,
       	success: function(data) {
       			if(data=='success'){
       				$('.row-'+val).remove();
       				$(".currency-table-heading tbody tr").removeClass( "odd-list-class" );
       				$(".currency-table-heading tbody tr").removeClass( "even-list-class" );
       				$(".currency-table-heading tbody tr.rowtbody:nth-child(odd)").addClass("even-list-class");
       			    $(".currency-table-heading tbody tr.rowtbody:nth-child(even)").addClass("odd-list-class");
       			    dynamicWidthHeight('delete');
       			    $("#root-admin").data("narrowsearch").destroyLoader("currency-detail-wrapper");
       			}
       	}
       	});
}
function checkboxSelectedUnselectedCurrency(id){
	try{
		if($(id).attr('type')!='radio'){
			if($(id).is(':checked')){
				$(id).parent().removeClass('checkbox-unselected');
				$(id).parent().addClass('checkbox-selected');
			}
			else {
				$(id).parent().removeClass('checkbox-selected');
				$(id).parent().addClass('checkbox-unselected');
			}
			
		}
		var totalcheckbox = $('#currency-td-table .multichk').length;
    	var cheklen = $('#currency-td-table .checkbox-selected').length;
    	if(totalcheckbox==cheklen){
    		$('#currency_select').attr('checked', true);
    		$('.currency-muliselect').removeClass('checkbox-unselected').addClass('checkbox-selected');
    		$('.multichk').removeClass('checkbox-unselected').addClass('checkbox-selected');
    	} else {
    		$('#currency_select').attr('checked', false);
    		$('.currency-muliselect').removeClass('checkbox-selected').addClass('checkbox-unselected');
    	}	
	}catch(e){
		// to do
	}
}
function Currencycheckedall(){
	try{
		    $("#currency_select").change(function(){
		    	$(".attach-group-list").prop('checked', $(this).prop("checked"));			    	
		    	if($('#currency_select').attr('checked')) {
		    		$(this).attr('checked', true);
		    		$('.currency-muliselect').removeClass('checkbox-unselected').addClass('checkbox-selected');
		    		$('.multichk').removeClass('checkbox-unselected').addClass('checkbox-selected');
		    	} else{
		    		$(this).attr('checked', false);
		    		$('.currency-muliselect').removeClass('checkbox-selected').addClass('checkbox-unselected');
		    		$('.multichk').removeClass('checkbox-selected').addClass('checkbox-unselected');		    		
		    	}	
		    	return false;
		    });
	}

	catch(e){

	}
}
function dynamicWidthHeight(callfrom){
	  var scrol_height = '';
	  var table_height = $('#multi_currency_setup_div .currency-table-heading').height();
	  var table_width = $('#multi_currency_setup_div .currency-table-heading').width();
	  //console.log(table_height);
	  //console.log(table_width+'here');
	  if(table_height > 310 && table_width > 800){
		  var new_width = 825;
		  var new_height = 378;
		  $('#modal-content').css({"width":new_width,'height':new_height});
		  $('#tableholder').css({'height': '307px', 'width': '790px'});
		  $('#multi_currency_setup_div').css({'height': '307px', 'width': '790px', 'overflow': 'hidden'});
		  $("#multi_currency_setup_div").jScrollPane();
	  }else if(table_height <150 && table_width <165){
		  $('#modal-content').css({'height': '150px', 'width': '295px'});
		  $('.addedit-form-cancel-and-save-actions-row').css({'width':'90%','margin-left': '40px'});
		  $('#tableholder').css({'height': '60px', 'width': '240px'});
		  $('#multi_currency_setup_div').css({'height': '60px', 'width': '240px'});
		  $('.currency-table-heading').css({'width': '245px'});
		  if($('.rowtbody').length<=0){
			  $('.currency-table-heading').remove();
			  $('#multi_currency_setup_div').append("<div width=\"130px\" height=\"100px\" class=\"currency-table-heading admin-empty-text-msg\" style=\"border:0px;\">"+Drupal.t('MSG746')+"</div>" );
		  }

	  } else{
		  if($('.rowtbody').length<=0){
			  $('.currency-table-heading').remove();
			  $('#multi_currency_setup_div').append("<div width=\"130px\" height=\"100px\" class=\"currency-table-heading admin-empty-text-msg\" style=\"border:0px;\">"+Drupal.t('MSG746')+"</div>" );
		  }
		  //console.log('here');
		  var new_width = table_width +50;
		  var new_height = table_height+72;
		  table_width = table_width +15;
		  $('#modal-content').css({"width":new_width,'height':new_height});
		  $('#tableholder').css({'height': table_height+'px', 'width': table_width+'px'});
		  $('#multi_currency_setup_div').css({'height': table_height+'px', 'width': table_width+'px'});
		  var element = $('#multi_currency_setup_div').jScrollPane({});
		  var api = element.data('jsp');
		  api.destroy();
	  }
	  $('#modalContent').removeAttr( 'style' );
	  $('#modalContent').css({"z-index":"1001"});
	  $('#modalContent').css("position","absolute");
	  $('#modalContent').css("top", Math.max(0, (($(window).height() - $('#tableholder').outerHeight()) / 2) +  $(window).scrollTop()) + "px");
	  //console.log(Math.max(0, (($(window).width() - $('#tableholder').outerWidth()) / 2) +  $(window).scrollLeft()) + "px");
	  $('#modalContent').css("left", Math.max(0, (($(window).width() - $('#tableholder').outerWidth()) / 2) +  $(window).scrollLeft()) + "px");
}

(function($) {
	$.fn.dynamicWidthHeightAdd = function(){
	try{
		dynamicWidthHeight(false);
	}catch(e){
			// To Do
		}
	};

})(jQuery);


function dynamicstylechange(callfrom){
	var rowCount = $('.sf-table-heading tr').length;
	var consumer_sec_key = $( "input[name='consumer_secret_key']" ).val();
	var consumer_key = $( "input[name='consumer_key']" ).val();
	var sf_id = $( "input[name='expertusone_sf_id']" ).val();
	if(consumer_sec_key == ''){
		$( "input[name='consumer_secret_key']" ).addClass( "sfrow-error-check" );
	} if(consumer_key == ''){
		$( "input[name='consumer_key']" ).addClass( "sfrow-error-check" );
	} if(sf_id == ''){
		$( "input[name='expertusone_sf_id']" ).addClass( "sfrow-error-check" );
	}
	for(var i=0;i<rowCount-1;i++){
		//alert('#system_user_'+i);
		var system_user = $('#system_user_'+i).val();
		var system_pasword = $('#system_user_pwd_'+i).val();
		if(system_user == ''){
			$('#system_user_'+i).addClass( "sf-table-heading check-attributes > input sfrow-error-check" );
		}
		if(system_pasword == ''){
			$('#system_user_pwd_'+i).addClass( "sf-table-heading check-attributes > input sfrow-error-check" );
		}
	}
}

(function($) {
	$.fn.dynamicstylechangeAdd = function(){
	try{
		dynamicstylechange(false);
	}catch(e){
			// To Do
		}
	};

})(jQuery);

//0053694: SF-Survey | Survey code fadeout
(function($) {
	
	$.fn.callVtip = function() {
		try{
			vtip();
		}catch(e){
  			// To Do
  		}
	};
	/*Viswanathan added for #0074786*/
	$('.fivestar-widget a').live('click', function(e) {
		e.preventDefault();
   });
   // calendar icon - right click disable
   $('#calendar-view-icon').live('contextmenu', function() {
	   return false;
   });
   $('#calendar-view-icon').live('click', function(e) {
	   e.preventDefault();
      	drawCalendar();
   });
})(jQuery);

/* //0072940: Zoho# 18142- Instructor search box is not working
(function($) {
	$('#multiautocomplete').live("focus",  function(e) {
	    $(this).select();
    });	
})(jQuery);
 */
function changeDiscountType(){
	 try{
		 if($('#two-col-row-discount_type_row').find('.addedit-edit-dis_type option:selected').val() == 3){
			 $('#currency-list-discount').addClass('discount_currency_list_visible');
			 $('#currency-list-discount').removeClass('discount_currency_list_invisible');
			 $('.addedit-edit-dis_typeval').addClass('fixed_dusccount_type_applied');
		 } else{
			 $('#currency-list-discount').removeClass('discount_currency_list_visible');
			 $('#currency-list-discount').addClass('discount_currency_list_invisible');
			 $('.addedit-edit-dis_typeval').removeClass('fixed_dusccount_type_applied');
			 $('.discount_currency_list').val('');
		 }
	 }catch(e){
		 // to do
	 }
}
function drawCalendar()
{
	document.cookie="uri="+window.location.search;
	window.location.href="?q=admincalendar";
}
//Added by vetrivel.P for #0070900
function readCookie(name) {
	var nameEQ = name + "=";
	var ca = document.cookie.split(';');
	for(var i=0;i < ca.length;i++) {
		var c = ca[i];
		while (c.charAt(0)==' ') c = c.substring(1,c.length);
		if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
	}
	return null;
}
function urldecode(url) {
	  return decodeURIComponent(url.replace(/\+/g, ' '));
}
function eraseCookie(name) {
	createCookie(name,"",-1);
}
function createCookie(name,value,days) {
	if (days) {
		var date = new Date();
		date.setTime(date.getTime()+(days*24*60*60*1000));
		var expires = "; expires="+date.toGMTString();
	}
	else var expires = "";
	document.cookie = name+"="+value+expires+"; path=/";
}

function entityvalidation(entity_type){
	var obj = EXPERTUS_SMARTPORTAL_AbstractDetailsWidget;
	obj.createLoader('tab-content-main');
    document.getElementById(entity_type).click();
}

function downloadLink(btn_type){
    if(btn_type == 'user_upload_done_btn'){
	$('#download_template').css('visibility','visible');
	$('#download_template').css('display','block');
    }else if(btn_type == 'enrollment_upload_file'){
            $('#download_template_enroll').css('visibility','visible');
            $('#download_template_enroll').css('display','block');
   }else if(btn_type == 'enrollment_upload_class'){
            $('#download_template_class').css('visibility','visible');
            $('#download_template_class').css('display','block');

        }else{
            //do nothing
        }
}

function downloadSample(btn_type){
	
	var url = resource.base_host;
        if(btn_type == 'user_upload_done_btn'){
	var file = url+"/User_feed.csv";
        }else if(btn_type == 'enrollment_upload_file'){
            var file = url+"/Enrollment_feed.csv";
        }else{
            var file = url; // nothing to do here .. for future use
        }
	window.open(file);
	$('#manage-dd-list').css('visibility','hidden');
	$('#manage-dd-list').css('display','none');
	$('#manage-dd-list').hide();
	if(btn_type == 'user_upload_done_btn'){
	$('#download_template').css('visibility','hidden');
	$('#download_template').css('display','none');
	$('#download_template').hide();
        }else if(btn_type == 'enrollment_upload_file'){
            $('#download_template_enroll').css('visibility','hidden');
            $('#download_template_enroll').css('display','none');
            $('#download_template_enroll').hide();
        }else{
            // do nothing
        }
}
//#custom_attribute_0078975
function MoveTabPrev(itemcount) {
	//console.log('MoveTabPrev: '+itemcount);
	var div_width = $('#carousel_inner').width();
	var ul_width = $('#carousel_inner ul').width();
	var increment = '';
	var item_width = '';
	var left_indent = '';
	var current_position = '';
	var isChromium = window.chrome;
	$('#carousel_inner').css('width','auto');
	$('#carousel_inner ul').css('width','auto');
	var ul_actualwidth = $('#carousel_inner ul').width();
	$('#carousel_inner').css('width',div_width);
	$('#carousel_inner ul').css('width',ul_width);
	var lastli_width = parseInt($('#carousel_container #carousel_inner ul li:last').css('width'));
	// console.log('last li width: '+lastli_width);
	
	if(itemcount === 7) {
	
	if(Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'de'){
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			increment = 22;
		else
			increment = 27;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'it') {
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			increment = 93;
		else
			increment = 101;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'pt-pt') {
		if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
			increment = 164;
		else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			increment = 156;
		else
			increment = 152;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ru') {
		if(isChromium)
		{
		$('#carousel_container #carousel_inner').css('width', '410px');
		increment = 42;
		}
		else if(navigator.appVersion.indexOf("Safari")!= -1)
		{
		increment = 44;
		}
		else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			increment = 39;
		else
			increment = 32;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'es') {
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			increment = 99;
		else 
			increment = 104;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'fr') {
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			{
			increment = 23;
			$('#carousel_container #carousel_inner').css('width', '449px');
			}
		else
			increment = 30;
	}
	else
		increment = 30;
	
	if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'en-us') {
		if(navigator.userAgent.indexOf("Firefox")!= -1)
			{
			item_width = (ul_actualwidth - div_width) + 3;
		 console.log('item_width1: '+item_width+'  '+'ul_actualwidth1:'+ul_actualwidth+'  '+'div_width1:'+div_width+'  '+'ul_width1:'+ul_width);
			}
		else
			{
			//alert('hev'+navigator.userAgent.indexOf("chrome")+'navigator.userAgent'+navigator.userAgent);

			item_width = (ul_actualwidth - div_width) + 7;
		// console.log('navigator.userAgent.indexOf'+navigator.userAgent+'  '+'item_width3: '+item_width+'  '+'ul_actualwidth3:'+ul_actualwidth+'  '+'div_width3:'+div_width+'  '+'ul_width3:'+ul_width);
			}

	}
	else
		{
		item_width = (ul_width - div_width) - increment;
	
	
	 //console.log('item_width3: '+item_width+'  '+'ul_actualwidth3:'+ul_actualwidth+'  '+'div_width3:'+div_width+'  '+'ul_width3:'+ul_width+' '+'increment'+increment);
		}
	var left_indent = parseInt($('#carousel_inner ul').css('left')) + item_width;
	var current_position = parseInt($('#carousel_inner ul').css('left'));
	$('#carousel_container .first a').css('margin-right','0');
	if(current_position <= 0) {
		$('#carousel_container .first').css('display', 'none');
		$('#carousel_container').css('padding-left', '9px');
		$('#carousel_container .last').css('display', 'block');
		if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'en-us'){
			if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
				$('#carousel_container #carousel_inner').css('width', '377px');
			else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
				$('#carousel_container #carousel_inner').css('width', '383px');
			else
				$('#carousel_container #carousel_inner').css('width', '373px');
		}
		if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'it'){
			if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
				$('#carousel_container #carousel_inner').css('width', '428px');
			else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
				$('#carousel_container #carousel_inner').css('width', '433px');
			else
				$('#carousel_container #carousel_inner').css('width', '428px');
		}
		if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'pt-pt'){
			if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
				$('#carousel_container #carousel_inner').css('width', '400px');
			else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
				$('#carousel_container #carousel_inner').css('width', '405px');
			else
				$('#carousel_container #carousel_inner').css('width', '410px');
		}
	}
	
	}
	
	if(itemcount === 6) {
		// console.log('Hi dude came into movetabprev 6');
		
		//item_width = (navigator.appVersion.indexOf("Trident/7.0")!= -1) ? (parseInt((ul_width - div_width) / 2) + 6) : parseInt((ul_width - div_width) / 2);
				
		var width_calc = (ul_actualwidth - lastli_width) - 3;
		$('#carousel_container #carousel_inner').css('width', width_calc);
		
		left_indent = parseInt($('#carousel_inner ul').css('left')) - parseInt($('#carousel_inner ul').css('left'));
		current_position = parseInt($('#carousel_inner ul').css('left'));
		
		if(current_position <= 0) {
			$('#carousel_container .first').css('display', 'none');
			$('#carousel_container').css('padding-left', '9px');
			$('#carousel_container .last').css('display', 'block');
		}
	}
	
	$('#carousel_inner ul').animate({'left' : left_indent},{queue:true, duration:500},function(){  
    });
}
function MoveTabNext(itemcount) {
	 //console.log('MoveTabNext: '+itemcount);
	var div_width = $('#carousel_inner').width();
	var ul_width = $('#carousel_inner ul').width();
	var increment = '';
	var item_width = '';
	var left_indent = '';
	var current_position = '';
	var isChromium = window.chrome;
	$('#carousel_inner').css('width','auto');
	$('#carousel_inner ul').css('width','auto');
	var ul_actualwidth = $('#carousel_inner ul').width();
	$('#carousel_inner').css('width',div_width);
	$('#carousel_inner ul').css('width',ul_width);
	
	if(itemcount === 7) {
	
	if(Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'de'){
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			//increment = 17;
			increment = 22;
		else
			increment = 27;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'it') {
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			//increment = 123;
			increment = 128;
		else
			increment = 129;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'pt-pt') {
		if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
			increment = 228;
		else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			//increment = 223;
			increment = 219;
		else
			increment = 217;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'ru'){
		//if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
		if(isChromium)
			{
			$('#carousel_container #carousel_inner').css('width', '410px');
			increment = 42;
			}
		else if(navigator.appVersion.indexOf("Safari")!= -1)
			increment = 44;
		else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			increment = 39;
		else
			increment = 32;
	} 
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'es') {
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			{
			//increment = 99;
			increment = 102;
			$('#carousel_container #carousel_inner').css('width', '449px');
			}
		else 
			increment = 104;
	}
	else if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'fr') {
		if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
			{
			//increment = 23;
			increment = 26;
		$('#carousel_container #carousel_inner').css('width', '449px');
			}

		else
			increment = 30;
	}
	else
		increment = 30;
	
	if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'en-us') {
		if(navigator.userAgent.indexOf("Firefox")!= -1)
			{
			item_width = (ul_actualwidth - div_width) - 28;
			 //console.log('item_width1: '+item_width+'  '+'ul_actualwidth1:'+ul_actualwidth+'  '+'div_width1:'+div_width+'  '+'ul_width1:'+ul_width);
			}
		else if(navigator.appVersion.indexOf("Trident/7.0")!= -1)
		{
		item_width = (ul_actualwidth - div_width) - 34;
	 //console.log('navigator.userAgent.indexOf'+navigator.userAgent+'  '+'item_widthnext: '+item_width+'  '+'ul_actualwidthnext:'+ul_actualwidth+'  '+'div_widthnext:'+div_width+'  '+'ul_widthnext:'+ul_width);
		}
		else
			{
			item_width = (ul_actualwidth - div_width) - 24;
			 //console.log('item_width3: '+item_width+'  '+'ul_actualwidth3:'+ul_actualwidth+'  '+'div_width3:'+div_width+'  '+'ul_width3:'+ul_width);
			}
	}
	else
		{
		item_width = (ul_width - div_width) - increment;
	
	
	 //console.log('item_widthnext: '+item_width+'  '+'ul_actualwidthnext:'+ul_actualwidth+'  '+'div_widthnext:'+div_width+'  '+'ul_widthnext:'+ul_width+'  '+'increment'+increment);
		}
	left_indent = parseInt($('#carousel_inner ul').css('left')) - item_width;
	current_position = parseInt($('#carousel_inner ul').css('left'));
	$('#carousel_container .first a').css('margin-right','5px');
	if(current_position >= -162) {
		$('#carousel_container').css('padding-left', '0');
		$('#carousel_container .last').css('display', 'none');
		$('#carousel_container .first').css('display', 'block');
		if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'en-us'){
			if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
				$('#carousel_container #carousel_inner').css('width', '408px');
			else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
				$('#carousel_container #carousel_inner').css('width', '414px');
			else
				$('#carousel_container #carousel_inner').css('width', '404px');
		}
		if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'it'){
			if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
				$('#carousel_container #carousel_inner').css('width', '456px');
			else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
				$('#carousel_container #carousel_inner').css('width', '463px');
			else
				$('#carousel_container #carousel_inner').css('width', '456px');
		}
		if (Drupal.settings.user.language !== undefined && Drupal.settings.user.language == 'pt-pt'){
			if(isChromium || navigator.appVersion.indexOf("Safari")!= -1)
				$('#carousel_container #carousel_inner').css('width', '464px');
			else if (navigator.appVersion.indexOf("Trident/7.0")!= -1)
				$('#carousel_container #carousel_inner').css('width', '472px');
			else {
				$('#carousel_container #carousel_inner').css('width', '475px');
			}
		}
	}
		
	}
	
	if(itemcount === 6) {
		// console.log('Hi dude came into movetabnext 6');
		
		//item_width = (navigator.appVersion.indexOf("Trident/7.0")!= -1) ? (parseInt((ul_width - div_width) / 2) + 6) : parseInt((ul_width - div_width) / 2);
				
		var sort_width = parseInt($('#sort-bar-V2').width());
			// console.log('container width: '+sort_width);
		var actionbar_width = parseInt($('#narrow-search-actionbar').width());
			// console.log('actionbar width: '+actionbar_width);
		var carousel_inner_width = (sort_width - actionbar_width) - 45;
			// console.log('carousel inner width: '+carousel_inner_width);
		var firstli_width = parseInt($('#carousel_container #carousel_inner ul li:first').css('width'));
			// console.log('first li width: '+firstli_width);
		var secondli_width = parseInt($('#carousel_container #carousel_inner ul li:nth-child(2)').css('width'));
			// console.log('second li width: '+secondli_width);
		var thirdli_width = parseInt($('#carousel_container #carousel_inner ul li:nth-child(3)').css('width'));
			// console.log('third li width: '+thirdli_width);
		if(carousel_inner_width > (parseInt(ul_actualwidth) - firstli_width))
			item_width = firstli_width + 6;
		else if(carousel_inner_width > (parseInt(ul_actualwidth) - (firstli_width + secondli_width)))
			item_width = (firstli_width + secondli_width) + 11;
		else
			item_width = (firstli_width + secondli_width + thirdli_width) + 16;
			// console.log('item_width: '+item_width);
		$('#carousel_container #carousel_inner').css('width', carousel_inner_width);	
		
		left_indent = parseInt($('#carousel_inner ul').css('left')) - item_width;
		current_position = parseInt($('#carousel_inner ul').css('left'));
			
		if(current_position >= -162) {
			$('#carousel_container').css('padding-left', '0');
			$('#carousel_container .last').css('display', 'none');
			$('#carousel_container .first').css('display', 'block');
		}
	}

	$('#carousel_inner ul').animate({'left' : left_indent},{queue:true, duration:500},function(){  
    });
}
$('body').click(function(event){
	try{
	if(event.target.className != 'info-classroster-upload vtip'){
       $('#download_template_class_wrapper').hide();
        }
	}catch(e){
		// to do
	}
    });;
(function ($) {
	$.widget("ui.showmore", {
		options: {
			// showAlways: false,
			showMore: '#jqgrid-show-more',
			grid: null,
			gridWrapper: null,
		},
		_init: function () {
			try {
				// console.log('init here');
				this.refreshShowMore();
				this.attachShowMoreBehavior();
				} catch (e) {
				// console.log(e, e.stack);
			}
		},
		refreshShowMore: function() {
			try {
				// console.log('options = ', options);
				// console.log('this options = ', this.options);
				var _grid = $(this.options.grid);
				var _showMore = $(this.options.showMore);
				// var _showMoreWrapper = $(this.options.showMore).parent();
				var maxRec = _grid.getGridParam("rowNum");
				var actRec = _grid.getGridParam("reccount");
				// console.log('maxRec = ', maxRec, 'actRec = ', actRec, _grid.getGridParam("rowNum"));
				if (maxRec > actRec) {
					_showMore.hide();
				} else {
					_showMore.show();
				}
				_grid.find('tr.ui-widget-content.ui-widget-content-last-row').removeClass('ui-widget-content-last-row');
				_grid.find('tr.ui-widget-content').filter(":last").addClass('ui-widget-content-last-row');
			} catch(e) {
				// console.log(e, e.stack);
			}
		},
		attachShowMoreBehavior: function() {
			try {
				// console.log('attachShowMoreBehavior');
				var sm = this;
				var _showMore = $(this.options.showMore);
				if(_showMore.hasClass('show-more-attached') == false) {
					_showMore.bind('click', function () {
						sm.showMoreData();
					})
					/* .bind('click', function () {
						console.log('test log here');
					}) */
					.addClass('show-more-attached');

				}
			} catch(e) {
				// console.log(e, e.stack);
			}
		},
		showMoreData: function() {
			try {
				// console.log('showMoreData called');
				var obj = this;
				var _grid = $(this.options.grid);
				var _gridWrapper = $(this.options.gridWrapper);
				//return if there is already an ajax request in progress leave doing nothing
				//or return if there are no data to show more
				// console.log('showMoreData', this, this.options, _grid, _gridWrapper);
				// console.log('isAjax', grid.data('isAjax'), 'reccount', grid.getGridParam("reccount"), 'totalrecords', grid.data('totalrecords'));
				// if(grid.data('isAjax') || (grid.getGridParam("reccount") >= _grid.data('totalrecords')) || obj.showAlways) {
				if(_grid.data('isAjax')) {
					return;
				}
				var showMore = $(this.options.showMore);
				var obj = this;
				// options.obj = obj;
				var option = {
					beforeSend: function() {
						// showMore.hide();
						obj.createLoader(_gridWrapper.attr('id'));
						_gridWrapper.find('.loadercontent').css({
							'display': 'table'
						})
						.find('div:not(.loaderimg)').css({'display': 'table-cell', 'vertical-align': 'bottom'})
						.find('td').attr('valign', 'bottom');
						_grid.data('isAjax', true);
					},
					onComplete: function() {
						try {
							_grid.data('isAjax', false);
							obj.destroyLoader(_gridWrapper.attr('id'));
						} catch(e) {
							// console.log(e, e.stack);
						}
					},
					onSuccess: function() {
						// _grid.data('isAjax', false);
					},
					onError: function() {
						// _grid.data('isAjax', false);
						// obj.destroyLoader(_gridWrapper.attr('id'));
					},
					noData: function() {
						// _grid.data('isAjax', false);
						// obj.destroyLoader(_gridWrapper.attr('id'));
						showMore.hide();
						obj.refreshShowMoreDataOnScroll(false);
					},
					beforeAppend: function () {
						// console.log('beforeAppend', _grid.find('tr.ui-widget-content').filter(":last"));
						_grid.find('tr.ui-widget-content').filter(":last").removeClass('ui-widget-content-last-row');
					},
					afterAppend: function (data, count) {
						// console.log(_grid.getGridParam("rowNum"), count);
						if(_grid.getGridParam("rowNum") <= count) {
							showMore.show();
						} else {
							showMore.hide();
							obj.refreshShowMoreDataOnScroll(false);
						}
						// console.log(_grid.find('tr.ui-widget-content').filter(":last"));
						_grid.find('tr.ui-widget-content').filter(":last").addClass('ui-widget-content-last-row');
						// obj.destroyLoader(_gridWrapper.attr('id'));
					},

				};
				//append data to existing result set
				_grid.jqGrid('appendDataToGrid', option);
				obj.refreshShowMoreDataOnScroll(true);
				obj.attachMouseLeaveHandler();
			} catch(e) {
				 // window.console.log(e, e.stack);
			}
		},
		refreshShowMoreDataOnScroll: function(attach) {
			try {
				var obj = this;
				// console.log('refreshShowMoreDataOnScroll ', attach);
				if(attach) {
					if($(window).hasClass('scroll-showmore-attached') == false) {
						$(window).bind('scroll.showmore mousewheel.showmore', function(e) {
							if (typeof lastScrollTop == 'undefined' || lastScrollTop == null) {
								lastScrollTop = $(this).scrollTop();
							} else {
								var st = $(this).scrollTop();
								if (st > lastScrollTop) {
									// downscroll code
									// console.log('scroll Down');
									obj.showMoreDataOnScroll();
								}
								/* else {
									// upscroll code
									// console.log('scroll Up');
								} */
								lastScrollTop = st;
							}
						});
						$(window).addClass('scroll-showmore-attached');
					}
				} else {
					$(window).unbind('scroll.showmore')
					.unbind('mousewheel.showmore')
					.removeClass('scroll-showmore-attached');
					lastScrollTop = null;
				}
			} catch(e) {
				// window.console.log(e, e.stack);
			}
		},
		attachMouseLeaveHandler: function() {
			try {
				var obj = this;
				var _grid = $(this.options.grid);
				var _gridWrapper = $(this.options.gridWrapper);
				if(!_grid.hasClass('mouseleave-showmore-attached')) {
					$(_grid).bind('mouseleave.showmore', function(event) {
						// console.log('target-',$(event.target));
						// console.log('relatedTarget-',$(event.relatedTarget));
						// console.log('relatedTarget-',$(event.target));
						// window.console.log('mouseleave called');
						var comingfrom = event.toElement || event.relatedTarget;
						var isVtip = ($(comingfrom).attr('id') == 'vtip' || $(comingfrom).attr('id') == 'vtipArrow');
						if(!isVtip && $(comingfrom).parents('#'+_gridWrapper.attr('id')).length == 0) {
							obj.refreshShowMoreDataOnScroll(false);
							// $(_grid).unbind('mouseleave.showmore');
						}
					})
					.addClass('mouseleave-showmore-attached');
				}
			} catch(e) {
				// console.log(e, e.stack);
			}
		},
		showMoreDataOnScroll: function(event) {
			try {
				// var obj = event.data.obj;
				// console.log('showMoreDataOnScroll called');
				var obj = this;
				var grid = $(this.options.grid);
				if (grid.is(':hover')) {
				// console.log('showMoreDataOnScroll called hover true');
					// if(grid.getGridParam("reccount") < grid.data('totalrecords')) {
						obj.showMoreData();
						// console.log('showMoreDataOnScroll showMoreData called');
					// }
				}
			} catch(e) {
				// window.console.log(e, e.stack);
			}
		},
	});
	$.extend($.ui.showmore.prototype,EXPERTUS_SMARTPORTAL_AbstractManager, EXPERTUS_SMARTPORTAL_AbstractDetailsWidget,{defaults:{start:true,catStart:true}});
})(jQuery);;
