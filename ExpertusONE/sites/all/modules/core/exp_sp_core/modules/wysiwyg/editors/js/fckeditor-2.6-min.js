(function(a){Drupal.wysiwyg.editor.attach.fckeditor=function(b,e,d){var c=new FCKeditor(e.field,d.Width,d.Height,d.ToolbarSet);c.BasePath=d.EditorPath;c.Config.wysiwygFormat=e.format;c.Config.CustomConfigurationsPath=d.CustomConfigurationsPath;c.ReplaceTextarea();};Drupal.wysiwyg.editor.detach.fckeditor=function(e,h,d){var g=[];if(typeof h!="undefined"&&typeof FCKeditorAPI!="undefined"){var b=FCKeditorAPI.GetInstance(h.field);if(b){g[h.field]=b;}}else{g=FCKeditorAPI.__Instances;}for(var c in g){var b=g[c];b.UpdateLinkedField();if(d=="serialize"){continue;}var f=b.EditingArea.Window.parent;f.FCKTools.RemoveEventListener(b.GetParentForm(),"submit",b.UpdateLinkedField);f.FCKTools.RemoveEventListener(f,"unload",f.FCKeditorAPI_Cleanup);f.FCKTools.RemoveEventListener(f,"beforeunload",f.FCKeditorAPI_ConfirmCleanup);if(jQuery.isFunction(f.FCKIECleanup_Cleanup)){f.FCKIECleanup_Cleanup();}f.FCKeditorAPI_ConfirmCleanup();f.FCKeditorAPI_Cleanup();a("#"+c+"___Config").remove();a("#"+c+"___Frame").remove();
a("#"+c).show();}};Drupal.wysiwyg.editor.instance.fckeditor={init:function(b){b.FCK.Events.AttachEvent("OnFocus",function(d){Drupal.wysiwyg.activeId=d.Name;});var c=function(){};c.prototype=new b.FCKDataProcessor();c.prototype.ConvertToHtml=function(e){var e=b.FCKConfig.ProtectedSource.Revert(e);if(Drupal.settings.wysiwyg.plugins[b.wysiwygFormat]&&Drupal.settings.wysiwyg.plugins[b.wysiwygFormat].drupal){for(var d in Drupal.settings.wysiwyg.plugins[b.wysiwygFormat].drupal){if(typeof Drupal.wysiwyg.plugins[d].attach=="function"){e=Drupal.wysiwyg.plugins[d].attach(e,Drupal.settings.wysiwyg.plugins.drupal[d],b.FCK.Name);e=Drupal.wysiwyg.editor.instance.fckeditor.prepareContent(e);}}}e=b.FCKConfig.ProtectedSource.Protect(e);return b.FCKDataProcessor.prototype.ConvertToHtml.call(this,e);};c.prototype.ConvertToDataFormat=function(e,h,d,i){var g=b.FCKDataProcessor.prototype.ConvertToDataFormat.call(this,e,h,d,i);if(Drupal.settings.wysiwyg.plugins[b.wysiwygFormat]&&Drupal.settings.wysiwyg.plugins[b.wysiwygFormat].drupal){for(var f in Drupal.settings.wysiwyg.plugins[b.wysiwygFormat].drupal){if(typeof Drupal.wysiwyg.plugins[f].detach=="function"){g=Drupal.wysiwyg.plugins[f].detach(g,Drupal.settings.wysiwyg.plugins.drupal[f],b.FCK.Name);
}}}return g;};b.FCK.DataProcessor=new c();},addPlugin:function(d,c,e,b){if(typeof Drupal.wysiwyg.plugins[d]!="object"){return;}if(Drupal.settings.wysiwyg.plugins[b.wysiwygFormat].drupal[d].css){b.FCKConfig.EditorAreaCSS+=","+Drupal.settings.wysiwyg.plugins[b.wysiwygFormat].drupal[d].css;}b.FCKCommands.RegisterCommand(d,{Execute:function(){if(typeof Drupal.wysiwyg.plugins[d].invoke=="function"){var f={format:"html",node:b.FCKSelection.GetParentElement()};f.content=f.node.innerHTML;Drupal.wysiwyg.plugins[d].invoke(f,e,b.FCK.Name);}},GetState:function(){if(b.FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}var g=b.FCK.GetNamedCommandState(this.Name);if(!a.support.queryCommandEnabled&&g==FCK_TRISTATE_DISABLED){g=FCK_TRISTATE_OFF;}if(g==FCK_TRISTATE_OFF&&b.FCK.EditMode==FCK_EDITMODE_WYSIWYG){if(typeof Drupal.wysiwyg.plugins[d].isNode=="function"){var f=b.FCKSelection.GetSelectedElement();g=Drupal.wysiwyg.plugins[d].isNode(f)?FCK_TRISTATE_ON:FCK_TRISTATE_OFF;}}return g;},Name:d});
b.FCKToolbarItems.RegisterItem(d,new b.FCKToolbarButton(d,c.iconTitle,c.iconTitle,null,false,true,c.icon));},openDialog:function(b,c){},closeDialog:function(b){},prepareContent:function(b){return b;},insert:function(c){var b=FCKeditorAPI.GetInstance(this.field);b.InsertHtml(c);},getContent:function(){var b=FCKeditorAPI.GetInstance(this.field);return b.GetData();},setContent:function(c){var b=FCKeditorAPI.GetInstance(this.field);b.SetHTML(c);}};})(jQuery);