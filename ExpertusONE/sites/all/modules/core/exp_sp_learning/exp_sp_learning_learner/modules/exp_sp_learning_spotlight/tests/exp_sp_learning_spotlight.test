<?php 

class LearnerHomePageWidgets extends DrupalWebTestCase {
	
	private $test_case = array();
	private $basicParam = array(
		'_search'=>false,
		'rows'=>10,		// # rows to be select
		'page'=>1,		// Search page
		'sidx'=>false,		
		'sord'=>'desc',	// Sort order default desc
	); 
	public static function getInfo() {
		return array(
			'name' => 'Home page - Widgets',
			'description' => 'Home page - Widgets',
			'group' => 'exp_sp_learning_spotlight',
		);
	}
	
	public function setUp() {
		parent::setUp();
		$user = new stdClass();
		$user->name = 'admin';
		$user->pass_raw = 'welcome';
		$this->drupalLogin($user);
	}
	
	public function testLeaderboardDetails(){
	$this->setHttpReferer('learning/catalog-search');
	$this->drupalGet('');
	$this->getLeaderboardDetails();
	$this->leaderBoardSearch();
  	}
  	
	public function getLeaderboardDetails(){
	
	//$this->assertFieldById('block-exp-sp-learning-spotlight-leaderboard', '', 'LeaderBoard Rendered Successfully test');
		$this->assertRaw('<div id="block-exp-sp-announcement-learner-announcement1" class="block block-exp-sp-announcement first odd">','Slider loaded','exp_sp_learning_spotlight');
	    $this->assertRaw('<div id="block-exp-sp-learning-spotlight-leaderboard" class="block block-exp-sp-learning-spotlight first odd">','LeaderBoard Rendered Successfully', 'exp_sp_learning_spotlight');
		$this->assertRaw('<div class="block block-exp-sp-learning-spotlight even" id="block-exp-sp-learning-spotlight-most-popular">','Most popular Rendered Successfully', 'exp_sp_learning_spotlight');
		$this->assertRaw('<div class="block block-exp-sp-learning-spotlight last odd" id="block-exp-sp-learning-spotlight-highly-rated">','Highly rated Rendered Successfully', 'exp_sp_learning_spotlight');
		$this->assertRaw('<div class="block block-exp-sp-learning-spotlight last even" id="block-exp-sp-learning-spotlight-new-courses">','New Training Rendered Successfully', 'exp_sp_learning_spotlight');
		$webError = "Website encountered an unexpected error";
  	    $this->assertNoText(t($webError),'Web errors not found','exp_sp_learning_spotlight');
   }
   public function leaderBoardSearch($opt = array()) {
   $opt = array_merge($this->basicParam,$opt);
   // $opt = $this->basicParam;
	$srcRc = $this->drupalGetAJAX('administration/sitesetup/moduleinfo/userpoints/leaderboard-user/soundari%2520soundari',array('query'=>$opt));
  //  $srcRc = $this->drupalGetAJAX('administration/sitesetup/moduleinfo/userpoints/leaderboard-user/soundari%2520soundari&_search=false&nd=1462196200305&rows=10&page=1&sidx=&sord=asc');
    $this->assertRaw('<div class="user-desc">','Leaderboard search', 'exp_sp_learning_spotlight');
	$this->assertResponse(200,'Resonpose Code - 200');
	$this->assertNoText(t($this->webError),'Web errors not found','exp_sp_learning_spotlight');
   } 

	
}

?>