Drupal.behaviors.password=function(a){var b=Drupal.settings.password_policy;$("input.password-field:not(.password-processed)",a).each(function(){var g=$(this).addClass("password-processed");var n=$(this).parent();var j=700;$(this).after('<span class="password-strength"><span class="password-title">'+b.strengthTitle+'</span> <span class="password-result"></span></span>').parent();var l=$("span.password-strength",n);var e=$("span.password-result",l);n.addClass("password-parent");var f=$(this).parent().parent();$("input.password-confirm",f).after('<span class="password-confirm">'+b.confirmTitle+" <span></span></span>").parent().addClass("confirm-parent");var m=$("input.password-confirm",f);var i=$("span.password-confirm",f);var d=$("span",i);$(m).parent().after('<div class="password-description"></div>');var h=$("div.password-description",$(this).parent().parent()).hide();var k=function(){if(this.timer){clearTimeout(this.timer);}if(!g.val()){l.css({visibility:"hidden"});h.hide();return;}var o=Drupal.evaluatePasswordStrength(g.val());
e.html(o.strength==""?"":b[o.strength+"Strength"]);var p={low:"error",medium:"warning",high:"ok"};var r=p[o.strength]||"";if(this.passwordClass){e.removeClass(this.passwordClass);h.removeClass(this.passwordClass);}h.html(o.message);e.addClass(r);if(o.strength=="high"){h.hide();}else{h.addClass(r);}this.passwordClass=r;i.css({visibility:(m.val()==""?"hidden":"visible")});var s=g.val()==m.val();if(this.confirmClass){d.removeClass(this.confirmClass);}var q=s?"ok":"error";d.html(b["confirm"+(s?"Success":"Failure")]).addClass(q);this.confirmClass=q;l.css({visibility:"visible"});h.show();};var c=function(){if(this.timer){clearTimeout(this.timer);}if(!g.val()){l.css({visibility:"hidden"});h.hide();return;}this.timer=setTimeout(k,j);};g.keyup(c).blur(k);m.keyup(c).blur(k);});};