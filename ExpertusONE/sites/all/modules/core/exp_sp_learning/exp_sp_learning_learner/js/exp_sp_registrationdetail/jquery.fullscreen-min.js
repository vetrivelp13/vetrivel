(function(f){function e(){var g=document.documentElement;return("requestFullscreen" in g)||("mozRequestFullScreen" in g&&document.mozFullScreenEnabled)||("webkitRequestFullScreen" in g);}function d(g){if(g.requestFullscreen){g.requestFullscreen();}else{if(g.mozRequestFullScreen){g.mozRequestFullScreen();}else{if(g.webkitRequestFullScreen){g.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);}}}}function c(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||false;}function b(){if(document.exitFullscreen){document.exitFullscreen();}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}}}}function a(g){f(document).live("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){g(c());});}f.support.fullscreen=e();f.fn.fullScreen=function(i){if(!f.support.fullscreen||this.length!==1){return this;}if(c()){b();return this;}var h=f.extend({background:"#111",callback:f.noop(),fullscreenClass:"fullScreen"},i),j=this,g=f("<div>",{css:{background:h.background,width:"100%",height:"100%"}}).insertBefore(j).append(j);
j.addClass(h.fullscreenClass);d(g.get(0));g.click(function(k){if(k.target==this){b();}});j.cancel=function(){b();return j;};a(function(k){if(!k){f(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange");j.removeClass(h.fullscreenClass).insertBefore(g);g.remove();}if(h.callback){h.callback(k);}});return j;};f.fn.cancelFullScreen=function(){b();return this;};}(jQuery));