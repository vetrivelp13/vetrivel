var wysiwygWhizzywig={currentField:null,fields:{}};var buttonPath=null;var w=function(a){if(a){wysiwygWhizzywig.fields[wysiwygWhizzywig.currentField]+=a;}return wysiwygWhizzywig.fields[wysiwygWhizzywig.currentField];};var o=function(a){if(a=="whizzy"+wysiwygWhizzywig.currentField&&wysiwygWhizzywig.fields[wysiwygWhizzywig.currentField]){jQuery("#"+wysiwygWhizzywig.currentField).after('<div id="'+wysiwygWhizzywig.currentField+'-whizzywig"></div>');jQuery("#"+wysiwygWhizzywig.currentField+"-whizzywig").html(w());wysiwygWhizzywig.fields[wysiwygWhizzywig.currentField]="";}if(jQuery("#"+a).size()){return jQuery("#"+a).get(0);}return jQuery("#"+a,w()).get(0);};(function(a){Drupal.wysiwyg.editor.attach.whizzywig=function(b,e,c){if(c.buttonPath){window.buttonPath=c.buttonPath;}if(c.toolbarImagePath){btn._f=c.toolbarImagePath;}else{window.buttonPath="textbuttons";}wysiwygWhizzywig.currentField=e.field;wysiwygWhizzywig.fields[wysiwygWhizzywig.currentField]="";$field=a("#"+e.field);var d=Drupal.wysiwyg.instances[e.field];
d.originalStyle=$field.attr("style");$field.css("width",$field.width()+"px");makeWhizzyWig(e.field,(c.buttons?c.buttons:"all"));a("#whizzy"+e.field).contents().find("body").html(tidyD($field.val()));};Drupal.wysiwyg.editor.detach.whizzywig=function(d,f,b){var e=function(h){var j=whizzies[h],i=a("#"+j),g=Drupal.wysiwyg.instances[j];i.val(g.getContent());if(b=="serialize"){return;}a("#"+j+"-whizzywig").remove();whizzies.splice(h,1);i.removeAttr("style").attr("style",g.originalStyle);};if(typeof f!="undefined"){for(var c=0;c<whizzies.length;c++){if(whizzies[c]==f.field){e(c);break;}}}else{while(whizzies.length>0){e(0);}}};Drupal.wysiwyg.editor.instance.whizzywig={insert:function(b){insHTML(b.replace(/^js:/,"js&colon;"));},setContent:function(b){if($field.css("display")=="block"){a("#"+this.field).val(b);}else{var c=a("#whizzy"+this.field).contents()[0];c.open();c.write(b);c.close();}},getContent:function(){var b=a(a("#whizzy"+this.field).contents()[0].documentElement).clone()[0].ownerDocument;
if($field.css("display")=="block"){b.body.innerHTML=a("#"+this.field).val();}return tidyH(b);}};})(jQuery);