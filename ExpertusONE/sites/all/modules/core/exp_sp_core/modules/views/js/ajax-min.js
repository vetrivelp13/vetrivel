(function(a){Drupal.ajax.prototype.commands.viewsSetForm=function(g,c,b){var f=Drupal.settings.views.ajax.title;var e=Drupal.settings.views.ajax.id;var h=Drupal.settings.views.ajax.popup;a(f).html(c.title);a(e).html(c.output);a(h).dialog("open");Drupal.attachBehaviors(a(h),g.settings);if(c.url){var d=a("input[type=submit], button",e);d.click(function(i){this.form.clk=this;});d.mousedown(function(i){this.form.clk=this;});a("form",e).once("views-ajax-submit-processed").each(function(){var j={url:c.url,event:"submit",progress:{type:"throbber"}};var i=a(this);var k=i.attr("id");Drupal.ajax[k]=new Drupal.ajax(k,this,j);Drupal.ajax[k].form=i;});}Drupal.viewsUi.resizeModal();};Drupal.ajax.prototype.commands.viewsDismissForm=function(d,c,b){Drupal.ajax.prototype.commands.viewsSetForm({},{title:"",output:Drupal.settings.views.ajax.defaultForm});a(Drupal.settings.views.ajax.popup).dialog("close");};Drupal.ajax.prototype.commands.viewsHilite=function(d,c,b){a(".hilited").removeClass("hilited");a(c.selector).addClass("hilited");
};Drupal.ajax.prototype.commands.viewsAddTab=function(f,d,c){var g="#views-tab-"+d.id;a("#views-tabset").viewsAddTab(g,d.title,0);a(g).html(d.body).addClass("views-tab");var e=g.replace("#views-tab-","");a("#preview-display-id").append('<option selected="selected" value="'+e+'">'+d.title+"</option>");Drupal.attachBehaviors(g);var b=a.viewsUi.tabs.instances[a("#views-tabset").get(0).UI_TABS_UUID];a("#views-tabset").viewsClickTab(b.$tabs.length);};Drupal.ajax.prototype.commands.viewsShowButtons=function(d,c,b){a("div.views-edit-view div.form-actions").removeClass("js-hide");a("div.views-edit-view div.view-changed.messages").removeClass("js-hide");};Drupal.ajax.prototype.commands.viewsTriggerPreview=function(d,c,b){if(a("input#edit-displays-live-preview").is(":checked")){a("#preview-submit").trigger("click");}};Drupal.ajax.prototype.commands.viewsReplaceTitle=function(g,d,c){var h=parent.document;var f=h.title;var b=d.siteName.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var e=new RegExp(".+ (.) "+b);
h.title=f.replace(e,d.title+" $1 "+d.siteName);a("h1.page-title").text(d.title);a("h1#overlay-title").text(d.title);};Drupal.theme.tableDragChangedWarning=function(){return[];};Drupal.behaviors.livePreview={attach:function(b){a("input#edit-displays-live-preview",b).once("views-ajax-processed").click(function(){if(a(this).is(":checked")){a("#preview-submit").click();}});}};Drupal.behaviors.syncPreviewDisplay={attach:function(b){a("#views-tabset a").once("views-ajax-processed").click(function(){var c=a(this).attr("href");var d=c.substr(11);a("#views-live-preview #preview-display-id").val(d);}).addClass("views-ajax-processed");}};Drupal.behaviors.viewsAjax={collapseReplaced:false,attach:function(d,e){if(!e.views){return;}var b=a(e.views.ajax.popup,d);b.dialog({autoOpen:false,dialogClass:"views-ui-dialog",modal:true,position:"center",resizable:false,width:750});var c={event:"click",progress:{type:"throbber"}};a("a.views-ajax-link",d).once("views-ajax-processed").each(function(){var g=c;if(a(this).attr("href")){g.url=a(this).attr("href");
}var f=a(this).attr("id");Drupal.ajax[f]=new Drupal.ajax(f,this,g);});a("div#views-live-preview a").once("views-ajax-processed").each(function(){if(!a(this).attr("href")){return true;}var g=c;g.url=a(this).attr("href");if(Drupal.Views.getPath(g.url).substring(0,21)!="admin/structure/views"){return true;}g.wrapper="views-live-preview";g.method="html";var f=a(this).attr("id");Drupal.ajax[f]=new Drupal.ajax(f,this,g);});a("div#views-live-preview input[type=submit]").once("views-ajax-processed").each(function(f){a(this).click(function(){this.form.clk=this;return true;});var h=c;h.url=a(this.form).attr("action");if(Drupal.Views.getPath(h.url).substring(0,21)!="admin/structure/views"){return true;}h.wrapper="views-live-preview";h.method="html";h.event="click";var g=a(this).attr("id");Drupal.ajax[g]=new Drupal.ajax(g,this,h);});if(!this.collapseReplaced&&Drupal.collapseScrollIntoView){this.collapseReplaced=true;Drupal.collapseScrollIntoView=function(g){for(var i=a(g);i.get(0)!=document&&i.size()!=0;
i=i.parent()){if(i.css("overflow")=="scroll"||i.css("overflow")=="auto"){if(Drupal.viewsUi.resizeModal){if(a(".views-ui-dialog").height()<parseInt(a(window).height()*0.8)){Drupal.viewsUi.resizeModal("",true);}}return;}}var f=document.documentElement.clientHeight||document.body.clientHeight||0;var l=document.documentElement.scrollTop||document.body.scrollTop||0;var k=a(g).offset().top;var j=55;if(k+g.offsetHeight+j>f+l){if(g.offsetHeight>f){window.scrollTo(0,k);}else{window.scrollTo(0,k+g.offsetHeight-f+j);}}};}}};})(jQuery);