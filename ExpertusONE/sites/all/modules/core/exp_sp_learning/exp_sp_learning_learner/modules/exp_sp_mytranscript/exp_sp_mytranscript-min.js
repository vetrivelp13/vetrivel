(function(a){a.widget("ui.mytranscript",{_init:function(){try{var b=this;this.myTransUserId=this.getLearnerId();this.currTheme=Drupal.settings.ajaxPageState.theme;var d=document.location.toString();var c=d.split("?q=");var f=c[1];if(f.search("my-profile")>1){this.renderMyTranscript();}this.totalRecords=0;this.pageNo=0;}catch(g){}},showMore:function(c){try{if(a(c).hasClass("tree")){a(c).css("visibility","hidden").parents("table").next().toggle().css("width","100%");}else{a(c).parents(".mt-action-table").toggle().prev("table").find("span.tree").css("visibility","visible");}}catch(b){}},paintMyTranscript:function(p,g,o){try{var h=o.title;var q=o.short_title;var w=o.object_type_name;var c=o.enroll_id;var j=o.comp_date;var i=o.class_id;var d=o.score;var k=o.grade;var f=o.type;var l=o.image_url;var x=o.argument_type;var t=o.cstatus;var s=a("#div_my_transcript").data("mytranscript").constructUrl("learning/class-details/");var v="$('#div_my_transcript').data('mytranscript').showMore(this)";var n="";
var r="";var b=[];var z;var y="";if(w){if(w=="Web-based"){z=Drupal.t("Web-based");}else{if(w=="Virtual Class"){z=Drupal.t("Virtual Class");}else{if(w=="Video"){z=Drupal.t("Video");}else{if(w=="Classroom"){z=Drupal.t("Classroom");}else{if(w=="Certification"){z=Drupal.t("Certification");}else{if(w=="Curricula"){z=Drupal.t("Curricula");}else{if(w=="Learning Plan"){z=Drupal.t("Learning Plan");}}}}}}}}(j=="-")?"":b.push('<span class="class-info vtip" title="'+Drupal.t("LBL027")+'"> '+Drupal.t("LBL027")+": "+j+"</span>");if(x!="mycertificate"){if(d!="0"){(d=="-")?"":b.push('<span class="class-info vtip" title='+Drupal.t("LBL668")+"> "+Drupal.t("LBL668")+": "+d+"</span>");}}n+='<div class="my-transcript-item clearfix">';n+='<table border="0" cellpadding="0" cellspacing="0" class="mt-content-table"><tr>';n+='<td class="my-transcript-image">';n+='<div><div title="'+z+'" class="'+l+' vtip"></div></div>';n+="</td>";n+='<td class="my-transcript-desc">';var A=Drupal.t("LBL205");var m=Drupal.t("MSG755");
if(t=="Y"){y="'window.open(\"printcertificate.php?enrollid="+c+"&classid="+i+"&userid="+a("#div_my_transcript").data("mytranscript").myTransUserId+"&certifyfrom="+f+'", "PrintCertificate", "width=1050, height=900, toolbar=yes, location=yes, directories=yes, status=yes, menubar=yes, scrollbars=yes, copyhistory=yes, resizable=yes")\'';}else{y='\'$("body").data("learningcore").callMessageWindow("'+A+'","'+m+"\")'";}if(a("#salesforce_my_transcripts").length){n+="<div class=\"profile-my-certificate\"><span class=\"transcript-item-title vtip\" onclick=\"$('body').data('printcertificate').getPrintcertificateDetails('"+c+"','"+i+"',"+a("#div_my_transcript").data("mytranscript").myTransUserId+",'"+f+"','div_my_transcript',800,900);\" title=\""+h.replace(/"/g,"&quot;")+'" >'+q+"</span></div>";}else{n+='<div class="profile-my-certificate  limit-title-row"><span class="limit-title  transcript-item-title vtip" onclick='+y+' title="'+h.replace(/"/g,"&quot;")+'" >'+q+"</span></div>";}n+='<div class="my-class-info clearfix">';
a.each(b,function(e,B){n+=r+B;r='<span class="seperator">|</span>';});n+="</div>";n+="</td>";n+="</tr></table>";n+="</div>";return n;}catch(u){}},renderMyTranscript:function(){try{var i=a("#div_my_transcript").data("mytranscript");var f=document.location.toString();var d=f.split("?q=");var g=d[1];if(g.search("my-profile")>1){if(this.currTheme=="expertusoneV2"){var b=260;}else{var b=268;}}else{var b=a("#div_my_transcript_start").width();}var c={datatype:"json",mtype:"GET",colNames:[""],colModel:[{name:"id",index:"id",width:b,title:false,sortable:false,formatter:i.paintMyTranscript}],rowNum:parseInt(a("#exp_sp_mytranscript_block_max_list_count").val()),viewrecords:true,loadui:false,height:"auto",header:false,pager:"#my_transcript_pager",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",toppager:false,emptyrecords:"",loadtext:"",recordtext:"",beforeRequest:i.myTranscriptBeforeRequest,gridComplete:i.myTranscriptGridComplete,loadComplete:i.myTranscriptLoadComplete,totalRecords:0,pageNo:0};if(g.search("my-profile")>1){c.url=this.constructUrl("learning/my-transcript/mycertificate");
}else{c.url=this.constructUrl("learning/my-transcript/mytranscript");c.rowNum=10;c.scroll=false;c.pager="";}a("#my_transcript_jqgrid").jqGrid(c);a(".ui-jqgrid").css("margin","0px");}catch(h){console.log(h);}},myTranscriptBeforeRequest:function(){try{a("#div_my_transcript").data("mytranscript").createLoader("div_my_transcript_start");}catch(b){}},myTranscriptGridComplete:function(){try{a("#gbox_my_transcript_jqgrid .ui-jqgrid-hdiv").remove();a("#gbox_my_transcript_jqgrid").show();a("#div_my_transcript").data("mytranscript").destroyLoader("div_my_transcript_start");a("#my_transcript_pager_left, #my_transcript_pager_right").hide();a(".ui-pg-table").attr("align","right");a("#my_transcript_jqgrid *").css("border-right","none 0px");}catch(b){}},myTranscriptLoadComplete:function(f){try{var b=parseInt(a("#exp_sp_mytranscript_block_max_list_count").val());a("#my_transcript_jqgrid").setGridParam("totalRecords",f.records);a("#div_my_transcript").data("mytranscript").totalRecords=f.records;a("#my_transcript_jqgrid").setGridParam("pageNo",f.page);
a("#div_my_transcript").data("mytranscript").pageNo=f.page;if(f.records<=b){a("#my_transcript_pager").hide();}var i=a("#my_transcript_jqgrid").jqGrid("getDataIDs");var c=a("#salesforce_canvas_widget").attr("data-from-salesforce");if(typeof c!==typeof undefined&&c!==false&&c=="1"){setTimeout(function(){if(i.length<=0){a("#my_transcript_msg").show();a("#my_transcript_list").hide();}else{a("#my_transcript_msg").hide();a("#my_transcript_list").show();}},200);}else{if(i.length<=0){a("#my_transcript_msg").show();a("#my_transcript_list").hide();}else{a("#my_transcript_msg").hide();a("#my_transcript_list").show();}}a(".my-transcript-item").removeClass("my-transcript-last");a(".my-transcript-item").eq(-1).addClass("my-transcript-last");var k=document.location.toString();var d=k.split("?q=");var m=d[1];if(m.search("enrollment-search")>1){var i=a("#div_my_transcript").data("mytranscript").totalRecords;if(i<=0){a("#my_transcript_msg").show();a("#my_transcript_list").hide();}else{a("#my_transcript_msg").hide();
a("#my_transcript_list").show();}vtip();var l=0;var j=Math.ceil(i/10);var h=1;a("#my_transcript_jqgrid tr.ui-widget-content:not(.jqgfirstrow):lt(8)").each(function(e){l+=a(this).height();});a("#div_my_transcript_start").css({height:l+"px",overflow:"hidden"});if(i>8){initializeJScrollPane("transcript");}}this.currTheme=Drupal.settings.ajaxPageState.theme;vtip();a("#my_transcript_list .limit-title").trunk8(trunk8.transcript_title);}catch(g){}}});a.extend(a.ui.mytranscript.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);})(jQuery);$(function(){try{$("#div_my_transcript").mytranscript();}catch(a){}});