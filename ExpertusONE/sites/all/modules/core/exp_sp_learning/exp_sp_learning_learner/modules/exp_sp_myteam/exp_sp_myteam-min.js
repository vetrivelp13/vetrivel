(function(a){a.widget("ui.lnrmyteamsearch",{_init:function(){try{var c=this;var b="";this.searchStrValue=b;this.renderSearchResults(b);}catch(d){}},showUserProfile:function(b,c){try{var f=this;a("#user-detail-loader-"+b).show();url=f.constructUrl("learning/myteam-profile-view/"+b);a.ajax({type:"POST",url:url,data:"",success:function(e){e=a.trim(e);f.renderUserPopup(e,c);a("#user-detail-loader-"+b).hide();}});}catch(d){}},renderUserPopup:function(f,d){try{a("#myteam-show-user-result").remove();var b="";var c=Drupal.t("LBL762")+" "+d;b+='<div id="myteam-show-user-result" class="myteam-user-profile-cls">'+f+"</div>";a("body").append(b);a("#myteam-show-user-result").dialog({position:[(getWindowWidth()-600)/2,100],bgiframe:true,width:600,resizable:false,modal:true,title:SMARTPORTAL.t(c),closeOnEscape:false,draggable:true,overlay:{opacity:0.5,background:"black"}});a("#myteam-show-user-result").show();a(".ui-dialog-titlebar-close").click(function(){a("#myteam-show-user-result").remove();});}catch(g){}},rejectWizard:function(g,d,b,o,f,n,l){try{a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintMyclassContentResults"+g);
var m="";var c=0;var j=0;if(availableFunctionalities.exp_sp_commerce!=undefined&&availableFunctionalities.exp_sp_commerce!=""){m="1";}var p={};a("#dropMsg-wizard").remove();html="";html+='<div id="dropMsg-wizard" style="display:none; padding: 2px;">';html+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';html+='<tr><td height="30"></td></tr>';html+="<tr>";html+='<td align="center" id="dropmsg-content"><span>'+Drupal.t("LBL416")+"</span></td>";html+="</tr>";html+="</table>";html+="</div>";a("body").append(html);a("#dropMsg-wizard").dialog({position:[(getWindowWidth()-500)/2,100],autoOpen:false,bgiframe:true,width:500,resizable:false,modal:true,title:Drupal.t("LBL3081")+" "+Drupal.t("Canceled"),buttons:p,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});a(".ui-dialog").wrap("<div id='my-team-reject-dialog'></div>");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');
a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a("#dropMsg-wizard").show();a(".ui-dialog-titlebar-close").click(function(){a("#dropMsg-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(g);});a("#lnr-myteam-search").data("lnrmyteamsearch").getDropPolicyCall(g,d,f,n,m,c,b,j,l);}catch(h){}},getDropPolicyCall:function(h,d,n,g,o,c,p,l,m){try{var b=this.constructUrl("ajax/get-droppolicy/"+h+"/"+n+"/"+d+"/"+g+"/"+o+"/"+c+"/"+l);var f=this;a.ajax({type:"POST",url:b,data:"",success:function(q){a("body").append("<script>"+q+"<\/script>");var v={};var t=a("#gview_paintContentResults").find("#complete-confirmation-wizard_"+h).val();var r=Drupal.t("Canceled");if(n=="tp"){var e=Drupal.t("Training Plan");}else{var e=Drupal.t("Class");}if(drop_policy_info.next_action=="drop"){a("#dropmsg-content").html("<span>"+Drupal.t("MSG822",{"@learner_name":t,"@status":r,"@objtype":e})+"</span>");
v[Drupal.t("LBL109")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#dropMsg-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(h);};if(availableFunctionalities.exp_sp_esignature!=undefined&&availableFunctionalities.exp_sp_esignature!=""){var s={popupDiv:"my-team-reject-dialog",esignFor:"ManagerReject",userId:h,enrolledId:d,classTitle:p,baseType:n,classId:g,trid:m,isCommerceEnabled:o,assMand:c,refundFlag:""};v[Drupal.t("Yes")]=function(){a.fn.getNewEsignPopup(s);};}else{v[Drupal.t("Yes")]=function(){a("#lnr-myteam-search").data("lnrmyteamsearch").dropEnrollCall(h,g,d,n,"",o,c,p,m);a("#dropmsg-content").html(Drupal.t("MSG424"));};}}else{if(drop_policy_info.next_action=="showmsg"){a("#dropmsg-content").html("<span>"+SMARTPORTAL.t(drop_policy_info.msg)+"</span>");var u="";u+="<span><b>"+Drupal.t("LBL083")+" : </b>"+(HtmlEncode(decodeURIComponent(p)))+"</span>";u+="<br/><br/>";u+="<span>"+SMARTPORTAL.t(drop_policy_info.msg)+"</span>";a("#dropmsg-content").html(u);
v[Drupal.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#dropMsg-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(h);};}else{if(drop_policy_info.next_action=="showdroppolicy"){var u="";if(drop_policy_info.deducted_amount==0){u+="<span>"+Drupal.t("MSG265")+"<br/> </span>";u+="<br/><br/>";u+="<span>"+Drupal.t("MSG266")+"</span>";}else{if(drop_policy_info.refund_amt!=null&&drop_policy_info.refund_amt!=undefined&&drop_policy_info.refund_amt!=""&&drop_policy_info.refund_amt!=0){drop_policy_info.refund_amt=drop_policy_info.refund_amt.toFixed(2);}else{drop_policy_info.refund_amt="0.00";}if(drop_policy_info.deducted_amount!=null&&drop_policy_info.deducted_amount!=undefined&&drop_policy_info.deducted_amount!=""&&drop_policy_info.deducted_amount!=0){drop_policy_info.deducted_amount=drop_policy_info.deducted_amount.toFixed(2);}else{drop_policy_info.deducted_amount="0.00";}u+="<span>"+Drupal.t("MSG402")+" "+drop_policy_info.currency_type+" "+drop_policy_info.deducted_amount+" "+Drupal.t("MSG401")+"</span>";
u+="<br/><br/>";u+='<span class="dropmsgTitle">'+Drupal.t("LBL1165")+": </span>"+drop_policy_info.currency_type+" "+drop_policy_info.refund_amt;u+="<br/><br/>";u+="<span>"+Drupal.t("MSG266")+"</span>";}a("#dropmsg-content").html(u);v[Drupal.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#dropMsg-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(h);};if(availableFunctionalities.exp_sp_esignature!=undefined&&availableFunctionalities.exp_sp_esignature!=""){var s={popupDiv:"my-team-reject-dialog",esignFor:"ManagerReject",userId:h,enrolledId:d,classTitle:p,learningType:n,classId:g,trid:m,isCommerceEnabled:o,assMand:c,refundFlag:"true"};v[Drupal.t("Yes")]=function(){a.fn.getNewEsignPopup(s);};}else{v[Drupal.t("Yes")]=function(){a("#lnr-myteam-search").data("lnrmyteamsearch").dropEnrollCall(h,g,d,n,"true",o,c,p,m);a("#dropmsg-content").html(Drupal.t("MSG424"));};}}}}a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("paintMyclassContentResults"+h);
a("#dropMsg-wizard").dialog("open");a("#dropMsg-wizard").dialog("option","buttons",v);this.currTheme=Drupal.settings.ajaxPageState.theme;a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){changeDialogPopUI();}}});}catch(j){}},dropEnrollCall:function(j,p,f,n,h,o,d,c,m){try{closeButt=new Array();a("#dropMsg-wizard").dialog("option","buttons",closeButt);if(n=="tp"){var b=this.constructUrl("ajax/drop-lp/"+f+"/"+p+"/"+h+"/"+o+"/"+d+"/1");}else{var b=this.constructUrl("ajax/drop-enroll/"+j+"/"+n+"/"+f+"/"+h+"/"+o+"/"+d+"/1");}a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");
var g=this;a.ajax({type:"POST",url:b,data:"",success:function(e){a("#paintMyclassContentResults"+j).trigger("reloadGrid",[{page:1}]);a("body").append("<script>"+e+"<\/script>");var q=drop_policy_result.status;var r;if(q=="success"){var s=Drupal.t("MSG416");r=s+" - "+(HtmlEncode(decodeURIComponent(c)))+".";a("#my-team-reject-dialog .ui-dialog-buttonpane .ui-dialog-buttonset div.admin-save-button-left-bg").remove();a("#my-team-reject-dialog .ui-dialog-buttonpane .ui-dialog-buttonset div.admin-save-button-right-bg").remove();a("#my-team-reject-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").css("margin-right","-14px");a("#dropMsg-wizard").remove();a("#dropmsg-content").remove();}else{if(q=="cannotcancel"){r=Drupal.t("MSG406");}else{r=Drupal.t("ERR144")+" "(HtmlEncode(decodeURIComponent(c)));}}a("#dropmsg-content").html("<span>"+r+"</span>");a("#dropMsg-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("searchRecordsPaint");}});}catch(l){}},rejectWizard_old:function(j,d,b,o,g,n,m){try{unescape(b);
if(g=="Program"){var f=Drupal.t("Training Plan");}else{var f=Drupal.t("Class");}a("#reject-wizard").remove();var h="";h+='<div id="reject-wizard" style="display:none; padding: 0px;">';h+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';h+='<tr><td height="30"></td></tr>';h+="<tr>";h+='<td align="center" class="commanTitleAll"><span>'+Drupal.t("MSG415")+" "+f+",</span></td>";h+="</tr>";h+="<tr>";h+='<td align="center"><span>"'+b+'"</span></td>';h+="</tr>";h+='<tr><td height="25"></td></tr>';h+="</table>";h+="</div>";a("body").append(h);var p={};p[Drupal.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#reject-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(j);};if(availableFunctionalities.exp_sp_esignature!=undefined&&availableFunctionalities.exp_sp_esignature!=""){var c={popupDiv:"my-team-reject-dialog",esignFor:"ManagerReject",userId:j,enrolledId:d,classTitle:b,rowObj:o,learningType:g,classId:n,trid:m};
p[Drupal.t("Yes")]=function(){a.fn.getNewEsignPopup(c);};}else{p[Drupal.t("Yes")]=function(){a("#lnr-myteam-search").data("lnrmyteamsearch").cancelLearning(j,d,b,o,g,n,m);};}a("#reject-wizard").dialog({position:[(getWindowWidth()-500)/2,100],bgiframe:true,width:500,resizable:false,modal:true,title:Drupal.t("MSG405"),buttons:p,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});a(".ui-dialog").wrap("<div id='my-team-reject-dialog'></div>");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a("#reject-wizard").show();this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){changeDialogPopUI();
}a(".ui-dialog-titlebar-close").click(function(){a("#reject-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(j);});}catch(l){}},cancelLearning:function(h,c,b,n,f,m,l){try{var g="<div id='paintClassContentResults"+h+"'></div>";a("#paintClassContentResults"+h).remove();a("#gview_paintMyclassContentResults"+h).prepend(g);var d=this;this.createLoader("reject-wizard");a("#loaderdivreject-wizard").css({width:"450",height:"70"});a("#loaderdivreject-wizard td").css({width:"450",height:"80"});a("#reject-wizard td").css("border-bottom","none");url=d.constructUrl("ajax/learning/myteam-search/cancel/"+f+"/"+c+"/"+m+"/"+h);a.ajax({type:"POST",url:url,data:"",success:function(e){e=a.trim(e);e=e.split("|");resDate=e[0];e=e[1];if(e=="success"){resultMsgStatus=Drupal.t("MSG416");resultMsg=resultMsgStatus+" - "+HtmlEncode(decodeURIComponent(b))+".";a("#my-team-reject-dialog .ui-dialog-buttonpane .ui-dialog-buttonset div.admin-save-button-left-bg").remove();a("#my-team-reject-dialog .ui-dialog-buttonpane .ui-dialog-buttonset div.admin-save-button-right-bg").remove();
a("#my-team-reject-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").css("margin-right","-14px");}else{if(e=="cannotcancel"){resultMsg=Drupal.t("MSG406");}else{resultMsg=Drupal.t("ERR144")+" "+HtmlEncode(decodeURIComponent(b));}}d.rejectMsg(resultMsg,h,m,e,l,resDate);}});}catch(j){}},rejectMsg:function(h,f,g,c,l,b){try{var d="";d+='<div id="myteam-cancel-learning-result" style="display:none; padding: 0px;">';d+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';d+='<tr><td height="30"></td></tr>';d+="<tr>";d+='<td align="center" class="commanTitleAll"><i>'+h+"</i></td>";d+="</tr>";d+='<tr><td height="25"></td></tr>';d+="</table>";d+="</div>";a("#reject-wizard").html(d);a("#myteam-cancel-learning-result").show();if(c=="success"){a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").css("display","none");a("#paintMyclassContentResults"+f+" #"+l+" .myteam-learning-status").html(Drupal.t("Canceled"));a("#paintMyclassContentResults"+f+" #"+l+" .myteam-learning-Date").html(b);
}}catch(j){}},markCompleteWizard:function(d,n,m,b,c,r,z){try{this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var g="both";var l=280;var s=Drupal.t("LBL3081")+" "+Drupal.t("Completed");}else{var g="button";var l=500;var s=Drupal.t("MSG404")+" - "+titleRestrictionFadeoutImage(m,"exp-sp-myteam-class-title");}var f="";var B="";if(c=="Program"){f='disabled=""';B='disabled=""';}if(c=="Program"){var x=Drupal.t("Training Plan");}else{var x=Drupal.t("Class");}a("#mark-complete-wizard").remove();var o="";o+='<div id="mark-complete-wizard" style="display:none; padding: 0px; overflow:hidden">';o+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';o+='<tr><td height="15" colspan="2"></td></tr>';if(this.currTheme=="expertusoneV2"){o+='<tr><td width="52%" class="commanTitleAll mark-complete-lbl"><span>'+Drupal.t("LBL706")+':</span> <span class="require-text">*</span></td><td class="mark-complete-calender"><input type="text" name="comp_date" id="comp_date" size="14" readonly="true"></td></tr>';
o+='<tr><td width="52%" class="commanTitleAll mark-complete-lbl"><span>'+Drupal.t("LBL668")+':</span></td><td class="mark-complete-score"><input type="text" class="validateNum" '+f+' id="appScore" maxlength="4" size="14"></td></tr>';}else{o+='<tr><td width="35%" class="commanTitleAll mark-complete-lbl"><span>'+Drupal.t("LBL706")+' : </span><span class="require-text">*</span></td><td class="mark-complete-calender"><input type="text" name="comp_date" id="comp_date" size="14" readonly="true"></td></tr>';o+='<tr><td width="35%" class="commanTitleAll mark-complete-lbl"><span>'+Drupal.t("LBL668")+' : </span></td><td class="mark-complete-score"><input type="text" class="validateNum" '+f+' id="appScore" maxlength="4" size="8"></td></tr>';}o+="</table>";o+="</div>";a("body").append(o);var w={};w[Drupal.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#mark-complete-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(d);};w[Drupal.t("LBL725")]=function(){a(this).dialog("destroy");
a(this).dialog("close");var E;var F=n.split(",");if(F.length==1){E=a("#gview_paintContentResults").find("#complete-confirmation-wizard_"+d).val();}else{E=F.length+" "+Drupal.t("LBL3080");}var C=Drupal.t("Completed");a("#complete-confirmation-wizard").remove();o="";o+='<div id="complete-confirmation-wizard" style="display:none; padding: 10px;">';o+='<table width="100%" class="complete-confirmation-wizard-table" cellpadding="0" cellspacing="0" border="0" valign="center">';o+='<tr><td height="30"></td></tr>';o+="<tr>";o+='<td align="center" id="complete-confirmation-wizard-content"><span>'+Drupal.t("MSG822",{"@learner_name":E,"@status":C,"@objtype":x})+"</span></td>";o+="</tr>";o+="</table>";o+="</div>";a("body").append(o);var e={};e[Drupal.t("LBL109")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#complete-confirmation-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(d);};if(availableFunctionalities.exp_sp_esignature!=undefined&&availableFunctionalities.exp_sp_esignature!=""){var D={popupDiv:"my-team-markcomplete-dialog",esignFor:"ManagerMarkComplete",userId:d,enrolledId:n,classTitle:m,rowObj:b,learningType:c,classId:r,trid:z};
e[Drupal.t("Yes")]=function(){a.fn.getNewEsignPopup(D);};}else{e[Drupal.t("Yes")]=function(){a("#lnr-myteam-search").data("lnrmyteamsearch").markcompleteLearning(d,n,m,b,c,r,z);};}a("#complete-confirmation-wizard").dialog({position:[(getWindowWidth()-500)/2,100],autoOpen:false,bgiframe:true,width:500,resizable:false,modal:true,title:Drupal.t("LBL3081")+" "+C,buttons:e,closeOnEscape:false,draggable:false,overlay:{opacity:0.9,background:"black"}});a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){changeDialogPopUI();}a("#complete-confirmation-wizard").show();a("#complete-confirmation-wizard").dialog("open");};a(".ui-dialog-titlebar-close").click(function(){a("#complete-confirmation-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(d);});a("#mark-complete-wizard").dialog({position:[(getWindowWidth()-l)/2,100],bgiframe:true,width:l,resizable:false,modal:true,title:s,buttons:w,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});
a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a(".ui-dialog").wrap("<div id='my-team-markcomplete-dialog'></div>");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();this.currTheme=Drupal.settings.ajaxPageState.theme;if(a.browser.msie&&parseInt(a.browser.version,10)=="9"&&this.currTheme=="expertusoneV2"||a.browser.msie&&parseInt(a.browser.version,10)=="8"&&this.currTheme=="expertusoneV2"){}a("#mark-complete-wizard").show();if(a("#my-team-markcomplete-dialog")!=undefined&&this.currTheme!="expertusoneV2"){a("#my-team-markcomplete-dialog #ui-dialog-title-mark-complete-wizard").attr("title",Drupal.t("MSG404")+" - "+m);a("#my-team-markcomplete-dialog #ui-dialog-title-mark-complete-wizard").addClass("vtip");
vtip();}if(this.currTheme=="expertusoneV2"){a("#my-team-dialog").find(".ui-dialog-content").addClass("assign-learning-team");changeDialogPopUI();}a(".ui-dialog-titlebar-close").click(function(){a("#mark-complete-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").reloadDataGridMyTeam(d);});var y=new Array();var q=a("#sessStartEndDates_"+r).text();y=q.split("#");var t=y[0];var j;var v=new Date();$forMonth=(v.getMonth()<9)?("0"+(v.getMonth()+1)):v.getMonth()+1;var h=($forMonth+"-"+v.getDate()+"-"+v.getFullYear());if(y!=null&&y!=""&&y!=undefined){a("#comp_date").val(t);h=t;}else{a("#comp_date").val(h);}var A=!!(navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/))?true:false;if(a.browser.msie&&a.browser.version>7||A){var p=this;setTimeout(function(){p.callDatePicker(h);},500);}else{a("#comp_date").datepicker({minDate:h,dateFormat:"mm-dd-yy",showOn:"both",buttonImage:themepath+"/expertusone-internals/images/calendar_icon.JPG",buttonImageOnly:true});}}catch(u){}},callDatePicker:function(b){try{a("#comp_date").datepicker({minDate:b,dateFormat:"mm-dd-yy",showOn:"both",buttonImage:themepath+"/expertusone-internals/images/calendar_icon.JPG",buttonImageOnly:true});
}catch(c){}},markcompleteLearning:function(j,d,b,o,g,n,m){try{var h="<div id='paintClassContentResults"+j+"'></div>";a("#paintClassContentResults"+j).remove();a("#gview_paintMyclassContentResults"+j).prepend(h);a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");var f=this;this.createLoader("complete-confirmation-wizard");a("#loaderdivmark-complete-wizard").css({width:"450",height:"100"});a("#loaderdivmark-complete-wizard td").css({width:"450",height:"100"});a("#complete-confirmation-wizard td").css({height:"38","border-bottom":"none"});var c=(a("#appScore").val())?a("#appScore").val():"nil";var p=this.getLearnerId();if(p=="0"||p==""){self.location="?q=learning/enrollment-search";return;}url=f.constructUrl("ajax/myteam/markcomplete/"+g+"/"+d+"/"+n+"/"+j+"/"+a("#comp_date").val()+"/"+c);a.ajax({type:"POST",url:url,data:"",success:function(e){a("#paintMyclassContentResults"+j).trigger("reloadGrid",[{page:1}]);e=a.trim(e);e=e.split("|");resDate=e[0];e=e[1];if(e=="success"){resultMsg=Drupal.t("LBL747")+" - "+(HtmlEncode(decodeURIComponent(b)));
}else{if(e=="nochange"){resultMsg=Drupal.t("MSG748");}else{resultMsg=SMARTPORTAL.t("Sorry, Problem in mark complete the Class '"+(HtmlEncode(decodeURIComponent(b)))+"'.");}}f.markCompleteMsg(resultMsg,j,n,e,resDate,m);}});}catch(l){}},markCompleteMsg:function(h,f,g,c,b,l){try{var d="";d+='<div id="myteam-mark-learning-result" style="display:none; padding: 0px;">';d+='<table width="100%" class="complete-confirmation-wizard-table" cellpadding="0" cellspacing="0" border="0" valign="center">';d+='<tr><td height="30"></td></tr>';d+="<tr>";d+='<td align="center" title="'+htmlEntities(h)+'" class="commanTitleAll vtip"><i>'+titleRestrictionFadeoutImage(HtmlEncode(h),"my-team-module-class-title")+"</i></td>";d+="</tr>";d+="</table>";d+="</div>";a("#mark-complete-wizard").html(d);a("#myteam-mark-learning-result").show();if(c=="success"||c=="nochange"){a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").prev().css("display","none");a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").css("display","none");
a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").next().css("display","none");a("#paintMyclassContentResults"+f+" #"+l+" .myteam-learning-status").html("Completed");a("#paintMyclassContentResults"+f+" #"+l+" .myteam-learning-Date").html(b);a("#complete-confirmation-wizard").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("searchRecordsPaint");}vtip();}catch(j){}},viewLearning:function(c,b){try{var f=a("#viewLearningCls_"+c).data("is_last_rec");if(a(b).parents("tr").next("tr").hasClass("cus-accord")){if(a("#pager").is(":visible")||f!="last"){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a(b).parents("tr").children("td").css("border-bottom","solid 1px #ededed");}else{a(b).parents("tr").children("td").css("border-bottom","dotted 1px #ccc");}}a(b).parents("tr").next("tr").remove();}else{a("#user-detail-"+c).show();this.renderClassResults(c,b);}}catch(d){}},reloadDataGridMyTeam:function(b){try{a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");
a("#paintMyclassContentResults"+b).setGridParam({url:this.constructUrl("learning/myteam-search/class-details/"+b)});a("#paintMyclassContentResults"+b).trigger("reloadGrid",[{page:1}]);}catch(c){}},renderClassResults:function(h,m){try{var n=a("#viewLearningCls_"+h).data("is_last_rec");var o=(a("#pager").is(":visible")||n!="last")?"":"noborder";var p='<table style="display:none;" id="paintMyclassContentResults'+h+'"></table><div style="display:none;" id="pager2_user'+h+'"></div>';var f=a(m).parents("tr").after("<tr class='cus-accord "+o+"'><td colspan='3'>"+p+"</td></tr>");if(a("#pager").is(":visible")||n!="last"){a(m).parents("tr").children("td").css("border-bottom","none 0px");}var g=this;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var b=688;}else{var b=760;}var d=Drupal.t("LBL042")+'<p class="usr-enroll-grid-header-grey-cls">('+Drupal.t("LBL699")+")</p>";var l='$("#lnr-myteam-search").data("lnrmyteamsearch")';var c="#pager2_user"+h;a("#paintMyclassContentResults"+h).jqGrid({url:this.constructUrl("learning/myteam-search/class-details/"+h),datatype:"json",mtype:"GET",colNames:[Drupal.t("LBL107"),Drupal.t("LBL036"),Drupal.t("LBL102"),d,Drupal.t("LBL108")],colModel:[{name:"Name",index:"class_title",title:false,width:150,resizable:false,sortable:true,widgetObj:l,formatter:g.paintLPMyclassDetails},{name:"Type",index:"type",title:false,width:85,resizable:false,sortable:true,widgetObj:l,formatter:g.paintLPMyclassDetails},{name:"Status",index:"status",title:false,width:180,resizable:false,sortable:true,widgetObj:l,formatter:g.paintLPMyclassDetails},{name:"Date",index:"completed_on",title:false,width:80,height:40,resizable:false,sortable:true,widgetObj:l,formatter:g.paintLPMyclassDetails},{name:"Action-For",index:"action",title:false,classes:"course-status-action",width:85,resizable:false,sortable:false,widgetObj:l,formatter:g.paintLPMyclassDetails}],rowNum:5,rowList:[5,10,15],pager:c,viewrecords:true,emptyrecords:"",sortorder:"desc",toppager:true,height:"auto",sortname:"enrolled_on",width:b,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,onSortCol:function(){a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintClassContentResults"+h);
},loadComplete:g.callbackMyclassLoader,gridComplete:function(){if(a("#paintMyclassContentResults"+h).getDataIDs().length==0){a("#jqgh_paintMyclassContentResults"+h+"_Name").removeClass("ui-jqgrid-sortable");a("#jqgh_paintMyclassContentResults"+h+"_Enrolled-On").removeClass("ui-jqgrid-sortable");a("#jqgh_paintMyclassContentResults"+h+"_Type").removeClass("ui-jqgrid-sortable");a("#jqgh_paintMyclassContentResults"+h+"_Status").removeClass("ui-jqgrid-sortable");a("#jqgh_paintMyclassContentResults"+h+"_Date").removeClass("ui-jqgrid-sortable");a("#jqgh_paintMyclassContentResults"+h+"_Action").removeClass("ui-jqgrid-sortable");a("#jqgh_paintMyclassContentResults"+h+"_Name > span").css("display","none");a("#jqgh_paintMyclassContentResults"+h+"_Enrolled-On > span").css("display","none");a("#jqgh_paintMyclassContentResults"+h+"_Type > span").css("display","none");a("#jqgh_paintMyclassContentResults"+h+"_Status > span").css("display","none");a("#jqgh_paintMyclassContentResults"+h+"_Date > span").css("display","none");
a("#jqgh_paintMyclassContentResults"+h+"_Action > ").css("height","38px");}a("#jqgh_paintMyclassContentResults"+h+"_Date").addClass("enroll-date-sortalign");this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){a("#paintMyclassContentResults"+h+"_Name").css("width","253px");a("#jqgh_paintMyclassContentResults"+h+"_Name").css("text-indent","11px");a("#paintMyclassContentResults"+h+"_Type").css("width","98px");a("#paintMyclassContentResults"+h+"_Status").css("width","118px");a("#paintMyclassContentResults"+h+"_Date").css("width","101px");a("#paintMyclassContentResults"+h+"_Action-For").css("width","90px");a("#paintMyclassContentResults"+h).find("tr td:first-child").css("width","245px").css("text-indent","0").css("padding-left","10px");a("#paintMyclassContentResults"+h).find("tr td:nth-child(2)").css("width","100px");a("#paintMyclassContentResults"+h).find("tr td:nth-child(3)").css("width","120px");a("#paintMyclassContentResults"+h).find("tr td:nth-child(4)").css("width","100px");
a("#paintMyclassContentResults"+h).find("tr td:last-child").css("width","94px");a("#gview_paintMyclassContentResults"+h).find(" .ui-jqgrid-htable .ui-jqgrid-sortable").css("height","26px");a("#jqgh_paintMyclassContentResults"+h+"_Action").css("height","26px");}else{var e=Drupal.settings.user.language;a("#paintMyclassContentResults"+h).find("tr td:last-child").css("width","95px").css("padding-left","13px");if(e=="de"||e=="pt-pt"){a("#lnr-myteam-search .myteam-learning-course-btn .full-button-without-action").css("background",'url("/sites/all/themes/core/expertusone/expertusone-internals/images/ExpertusIcons.png") no-repeat scroll -2px -351px rgba(0, 0, 0, 0)');}a("#gview_paintMyclassContentResults"+h).find(" .ui-jqgrid-htable .ui-jqgrid-sortable").css("height","28px");a("#jqgh_paintMyclassContentResults"+h+"_Action").css("height","28px");}if(a.browser.msie&&parseInt(a.browser.version,10)=="9"||a.browser.msie&&parseInt(a.browser.version,10)=="8"){a("#paintMyclassContentResults"+h).css("float","left");
}}}).navGrid(c,{add:false,edit:false,del:false,search:false,refreshtitle:true});a("#paintMyclassContentResults"+h+"_toppager").hide();a("#jqgh_paintMyclassContentResults"+h+"_Action-For").removeClass("ui-jqgrid-sortable");this.paintMyclassAfterReady(h);a(".ui-jqgrid-bdiv > div").css("position","");}catch(j){}},callbackMyclassLoader:function(b,d,h){try{a("#paintMyclassContentResults"+b.userId).show();a("#gview_paintMyclassContentResults"+b.userId+" > .ui-jqgrid-hdiv").css("display","block");a("#gview_paintMyclassContentResults"+b.userId+" > .ui-th-column").css("text-align","right");a("#refresh_paintMyclassContentResults"+b.userId).css("display","none");a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("searchRecordsPaint");var f=a("#paintMyclassContentResults"+b.userId).jqGrid("getGridParam","records");if(f>5){a("#pager2_user"+b.userId).show();a("#pager2_user"+b.userId+"_center .ui-pg-table td").css("border-bottom","0px none").eq(-1).hide();a("#pager2_user"+b.userId+"_left").hide();
a("#pager2_user"+b.userId+"_right").hide();a("#pager2_user"+b.userId+"_center").css({"text-align":"right"}).children(".ui-pg-table").css("float","right");a("#first_pager2_user"+b.userId).addClass("pager-first");a("#last_pager2_user"+b.userId).addClass("pager-last");a("#next_pager2_user"+b.userId).addClass("pager-next");a("#prev_pager2_user"+b.userId).addClass("pager-prev");a(".ui-state-disabled").css("width","");}var g=parseInt(a("#paintMyclassContentResults"+b.userId).getGridParam("records"),10);if(g==0){a("#paintMyclassContentResults"+b.userId).css("display","block");var c=Drupal.t("MSG583");a("#paintMyclassContentResults"+b.userId).html('<tr><td class="border-style-none"><span class="myclass-no-records-cls">'+c+"</span></td></tr>");a("#paintMyclassContentResults"+b.userId).css("text-align","center");a(".border-style-none").css("border","0");}a("#paintMyclassContentResults"+b.userId+" tr:nth-child(odd)").addClass("jqgrow-even");a("#paintMyclassContentResults"+b.userId+" .jqgfirstrow > td").css("border-bottom","none");
a("#user-detail-"+b.userId).hide();a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("paintClassContentResults"+b.userId);a("#paintClassContentResults"+b.userId).removeClass("paint-class-content-loader");if(f>5){a("#pager2_user"+b.userId).appendTo("#gview_paintMyclassContentResults"+b.userId);a("#pager2_user"+b.userId+"_center").css("border-bottom","none");}this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){a(".cus-accord").find(".ui-jqgrid-bdiv").css("border","1px solid #E5E5E5").css("border-width","0 1px 1px 1px");}else{a(".cus-accord").find(".ui-jqgrid-bdiv").css("border","1px solid #cccccc");}vtip();}catch(j){}},paintLPMyclassDetails:function(b,o,d){try{var h=o.colModel.index;var l="";var g=new Array();g.cre_sys_inv_com='<span class="mro-myteam-class course-compliance-bg vtip" title="'+Drupal.t("Compliance")+'">C</span>';g.cre_sys_inv_man='<span class="mro-myteam-class course-mandatory-bg vtip" title="'+Drupal.t("Mandatory")+'">M</span>';
g.cre_sys_inv_opt="";g.cre_sys_inv_rec='<span class="mro-myteam-class course-recommended-bg vtip" title="'+Drupal.t("Recommended")+'">R</span>';var n=d.mro_status;var m=d.is_compliance;var f=d.exempted_sts;if(n==""||n==null||n=="null"){l="";}else{l=g[n];}if(d.mand_status=="1"||d.mand_status=="Y"){if(f){l="";}else{l=g.cre_sys_inv_man;}}else{l="";}if(m){if(f){l="";}else{l=g.cre_sys_inv_com;}}if(h=="class_title"){return"<div><span style='float:left;'>"+d.class_title+"</span>"+l+"</div>";}else{if(h=="enrolled_on"){return d.enrolled_on;}else{if(h=="completed_on"){return d.completed_on;}else{if(h=="type"){var c;if(d.type=="Web-based"){c=Drupal.t("Web-based");}else{if(d.type=="Virtual Class"){c=Drupal.t("Virtual Class");}else{if(d.type=="Classroom"){c=Drupal.t("Classroom");}else{if(d.type=="Video"){c=Drupal.t("Video");}else{if(d.type=="Certification"){c=Drupal.t("Certification");}else{if(d.type=="Curricula"){c=Drupal.t("Curricula");}else{if(d.type=="Learning Plan"){c=Drupal.t("Learning Plan");
}}}}}}}return'<div><span class="vtip" title="'+c+'">'+titleRestrictionFadeoutImage(c,"exp-sp-myteam-row-del-type")+"</span></div>";}else{if(h=="status"){if(d.type=="Learning Plan"||d.type=="Curricula"||d.type=="Certification"){if(f&&(d.comp_status=="lrn_tpm_ovr_enr"||d.comp_status=="lrn_tpm_ovr_inp")){return Drupal.t("Waived");}else{return d.status;}}else{if(f&&(d.comp_status=="lrn_crs_cmp_enr"||d.comp_status=="lrn_crs_cmp_inp")){return Drupal.t("Waived");}else{return d.status;}}}else{return d.action;}}}}}}catch(j){}},showMoreAction:function(g){try{var c=a(g).position();var b=Math.round(c.left);var d=Math.round(c.top);a(".myteam-more-action").hide();a(g).siblings(".myteam-more-action").css("position","absolute");a(g).siblings(".myteam-more-action").css("left",b-97);a(g).siblings(".myteam-more-action").css("top",d+21);a(g).siblings(".myteam-more-action").css("width","113");a(g).siblings(".myteam-more-action").slideToggle("");this.prevMoreObj=g;}catch(f){}},hideMoreAction:function(c){try{this.prevMoreObj="";
}catch(b){}},hideCatalogPageControls:function(b){try{var d=a("#tbl-paintCatalogContentResults tr.ui-widget-content").filter(":last");if(b){a("#pager1").hide();if(d.length!=0){d.children("td").css("border","0 none");}}else{a("#pager1").show();a("#pager1 #pager1_center #first_pager1").hide();a("#pager1 #pager1_center #last_pager1").hide();a("#pager1 #pager1_center #next_pager1").hide();a("#pager1 #pager1_center #prev_pager1").hide();a("#pager1 #pager1_center #sp_1_pager1").parent().hide();}}catch(c){}},showCatalogPageControls:function(){try{a("#pager1").show();a("#pager1 #pager1_center #first_pager1").show();a("#pager1 #pager1_center #last_pager1").show();a("#pager1 #pager1_center #next_pager1").show();a("#pager1 #pager1_center #prev_pager1").show();a("#pager1 #pager1_center #sp_1_pager1").parent().show();}catch(b){}},showLearningCatalog:function(g,n,l){try{this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var m=750;}else{var m=688;}a("#lnr-myteam-search").data("lnrmyteamsearch").defaults.catStart=true;
this.render_popup(g,n,l);a("#paintCatalogContentResults"+g).css("min-height","auto");this.createLoader("paintCatalogContentResults"+g);a("#loaderdivpaintCatalogContentResults"+g).css("height","250px");var f=navigator.userAgent;var c;var b=350;a(".page-learning-myteam-search").addClass("assign-learning");var d=this;var j='$("#lnr-myteam-search").data("lnrmyteamsearch")';a("#tbl-paintCatalogContentResults").jqGrid({url:this.constructUrl("learning/myteam-search/catalog/"+g),datatype:"json",mtype:"GET",colNames:["Icons","Details","Action"],colModel:[{name:"Icons",index:"Icons",title:false,width:70,widgetObj:j,formatter:d.paintLPSearchIcons},{name:"Details",index:"Details",title:false,width:b,widgetObj:j,formatter:d.paintLPSearchResults},{name:"Action",index:"Action",title:false,width:165,widgetObj:j,formatter:d.paintLPSearchResultsAction}],rowNum:5,rowList:[5,10,15],pager:"#pager1",viewrecords:true,emptyrecords:"",sortorder:"desc",toppager:true,height:"auto",width:m,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,loadComplete:d.callbackCatalogLoader,gridComplete:d.callbackGridComplete}).navGrid("#pager1",{add:false,edit:false,del:false,search:false,refreshtitle:true});
this.paintCatalogAfterReady(g);if(this.currTheme=="expertusone"){a("#my-team-dialog #tbl-paintCatalogContentResults").css("width","675px");}}catch(h){}},callbackCatalogLoader:function(b,n,l){try{a("#tbl-paintCatalogContentResults").show();a("#my-team-dialog").find("#tbl-paintCatalogContentResults > tbody > tr > td:first-child").addClass("assign-learn-first-row");a("#my-team-dialog").find("#tbl-paintCatalogContentResults > tbody > tr > td:nth-child(2)").addClass("assign-learn-second-row");a("#my-team-dialog").find("#tbl-paintCatalogContentResults > tbody > tr > td:last-child").addClass("assign-learn-last-row");var m=parseInt(a("#tbl-paintCatalogContentResults").getGridParam("records"),10);if(m==0){a("#catalog-no-records").css("display","block");var d=Drupal.t("MSG381")+".";a("#catalog-no-records").html(d);}else{a("#catalog-no-records").css("display","none");a("#catalog-no-records").html("");}var c=a("#lnr-myteam-search").data("lnrmyteamsearch");var f=true;if(m>5){f=false;c.showCatalogPageControls();
a("#my-team-dialog .popupBotLeftCorner").hide();}else{c.hideCatalogPageControls(f);a("#my-team-dialog .popupBotLeftCorner").show();}if(a("#lnr-myteam-search").data("lnrmyteamsearch").defaults.catStart){a("#paintCatalogHeader").html(b.header);a("#myteam-find-trng-sort-display").show();a("#lnr-myteam-search").data("lnrmyteamsearch").defaults.catStart=false;}var j=parseInt(a(".ui-dialog").eq(-1).css("height"))+parseInt(a(".ui-dialog").eq(-1).css("top"));var g=parseInt(a(".ui-widget-overlay").eq(-1).css("height"));if(g<j){a(".ui-widget-overlay").eq(-1).css("height",(j+50)+"px");}a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("paintCatalogContentResults"+b.userId);a("#my-team-dialog #tbl-paintCatalogContentResults").find("tr:last-child td").css("border","0px");vtip();resetFadeOutByClass("","sub-attributes","line2-attribute","MyTeam");a(".limit-title").trunk8(trunk8.myteam_title);a(".limit-desc").trunk8(trunk8.myteam_desc);scrollBar_Refresh("myteam");}catch(h){}},callbackGridComplete:function(b,c,d){a(".limit-title").trunk8(trunk8.myteamname_title);
scrollBar_Refresh("myteam");},render_popup:function(c,m,l){try{var f=this;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var b=750;}else{var b=712;}var g="<div id='paintCatalogContentResults"+c+"'></div>";a("#paintCatalogContentResults"+c).remove();a("body").append(g);var d="<div id='show_expertus_message'></div><div id='paintCatalogHeader'></div><div id='catalog-no-records' style='display: none'></div><div class='course-container-list'><table id='tbl-paintCatalogContentResults'></table></div><div id='paintCatalogFooter'><div id='pager1' style='display:none;'></div></div>";a("#paintCatalogContentResults"+c).html(d);var n={};var h=Drupal.t("LBL085");a("#paintCatalogContentResults"+c).dialog({autoResize:true,position:[(getWindowWidth()-b)/2,100],bgiframe:true,width:b,resizable:false,draggable:false,closeOnEscape:false,modal:true,title:SMARTPORTAL.t('<span class="myteam-header-text">'+h+'</span><div id="search-cat-keyword"></div>'),buttons:n,close:function(){a("#paintCatalogContentResults"+c).remove();
a("#my-team-dialog").remove();f.viewLearning(c,l);a(".ac_results").remove();a(".page-learning-myteam-search").removeClass("assign-learning");if(a(".location-session-detail-clone").size()>0){a(".location-session-detail-clone").remove();}},overlay:{opacity:0.5,background:"#000000"},open:function(){a(".ui-widget-overlay").eq(-1).css("width",getWindowWidth()-1+"px");}});a(".ui-dialog").wrap("<div id='my-team-dialog'></div>");a("#paintCatalogContentResults"+c).css("position","");this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){a("#my-team-dialog").find(".ui-dialog-content").addClass("assign-learning-team");a("#my-team-dialog").find(".ui-dialog").css("overflow","visible");changeDialogPopUI();}}catch(j){}},paintLPSearchIcons:function(b,c,f){try{return f.image;}catch(d){}},paintLPSearchResults:function(b,c,f){try{return f.details;}catch(d){}},paintLPSearchResultsAction:function(b,c,f){try{return f.action;}catch(d){}},catalogSearchAction:function(f,g,d){try{a("#show_expertus_message").html("");
var b="";var l=a("#srch_criteria_catkeyword").val();if(l==(Drupal.t("LBL970")+" "+Drupal.t("LBL983"))){l="";}else{a("#cat-title-clr").css("display","block");}var c=a("#myteam-cat-delivery-type-hidden").val();if(c==Drupal.t("LBL428")){c="";}else{a("#cat-title-clr").css("display","block");}var j=f;b="&title="+encodeURIComponent(l)+"&dl_type="+encodeURIComponent(c)+"&sortby="+j;this.searchStrValue=b;a("#lnr-myteam-search").data("lnrmyteamsearch").hideCatalogPageControls(true);this.createLoader("paintCatalogContentResults"+d);a("#loaderdivpaintCatalogContentResults"+d).css("height","250px");a("#tbl-paintCatalogContentResults").setGridParam({url:this.constructUrl("learning/myteam-search/catalog/"+d+"/"+b)});a("#tbl-paintCatalogContentResults").trigger("reloadGrid",[{page:1}]);a("#paintCatalogHeader .sort-by-links li").each(function(){a(this).find("a").removeClass("sortype-high-lighter");});if(g!=""){a("."+g).addClass("sortype-high-lighter");}else{a("#paintCatalogHeader .catalog-type1").addClass("sortype-high-lighter");
}}catch(h){}},searchAction:function(g,l){try{var c="";var d="";a(".country-others").each(function(){if(a(this).is(":checked")){d+=d!=""?"|":"";d+=a(this).val();}});var n=a("#search_searchtext").val();if(n==Drupal.t("LBL304").toUpperCase()){n="";}var o=a("#srch_criteria_location").val();if(o==Drupal.t("LBL114")){o="";}else{a("#location-clr").css("display","block");}var f=a("#srch_criteria_username").val();if(f==Drupal.t("LBL181")){f="";}else{a("#username-clr").css("display","block");}var m=g;var b="";a(".report-others").each(function(){if(a(this).is(":checked")){b+=b!=""?"|":"";b+=a(this).val();}});var h=a("#myteam_searchtext").val();if(h.toLowerCase()==(Drupal.t("LBL304").toLowerCase())){h="";}c="&title="+encodeURIComponent(n)+"&reporttype="+b+"&location="+o+"&cy_type="+d+"&sortby="+m+"&searchusername="+h;this.searchStrValue=c;this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){a("#paintContentResults tr.cus-accord:not(.noborder)").prev("tr").children("td").css("border-bottom","1px solid #EDEDED");
}else{a("#paintContentResults tr.cus-accord:not(.noborder)").prev("tr").children("td").css("border-bottom","dotted 1px #ccc");}a("#paintContentResults tr.cus-accord").remove();this.createLoader("searchRecordsPaint");a("#paintContentResults").setGridParam({url:this.constructUrl("learning/myteam-search/search/all/"+c)});a("#paintContentResults").trigger("reloadGrid",[{page:1}]);this.checkboxValidation();a(".sort-by-links li").each(function(){a(this).find("a").removeClass("sortype-high-lighter");});if(!l){a(".type1").addClass("sortype-high-lighter");}else{a("."+l).addClass("sortype-high-lighter");}}catch(j){}},clearCatalogField:function(b){try{a("#srch_criteria_catkeyword").val("Type title or code").css("color","#999999").css("fontSize","11px");if(this.currTheme!="expertusoneV2"){a("#srch_criteria_catkeyword").css("fontStyle","italic");}a("#myteam-cat-delivery-type-hidden").val("Any");a("#cat-title-clr").css("display","none");this.catalogSearchAction("","",b);}catch(c){}},clearField:function(b){try{if(b=="Location"){a("#srch_criteria_location").val(Drupal.t("LBL114")).css("color","#999999").css("fontSize","11px");
if(this.currTheme!="expertusoneV2"){a("#srch_criteria_location").css("fontStyle","italic");}a("#location-clr").css("display","none");}else{if(b=="Username"){a("#srch_criteria_username").val(Drupal.t("LBL181")).css("color","#999999").css("fontSize","11px");if(this.currTheme!="expertusoneV2"){a("#srch_criteria_username").css("fontStyle","italic");}a("#username-clr").css("display","none");}else{if(b=="catalogKeyword"){a("#srch_criteria_catkeyword").val((Drupal.t("LBL970")+" "+Drupal.t("LBL983"))).css("color","#999999").css("fontSize","11px");if(this.currTheme!="expertusoneV2"){a("#srch_criteria_username").css("fontStyle","italic");}a("#catkeyword-clr").css("display","none");}}}this.searchAction();}catch(c){}},showHide:function(f,d){try{a("#"+d).toggle();var c=a("#"+f).hasClass("cls-show");if(c){a("#"+f).removeClass("cls-show");a("#"+f).addClass("cls-hide");}else{a("#"+f).removeClass("cls-hide");a("#"+f).addClass("cls-show");}a("#srch_criteria_catkeyword").flushCache();}catch(b){}},checkboxValidation:function(){try{a("#searchopts-content").find("input[type=checkbox]").each(function(){if(a(this).is(":checked")){if(a(this).val()!="All"){a(this).parent().next("label").removeClass("highlight-light-blue");
a(this).parent().next("label").addClass("highlight-light-gray");a(this).parent().removeClass("checkbox-unselected");a(this).parent().addClass("checkbox-selected");}}else{if(a(this).val()!="All"){a(this).parent().next("label").removeClass("highlight-light-gray");a(this).parent().next("label").addClass("highlight-light-blue");a(this).parent().removeClass("checkbox-selected");a(this).parent().addClass("checkbox-unselected");}}});}catch(b){}},moreListDisplay:function(c,b){try{for(i=0;i<=c;i++){a("#"+b+"_"+i).css("display","block");}a("#"+b+"_more").css("display","none");a("#"+b+"_short").css("display","block");}catch(d){}},shortListDisplay:function(c,b){try{for(i=0;i<=c;i++){if(i<=4){a("#"+b+"_"+i).css("display","block");}else{a("#"+b+"_"+i).css("display","none");}}a("#"+b+"_short").css("display","none");a("#"+b+"_more").css("display","block");}catch(d){}},hidePageControls:function(b){try{var d=a("#paintContentResults tr.ui-widget-content").filter(":last");if(b){if(this.currTheme=="expertusoneV2"){a("#paintContent .block-footer-left").show();
}a("#pager").hide();if(d.length!=0){d.children("td").css("border","0 none");}}else{a("#pager").show();if(this.currTheme=="expertusoneV2"){a("#paintContent .block-footer-left").hide();}a("#pager #pager_center #first_pager").hide();a("#pager #pager_center #last_pager").hide();a("#pager #pager_center #next_pager").hide();a("#pager #pager_center #prev_pager").hide();a("#pager #pager_center #sp_1_pager").parent().hide();}}catch(c){}},showPageControls:function(){try{a("#pager").show();if(this.currTheme=="expertusoneV2"){a("#paintContent .block-footer-left").hide();}a("#pager #pager_center #first_pager").show();a("#pager #pager_center #last_pager").show();a("#pager #pager_center #next_pager").show();a("#pager #pager_center #prev_pager").show();a("#pager #pager_center #sp_1_pager").parent().show();}catch(b){}},renderSearchResults:function(b){try{this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){var n=726;var j=87;var d=390;var g=250;}else{var c=Drupal.settings.user.language;
if(c=="it"){var n=764;var j=35;var d=519;var g=200;}else{var n=764;var j=35;var d=589;var g=130;}}this.createLoader("lnr-myteam-search");var f=this;var h=(b!="")?("&title="+encodeURIComponent(b)):"";var m='$("#lnr-myteam-search").data("lnrmyteamsearch")';a("#paintContentResults").jqGrid({url:f.constructUrl("learning/myteam-search/search/all/"+h),datatype:"json",mtype:"GET",colNames:["Icons","Details","Action"],colModel:[{name:"Icons",index:"Icons",title:false,width:j,widgetObj:m,formatter:f.paintLPSearchIcons},{name:"Details",index:"Details",title:false,width:d,widgetObj:m,formatter:f.paintLPSearchResults},{name:"Action",index:"Action",title:false,width:g,widgetObj:m,formatter:f.paintLPSearchResultsAction}],rowNum:10,rowList:[10,20,30],pager:"#pager",viewrecords:true,emptyrecords:"",toppager:true,height:"auto",width:n,loadtext:"",recordtext:"",pgtext:"{0} "+Drupal.t("LBL981")+" {1}",loadui:false,loadComplete:f.callbackLoader}).navGrid("#pager",{add:false,edit:false,del:false,search:false,refreshtitle:true});
a(".sort-by-links li").each(function(){a(this).find("a").removeClass("sortype-high-lighter");});a(".type1").addClass("sortype-high-lighter");}catch(l){}},callbackLoader:function(c,m,j){try{a("#paintContentResults").show();var l=parseInt(a("#paintContentResults").getGridParam("records"),10);if(l==0){if((a("#lnr-myteam-search").data("lnrmyteamsearch").searchStrValue=="")||((a("#lnr-myteam-search").data("lnrmyteamsearch").searchAction("AZ","type1"))==null)||((a("#lnr-myteam-search").data("lnrmyteamsearch").searchAction("ZA","type2"))==null)||((a("#lnr-myteam-search").data("lnrmyteamsearch").searchAction("Time","type3"))==null)){var f=Drupal.t("MSG413");a("#gview_paintContentResults").css("display","none");}else{var f=Drupal.t("MSG381")+".";}a("#no-records").css("display","block").css("padding","10px").css("color","#777777").css("textAlign","center").css("lineHeight","40px");a("#no-records").html(f);}else{a("#gview_paintContentResults").css("display","block");a("#no-records").css("display","none");
a("#no-records").html("");}var d=a("#lnr-myteam-search").data("lnrmyteamsearch");var b=parseInt(a("#paintContentResults").getGridParam("reccount"),10);var g=true;if(l>10){g=false;}if(l<=b){d.hidePageControls(g);}else{d.showPageControls();}a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("lnr-myteam-search");a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("searchRecordsPaint");if(a("#lnr-myteam-search").data("lnrmyteamsearch").defaults.start){a("#search-filter-content").html(c.filter);a("#find-trng-sort-display").show();a("#lnr-myteam-search").data("lnrmyteamsearch").defaults.start=false;}else{a("#lnr-myteam-search").data("lnrmyteamsearch").unselectFilter(c);}a("#search-link-content").html(c.links);vtip();a(".limit-title").trunk8(trunk8.myteamname_title);a("#lnr-myteam-search #paintCountry").jScrollPane({});}catch(h){}},unselectFilter:function(b){try{}catch(c){}},paintLPSearchIcons:function(b,c,f){try{return f.image;}catch(d){}},paintLPSearchResults:function(b,c,f){try{return f.details;
}catch(d){}},paintLPSearchResultsAction:function(b,c,f){try{return f.action;}catch(d){}},locationEnterKey:function(){try{obj=this;a("#srch_criteria_location").keyup(function(c){if(c.keyCode==13){obj.searchAction();}});}catch(b){}},paintLocationAutocomplete:function(){try{a("#srch_criteria_location").autocomplete("/?q=learning/myteam-search/location-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(b){}},usernameEnterKey:function(){try{obj=this;a("#srch_criteria_username").keyup(function(c){if(c.keyCode==13){obj.searchAction();}});}catch(b){}},paintUsernameAutocomplete:function(){try{a("#srch_criteria_username").autocomplete("/?q=learning/myteam-search/username-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(b){}},catkeywordEnterKey:function(b){try{obj=this;a("#srch_criteria_catkeyword").keyup(function(d){if(d.keyCode==13){obj.catalogSearchAction("","",b);
}});}catch(c){}},paintCatkeywordAutocomplete:function(b){try{var f=this;var d=a("#myteam-cat-delivery-type-hidden").val();url=f.constructUrl("learning/myteam-search/catalog-autocomplete/"+d+"/"+b);a("#srch_criteria_catkeyword").autocomplete(url,{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}catch(c){}},highlightedText:function(c,h){try{if(h=="it"||h=="ru"){var b="10px";}else{var b="12px";}var d=a("#"+c).data("default-text");var g=this;a("#"+c).blur(function(){if(a("#"+c).val()!=d){a(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if(a("#"+c).val()==""){a(this).val(d).css("color","#999999").css("fontSize",b);if(g.currTheme!="expertusoneV2"){a(this).css("fontStyle","italic");}}});a("#"+c).focus(function(){if(a("#"+c).val()!=d){a(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if(a("#"+c).val()==d){a(this).val("").css("color","#333333").css("fontSize",b);if(g.currTheme!="expertusoneV2"){a(this).css("fontStyle","italic");
}}});a("#"+c).change(function(){if(a("#"+c).val()!=d){a(this).css("color","#333333").css("fontSize","13px").css("fontStyle","normal");}if(a("#"+c).val()==""){a(this).val(d).css("color","#999999").css("fontSize",b);if(g.currTheme!="expertusoneV2"){a(this).css("fontStyle","italic");}}});}catch(f){}},callEquivPopupForMyteam:function(f,d,h,j,m,b){try{a("#show_expertus_message").html("");var c=this;url=c.constructUrl("ajax/learningcore/check-equivalence/"+f+"/"+d+"/"+h);var l="requestinflight";var n;n=a(this);if(!n.data(l)){n.data(l,true);a.ajax({type:"POST",url:url,data:"",success:function(e){n.data(l,true);if(e.length>0){c.displayMyteamEquvPopup(f,d,h,j,m,e,b);}else{c.callAssignClass(f,d,h,j,m,b);}},complete:function(){n.data(l,false);}});}}catch(g){}},displayMyteamEquvPopup:function(f,d,h,j,m,o,b){try{a("#equvMsg-wizard").remove();var c="";var l=Drupal.t("LBL247");c+='<div id="equvMsg-wizard" style="display:none; padding: 0px;">';c+='<table width="100%" cellpadding="0" cellspacing="0" border="0" valign="center">';
c+='<tr><td height="30"></td></tr>';if(o[0].enrollexist!="Y"){if(o.length==1){c+='<tr><td align="center" class="light-gray-color">'+Drupal.t("ERR192")+":</td></tr>";}else{c+='<tr><td align="center" class="light-gray-color">'+Drupal.t("ERR193")+":</td></tr>";}for(k=0;k<o.length;k++){c+='<tr><td align="center"><i>"'+unescape(o[k]["equv_title"])+'"</i></td></tr>';}}else{if(o[0].tpenrollexist=="Y"){c+='<tr><td align="center" class="light-gray-color">'+Drupal.t("MSG535")+"</td></tr>";l=Drupal.t("LBL721");}else{c+='<tr><td align="center" class="light-gray-color">'+Drupal.t("LBL1271")+"</td></tr>";l=Drupal.t("LBL721");}}if(o[0].tpenrollexist!="Y"){c+='<tr><td align="center" class="light-gray-color"><span>'+Drupal.t("ERR194")+"</span></td></tr>";}c+="</table>";c+="</div>";a("body").append(c);var n={};n[Drupal.t("LBL123")]=function(){a(this).dialog("destroy");a(this).dialog("close");a("#equvMsg-wizard").remove();a("#my-team-dialog").remove();};if(o[0].tpenrollexist!="Y"){n[Drupal.t("Yes")]=function(){a("#lnr-myteam-search").data("lnrmyteamsearch").callAssignClass(f,d,h,j,m,b);
a(this).dialog("destroy");a(this).dialog("close");a("#equvMsg-wizard").remove();a("#my-team-dialog").show();};}a("#equvMsg-wizard").dialog({position:[(getWindowWidth()-500)/2,100],bgiframe:true,width:500,resizable:false,modal:true,title:l,buttons:n,closeOnEscape:false,draggable:true,overlay:{opacity:0.9,background:"black"}});a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(0)").addClass("removebutton").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").before('<div class="admin-save-button-left-bg"></div>');a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").addClass("admin-save-button-middle-bg").end();a(".ui-dialog-buttonpane .ui-dialog-buttonset button:eq(1)").after('<div class="admin-save-button-right-bg"></div>');a("#my-team-dialog").hide();if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#equvMsg-wizard").closest(".ui-dialog").wrap("<div id='myteam-equalence-dialog'></div>");a("#myteam-equalence-dialog").find(".ui-dialog-content").addClass("assign-equalence-team");
changeChildDialogPopUI("myteam-equalence-dialog");}a("#equvMsg-wizard").show();a(".ui-dialog-titlebar-close").click(function(){a("#equvMsg-wizard").remove();a("#my-team-dialog").show();});}catch(g){}},callAssignClass:function(d,l,f,c,j,h){try{if(availableFunctionalities.exp_sp_esignature!=undefined&&availableFunctionalities.exp_sp_esignature!=""){var b={popupDiv:"my-team-dialog",esignFor:"ManagerAssign",userId:d,courseId:l,classId:f,rowObj:c,wailist:j};a.fn.getNewEsignPopup(b);}else{a("#lnr-myteam-search").data("lnrmyteamsearch").renderCallAssignClass(d,l,f,c,j,h);}}catch(g){}},renderCallAssignClass:function(h,g,l,m,n,b){try{var d=this;a("#class-detail-loader-"+l).remove();var c=a(m).parents("tr").parents("tr").before("<tr><td colspan='3'><div id='class-detail-loader-"+l+"'></div></td></tr>");this.createLoader("class-detail-loader-"+l);a(".disp-msg").hide();var f=a("#assignClass_checkbox_"+l+":checked").val();if(f==undefined){f="N";}url=d.constructUrl("ajax/learning/myteam-search/assign-class/"+h+"/"+g+"/"+l+"/"+f+"/"+n);
a.ajax({type:"POST",url:url,data:"",success:function(e){e=a.trim(e);if(h!=0){if((e=="Assigned")||(e=="Waitlisted")){var q=((e=="Assigned")?Drupal.t("Registered"):((e=="Waitlisted")?Drupal.t("LBL190"):""));if(e=="Assigned"){a("#assignClass_"+b+"_"+l).removeClass("action-btn");}else{if(e=="Waitlisted"){a("#assignClass_"+b+"_"+l).removeClass("action-btn-waitlist");}}d.callAvailableSeats(l,n,h);a("#assignClass_"+b+"_"+l).removeAttr("onclick");a("#assignClass_"+b+"_"+l).addClass("action-btn-disable");if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#assignClass_"+b+"_"+l).html('<div class="white-btn-bg-left"></div><div class="white-btn-bg-middle">'+q+'</div><div class="white-btn-bg-right"></div>');}else{a("#assignClass_"+b+"_"+l).html(q);}a("#assignClass_checkbox_"+l).attr("disabled",true);}else{var o=new Array();o[0]=e;var p=expertus_error_message(o,"error");a("#assignClass_"+b+"_"+l).html(SMARTPORTAL.t("Registered"));a("#assignClass_"+b+"_"+l).addClass("action-btn-disable");if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#assignClass_"+b+"_"+l).html('<div class="white-btn-bg-left"></div><div class="white-btn-bg-middle">'+SMARTPORTAL.t("Registered")+'</div><div class="white-btn-bg-right"></div>');
}else{a("#assignClass_"+b+"_"+l).html(q);}a("#show_expertus_message").html(p);a("#show_expertus_message").show();a("#assignClass_checkbox_"+l).attr("checked",false);}}a("#lnr-myteam-search").data("lnrmyteamsearch").destroyLoader("class-detail-loader-"+l);}});}catch(j){}},callObjectAssignClass:function(c,d,g){try{if(availableFunctionalities.exp_sp_esignature!=undefined&&availableFunctionalities.exp_sp_esignature!=""){var b={popupDiv:"my-team-dialog",esignFor:"ManagerAssignProgram",userId:c,prgId:d,assignObject:g};a.fn.getNewEsignPopup(b);}else{a("#lnr-myteam-search").data("lnrmyteamsearch").renderCallObjectAssignClass(c,d,g);}}catch(f){}},renderCallObjectAssignClass:function(l,f,b){try{var j=this;loaderObj="class-detail-"+f;a("#"+loaderObj).show();a(".disp-msg").hide();var g=a("#assignPrg_checkbox_"+f+":checked").val();if(g==undefined){g="N";}var h=0;var d=0;var n="N";var c="MyTeam";var o=c+"-"+g;if(!document.getElementById(f+"_cus-accord")){url=j.constructUrl("ajax/trainingplan/class-cnt-for-course/"+f+"/"+h+"/"+d+"/"+n+"/"+l+"/"+o);
a.ajax({type:"POST",url:url,data:"",success:function(e){e=a.trim(e);if(l!=0){j.callAvailableSeats(f,0,l);}if(e=="MultiRegister"){j.renderAccordion(l,"paintClassesSelectList"+f,b);}else{if(e=="Registered"){a("#assignClass_"+f).removeAttr("onclick");a("#assignClass_"+f).removeClass("action-btn");a("#assignClass_"+f).addClass("action-btn-disable");if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#assignClass_"+f).html('<div class="white-btn-bg-left"></div><div class="white-btn-bg-middle">'+Drupal.t("Registered")+'</div><div class="white-btn-bg-right"></div>');}var r=a(".ui-pg-input").val();a("#tbl-paintCatalogContentResults").trigger("reloadGrid",[{page:r}]);a("#assignPrg_checkbox_"+f).attr("disabled",true);}else{if(e=="noclasses"){e=Drupal.t("ERR061");}var p=new Array();p[0]=e;var q=expertus_error_message(p,"error");a("#show_expertus_message").html(q);a("#show_expertus_message").show();a("#assignPrg_checkbox_"+f).attr("checked",false);}}a("#"+loaderObj).hide();}});}else{j.renderAccordion(l,"paintClassesSelectList"+f,b);
}}catch(m){}},renderTpPrequisteClass:function(c,f,d,l){try{var j=this;loaderObj="assignClass_"+f;a("#"+loaderObj).show();a(".disp-msg").hide();var b=a("#assignPrg_checkbox_"+f+":checked").val();if(b==undefined){b="N";}var h="MyTeam";j.createLoader("paintCatalogContentResults"+c);if(a("#tbl-paintCatalogContentResults").find("."+f+"-sub-result").length==0){url=j.constructUrl("ajax/Prequiste/"+c+"/"+f+"/"+d+"/"+h);a.ajax({type:"POST",url:url,data:"",success:function(e){a.each(e.rows,function(){if(a(this.cell.preReqTpDetails).find(".error-string").length!=0){var m=new Array();m[0]=a(this.cell.preReqTpDetails).find(".prereq-enrolled-txt").text();a("#show_expertus_message").html(expertus_error_message(m,"error"));a("#show_expertus_message").show();}else{a(l).parents("tr").parents("tr").after("<tr id='"+this.id+"' parelem='"+f+"' class='cus-accord "+f+"-sub-result'><td></td><td colspan='2'>"+this.cell.preReqTpDetails+"</td></tr>");a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();
}});j.destroyLoader("paintCatalogContentResults"+c);}});}else{a("#tbl-paintCatalogContentResults").find("."+f+"-sub-result").remove();a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();j.destroyLoader("paintCatalogContentResults"+c);}}catch(g){}},getPrereqListForTeam:function(d,n,h,m,j,f,b){try{obj=this;obj.createLoader("paintCatalogContentResults"+j);var c=this.constructUrl("ajax/PrerequisiteFetchlist/"+j+"/"+h+"/"+d+"/"+m+"/"+f+"/"+n);var g=a(b).parents("tr").parents("tr").attr("id");if(a("#tbl-paintCatalogContentResults").find("."+g+"-sub-result").length==0){a.ajax({type:"GET",url:c,success:function(e){var p=a(b).parents("tr").parents("tr");var o=p.attr("parelem");p.children("td").css("border-bottom","none");a.each(e.rows,function(){var r=a("<tr id='"+this.id+"' parelem='"+o+"' class='cus-accord "+g+"-sub-result "+o+"-sub-result'><td></td><td style='padding-left: 15px;' colspan='2'>"+this.cell.preReqTpDetails+"</td></tr>");p.after(r);p=r;var q=this.cell.crsId;if(document.getElementById("cls-"+q)){if(a('input[name="cls-'+q+'"]:radio').is(":checked")==true){a('input[name="cls-'+q+'"]:radio').attr("disabled",true);
}}a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();});p.children("td").css("border-bottom","1px solid #EDEDED");obj.destroyLoader("paintCatalogContentResults"+j);}});}else{a("#tbl-paintCatalogContentResults").find("."+g+"-sub-result").slideToggle(function(){a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();obj.destroyLoader("paintCatalogContentResults"+j);});}if(a(b).is(".title_close")){a(b).removeClass("title_close").addClass("title_open");}else{a(b).removeClass("title_open").addClass("title_close");}}catch(l){}},getPrereqCatalogRegisterForTeam:function(o,p,s,q){try{a("#show_expertus_message").html("");var t=o.split("-");var l=t.length;var h=0;var b,f;var m;if(l==1){b=a('input[name="cls-'+t[0]+'"]:radio:checked').val();if(b!=undefined){f=a("#clsaction-"+b).val();var j=f.split("-");m=j[0];if(m=="cart"){var d=[Drupal.t("MSG716")];a("#show_expertus_message").html(expertus_error_message(d,"error"));a("#show_expertus_message").show();}else{this.prereqCatalogRegisterForTeam(t[0],b,q);
}}}else{for(var c=0;c<t.length;c++){tpCrsIdV=t[c];p=tpCrsIdV;b=a('input[name="cls-'+tpCrsIdV+'"]:radio:checked').val();if(b!=undefined){if(a("#cls-"+p).attr("disabled")==false){f=a("#clsaction-"+p).val();var j=f.split("-");m=j[0];if(m=="cart"){var d=[Drupal.t("MSG716")];a("#show_expertus_message").html(expertus_error_message(d,"error"));a("#show_expertus_message").show();}else{this.prereqCatalogRegisterForTeam(p,b,q);}h=h+1;}}}}if(((l==1)&&(b==undefined))||((l>1)&&(h==0))){var d=new Array();d[0]=s;var g=expertus_error_message(d,"error");a("#show_expertus_message").html(g);a("#show_expertus_message").show();}}catch(r){}},getTpPrereqCatalogRegisterForTeam:function(B,b,t,f){try{a("#show_expertus_message").html("");var B=B.split("-");var u,l,m=0,o=0;var z=new Array();var q=B.length;var j=a("#tpaction-"+b).val();var x=j.split("-");tpActionType=x[0];tpNodeId=x[1];var r="";var y="selectedItem={";for(var s=0;s<q;s++){u=B[s];m=m+1;l=a('input[name="cls-'+u+'"]:radio:checked').val();if(l!=undefined){z[s]=l;
r=l+r;}if(l==undefined||l=="undefined"){l="NULL";break;}y+='"'+o+'":{';y+='"tpid":"'+b+'",';y+='"courseid":"'+u+'",';y+='"classid":"'+l+'"';y+="}";if(m<q){y+=",";r=","+r;}o=o+1;}y+="}";if(q!=z.length){var g=new Array();g[0]=t;var d=expertus_error_message(g,"error");a("#show_expertus_message").html(d);a("#show_expertus_message").show();}else{if(tpActionType=="cart"){var c=[Drupal.t("MSG716")];a("#show_expertus_message").html(expertus_error_message(c,"error"));a("#show_expertus_message").show();}else{var D="N";var C="MyTeam";var A="N";var h=this.constructUrl("ajax/trainingplan/class-list-register/"+D+"/"+f+"/"+C+"/"+A);var p=this;a.ajax({type:"POST",url:h,data:y,datatype:"text",success:function(e){e=a.trim(e);var n=new Array();if(e=="Registered"){n[0]=Drupal.t("Registered Successfully");var v=expertus_error_message(n,"error");a("#show_expertus_message").html(v);a("#show_expertus_message").show();}else{n[0]=e;var v=expertus_error_message(n,"error");a("#show_expertus_message").html(v);a("#show_expertus_message").show();
}}});}}}catch(w){}},prereqCatalogRegisterForTeam:function(j,f,b){try{var h=this;var d="N";var c=1;h.createLoader("paintCatalogContentResults"+b);url=h.constructUrl("ajax/learningcore/register/"+b+"/"+j+"/"+f+"/"+c+"/"+d);a.ajax({type:"POST",url:url,data:{isManager:"Y"},success:function(e){e=a.trim(e);h.destroyLoader("paintCatalogContentResults"+b);var l=new Array();if(e=="Registered"){l[0]=Drupal.t("Registered Successfully");a('input[name="cls-'+j+'"]:radio').attr("disabled",true);if(document.getElementById("clsStatus-"+j)){a("#clsStatus-"+j).html(SMARTPORTAL.t("Registered"));}}else{if(e=="Waitlisted"){l[0]=Drupal.t("Waitlisted Successfully");a('input[name="cls-'+j+'"]:radio').attr("disabled",true);if(document.getElementById("clsStatus-"+j)){a("#clsStatus-"+j).html(SMARTPORTAL.t("Waitlisted"));}}else{l[0]=e;}}var m=expertus_error_message(l,"error");a("#show_expertus_message").html(m).show();}});}catch(g){logMyErrors(g);}},callAvailableSeats:function(d,c,b){try{var g=this;url=g.constructUrl("ajax/learning/myteam-search/available-seats/"+d+"/"+c+"/"+b);
a.ajax({type:"POST",url:url,data:"",success:function(e){a("#myteam-catalog-seats-available-"+d).html(e);}});}catch(f){}},paintAfterReady:function(){try{if(document.getElementById("lnr-myteam-search")){a("#prev_pager").click(function(c){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a(".sort-by-links").hide();}if(!a("#prev_pager").hasClass("ui-state-disabled")){a("#paintContentResults").hide();a("#gview_paintContentResults").css("min-height","60px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");}});a("#next_pager").click(function(c){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a(".sort-by-links").hide();}if(!a("#next_pager").hasClass("ui-state-disabled")){a("#paintContentResults").hide();a("#gview_paintContentResults").css("min-height","60px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");}});a(".ui-pg-selbox").bind("change",function(){a("#paintContentResults").hide();a("#gview_paintContentResults").css("min-height","60px");
a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");a("#lnr-myteam-search").data("lnrmyteamsearch").hidePageControls(false);});a(".ui-pg-input").keyup(function(c){if(c.keyCode==13){a("#paintContentResults").hide();a("#gview_paintContentResults").css("min-height","60px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("searchRecordsPaint");}});}}catch(b){}},paintCatalogAfterReady:function(b){try{if(document.getElementById("my-team-dialog")){a("#first_pager1").click(function(d){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#myteam-cat-delivery-type-list").hide();a(".sort-by-links").hide();}if(!a("#first_pager1").hasClass("ui-state-disabled")){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);}a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();});a("#prev_pager1").click(function(d){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#myteam-cat-delivery-type-list").hide();
a(".sort-by-links").hide();}if(!a("#prev_pager1").hasClass("ui-state-disabled")){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);}a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();});a("#next_pager1").click(function(d){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#myteam-cat-delivery-type-list").hide();a(".sort-by-links").hide();}if(!a("#next_pager1").hasClass("ui-state-disabled")){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);}a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();});a("#last_pager1").click(function(d){if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a("#myteam-cat-delivery-type-list").hide();a(".sort-by-links").hide();}if(!a("#last_pager1").hasClass("ui-state-disabled")){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");
a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);}a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();});a("#pager1 .ui-pg-selbox").bind("change",function(){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);a("#lnr-myteam-search").data("lnrmyteamsearch").hideCatalogPageControls(false);a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();});a("#pager1 .ui-pg-input").keyup(function(d){if(d.keyCode==13){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();}});if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a(".course-container-list #pager1 .page-show-next").click(function(h){var f=parseInt(a(".course-container-list #pg_pager1 .page_count_view").attr("id"));
var d=parseInt(a(".course-container-list #pager1 .page_count_view").html());var g=parseInt(a(".course-container-list #pg_pager1 .page-total-view").attr("id"));var j=f+1;if(g==j){a("#lnr-myteam-search").data("lnrmyteamsearch").afterBeforePageCount(b);}if(f>=g){a(".course-container-list #pg_pager1 .page_count_view").attr("id",(f-1));}if(d==15&&a(".course-container-list #pager1 .page-show-next").hasClass("hide-pointer")){return false;}a("#lnr-myteam-search").data("lnrmyteamsearch").afterBeforePageCount(b);});}if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a(".course-container-list #pager1 .page-show-prev").click(function(f){var d=parseInt(a(".course-container-list #pg_pager1 .page_count_view").attr("id"));if(d<=0){if(d==0){a("#lnr-myteam-search").data("lnrmyteamsearch").afterBeforePageCount(b);}a(".course-container-list #pg_pager1 .page_count_view").attr("id","0");}if(parseInt(a(".course-container-list #pg_pager1 .page_count_view").attr("id"))==0&&a(".course-container-list #pager1 .page-show-prev").hasClass("hide-pointer")){return false;
}a("#lnr-myteam-search").data("lnrmyteamsearch").afterBeforePageCount(b);});}}}catch(c){}},afterBeforePageCount:function(b){a("#loaderdivpaintCatalogContentResults"+b).css("min-height","250px");a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintCatalogContentResults"+b);a("#lnr-myteam-search").data("lnrmyteamsearch").hideCatalogPageControls(false);a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();},paintMyclassAfterReady:function(c){try{if(document.getElementById("lnr-myteam-search")){var b="<div id='paintClassContentResults"+c+"' class='paint-class-content-loader'></div>";a("#paintClassContentResults"+c).remove();a("#gview_paintMyclassContentResults"+c).prepend(b);a("#prev_pager2_user"+c).click(function(f){if(!a("#prev_pager2_user"+c).hasClass("ui-state-disabled")){a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintClassContentResults"+c);a("#loaderdivpaintClassContentResults"+c+" td").css("border-bottom","none");}});a("#next_pager2_user"+c).click(function(f){if(!a("#next_pager2_user"+c).hasClass("ui-state-disabled")){a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintClassContentResults"+c);
a("#loaderdivpaintClassContentResults"+c+" td").css("border-bottom","none");}});a("#pager2_user"+c+" .ui-pg-selbox").bind("change",function(){a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintClassContentResults"+c);a("#loaderdivpaintClassContentResults"+c+" td").css("border-bottom","none");});a("#pager2_user"+c+" .ui-pg-input").keyup(function(e){if(e.keyCode==13){a("#lnr-myteam-search").data("lnrmyteamsearch").createLoader("paintClassContentResults"+c);a("#loaderdivpaintClassContentResults"+c+" table>tbody>tr>td").css("border-bottom","none");}});a("#gbox_paintMyclassContentResults"+c+" .ui-jqgrid-sortable").click(function(f){if(a("#paintMyclassContentResults"+c).jqGrid("getGridParam","records")>1){a("#paintClassContentResults"+c).addClass("paint-class-content-loader");a("#loaderdivpaintClassContentResults"+c+" td").css("border-bottom","none");}});}}catch(d){}},deliveryHideShow:function(){try{a("#myteam-cat-delivery-type-list").slideToggle();a("#myteam-cat-delivery-type-list li:last").css("border-bottom","0px none");
}catch(b){}},deliveryTypeText:function(f,b,c){try{this.currTheme=Drupal.settings.ajaxPageState.theme;a("#myteam-cat-delivery-type-list").hide();a("#myteam-cat-delivery-type").text(b);a("#myteam-cat-delivery-type-hidden").val(f);a("#lnr-myteam-search").data("lnrmyteamsearch").catalogSearchAction("","",c);a("#lnr-myteam-search").data("lnrmyteamsearch").paintCatkeywordAutocomplete(c);a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();}catch(d){}},renderAccordion:function(f,b,d){try{var c=a(d).parents("tr").parents("tr").attr("id");if(!document.getElementById(c+"_cus-accord")){var g='<table id="'+b+'" class = "lp-course-class-list-accord"></table>';a(d).parents("tr").parents("tr").after("<tr id='"+c+"_cus-accord' class='cus-accord'><td colspan='3'>"+g+"</td></tr>");a(d).parents("tr").parents("tr").children("td").css("border-bottom","none 0px");a("body").data("learningcore").getModuleListForTP("",c,"","N",f,"MyTeam");a("#"+c+"_cus-accord").show();a("#"+c+"_cus-accord").slideDown(1000);
}else{var j=a("#"+c+"_cus-accord").css("display");if((j=="none")||(j=="undefined")){a("#"+c+"_cus-accord").show();a(d).parents("tr").parents("tr").children("td").css("border-bottom","none 0px");a("#"+c+"_cus-accord").slideDown(1000);}else{a("#"+c+"_cus-accord").hide();a("#"+c+"_cus-accord").slideUp(1000);if(Drupal.settings.ajaxPageState.theme=="expertusoneV2"){a(d).parents("tr").parents("tr").children("td").css("border-bottom","1px solid #ccc");}else{a(d).parents("tr").parents("tr").children("td").css("border-bottom","1px dotted #ccc");}}}a("#lnr-myteam-search").data("lnrmyteamsearch").refreshScrollBar();}catch(h){}},showMoreTeamAction:function(f,c){try{var b=0;if(a("#more-"+c).css("display")=="block"){b=1;}a(".team-more-action").hide();if(b==0){a("#more-"+c).css("display","block");}else{a("#more-"+c).css("display","none");}}catch(d){}},hideMoreTeamAction:function(c){try{this.prevMoreLPObj="";}catch(b){}},refreshScrollBar:function(){try{a("body").data("learningcore").refreshJScrollPane("#my-team-dialog #gview_tbl-paintCatalogContentResults");
}catch(b){}}});a("body").click(function(b){if(b.target.className!="team-launch-more"){a(".team-more-action").hide();}});a.extend(a.ui.lnrmyteamsearch.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget,{defaults:{start:true,catStart:true}});})(jQuery);$(function(){try{$("#lnr-myteam-search").lnrmyteamsearch();}catch(a){}});$("body").bind("click",function(a){try{if(a.target.id!="admin-dropdown-arrow"){$("#myteam-cat-delivery-type-list").hide();}}catch(b){}});function formattedDateComp(b){try{if(navigator.userAgent.toLowerCase().indexOf("msie")>=0){if(b!=null&&b!=undefined&&b!=""){b=b.replace(" ","-").replace(" ","-");}else{b=new Date().toString();}}else{if(b==null||b==undefined||b==""){b=new Date().toString();}}var h=new Date(b),g=""+(h.getMonth()+1),a=""+h.getDate(),c=h.getFullYear();if(g.length<2){g="0"+g;}if(a.length<2){a="0"+a;}return[g,a,c].join("-");}catch(f){}}$(function(){try{$("#myteam_searchtext").keyup(function(b){try{if(b.keyCode==13){$("#lnr-myteam-search").data("lnrmyteamsearch").searchAction();
}}catch(c){}});$("#myteam-search-txt").click(function(){try{$("#lnr-myteam-search").data("lnrmyteamsearch").searchAction();}catch(b){}});if($("#myteam_searchtext")){if($(".page-myapproval-myteam-certificate").length>0){$("#myteam_searchtext").autocomplete("/?q=learning/myteam-myapproval/certificate-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}else{$("#myteam_searchtext").autocomplete("/?q=learning/myteam-search/username-autocomplete",{minChars:3,max:50,autoFill:true,mustMatch:false,matchContains:false,inputClass:"ac_input",loadingClass:"ac_loading"});}}}catch(a){}});