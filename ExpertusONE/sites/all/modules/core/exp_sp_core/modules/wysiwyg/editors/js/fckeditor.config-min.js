Drupal=window.parent.Drupal;var wysiwygFormat=FCKConfig.PageConfig.wysiwygFormat;var wysiwygSettings=Drupal.settings.wysiwyg.configs.fckeditor[wysiwygFormat];var pluginSettings=(Drupal.settings.wysiwyg.plugins[wysiwygFormat]?Drupal.settings.wysiwyg.plugins[wysiwygFormat]:{"native":{},drupal:{}});for(var setting in wysiwygSettings){if(setting=="buttons"){FCKConfig.ToolbarSets.Wysiwyg=[];for(var i=0;i<wysiwygSettings.buttons[0].length;i++){FCKConfig.ToolbarSets.Wysiwyg.push([wysiwygSettings.buttons[0][i]]);}FCKTools.AppendStyleSheet(document,"#xToolbar .TB_Start { display:none; }");if(FCKConfig.SkinPath.match(/\/office2003\/$/)){FCKTools.AppendStyleSheet(document,"#xToolbar .SC_FieldCaption { height: 24px; } #xToolbar .TB_End { display: none; }");}else{if(FCKConfig.SkinPath.match(/\/silver\/$/)){FCKTools.AppendStyleSheet(document,"#xToolbar .SC_FieldCaption { height: 27px; }");}}}else{FCKConfig[setting]=wysiwygSettings[setting];}}var oldFitWindowExecute=FCKFitWindow.prototype.Execute;var $drupalToolbar=window.parent.jQuery("#toolbar",Drupal.overlayChild?window.parent.window.parent.document:window.parent.document);
FCKFitWindow.prototype.Execute=function(){oldFitWindowExecute.apply(this,arguments);if(this.IsMaximized){$drupalToolbar.hide();}else{$drupalToolbar.show();}};Drupal.wysiwyg.editor.instance.fckeditor.init(window);for(var plugin in pluginSettings["native"]){FCKConfig.Plugins.Add(plugin,pluginSettings["native"][plugin].languages,pluginSettings["native"][plugin].path);}for(var plugin in pluginSettings.drupal){Drupal.wysiwyg.editor.instance.fckeditor.addPlugin(plugin,pluginSettings.drupal[plugin],Drupal.settings.wysiwyg.plugins.drupal[plugin],window);}