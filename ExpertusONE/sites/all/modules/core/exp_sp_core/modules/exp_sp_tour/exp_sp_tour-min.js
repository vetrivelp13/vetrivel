(function(a){a.widget("ui.exp_sp_tour",{getCurrentUrl:function(c){try{var b=window.location.href.split("/?q=");return b[1];}catch(d){}},getSteps:function(){try{var b=[];if(Drupal.settings.exp_sp_tour!==undefined){b=JSON.parse(Drupal.settings.exp_sp_tour.tourconfig);}return b;}catch(c){}},_init:function(){try{var c=(a("#tour_mylearn").length>0?true:false);var b=this.getSteps();if(!c&&((b!==undefined&&b.length>0)||a("[data-intro]").length>0)){a('<div class = "tour-outer-wrapper"><div id = "tour_mylearn" onclick="$(\'body\').data(\'exp_sp_tour\').startTour();"><p>'+Drupal.t("TOUR")+"</p></div></div>").prependTo("body");}if(Drupal.settings.exp_sp_tour.auto_start==1){setTimeout(function(){a("#tour_mylearn").click();},500);}}catch(d){}},startTour:function(){try{var d=introJs();var b=this.getSteps();var g=this;var c={showStepNumbers:false,overlayOpacity:0.5,exitOnOverlayClick:false,nextLabel:Drupal.t("LBL693"),prevLabel:Drupal.t("LBL692"),skipLabel:Drupal.t("LBL3213"),doneLabel:Drupal.t("LBL569")};
if(b!==undefined){c.steps=g.rearrangeStep(b).filter(function(h){var e=["#paintCriteriaResults","#refine-filter-pin-icon.pin-icon-white"];return((a(h.element).length>0&&a(h.element).is(":visible"))||h.welcomeText||e.indexOf(h.element)!=-1);});}d.setOptions(c).onbeforechange(function(h){try{var j=a("#paintCriteriaResults").hasClass("searchcriteria-div-unpinned");if(j){if(a(h).attr("id")=="paintCriteriaResults"){a("#lnr-catalog-search").data("lnrcatalogsearch").pinUnpinFilterCriteria();}else{if(a(h).is("#refine-filter-pin-icon.pin-icon-white")){a("#lnr-catalog-search").data("lnrcatalogsearch").pinUnpinFilterCriteria();}}}else{if(a(h).is("#refine-filter-pin-icon.pin-icon-black")){a("#lnr-catalog-search").data("lnrcatalogsearch").pinUnpinFilterCriteria();a(".catalog-criteria-refine-icon").trigger("mouseenter");}}a(".introjs-helperLayer-Mask").remove();}catch(i){}}).onafterchange(function(e){a(".introjs-helperLayer").clone().appendTo("body").addClass("introjs-helperLayer-Mask");a(".tour-common").css("height","41px");
a(".tour-filter").css("width","63px");a(".tour-filter").css("margin-left","-7px");a(".tour-common").css("margin-top","3px");}).oncomplete(function(){a(".introjs-helperLayer-Mask").remove();}).onexit(function(){a(".introjs-helperLayer-Mask").remove();}).start();}catch(f){}},rearrangeStep:function(b){if(this.getCurrentUrl()=="learning/enrollment-search"){var c=["#block-exp-sp-lnrlearningplan-tab-my-learningplan-customized","#block-exp-sp-lnrenrollment-tab-my-enrollment-customized","#block-exp-sp-instructor-desk-tab-instructor-desk-customized"];var d=function(g,e){if(a.inArray(g.element,c)!=-1&&a.inArray(e.element,c)!=-1){var i=a(g.element+", "+e.element);var h=0;var f=0;a(g.element+", "+e.element).each(function(j,k){if(a(k).is(g.element)){h=j;}else{if(a(k).is(e.element)){f=j;}}});if(h<f){return -1;}if(h>f){return 1;}}return 0;};return b.sort(d);}return b;}});a.extend(a.ui.exp_sp_tour.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget,{defaults:{start:true,catStart:true}});
})(jQuery);$(function(){try{$("body").exp_sp_tour();}catch(a){}});