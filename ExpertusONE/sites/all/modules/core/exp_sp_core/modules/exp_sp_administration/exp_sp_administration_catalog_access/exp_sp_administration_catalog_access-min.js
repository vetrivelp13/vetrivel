$(document).ready(function(){try{$("#access-control .movable").live("click",function(b){try{if($(this).hasClass("selected-list")){$(this).removeClass("selected-list");}else{$(this).addClass("selected-list");}}catch(c){}});$("body").click(function(b){try{if(b.target.className=="move-right"||b.target.className=="move-left"){}else{$("#access-control .movable").each(function(){});}$("#access-select-list-class-dropdown-list").css("display","");if(b.target.className!="access-select-list-class-dropdown-link"){$("#access-select-list-class-dropdown-list").hide();}$("#ssel-unsel-usrlist-wrapper #select-list-dropdown-list").show();if(b.target.className!="access-select-list-user-dropdown-link"){$("#sel-unsel-usrlist-wrapper #select-list-dropdown-list").hide();}}catch(c){}});$("#access-control #organization .move-right").live("click",function(){try{$("#access-control #organization-available .selected-list").each(function(){storeOrgRolesValues("org","add",$(this).attr("id"));var d=$(this).children("span").attr("data");
var c=$(this).children("span").html();$("#organization-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+d+'" title="'+d+'">'+c+"</span></li>");$(this).remove();vtip();});}catch(b){}});$("#access-control #organization .move-left").live("click",function(){try{$("#access-control #organization-selected .selected-list").each(function(){storeOrgRolesValues("org","remove",$(this).attr("id"));var d=$(this).children("span").attr("data");var c=$(this).children("span").html();$("#organization-available .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+d+'" title="'+d+'">'+c+"</span></li>");$(this).remove();vtip();});}catch(b){}});$("#access-control #organization-available .item-list li.movable").live("dblclick",function(){try{$("#vtip").remove();storeOrgRolesValues("org","add",$(this).attr("id"));var c=$(this).children("span").attr("data");var b=$(this).children("span").html();$("#organization-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+c+'" title="'+c+'">'+b+"</span></li>");
$(this).remove();vtip();}catch(d){}});$("#access-control #organization-selected .item-list li.movable").live("dblclick",function(){try{$("#vtip").remove();storeOrgRolesValues("org","remove",$(this).attr("id"));var c=$(this).children("span").attr("data");var b=$(this).children("span").html();$("#organization-available .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+c+'" title="'+c+'">'+b+"</span></li>");$(this).remove();vtip();}catch(d){}});$("#access-control #jobroles .move-right").live("click",function(){try{$("#access-control #jobroles-available .selected-list").each(function(){var c,d,h;var f=$("#entity_type").val();var e=$("#is_compliance").val();if((f=="cre_sys_obt_cls"&&e=="0")||f=="cre_sys_obt_trn"||f=="cre_sys_obt_crt"||f=="cre_sys_obt_cur"){var i=$("#mro-controls").val();var g=$("#default-mro-control").val();storeOrgRolesValues("jobroles","add",$(this).attr("id")+"-"+g);c=$(this).children().html();d=titleRestricted(c,"13");h=titleRestricted(i,"5");
$("#jobroles-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="admin-access-org-name vtip" data="'+c+'" title="'+c+'">'+d+"</span>"+i+"</li>");}else{storeOrgRolesValues("jobroles","add",$(this).attr("id"));c=$(this).children().html();d=titleRestricted(c,"40");$("#jobroles-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+c+'" title="'+c+'">'+d+"</span></li>");}$(this).remove();vtip();});}catch(b){}});$("#access-control #jobroles .move-left").live("click",function(){try{$("#access-control #jobroles-selected .selected-list").each(function(){storeOrgRolesValues("jobroles","remove",$(this).attr("id"));$(this).find(".mro-controls").remove();var c=$(this).children("span").attr("data");$("#jobroles-available .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+c+'" title="'+c+'">'+c+"</span></li>");$(this).remove();vtip();});}catch(b){}});$("#access-control #jobroles-available .item-list li.movable").live("dblclick",function(){try{$("#vtip").remove();
var b,c,i;var f=$("#entity_type").val();var d=$("#is_compliance").val();if((f=="cre_sys_obt_cls"&&d=="0")||f=="cre_sys_obt_trn"||f=="cre_sys_obt_crt"||f=="cre_sys_obt_cur"){var j=$("#mro-controls").val();var h=$("#default-mro-control").val();storeOrgRolesValues("jobroles","add",$(this).attr("id")+"-"+h);b=$(this).children().html();c=titleRestricted(b,"13");i=titleRestricted(j,"5");$("#jobroles-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="admin-access-org-name vtip" data="'+b+'" title="'+b+'">'+c+"</span>"+j+"</li>");}else{storeOrgRolesValues("jobroles","add",$(this).attr("id"));b=$(this).children().html();c=titleRestricted(b,"40");$("#jobroles-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+b+'" title="'+b+'">'+c+"</span></li>");}$(this).remove();vtip();}catch(g){}});$("#access-control #jobroles-selected .item-list li.movable").live("dblclick",function(){try{$("#vtip").remove();storeOrgRolesValues("jobroles","remove",$(this).attr("id"));
$(this).find(".mro-controls").remove();var b=$(this).children("span").attr("data");$("#jobroles-available .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+b+'" title="'+b+'">'+b+"</span></li>");$(this).remove();vtip();}catch(c){}});$("#jobroles-selected .sub-menu li").live("click",function(){try{var c=$(this).html();var f=$(this).closest(".movable").attr("id");var d=$(this).attr("data");$(this).parent().prev("span").prev("span").html(c);$(this).parent().css("display","none");storeOrgRolesValues("jobroles","modify",f,d);return false;}catch(b){}});$("#access-control .mro-selection").live("click",function(){try{var d=$(this).position().left;var c=$(this).position().top;if($(this).next().css("display")=="block"){$(this).next().css("display","none");}else{$(this).next().css("display","block");if(navigator.userAgent.indexOf("Chrome")>0||$.browser.msie&&$.browser.version>=8){$(this).next().css("top",d);$(this).next().css("top",c+17);}}}catch(b){}});
$("#access-control #usertype .move-right").live("click",function(){try{$("#access-control #usertype-available .selected-list").each(function(){storeOrgRolesValues("usertype","add",$(this).attr("id"));var d=$(this).children("span").attr("data");var c=$(this).children("span").html();$("#usertype-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+d+'" title="'+d+'">'+c+"</span></li>");$(this).remove();vtip();});}catch(b){}});$("#access-control #usertype .move-left").live("click",function(){try{$("#access-control #usertype-selected .selected-list").each(function(){storeOrgRolesValues("usertype","remove",$(this).attr("id"));var d=$(this).children("span").attr("data");var c=$(this).children("span").html();$("#usertype-available .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+d+'" title="'+d+'">'+c+"</span></li>");$(this).remove();vtip();});}catch(b){}});$("#access-control #usertype-available .item-list li.movable").live("dblclick",function(){try{$("#vtip").remove();
storeOrgRolesValues("usertype","add",$(this).attr("id"));var d=$(this).children("span").attr("data");var b=$(this).children("span").html();$("#usertype-selected .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+d+'" title="'+d+'">'+b+"</span></li>");$(this).remove();vtip();}catch(c){}});$("#access-control #usertype-selected .item-list li.movable").live("dblclick",function(){try{$("#vtip").remove();storeOrgRolesValues("usertype","remove",$(this).attr("id"));var d=$(this).children("span").attr("data");var b=$(this).children("span").html();$("#usertype-available .item-list").append('<li class="movable" id="'+$(this).attr("id")+'"><span class="vtip" data="'+d+'" title="'+d+'">'+b+"</span></li>");$(this).remove();vtip();}catch(c){}});}catch(a){}});function storeOrgRolesValues(d,h,a,b){try{var k="#"+d+"_selected_id";var m=$(k).val();var i=new Array();var l=0;if(h=="add"){if(m!=""){i=m.split(",");i.push(a);m=i.join(",");$(k).val(m);}else{$(k).val(a);
}}else{if(h=="remove"){i=m.split(",");i.splice($.inArray(a,i),1);m=i.join(",");$(k).val(m);}else{i=m.split(",");l=i.length;var j=new Array();for(var g=0;g<l;g++){j=i[g].split("-");if(j[0]==a){i[g]=a+"-"+b;}}$(k).val(i.join(","));}}}catch(f){}}function getOrganizationList(b,c,h){try{if(b.length>2||b.length==0){var a=$("#org_selected_id").val();b=b.length==0?"-":b;a=a.length==0?"-":a;var f=$("#org_pagenation").val().split("#");var d;var i;if(c=="more"){i=f[1];}else{i=0;}if(h=="discounts"){url="/?q=administration/commerce/discounts/getorglist/"+b+"/"+a+"/"+i;}else{url="/?q=administration/learning/access/getorglist/"+b+"/"+a+"/"+i;}$(".admin-access-jobrole-field1 .admin-access-jobrole-field").addClass("ac_loading");$.ajax({type:"POST",url:url,data:"",success:function(e){if(e!=undefined&&e!=null&&e!=""){if(c=="more"){$("#org_more").remove();$("#organization-available > ul").append(e);$("#org_pagenation").val(f[0]+"#"+(Number(f[1])+1));f=$("#org_pagenation").val().split("#");d=15*(Number(f[1]));
}else{$("#organization-available > ul").html(e);$("#org_pagenation").val(f[0]+"#1");f=$("#org_pagenation").val().split("#");d=15*1;}}$(".admin-access-jobrole-field1 .admin-access-jobrole-field").removeClass("ac_loading");if(Number(f[0])<=d){$("#org_more").remove();}}});}}catch(g){}}function getJobRoles(a,c,h){try{if(a.length>2||a.length==0){var b=$("#jobroles_selected_id").val();a=a.length==0?"-":a;b=b.length==0?"-":b;var f=$("#jobrole_pagenation").val().split("#");var d;var i;if(c=="more"){i=f[1];}else{i=0;}if(h=="discounts"){url="/?q=administration/commerce/discounts/getjobroles/"+a+"/"+b+"/"+i;}else{url="/?q=administration/learning/access/getjobroles/"+a+"/"+b+"/"+i;}$(".admin-access-jobrole-field2 .admin-access-jobrole-field").addClass("ac_loading");$.ajax({type:"POST",url:url,data:"",success:function(e){if(e!=undefined&&e!=null&&e!=""){if(c=="more"){$("#jobrole_more").remove();$("#jobroles-available > ul").append(e);$("#jobrole_pagenation").val(f[0]+"#"+(Number(f[1])+1));f=$("#jobrole_pagenation").val().split("#");
d=15*(Number(f[1]));}else{$("#jobroles-available > ul").html(e);$("#jobrole_pagenation").val(f[0]+"#1");f=$("#jobrole_pagenation").val().split("#");d=15*1;}}$(".admin-access-jobrole-field2 .admin-access-jobrole-field").removeClass("ac_loading");if(Number(f[0])<=d){$("#jobrole_more").remove();}}});}}catch(g){}}function getUserTypes(a,c,h){try{if(a.length>2||a.length==0){var b=$("#usertype_selected_id").val();a=a.length==0?"":a;b=b.length==0?"":b;var f=$("#usertype_pagenation").val().split("#");var d;var i;if(c=="more"){i=f[1];}else{i=0;}if(h=="discounts"){url="/?q=administration/commerce/discounts/getusertype/"+a+"/"+b+"/"+i;}else{url="/?q=administration/learning/access/getusertype/"+a+"/"+b+"/"+i;}$(".admin-access-jobrole-field3 .admin-access-jobrole-field").addClass("ac_loading");$.ajax({type:"POST",url:url,data:"",success:function(e){if(e!=undefined&&e!=null&&e!=""){if(c=="more"){$("#usertype_more").remove();$("#usertype-available > ul").append(e);$("#usertype_pagenation").val(f[0]+"#"+(Number(f[1])+1));
f=$("#usertype_pagenation").val().split("#");d=15*(Number(f[1]));}else{$("#usertype-available > ul").html(e);$("#usertype_pagenation").val(f[0]+"#1");f=$("#usertype_pagenation").val().split("#");d=15*1;}}$(".admin-access-jobrole-field3 .admin-access-jobrole-field").removeClass("ac_loading");if(Number(f[0])<=d){$("#usertype_more").remove();}}});}}catch(g){}}function updateAccessOnKeyDown(b,d){try{b=b||window.event;var a=b.keyCode||b.which;if(a==13){b.preventDefault();b.stopPropagation();return false;}}catch(c){}}function selectKeyDownAccess(f,b,c){try{b=b||window.event;var a=b.keyCode||b.which;if(a==40){$("#"+c+" #"+f).next().focus();$("#"+c+" #"+f).next().addClass("selected-list");}if(a==38){$("#"+c+" #"+f).removeClass("selected-list");$("#"+c+" #"+f).prev().focus();}b.preventDefault();b.stopPropagation();return false;}catch(d){}}(function(a){a.widget("ui.accessgroup",{callMultiSelect:function(b,l,c,e,k){var f=this.constructUrl("administration/catalogaccess/group/autocomplete&type="+e+"&uniqueId="+l);
var g;var d=this;var j=Drupal.t("LBL1270");if(typeof(e)=="undefined"){e="";}if(e=="Discount"){grpurl=this.constructUrl("administration/catalogaccess/discount/group/"+l);}else{grpurl=this.constructUrl("administration/catalogaccess/group/"+l+"/"+k+"&type="+e);}var i=270;if(document.getElementById("sel-unsel-usrlist")!=null){i=305;}if(b=="sel-unsel-usrlist"){grpurl=this.constructUrl("administration/catalogaccess/user/"+l+"/"+k+"&type="+e);f=this.constructUrl("administration/catalogaccess/user/autocomplete&type="+e+"&uniqueId="+l);j=Drupal.t("LBL036")+" "+Drupal.t("LBL054");a("#sel-unsel-grplist").hide();a("#sel-unsel-usrlist").show();if(a("#user-list-control").length>0){a("#group-list-control").find("span:last").removeClass("down-tip-arrow").addClass("right-tip-arrow");a("#user-list-control").find("span:last").removeClass("right-tip-arrow").addClass("down-tip-arrow");}}else{a("#sel-unsel-grplist").show();a("#sel-unsel-usrlist").hide();if(a("#user-list-control").length>0){a("#user-list-control").find("span:last").removeClass("down-tip-arrow").addClass("right-tip-arrow");
a("#group-list-control").find("span:last").removeClass("right-tip-arrow").addClass("down-tip-arrow");}}if(a("#"+b+" #ui-multiselect-con").size()>0){return true;}var h="";if(a("#hidden_oplist").val()!=null){h=JSON.parse(a("#hidden_oplist").val());}this.currTheme=Drupal.settings.ajaxPageState.theme;if(this.currTheme=="expertusoneV2"){a("#"+b).expMultiSelectDropdownExtend({width:i,height:235,listmodel:{id:"opt",title:"val",dispTitle:"dispval",selected:"sel"},sublistmodel:{enable:"dropdown",defaultval:"mro"},optlistmodel:{id:"opt",title:"val"},optional:{optionlist:h,enable:c},url:grpurl,searchfilter:{url:f,enable:true},helpText:{autocomplete:j,checkAll:"Check All",uncheckAll:"Uncheck All"},dataType:"json",rownum:15,checkAll:false,uncheckall:false,titlelength:30,widget:this,onselect:this.onselectfn,onunselect:this.onunselectfn,ondropdown:this.ondropdownselfn});}else{a("#"+b).expmultiselectDropdown({width:i,height:235,listmodel:{id:"opt",title:"val",dispTitle:"dispval",selected:"sel"},sublistmodel:{enable:"dropdown",defaultval:"mro"},optlistmodel:{id:"opt",title:"val"},optional:{optionlist:h,enable:c},url:grpurl,searchfilter:{url:f,enable:true},helpText:{autocomplete:j,checkAll:"Check All",uncheckAll:"Uncheck All"},dataType:"json",rownum:15,checkAll:false,uncheckall:false,titlelength:27,widget:this,onselect:this.onselectfn,onunselect:this.onunselectfn,ondropdown:this.ondropdownselfn});
a("#chk ul li").each(function(){if(a(this).hasClass("learner-group-container")){a(this).css("display","table-row");}});}setTimeout(function(){a("#"+b+" #chk ul li .access-fullname .fade-out-image-access").remove();a("#sel-user-list .cls-access-list-select").each(function(){var m=a(this).find("span:first").attr("id");m=m.replace("group-names-","");d.resetRighPane("sel-user-list",m);});},100);this.callScroll();vtip();},callScroll:function(){var e=a("#group-control").height()-60;var d=a("#sel-group-list").height();var b=a("#sel-user-list").height();var c=(d!=0&&b!=0)?(d+b+101):(d+b+23);if(c>=e){if(a("#group-scroll-wrapper").find(".jspContainer").length>0){a("#group-scroll-wrapper").jScrollPane("reinitialise");}else{a("#group-scroll-wrapper").jScrollPane({});}}else{if(a("#group-scroll-wrapper").find(".jspContainer").length>0){a("#group-scroll-wrapper").jScrollPane("destroy");}}},onselectfn:function(o,j,c){var b=a(o).attr("id");var k=(b=="sel-unsel-usrlist")?"sel-user-list":"sel-group-list";
var l=(b=="sel-unsel-usrlist")?"hidden_selection_usr":"hidden_selection";var d=(b=="sel-unsel-usrlist")?"hidden_idlist_usr":"hidden_idlist";var m=a('input[id="'+l+'"]').attr("value");var f="";if(m.length==0){if(a("#"+j.value).attr("opt")==="enable"){f=j.value+"-cre_sys_inv_opt";}else{f=j.value+"-";}}else{if(a("#"+j.value).attr("opt")==="enable"){f=","+j.value+"-cre_sys_inv_opt";}else{f=","+j.value+"-";}}var p=a("#"+b).expmultiselectDropdown("getValue","selected");var n=a("#"+k).html();n=titleRestrictionFadeoutImage("- "+j.title,"addedit-cataog-access-group-name-fadeout-container");var g="mro-names-"+j.value;var e="group-names-"+j.value;if(document.getElementById(e)==null){a("#"+k).append('<div class="cls-access-list-select"><span id="'+e+'" class="vtip" title ="'+j.title+'"></span><span id="'+g+'"></span></div>');}a("#group-names-"+j.value).html(n);if(a(".contentauthorclone").size()==0){c.sortList(k);}if(p.length!=""){if(b=="sel-unsel-usrlist"){a("#help-msg-usr").css("display","block")+"<br>";
}if(b=="sel-unsel-grplist"){a("#help-msg-grp").css("display","block")+"<br>";}a("#sel-group-text").css("display","none");a("#sel-message").css("display","none");a("#sel-msg").css("display","none");}if(b=="sel-unsel-usrlist"){a("#"+b+" #chk ul li .access-username").remove();a("#"+b+" #chk ul li .access-fullname").css("min-width","130px");}var h="";a.each(p,function(){h+=h==""?(this.value+"-"+this.selectedOption.optId):","+(this.value+"-"+this.selectedOption.optId);});a('input[id="'+d+'"]').attr("value",h);m=m+f;a('input[id="'+l+'"]').attr("value",m);c.dispSeparator();c.callScroll();vtip();},sortList:function(c){var d=a("#"+c);var b=d.children("div").get();b.sort(function(f,e){return a(f).text().toUpperCase().localeCompare(a(e).text().toUpperCase());});a.each(b,function(e,f){a("#"+c).append(f);});},onunselectfn:function(p,j,d){var c=a(p).attr("id");var k=(c=="sel-unsel-usrlist")?"sel-user-list":"sel-group-list";var l=(c=="sel-unsel-usrlist")?"hidden_selection_usr":"hidden_selection";var e=(c=="sel-unsel-usrlist")?"hidden_idlist_usr":"hidden_idlist";
var n=a('input[id="'+l+'"]').attr("value");var f=j.value+"-";var b="(^|,)"+f+"(cre_sys_inv_rec|cre_sys_inv_man|cre_sys_inv_opt|)";var g=new RegExp(b);n=n.replace(g,"");if(n.charAt(0)==","){n=n.substring(1,n.length);}var o=a("#"+k).html();o=o.split("-");o.splice(o.indexOf(j.title),1);var m=new RegExp(",","g");o=o.toString().replace(m,"-");a("#group-names-"+j.value).html("");a("#mro-names-"+j.value).html("");a("#group-names-"+j.value).parent().remove();a('input[id="'+l+'"]').attr("value","");var q=a("#"+c).expmultiselectDropdown("getValue","selected");var h="";a.each(q,function(){h+=h==""?(this.value+"-"+this.selectedOption.optId):","+(this.value+"-"+this.selectedOption.optId);});a('input[id="'+e+'"]').attr("value",h);n=(n==undefined||n=="undefined")?"":n;a('input[id="'+l+'"]').attr("value",n);d.dispSeparator(c);d.callScroll();},dispSeparator:function(d){var c=a("#sel-group-list").children();var b=a("#sel-user-list").children();if(c.length>0&&b.length>0){a("#right-separator").css("display","block");
}else{a("#right-separator").css("display","none");}if(c.length==0&&b.length==0){a("#sel-group-text").css("display","inline");a("#sel-message").css("display","inline");a("#sel-msg").css("display","inline");}else{a("#sel-group-text").css("display","none");a("#sel-message").css("display","none");a("#sel-msg").css("display","none");}if(c.length==0){a("#help-msg-grp").css("display","none");}if(b.length==0){a("#help-msg-usr").css("display","none");}},ondropdownselfn:function(r,k,d){var c=a(r).attr("id");var m=(c=="sel-unsel-usrlist")?"sel-user-list":"sel-group-list";var n=(c=="sel-unsel-usrlist")?"hidden_selection_usr":"hidden_selection";var f=(c=="sel-unsel-usrlist")?"hidden_idlist_usr":"hidden_idlist";var o=a('input[id="'+n+'"]').attr("value");var e=","+k.value+"-"+k.selectedOption.optId;var g=k.value+"-";var b="(^|,)"+g+"(cre_sys_inv_rec|cre_sys_inv_man|cre_sys_inv_opt|)";var h=new RegExp(b);o=o.replace(h,e);if(o.charAt(0)==","){o=o.substring(1,o.length);}var q=a("#"+m).html();q=" <span>("+k.selectedOption.optval+")</span>";
var l=k.selectedOption.optId;a("#mro-names-"+k.value).html("");a("#mro-names-"+k.value).html(q);if(l=="cre_sys_inv_opt"){a("#mro-names-"+k.value).html("");}else{a("#mro-names-"+k.value).html(q);}d.resetRighPane(m,k.value);var p=a('input[id="'+f+'"]').val();p=p+"-"+k.selectedOption.optId;var s=a("#"+c).expmultiselectDropdown("getValue");var j="";a.each(s,function(){j+=j==""?(this.value+"-"+this.selectedOption.optId):","+(this.value+"-"+this.selectedOption.optId);});a('input[id="'+f+'"]').attr("value",j);a('input[id="'+n+'"]').attr("value",o);},resetRighPane:function(g,f){var b=a("#"+g).width();var c=a("#mro-names-"+f+" span").width()+2;var e=a("#group-names-"+f+" .fade-out-title-container .title-lengthy-text").width();var d=b-c;var h=(e>d)?(d-5):e;a("#group-names-"+f).css("float","left");a("#group-names-"+f+" .fade-out-title-container.addedit-cataog-access-group-name-fadeout-container").css("max-width",h+"px");a("#group-names-"+f+" .fade-out-title-container.addedit-cataog-access-group-name-fadeout-container span .fade-out-image").remove();
if(e>d){a("#group-names-"+f+" .fade-out-title-container.addedit-cataog-access-group-name-fadeout-container span").append('<span class="fade-out-image"></span>');a("#mro-names-"+f).css("width",c+"px").css("padding-left","0px");}else{a("#mro-names-"+f).css("width",c+"px").css("padding-left","10px");}a("#mro-names-"+f).css("float","left");},moreAccessSearchTypeText:function(f,c){a("#access-select-list-class-dropdown-list").hide();a("#access-select-list-class-dropdown").text(f);a("#access-search_all_classs_type-hidden").val(c);var e;if(c=="clstit"){e=Drupal.t("LBL766");}else{if(c=="clsstatus"){e=Drupal.t("LBL036")+" "+Drupal.t("Class")+" "+f;}else{e=Drupal.t("LBL036")+" "+f;}}var d=a("#access-select-list-class-dropdown").html();var b=a("#sel-unsel-grplist").data("expmultiselectDropdown");if(b.options.searchfilter.url.indexOf("Admin")>=0){b.options.searchfilter.url=b.options.searchfilter.url.replace("Admin",d);b.options.url=b.options.url.replace("Admin",d);}else{if(b.options.searchfilter.url.indexOf("Learner")>=0){b.options.searchfilter.url=b.options.searchfilter.url.replace("Learner",d);
b.options.url=b.options.url.replace("Learner",d);}else{if(b.options.searchfilter.url.indexOf("Any")>=0){b.options.searchfilter.url=b.options.searchfilter.url.replace("Any",d);b.options.url=b.options.url.replace("Any",d);}}}a("#sel-unsel-grplist").expmultiselectDropdown("autocompleteInit");},moreUserAccessSearchTypeText:function(f,d){a("#select-list-dropdown-list").hide();var c=a("#search_all_enroll_type-hidden").val();a("#select-list-dropdown").text(f);a("#search_all_enroll_type-hidden").val(d);var e=Drupal.t("LBL036")+" "+f;a("#sel-unsel-usrlist #multiautocomplete").val(e);var b=a("#sel-unsel-usrlist").data("expmultiselectDropdown");if(b.options.searchfilter.url.indexOf(c)>=0){b.options.searchfilter.url=b.options.searchfilter.url.replace(c,d);b.options.url=b.options.url.replace(c,d);b.options.helpText.autocomplete=e;}a("#sel-unsel-usrlist").expmultiselectDropdown("autocompleteInit");},moreAccessSearchHideShow:function(b){a("#access-select-list-class-dropdown-list").slideToggle();a("#access-select-list-class-dropdown-list li:last").css("border-bottom","0px none");
},moreUserAccessSearchHideShow:function(b){a("#select-list-dropdown-list").slideToggle();a("#select-list-dropdown-list li:last").css("border-bottom","0px none");},accessClose:function(){a("#group-control").remove();}});a.extend(a.ui.accessgroup.prototype,EXPERTUS_SMARTPORTAL_AbstractManager,EXPERTUS_SMARTPORTAL_AbstractDetailsWidget);})(jQuery);$(function(){try{$("#root-admin").accessgroup();}catch(a){}});(function(a){a.widget("custom.multiselectclone",{options:{checkAll:false,uncheckAll:false,helpText:{autocomplete:"Search",checkAll:"Check All",uncheckAll:"Uncheck All"},targetClass:"",onunselectAll:"",onselectAll:"",theme:""},_create:function(){var d=this.options,g=this,e="",h="",c="<ul></ul>",i="<ul></ul>",b="",f=d.height-30;this.elem=this.element;this.elemid=a(this.elem).attr("id");if(a(".contentauthorclone").size()>0){e+='<div id ="ui-multiselect-con"><div id = "container"><div id ="chk"></div></div></div>';a(g.element).append(e);a(g.element).find("#ui-multiselect-con").addClass(d.classes).css({width:d.width,height:d.height});
a(g.element).find("#container").css({height:f});a(g.element).find(".label-text").each(function(){g._labelBind(this);});g._dataLoad();}else{if(d.checkAll==true){if(d.theme=="expertusoneV2"){h+='<div><ul><li style="display:none;" class="select-all-wrapper"><label class="clone-label-list" for="checkall" title="'+d.helpText.checkAll+'">'+d.helpText.checkAll+'</label><div class="form-item form-type-checkbox form-item-checkbox-attributes-access"><div class="checkbox-unselected"><input class="form-checkbox" type="checkbox" name="checkall" id="selectcheckall"><span class="field-suffix"></span></div></div></li></ul></div>';}else{h+='<div><ul><li style="display:none;" class="select-all-wrapper"><input class="form-checkbox" type="checkbox" name="checkall" id="selectcheckall"><label class="clone-label-list" for="checkall">'+d.helpText.checkAll+"</label></li></ul></div>";}}if(d.uncheckAll==true){if(d.theme=="expertusoneV2"){b+='<div><ul><li style="display:none;" class="select-all-wrapper"><label class="clone-label-list" for="uncheckall" title="'+d.helpText.uncheckAll+'">'+d.helpText.uncheckAll+'</label><div class="form-item form-type-checkbox form-item-checkbox-attributes-access"><div class="checkbox-unselected"><input class="form-checkbox" type="checkbox" name="uncheckall" id="selectuncheckall"><span class="field-suffix"></span></div></div></li></ul></div>';
}else{b+='<div><ul><li style="display:none;" class="select-all-wrapper"><input class="form-checkbox" type="checkbox" name="uncheckall" id="selectuncheckall"><label class="clone-label-list" for="uncheckall">'+d.helpText.uncheckAll+"</label></li></ul></div>";}}e+='<div id ="ui-multiselect-con"><div id = "container">'+b+'<div id ="chk">'+c+'</div><div class="line-separator" style="display:none;"/>'+h+'<div id ="unchk">'+i+"</div></div></div>";a(g.element).append(e);a(g.element).find("#ui-multiselect-con").addClass(d.classes).css({width:d.width,height:d.height});a(g.element).find("#container").css({height:f});a(g.element).find(".label-text").each(function(){g._labelBind(this);});g._dataLoad();g._binding();}if(a(".contentauthorclone").size()==0){g._sortlist();}a(g.element).jScrollPane();},_dataLoad:function(){var b=this;if(a(".contentauthorclone").size()>0){a.each(a(b.element).find("."+b.options.targetClass),function(){var c=a(this).find("input").eq(0);a(b.element).find("#chk ul").append(a(this));
});}else{a.each(a(b.element).find("."+b.options.targetClass),function(){var c=a(this).find("input").eq(0);if(c.attr("checked")){a(b.element).find("#chk ul").append(a(this));}else{a(b.element).find("#unchk ul").append(a(this));}b._clickfuntion(a(b.element).find('input[id="'+a(this).find("input").attr("id")+'"]'));});a(b.element).find("#selectcheckall").parents(".select-all-wrapper")[(this.options.checkAll==true&&a("#"+this.elemid+" #unchk ul li").filter(function(){return a(this).css("display")!=="none";}).length>1)?"show":"hide"]();if(this.options.uncheckAll==true&&a("#"+this.elemid+" #chk ul li").filter(function(){return a(this).css("display")!=="none";}).length>1){a(b.element).find("#selectuncheckall").attr("checked","checked");a(b.element).find("#selectuncheckall").parents(".select-all-wrapper").show();}else{a(b.element).find("#selectuncheckall").removeAttr("checked");a(b.element).find("#selectuncheckall").parents(".select-all-wrapper").hide();}if(b.options.theme=="expertusoneV2"){checkboxSelectedUnselectedCommon(a(b.element).find("#selectuncheckall"));
}if(a(b.element).find("#unchk ul li").filter(function(){return a(this).css("display")!=="none";}).length<=0||a(b.element).find("#chk ul li").filter(function(){return a(this).css("display")!=="none";}).length<=0){a(b.element).find(".line-separator").hide();}else{a(b.element).find(".line-separator").show();}}},_moveItems:function(e){var g=e.attr("id"),f=this;var d=a(f.elem).find("#chk ul");var c=a(f.elem).find("#unchk ul");a.each(e,function(){if(a(this).attr("checked")){a(this).closest("."+f.options.targetClass).appendTo(d);}else{a(this).closest("."+f.options.targetClass).appendTo(c);}});d.find('input[id="'+g+'"]').attr("checked","checked");var b=d.find("li").length;if(this.options.uncheckAll==true){if(b>1){a(f.elem).find('input[id="selectuncheckall"]').attr("checked","checked").parents(".select-all-wrapper").css("display","block");}else{a(f.elem).find('input[id="selectuncheckall"]').attr("checked","checked").parents(".select-all-wrapper").css("display","none");}if(f.options.theme=="expertusoneV2"){checkboxSelectedUnselectedCommon(a(f.element).find("#selectuncheckall"));
}}if(a(c).find("li").length<=1){a(this.elem).find('input[id="selectcheckall"]').removeAttr("checked").parents(".select-all-wrapper").css("display","none");}else{a(this.elem).find('input[id="selectcheckall"]').removeAttr("checked").parents(".select-all-wrapper").css("display","block");}if(a("#"+this.elemid+" #unchk ul li").filter(function(){return a(this).css("display")!=="none";}).length<=0||a("#"+this.elemid+" #chk ul li").filter(function(){return a(this).css("display")!=="none";}).length<=0){a(this.elem).find(".line-separator").hide();}else{a(this.elem).find(".line-separator").show();}if(a(".contentauthorclone").size()==0){f._sortlist();}a(f.element).data("jsp").reinitialise();},_clickfuntion:function(b){var c=this;a(b).bind("click",function(){c._moveItems(a(b));});},_binding:function(){var b=this;if(b.options.checkAll==true){a(b.element).find("#selectcheckall").unbind("click").click(function(){b._selectAll(a(this));if(b.options.theme=="expertusoneV2"){checkboxSelectedUnselectedCommon(this);
}});}if(b.options.uncheckAll==true){a(b.element).find("#selectuncheckall").unbind("click").click(function(){b._selectAll(a(this));if(b.options.theme=="expertusoneV2"){checkboxSelectedUnselectedCommon(this);}});}},_selectAll:function(b){var d=this;var c;if(b.attr("id")=="selectcheckall"){c=a(d.element).find("#unchk ul input");c.each(function(){if(!a(this).attr("disabled")){a(this).attr("checked","checked");if(d.options.theme=="expertusoneV2"){checkboxSelectedUnselectedCommon(this);}}});this._moveItems(c);}else{c=a(d.element).find("#chk ul input");c.each(function(){a(this).removeAttr("checked");if(d.options.theme=="expertusoneV2"){checkboxSelectedUnselectedCommon(this);}});this._moveItems(c);}},_sortlist:function(){var d=a(this.elem).find("#chk ul");var c=this.options.sort;var b=d.children("li").get();b.sort(function(f,e){if(c=="desc"){return a(e).text().toUpperCase().localeCompare(a(f).text().toUpperCase());}else{return a(f).text().toUpperCase().localeCompare(a(e).text().toUpperCase());}});
a.each(b,function(e,f){d.append(f);});}});})(jQuery);(function(a){a.fn.enableMultiCheckClone=function(b){if(a(".contentauthorclone").size()>0){a("#clonescrolldiv"+b).multiselectclone({checkAll:false,uncheckAll:false,targetClass:"clone-list-class",helpText:{autocomplete:"Search",checkAll:Drupal.t("Check")+" "+Drupal.t("LBL1039"),uncheckAll:Drupal.t("LBL1272")+" "+Drupal.t("LBL1039")},theme:Drupal.settings.ajaxPageState.theme});}else{a("#clonescrolldiv"+b).multiselectclone({checkAll:true,uncheckAll:true,targetClass:"clone-list-class",helpText:{autocomplete:"Search",checkAll:Drupal.t("Check")+" "+Drupal.t("LBL1039"),uncheckAll:Drupal.t("LBL1272")+" "+Drupal.t("LBL1039")},theme:Drupal.settings.ajaxPageState.theme});}};})(jQuery);