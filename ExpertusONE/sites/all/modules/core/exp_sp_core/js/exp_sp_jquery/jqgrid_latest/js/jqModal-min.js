(function(d){d.fn.jqm=function(f){var e={overlay:50,closeoverlay:true,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:l,ajaxText:"",target:l,modal:l,toTop:l,onShow:l,onHide:l,onLoad:l};return this.each(function(){if(this._jqm){return k[this._jqm].c=d.extend({},k[this._jqm].c,f);}n++;this._jqm=n;k[n]={c:d.extend(e,d.jqm.params,f),a:l,w:d(this).addClass("jqmID"+n),s:n};if(e.trigger){d(this).jqmAddTrigger(e.trigger);}});};d.fn.jqmAddClose=function(f){return j(this,f,"jqmHide");};d.fn.jqmAddTrigger=function(f){return j(this,f,"jqmShow");};d.fn.jqmShow=function(e){return this.each(function(){d.jqm.open(this._jqm,e);});};d.fn.jqmHide=function(e){return this.each(function(){d.jqm.close(this._jqm,e);});};d.jqm={hash:{},open:function(B,A){var p=k[B],q=p.c,m="."+q.closeClass,v=(parseInt(p.w.css("z-index")));v=(v>0)?v:3000;var f=d("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":v-1,opacity:q.overlay/100});if(p.a){return l;}p.t=A;p.a=true;
p.w.css("z-index",v);if(q.modal){if(!a[0]){setTimeout(function(){i("bind");},1);}a.push(B);}else{if(q.overlay>0){if(q.closeoverlay){p.w.jqmAddClose(f);}}else{f=l;}}p.o=(f)?f.addClass(q.overlayClass).prependTo("body"):l;if(c){d("html,body").css({height:"100%",width:"100%"});if(f){f=f.css({position:"absolute"})[0];for(var w in {Top:1,Left:1}){f.style.setExpression(w.toLowerCase(),"(_=(document.documentElement.scroll"+w+" || document.body.scroll"+w+"))+'px'");}}}if(q.ajax){var e=q.target||p.w,x=q.ajax;e=(typeof e=="string")?d(e,p.w):d(e);x=(x.substr(0,1)=="@")?d(A).attr(x.substring(1)):x;e.html(q.ajaxText).load(x,function(){if(q.onLoad){q.onLoad.call(this,p);}if(m){p.w.jqmAddClose(d(m,p.w));}h(p);});}else{if(m){p.w.jqmAddClose(d(m,p.w));}}if(q.toTop&&p.o){p.w.before('<span id="jqmP'+p.w[0]._jqm+'"></span>').insertAfter(p.o);}(q.onShow)?q.onShow(p):p.w.show();h(p);return l;},close:function(f){var e=k[f];if(!e.a){return l;}e.a=l;if(a[0]){a.pop();if(!a[0]){i("unbind");}}if(e.c.toTop&&e.o){d("#jqmP"+e.w[0]._jqm).after(e.w).remove();
}if(e.c.onHide){e.c.onHide(e);}else{e.w.hide();if(e.o){e.o.remove();}}return l;},params:{}};var n=0,k=d.jqm.hash,a=[],c=d.browser.msie&&(d.browser.version=="6.0"),l=false,h=function(f){var e=d('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});if(c){if(f.o){f.o.html('<p style="width:100%;height:100%"/>').prepend(e);}else{if(!d("iframe.jqm",f.w)[0]){f.w.prepend(e);}}}g(f);},g=function(f){try{d(":input:visible",f.w)[0].focus();}catch(e){}},i=function(e){d(document)[e]("keypress",b)[e]("keydown",b)[e]("mousedown",b);},b=function(o){var f=k[a[a.length-1]],m=(!d(o.target).parents(".jqmID"+f.s)[0]);if(m){g(f);}return !m;},j=function(e,f,m){return e.each(function(){var o=this._jqm;d(f).each(function(){if(!this[m]){this[m]=[];d(this).click(function(){for(var p in {jqmShow:1,jqmHide:1}){for(var q in this[p]){if(k[this[p][q]]){k[this[p][q]].w[p](this);}}}return l;});}this[m].push(o);});});};})(jQuery);