(function(a){if(!Drupal.CTools){Drupal.CTools={};}Drupal.CTools.Collapsible={state:{},stateLoaded:false,stateChanged:false,cookieString:"ctools-collapsible-state=",getState:function(b){if(!this.stateLoaded){this.loadCookie();}return this.state[b];},setState:function(c,b){if(!this.stateLoaded){this.loadCookie();}this.state[c]=b;if(!this.stateChanged){this.stateChanged=true;a(window).unload(this.unload);}},loadCookie:function(){if(document.cookie.length>0){offset=document.cookie.indexOf(this.cookieString);if(offset!=-1){offset+=this.cookieString.length;var b=document.cookie.indexOf(";",offset);if(b==-1){b=document.cookie.length;}var e=unescape(document.cookie.substring(offset,b));if(e!=""){var c=e.split(",");for(var d=0;d<c.length;d++){var f=c[d].split(":");this.state[f[0]]=f[1];}}}}this.stateLoaded=true;},storeCookie:function(){var b="";for(i in this.state){if(b!=""){b+=",";}b+=i+":"+this.state[i];}document.cookie=this.cookieString+escape(b)+";path=/";},unload:function(){Drupal.CTools.Collapsible.storeCookie();
}};Drupal.CTools.CollapsibleCallbacks=[];Drupal.CTools.CollapsibleCallbacksAfterToggle=[];Drupal.CTools.bindCollapsible=function(){var g=a(this);if(g.hasClass("ctools-no-container")&&g.attr("id")){var f=g;var d=a("#"+g.attr("id")+"-content");}else{var f=g.children(".ctools-collapsible-handle");var d=g.children("div.ctools-collapsible-content");}if(d.length){var b=a('<span class="ctools-toggle"></span>');f.before(b);if(g.hasClass("ctools-collapsible-remember")&&g.attr("id")){var e=Drupal.CTools.Collapsible.getState(g.attr("id"));if(e==1){g.removeClass("ctools-collapsed");}else{if(e==-1){g.addClass("ctools-collapsed");}}}if(g.hasClass("ctools-collapsed")){b.toggleClass("ctools-toggle-collapsed");d.hide();}var c=function(){if(Drupal.CTools.CollapsibleCallbacksAfterToggle){for(i in Drupal.CTools.CollapsibleCallbacksAfterToggle){Drupal.CTools.CollapsibleCallbacksAfterToggle[i](g,f,d,b);}}};var h=function(){if(Drupal.CTools.CollapsibleCallbacks){for(i in Drupal.CTools.CollapsibleCallbacks){Drupal.CTools.CollapsibleCallbacks[i](g,f,d,b);
}}if(g.is("table")){d.toggle(0,c);}else{d.slideToggle(100,c);}b.toggleClass("ctools-toggle-collapsed");if(g.hasClass("ctools-collapsible-remember")&&g.attr("id")){var j=b.hasClass("ctools-toggle-collapsed")?-1:1;Drupal.CTools.Collapsible.setState(g.attr("id"),j);}};b.click(h);f.click(h);}};Drupal.behaviors.CToolsCollapsible={attach:function(b){a(".ctools-collapsible-container:not(.ctools-collapsible-processed)",b).each(Drupal.CTools.bindCollapsible).addClass("ctools-collapsible-processed");}};})(jQuery);